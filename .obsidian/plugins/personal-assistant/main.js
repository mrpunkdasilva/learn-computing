/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var s5=Object.create;var dd=Object.defineProperty;var a5=Object.getOwnPropertyDescriptor;var o5=Object.getOwnPropertyNames;var l5=Object.getPrototypeOf,u5=Object.prototype.hasOwnProperty;var c5=(t,e,r)=>e in t?dd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var fd=(t,e)=>()=>(t&&(e=t(t=0)),e);var L=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),fy=(t,e)=>{for(var r in e)dd(t,r,{get:e[r],enumerable:!0})},M1=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of o5(e))!u5.call(t,i)&&i!==r&&dd(t,i,{get:()=>e[i],enumerable:!(n=a5(e,i))||n.enumerable});return t};var He=(t,e,r)=>(r=t!=null?s5(l5(t)):{},M1(e||!t||!t.__esModule?dd(r,"default",{value:t,enumerable:!0}):r,t)),d5=t=>M1(dd({},"__esModule",{value:!0}),t);var V=(t,e,r)=>(c5(t,typeof e!="symbol"?e+"":e,r),r),I1=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)};var dt=(t,e,r)=>(I1(t,e,"read from private field"),r?r.call(t):e.get(t)),Yn=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Gr=(t,e,r,n)=>(I1(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);var py=L((hy,hu)=>{(function(t,e){typeof hy=="object"&&typeof hu!="undefined"?hu.exports=e():typeof define=="function"&&define.amd?define(e):t.moment=e()})(hy,function(){"use strict";var t;function e(){return t.apply(null,arguments)}function r(d){t=d}function n(d){return d instanceof Array||Object.prototype.toString.call(d)==="[object Array]"}function i(d){return d!=null&&Object.prototype.toString.call(d)==="[object Object]"}function s(d,m){return Object.prototype.hasOwnProperty.call(d,m)}function a(d){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(d).length===0;var m;for(m in d)if(s(d,m))return!1;return!0}function o(d){return d===void 0}function l(d){return typeof d=="number"||Object.prototype.toString.call(d)==="[object Number]"}function u(d){return d instanceof Date||Object.prototype.toString.call(d)==="[object Date]"}function c(d,m){var b=[],v,E=d.length;for(v=0;v<E;++v)b.push(m(d[v],v));return b}function h(d,m){for(var b in m)s(m,b)&&(d[b]=m[b]);return s(m,"toString")&&(d.toString=m.toString),s(m,"valueOf")&&(d.valueOf=m.valueOf),d}function p(d,m,b,v){return fa(d,m,b,v,!0).utc()}function _(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function y(d){return d._pf==null&&(d._pf=_()),d._pf}var S;Array.prototype.some?S=Array.prototype.some:S=function(d){var m=Object(this),b=m.length>>>0,v;for(v=0;v<b;v++)if(v in m&&d.call(this,m[v],v,m))return!0;return!1};function x(d){if(d._isValid==null){var m=y(d),b=S.call(m.parsedDateParts,function(E){return E!=null}),v=!isNaN(d._d.getTime())&&m.overflow<0&&!m.empty&&!m.invalidEra&&!m.invalidMonth&&!m.invalidWeekday&&!m.weekdayMismatch&&!m.nullInput&&!m.invalidFormat&&!m.userInvalidated&&(!m.meridiem||m.meridiem&&b);if(d._strict&&(v=v&&m.charsLeftOver===0&&m.unusedTokens.length===0&&m.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(d))d._isValid=v;else return v}return d._isValid}function k(d){var m=p(NaN);return d!=null?h(y(m),d):y(m).userInvalidated=!0,m}var T=e.momentProperties=[],P=!1;function O(d,m){var b,v,E,D=T.length;if(o(m._isAMomentObject)||(d._isAMomentObject=m._isAMomentObject),o(m._i)||(d._i=m._i),o(m._f)||(d._f=m._f),o(m._l)||(d._l=m._l),o(m._strict)||(d._strict=m._strict),o(m._tzm)||(d._tzm=m._tzm),o(m._isUTC)||(d._isUTC=m._isUTC),o(m._offset)||(d._offset=m._offset),o(m._pf)||(d._pf=y(m)),o(m._locale)||(d._locale=m._locale),D>0)for(b=0;b<D;b++)v=T[b],E=m[v],o(E)||(d[v]=E);return d}function A(d){O(this,d),this._d=new Date(d._d!=null?d._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),P===!1&&(P=!0,e.updateOffset(this),P=!1)}function R(d){return d instanceof A||d!=null&&d._isAMomentObject!=null}function F(d){e.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+d)}function I(d,m){var b=!0;return h(function(){if(e.deprecationHandler!=null&&e.deprecationHandler(null,d),b){var v=[],E,D,j,ie=arguments.length;for(D=0;D<ie;D++){if(E="",typeof arguments[D]=="object"){E+=`
[`+D+"] ";for(j in arguments[0])s(arguments[0],j)&&(E+=j+": "+arguments[0][j]+", ");E=E.slice(0,-2)}else E=arguments[D];v.push(E)}F(d+`
Arguments: `+Array.prototype.slice.call(v).join("")+`
`+new Error().stack),b=!1}return m.apply(this,arguments)},m)}var U={};function X(d,m){e.deprecationHandler!=null&&e.deprecationHandler(d,m),U[d]||(F(m),U[d]=!0)}e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;function z(d){return typeof Function!="undefined"&&d instanceof Function||Object.prototype.toString.call(d)==="[object Function]"}function ne(d){var m,b;for(b in d)s(d,b)&&(m=d[b],z(m)?this[b]=m:this["_"+b]=m);this._config=d,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function ge(d,m){var b=h({},d),v;for(v in m)s(m,v)&&(i(d[v])&&i(m[v])?(b[v]={},h(b[v],d[v]),h(b[v],m[v])):m[v]!=null?b[v]=m[v]:delete b[v]);for(v in d)s(d,v)&&!s(m,v)&&i(d[v])&&(b[v]=h({},b[v]));return b}function $e(d){d!=null&&this.set(d)}var ve;Object.keys?ve=Object.keys:ve=function(d){var m,b=[];for(m in d)s(d,m)&&b.push(m);return b};var Le={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function Xe(d,m,b){var v=this._calendar[d]||this._calendar.sameElse;return z(v)?v.call(m,b):v}function De(d,m,b){var v=""+Math.abs(d),E=m-v.length,D=d>=0;return(D?b?"+":"":"-")+Math.pow(10,Math.max(0,E)).toString().substr(1)+v}var wr=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ft=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,vr={},at={};function Q(d,m,b,v){var E=v;typeof v=="string"&&(E=function(){return this[v]()}),d&&(at[d]=E),m&&(at[m[0]]=function(){return De(E.apply(this,arguments),m[1],m[2])}),b&&(at[b]=function(){return this.localeData().ordinal(E.apply(this,arguments),d)})}function mt(d){return d.match(/\[[\s\S]/)?d.replace(/^\[|\]$/g,""):d.replace(/\\/g,"")}function gt(d){var m=d.match(wr),b,v;for(b=0,v=m.length;b<v;b++)at[m[b]]?m[b]=at[m[b]]:m[b]=mt(m[b]);return function(E){var D="",j;for(j=0;j<v;j++)D+=z(m[j])?m[j].call(E,d):m[j];return D}}function xr(d,m){return d.isValid()?(m=Lc(m,d.localeData()),vr[m]=vr[m]||gt(m),vr[m](d)):d.localeData().invalidDate()}function Lc(d,m){var b=5;function v(E){return m.longDateFormat(E)||E}for(Ft.lastIndex=0;b>=0&&Ft.test(d);)d=d.replace(Ft,v),Ft.lastIndex=0,b-=1;return d}var Ln={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Fc(d){var m=this._longDateFormat[d],b=this._longDateFormat[d.toUpperCase()];return m||!b?m:(this._longDateFormat[d]=b.match(wr).map(function(v){return v==="MMMM"||v==="MM"||v==="DD"||v==="dddd"?v.slice(1):v}).join(""),this._longDateFormat[d])}var Nc="Invalid date";function hh(){return this._invalidDate}var ob="%d",jc=/\d{1,2}/;function Bc(d){return this._ordinal.replace("%d",d)}var ta={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function ph(d,m,b,v){var E=this._relativeTime[b];return z(E)?E(d,m,b,v):E.replace(/%d/i,d)}function $c(d,m){var b=this._relativeTime[d>0?"future":"past"];return z(b)?b(m):b.replace(/%s/i,m)}var pi={};function kt(d,m){var b=d.toLowerCase();pi[b]=pi[b+"s"]=pi[m]=d}function ct(d){return typeof d=="string"?pi[d]||pi[d.toLowerCase()]:void 0}function un(d){var m={},b,v;for(v in d)s(d,v)&&(b=ct(v),b&&(m[b]=d[v]));return m}var ra={};function Tt(d,m){ra[d]=m}function mh(d){var m=[],b;for(b in d)s(d,b)&&m.push({unit:b,priority:ra[b]});return m.sort(function(v,E){return v.priority-E.priority}),m}function Zi(d){return d%4===0&&d%100!==0||d%400===0}function Sr(d){return d<0?Math.ceil(d)||0:Math.floor(d)}function pe(d){var m=+d,b=0;return m!==0&&isFinite(m)&&(b=Sr(m)),b}function Ji(d,m){return function(b){return b!=null?(zc(this,d,b),e.updateOffset(this,m),this):Al(this,d)}}function Al(d,m){return d.isValid()?d._d["get"+(d._isUTC?"UTC":"")+m]():NaN}function zc(d,m,b){d.isValid()&&!isNaN(b)&&(m==="FullYear"&&Zi(d.year())&&d.month()===1&&d.date()===29?(b=pe(b),d._d["set"+(d._isUTC?"UTC":"")+m](b,d.month(),Ja(b,d.month()))):d._d["set"+(d._isUTC?"UTC":"")+m](b))}function gh(d){return d=ct(d),z(this[d])?this[d]():this}function _h(d,m){if(typeof d=="object"){d=un(d);var b=mh(d),v,E=b.length;for(v=0;v<E;v++)this[b[v].unit](d[b[v].unit])}else if(d=ct(d),z(this[d]))return this[d](m);return this}var Pl=/\d/,Nt=/\d\d/,Ol=/\d{3}/,Ki=/\d{4}/,Za=/[+-]?\d{6}/,xe=/\d\d?/,Fn=/\d\d\d\d?/,Uc=/\d\d\d\d\d\d?/,Xi=/\d{1,3}/,Wc=/\d{1,4}/,na=/[+-]?\d{1,6}/,Qi=/\d+/,Rl=/[+-]?\d+/,lb=/Z|[+-]\d\d:?\d\d/gi,Dl=/Z|[+-]\d\d(?::?\d\d)?/gi,ub=/[+-]?\d+(\.\d{1,3})?/,ia=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,sa;sa={};function G(d,m,b){sa[d]=z(m)?m:function(v,E){return v&&b?b:m}}function cb(d,m){return s(sa,d)?sa[d](m._strict,m._locale):new RegExp(mi(d))}function mi(d){return Vt(d.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(m,b,v,E,D){return b||v||E||D}))}function Vt(d){return d.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var qc={};function Fe(d,m){var b,v=m,E;for(typeof d=="string"&&(d=[d]),l(m)&&(v=function(D,j){j[m]=pe(D)}),E=d.length,b=0;b<E;b++)qc[d[b]]=v}function qr(d,m){Fe(d,function(b,v,E,D){E._w=E._w||{},m(b,E._w,E,D)})}function Nn(d,m,b){m!=null&&s(qc,d)&&qc[d](m,b._a,b,d)}var Qe=0,Hr=1,Ct=2,ot=3,rr=4,cn=5,dn=6,bh=7,yh=8;function wh(d,m){return(d%m+m)%m}var et;Array.prototype.indexOf?et=Array.prototype.indexOf:et=function(d){var m;for(m=0;m<this.length;++m)if(this[m]===d)return m;return-1};function Ja(d,m){if(isNaN(d)||isNaN(m))return NaN;var b=wh(m,12);return d+=(m-b)/12,b===1?Zi(d)?29:28:31-b%7%2}Q("M",["MM",2],"Mo",function(){return this.month()+1}),Q("MMM",0,0,function(d){return this.localeData().monthsShort(this,d)}),Q("MMMM",0,0,function(d){return this.localeData().months(this,d)}),kt("month","M"),Tt("month",8),G("M",xe),G("MM",xe,Nt),G("MMM",function(d,m){return m.monthsShortRegex(d)}),G("MMMM",function(d,m){return m.monthsRegex(d)}),Fe(["M","MM"],function(d,m){m[Hr]=pe(d)-1}),Fe(["MMM","MMMM"],function(d,m,b,v){var E=b._locale.monthsParse(d,v,b._strict);E!=null?m[Hr]=E:y(b).invalidMonth=d});var Hc="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ml="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),vh=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,db=ia,fb=ia;function hb(d,m){return d?n(this._months)?this._months[d.month()]:this._months[(this._months.isFormat||vh).test(m)?"format":"standalone"][d.month()]:n(this._months)?this._months:this._months.standalone}function xh(d,m){return d?n(this._monthsShort)?this._monthsShort[d.month()]:this._monthsShort[vh.test(m)?"format":"standalone"][d.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function aa(d,m,b){var v,E,D,j=d.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],v=0;v<12;++v)D=p([2e3,v]),this._shortMonthsParse[v]=this.monthsShort(D,"").toLocaleLowerCase(),this._longMonthsParse[v]=this.months(D,"").toLocaleLowerCase();return b?m==="MMM"?(E=et.call(this._shortMonthsParse,j),E!==-1?E:null):(E=et.call(this._longMonthsParse,j),E!==-1?E:null):m==="MMM"?(E=et.call(this._shortMonthsParse,j),E!==-1?E:(E=et.call(this._longMonthsParse,j),E!==-1?E:null)):(E=et.call(this._longMonthsParse,j),E!==-1?E:(E=et.call(this._shortMonthsParse,j),E!==-1?E:null))}function pb(d,m,b){var v,E,D;if(this._monthsParseExact)return aa.call(this,d,m,b);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),v=0;v<12;v++){if(E=p([2e3,v]),b&&!this._longMonthsParse[v]&&(this._longMonthsParse[v]=new RegExp("^"+this.months(E,"").replace(".","")+"$","i"),this._shortMonthsParse[v]=new RegExp("^"+this.monthsShort(E,"").replace(".","")+"$","i")),!b&&!this._monthsParse[v]&&(D="^"+this.months(E,"")+"|^"+this.monthsShort(E,""),this._monthsParse[v]=new RegExp(D.replace(".",""),"i")),b&&m==="MMMM"&&this._longMonthsParse[v].test(d))return v;if(b&&m==="MMM"&&this._shortMonthsParse[v].test(d))return v;if(!b&&this._monthsParse[v].test(d))return v}}function Ka(d,m){var b;if(!d.isValid())return d;if(typeof m=="string"){if(/^\d+$/.test(m))m=pe(m);else if(m=d.localeData().monthsParse(m),!l(m))return d}return b=Math.min(d.date(),Ja(d.year(),m)),d._d["set"+(d._isUTC?"UTC":"")+"Month"](m,b),d}function oa(d){return d!=null?(Ka(this,d),e.updateOffset(this,!0),this):Al(this,"Month")}function Il(){return Ja(this.year(),this.month())}function kr(d){return this._monthsParseExact?(s(this,"_monthsRegex")||Ll.call(this),d?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=db),this._monthsShortStrictRegex&&d?this._monthsShortStrictRegex:this._monthsShortRegex)}function Sh(d){return this._monthsParseExact?(s(this,"_monthsRegex")||Ll.call(this),d?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=fb),this._monthsStrictRegex&&d?this._monthsStrictRegex:this._monthsRegex)}function Ll(){function d(j,ie){return ie.length-j.length}var m=[],b=[],v=[],E,D;for(E=0;E<12;E++)D=p([2e3,E]),m.push(this.monthsShort(D,"")),b.push(this.months(D,"")),v.push(this.months(D,"")),v.push(this.monthsShort(D,""));for(m.sort(d),b.sort(d),v.sort(d),E=0;E<12;E++)m[E]=Vt(m[E]),b[E]=Vt(b[E]);for(E=0;E<24;E++)v[E]=Vt(v[E]);this._monthsRegex=new RegExp("^("+v.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+b.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+m.join("|")+")","i")}Q("Y",0,0,function(){var d=this.year();return d<=9999?De(d,4):"+"+d}),Q(0,["YY",2],0,function(){return this.year()%100}),Q(0,["YYYY",4],0,"year"),Q(0,["YYYYY",5],0,"year"),Q(0,["YYYYYY",6,!0],0,"year"),kt("year","y"),Tt("year",1),G("Y",Rl),G("YY",xe,Nt),G("YYYY",Wc,Ki),G("YYYYY",na,Za),G("YYYYYY",na,Za),Fe(["YYYYY","YYYYYY"],Qe),Fe("YYYY",function(d,m){m[Qe]=d.length===2?e.parseTwoDigitYear(d):pe(d)}),Fe("YY",function(d,m){m[Qe]=e.parseTwoDigitYear(d)}),Fe("Y",function(d,m){m[Qe]=parseInt(d,10)});function la(d){return Zi(d)?366:365}e.parseTwoDigitYear=function(d){return pe(d)+(pe(d)>68?1900:2e3)};var Xa=Ji("FullYear",!0);function Fl(){return Zi(this.year())}function kh(d,m,b,v,E,D,j){var ie;return d<100&&d>=0?(ie=new Date(d+400,m,b,v,E,D,j),isFinite(ie.getFullYear())&&ie.setFullYear(d)):ie=new Date(d,m,b,v,E,D,j),ie}function Qa(d){var m,b;return d<100&&d>=0?(b=Array.prototype.slice.call(arguments),b[0]=d+400,m=new Date(Date.UTC.apply(null,b)),isFinite(m.getUTCFullYear())&&m.setUTCFullYear(d)):m=new Date(Date.UTC.apply(null,arguments)),m}function Nl(d,m,b){var v=7+m-b,E=(7+Qa(d,0,v).getUTCDay()-m)%7;return-E+v-1}function jl(d,m,b,v,E){var D=(7+b-v)%7,j=Nl(d,v,E),ie=1+7*(m-1)+D+j,_e,We;return ie<=0?(_e=d-1,We=la(_e)+ie):ie>la(d)?(_e=d+1,We=ie-la(d)):(_e=d,We=ie),{year:_e,dayOfYear:We}}function jn(d,m,b){var v=Nl(d.year(),m,b),E=Math.floor((d.dayOfYear()-v-1)/7)+1,D,j;return E<1?(j=d.year()-1,D=E+Bn(j,m,b)):E>Bn(d.year(),m,b)?(D=E-Bn(d.year(),m,b),j=d.year()+1):(j=d.year(),D=E),{week:D,year:j}}function Bn(d,m,b){var v=Nl(d,m,b),E=Nl(d+1,m,b);return(la(d)-v+E)/7}Q("w",["ww",2],"wo","week"),Q("W",["WW",2],"Wo","isoWeek"),kt("week","w"),kt("isoWeek","W"),Tt("week",5),Tt("isoWeek",5),G("w",xe),G("ww",xe,Nt),G("W",xe),G("WW",xe,Nt),qr(["w","ww","W","WW"],function(d,m,b,v){m[v.substr(0,1)]=pe(d)});function mb(d){return jn(d,this._week.dow,this._week.doy).week}var gb={dow:0,doy:6};function Eh(){return this._week.dow}function Th(){return this._week.doy}function _b(d){var m=this.localeData().week(this);return d==null?m:this.add((d-m)*7,"d")}function Ch(d){var m=jn(this,1,4).week;return d==null?m:this.add((d-m)*7,"d")}Q("d",0,"do","day"),Q("dd",0,0,function(d){return this.localeData().weekdaysMin(this,d)}),Q("ddd",0,0,function(d){return this.localeData().weekdaysShort(this,d)}),Q("dddd",0,0,function(d){return this.localeData().weekdays(this,d)}),Q("e",0,0,"weekday"),Q("E",0,0,"isoWeekday"),kt("day","d"),kt("weekday","e"),kt("isoWeekday","E"),Tt("day",11),Tt("weekday",11),Tt("isoWeekday",11),G("d",xe),G("e",xe),G("E",xe),G("dd",function(d,m){return m.weekdaysMinRegex(d)}),G("ddd",function(d,m){return m.weekdaysShortRegex(d)}),G("dddd",function(d,m){return m.weekdaysRegex(d)}),qr(["dd","ddd","dddd"],function(d,m,b,v){var E=b._locale.weekdaysParse(d,v,b._strict);E!=null?m.d=E:y(b).invalidWeekday=d}),qr(["d","e","E"],function(d,m,b,v){m[v]=pe(d)});function Vc(d,m){return typeof d!="string"?d:isNaN(d)?(d=m.weekdaysParse(d),typeof d=="number"?d:null):parseInt(d,10)}function gi(d,m){return typeof d=="string"?m.weekdaysParse(d)%7||7:isNaN(d)?null:d}function $n(d,m){return d.slice(m,7).concat(d.slice(0,m))}var Ah="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ph="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Oh="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Bl=ia,eo=ia,$l=ia;function zl(d,m){var b=n(this._weekdays)?this._weekdays:this._weekdays[d&&d!==!0&&this._weekdays.isFormat.test(m)?"format":"standalone"];return d===!0?$n(b,this._week.dow):d?b[d.day()]:b}function bb(d){return d===!0?$n(this._weekdaysShort,this._week.dow):d?this._weekdaysShort[d.day()]:this._weekdaysShort}function yb(d){return d===!0?$n(this._weekdaysMin,this._week.dow):d?this._weekdaysMin[d.day()]:this._weekdaysMin}function wb(d,m,b){var v,E,D,j=d.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],v=0;v<7;++v)D=p([2e3,1]).day(v),this._minWeekdaysParse[v]=this.weekdaysMin(D,"").toLocaleLowerCase(),this._shortWeekdaysParse[v]=this.weekdaysShort(D,"").toLocaleLowerCase(),this._weekdaysParse[v]=this.weekdays(D,"").toLocaleLowerCase();return b?m==="dddd"?(E=et.call(this._weekdaysParse,j),E!==-1?E:null):m==="ddd"?(E=et.call(this._shortWeekdaysParse,j),E!==-1?E:null):(E=et.call(this._minWeekdaysParse,j),E!==-1?E:null):m==="dddd"?(E=et.call(this._weekdaysParse,j),E!==-1||(E=et.call(this._shortWeekdaysParse,j),E!==-1)?E:(E=et.call(this._minWeekdaysParse,j),E!==-1?E:null)):m==="ddd"?(E=et.call(this._shortWeekdaysParse,j),E!==-1||(E=et.call(this._weekdaysParse,j),E!==-1)?E:(E=et.call(this._minWeekdaysParse,j),E!==-1?E:null)):(E=et.call(this._minWeekdaysParse,j),E!==-1||(E=et.call(this._weekdaysParse,j),E!==-1)?E:(E=et.call(this._shortWeekdaysParse,j),E!==-1?E:null))}function vb(d,m,b){var v,E,D;if(this._weekdaysParseExact)return wb.call(this,d,m,b);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),v=0;v<7;v++){if(E=p([2e3,1]).day(v),b&&!this._fullWeekdaysParse[v]&&(this._fullWeekdaysParse[v]=new RegExp("^"+this.weekdays(E,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[v]=new RegExp("^"+this.weekdaysShort(E,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[v]=new RegExp("^"+this.weekdaysMin(E,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[v]||(D="^"+this.weekdays(E,"")+"|^"+this.weekdaysShort(E,"")+"|^"+this.weekdaysMin(E,""),this._weekdaysParse[v]=new RegExp(D.replace(".",""),"i")),b&&m==="dddd"&&this._fullWeekdaysParse[v].test(d))return v;if(b&&m==="ddd"&&this._shortWeekdaysParse[v].test(d))return v;if(b&&m==="dd"&&this._minWeekdaysParse[v].test(d))return v;if(!b&&this._weekdaysParse[v].test(d))return v}}function xb(d){if(!this.isValid())return d!=null?this:NaN;var m=this._isUTC?this._d.getUTCDay():this._d.getDay();return d!=null?(d=Vc(d,this.localeData()),this.add(d-m,"d")):m}function Sb(d){if(!this.isValid())return d!=null?this:NaN;var m=(this.day()+7-this.localeData()._week.dow)%7;return d==null?m:this.add(d-m,"d")}function Rh(d){if(!this.isValid())return d!=null?this:NaN;if(d!=null){var m=gi(d,this.localeData());return this.day(this.day()%7?m:m-7)}else return this.day()||7}function kb(d){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||fn.call(this),d?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Bl),this._weekdaysStrictRegex&&d?this._weekdaysStrictRegex:this._weekdaysRegex)}function Eb(d){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||fn.call(this),d?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=eo),this._weekdaysShortStrictRegex&&d?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Tb(d){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||fn.call(this),d?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=$l),this._weekdaysMinStrictRegex&&d?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function fn(){function d(ir,hs){return hs.length-ir.length}var m=[],b=[],v=[],E=[],D,j,ie,_e,We;for(D=0;D<7;D++)j=p([2e3,1]).day(D),ie=Vt(this.weekdaysMin(j,"")),_e=Vt(this.weekdaysShort(j,"")),We=Vt(this.weekdays(j,"")),m.push(ie),b.push(_e),v.push(We),E.push(ie),E.push(_e),E.push(We);m.sort(d),b.sort(d),v.sort(d),E.sort(d),this._weekdaysRegex=new RegExp("^("+E.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+v.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+b.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+m.join("|")+")","i")}function Ul(){return this.hours()%12||12}function Cb(){return this.hours()||24}Q("H",["HH",2],0,"hour"),Q("h",["hh",2],0,Ul),Q("k",["kk",2],0,Cb),Q("hmm",0,0,function(){return""+Ul.apply(this)+De(this.minutes(),2)}),Q("hmmss",0,0,function(){return""+Ul.apply(this)+De(this.minutes(),2)+De(this.seconds(),2)}),Q("Hmm",0,0,function(){return""+this.hours()+De(this.minutes(),2)}),Q("Hmmss",0,0,function(){return""+this.hours()+De(this.minutes(),2)+De(this.seconds(),2)});function Yc(d,m){Q(d,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),m)})}Yc("a",!0),Yc("A",!1),kt("hour","h"),Tt("hour",13);function es(d,m){return m._meridiemParse}G("a",es),G("A",es),G("H",xe),G("h",xe),G("k",xe),G("HH",xe,Nt),G("hh",xe,Nt),G("kk",xe,Nt),G("hmm",Fn),G("hmmss",Uc),G("Hmm",Fn),G("Hmmss",Uc),Fe(["H","HH"],ot),Fe(["k","kk"],function(d,m,b){var v=pe(d);m[ot]=v===24?0:v}),Fe(["a","A"],function(d,m,b){b._isPm=b._locale.isPM(d),b._meridiem=d}),Fe(["h","hh"],function(d,m,b){m[ot]=pe(d),y(b).bigHour=!0}),Fe("hmm",function(d,m,b){var v=d.length-2;m[ot]=pe(d.substr(0,v)),m[rr]=pe(d.substr(v)),y(b).bigHour=!0}),Fe("hmmss",function(d,m,b){var v=d.length-4,E=d.length-2;m[ot]=pe(d.substr(0,v)),m[rr]=pe(d.substr(v,2)),m[cn]=pe(d.substr(E)),y(b).bigHour=!0}),Fe("Hmm",function(d,m,b){var v=d.length-2;m[ot]=pe(d.substr(0,v)),m[rr]=pe(d.substr(v))}),Fe("Hmmss",function(d,m,b){var v=d.length-4,E=d.length-2;m[ot]=pe(d.substr(0,v)),m[rr]=pe(d.substr(v,2)),m[cn]=pe(d.substr(E))});function ua(d){return(d+"").toLowerCase().charAt(0)==="p"}var Wl=/[ap]\.?m?\.?/i,Dh=Ji("Hours",!0);function Ab(d,m,b){return d>11?b?"pm":"PM":b?"am":"AM"}var ql={calendar:Le,longDateFormat:Ln,invalidDate:Nc,ordinal:ob,dayOfMonthOrdinalParse:jc,relativeTime:ta,months:Hc,monthsShort:Ml,week:gb,weekdays:Ah,weekdaysMin:Oh,weekdaysShort:Ph,meridiemParse:Wl},ze={},ts={},to;function Pb(d,m){var b,v=Math.min(d.length,m.length);for(b=0;b<v;b+=1)if(d[b]!==m[b])return b;return v}function Mh(d){return d&&d.toLowerCase().replace("_","-")}function Ob(d){for(var m=0,b,v,E,D;m<d.length;){for(D=Mh(d[m]).split("-"),b=D.length,v=Mh(d[m+1]),v=v?v.split("-"):null;b>0;){if(E=Hl(D.slice(0,b).join("-")),E)return E;if(v&&v.length>=b&&Pb(D,v)>=b-1)break;b--}m++}return to}function hn(d){return d.match("^[^/\\\\]*$")!=null}function Hl(d){var m=null,b;if(ze[d]===void 0&&typeof hu!="undefined"&&hu&&hu.exports&&hn(d))try{m=to._abbr,b=require,b("./locale/"+d),_i(m)}catch(v){ze[d]=null}return ze[d]}function _i(d,m){var b;return d&&(o(m)?b=Vr(d):b=Gc(d,m),b?to=b:typeof console!="undefined"&&console.warn&&console.warn("Locale "+d+" not found. Did you forget to load it?")),to._abbr}function Gc(d,m){if(m!==null){var b,v=ql;if(m.abbr=d,ze[d]!=null)X("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),v=ze[d]._config;else if(m.parentLocale!=null)if(ze[m.parentLocale]!=null)v=ze[m.parentLocale]._config;else if(b=Hl(m.parentLocale),b!=null)v=b._config;else return ts[m.parentLocale]||(ts[m.parentLocale]=[]),ts[m.parentLocale].push({name:d,config:m}),null;return ze[d]=new $e(ge(v,m)),ts[d]&&ts[d].forEach(function(E){Gc(E.name,E.config)}),_i(d),ze[d]}else return delete ze[d],null}function Vl(d,m){if(m!=null){var b,v,E=ql;ze[d]!=null&&ze[d].parentLocale!=null?ze[d].set(ge(ze[d]._config,m)):(v=Hl(d),v!=null&&(E=v._config),m=ge(E,m),v==null&&(m.abbr=d),b=new $e(m),b.parentLocale=ze[d],ze[d]=b),_i(d)}else ze[d]!=null&&(ze[d].parentLocale!=null?(ze[d]=ze[d].parentLocale,d===_i()&&_i(d)):ze[d]!=null&&delete ze[d]);return ze[d]}function Vr(d){var m;if(d&&d._locale&&d._locale._abbr&&(d=d._locale._abbr),!d)return to;if(!n(d)){if(m=Hl(d),m)return m;d=[d]}return Ob(d)}function zn(){return ve(ze)}function Un(d){var m,b=d._a;return b&&y(d).overflow===-2&&(m=b[Hr]<0||b[Hr]>11?Hr:b[Ct]<1||b[Ct]>Ja(b[Qe],b[Hr])?Ct:b[ot]<0||b[ot]>24||b[ot]===24&&(b[rr]!==0||b[cn]!==0||b[dn]!==0)?ot:b[rr]<0||b[rr]>59?rr:b[cn]<0||b[cn]>59?cn:b[dn]<0||b[dn]>999?dn:-1,y(d)._overflowDayOfYear&&(m<Qe||m>Ct)&&(m=Ct),y(d)._overflowWeeks&&m===-1&&(m=bh),y(d)._overflowWeekday&&m===-1&&(m=yh),y(d).overflow=m),d}var Rb=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ih=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Db=/Z|[+-]\d\d(?::?\d\d)?/,Yl=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Gl=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Mb=/^\/?Date\((-?\d+)/i,Lh=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Fh={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Zc(d){var m,b,v=d._i,E=Rb.exec(v)||Ih.exec(v),D,j,ie,_e,We=Yl.length,ir=Gl.length;if(E){for(y(d).iso=!0,m=0,b=We;m<b;m++)if(Yl[m][1].exec(E[1])){j=Yl[m][0],D=Yl[m][2]!==!1;break}if(j==null){d._isValid=!1;return}if(E[3]){for(m=0,b=ir;m<b;m++)if(Gl[m][1].exec(E[3])){ie=(E[2]||" ")+Gl[m][0];break}if(ie==null){d._isValid=!1;return}}if(!D&&ie!=null){d._isValid=!1;return}if(E[4])if(Db.exec(E[4]))_e="Z";else{d._isValid=!1;return}d._f=j+(ie||"")+(_e||""),Kc(d)}else d._isValid=!1}function ca(d,m,b,v,E,D){var j=[Jc(d),Ml.indexOf(m),parseInt(b,10),parseInt(v,10),parseInt(E,10)];return D&&j.push(parseInt(D,10)),j}function Jc(d){var m=parseInt(d,10);return m<=49?2e3+m:m<=999?1900+m:m}function Nh(d){return d.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Ib(d,m,b){if(d){var v=Ph.indexOf(d),E=new Date(m[0],m[1],m[2]).getDay();if(v!==E)return y(b).weekdayMismatch=!0,b._isValid=!1,!1}return!0}function Zl(d,m,b){if(d)return Fh[d];if(m)return 0;var v=parseInt(b,10),E=v%100,D=(v-E)/100;return D*60+E}function jh(d){var m=Lh.exec(Nh(d._i)),b;if(m){if(b=ca(m[4],m[3],m[2],m[5],m[6],m[7]),!Ib(m[1],b,d))return;d._a=b,d._tzm=Zl(m[8],m[9],m[10]),d._d=Qa.apply(null,d._a),d._d.setUTCMinutes(d._d.getUTCMinutes()-d._tzm),y(d).rfc2822=!0}else d._isValid=!1}function Lb(d){var m=Mb.exec(d._i);if(m!==null){d._d=new Date(+m[1]);return}if(Zc(d),d._isValid===!1)delete d._isValid;else return;if(jh(d),d._isValid===!1)delete d._isValid;else return;d._strict?d._isValid=!1:e.createFromInputFallback(d)}e.createFromInputFallback=I("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(d){d._d=new Date(d._i+(d._useUTC?" UTC":""))});function rs(d,m,b){return d!=null?d:m!=null?m:b}function Fb(d){var m=new Date(e.now());return d._useUTC?[m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()]:[m.getFullYear(),m.getMonth(),m.getDate()]}function da(d){var m,b,v=[],E,D,j;if(!d._d){for(E=Fb(d),d._w&&d._a[Ct]==null&&d._a[Hr]==null&&ro(d),d._dayOfYear!=null&&(j=rs(d._a[Qe],E[Qe]),(d._dayOfYear>la(j)||d._dayOfYear===0)&&(y(d)._overflowDayOfYear=!0),b=Qa(j,0,d._dayOfYear),d._a[Hr]=b.getUTCMonth(),d._a[Ct]=b.getUTCDate()),m=0;m<3&&d._a[m]==null;++m)d._a[m]=v[m]=E[m];for(;m<7;m++)d._a[m]=v[m]=d._a[m]==null?m===2?1:0:d._a[m];d._a[ot]===24&&d._a[rr]===0&&d._a[cn]===0&&d._a[dn]===0&&(d._nextDay=!0,d._a[ot]=0),d._d=(d._useUTC?Qa:kh).apply(null,v),D=d._useUTC?d._d.getUTCDay():d._d.getDay(),d._tzm!=null&&d._d.setUTCMinutes(d._d.getUTCMinutes()-d._tzm),d._nextDay&&(d._a[ot]=24),d._w&&typeof d._w.d!="undefined"&&d._w.d!==D&&(y(d).weekdayMismatch=!0)}}function ro(d){var m,b,v,E,D,j,ie,_e,We;m=d._w,m.GG!=null||m.W!=null||m.E!=null?(D=1,j=4,b=rs(m.GG,d._a[Qe],jn(Ne(),1,4).year),v=rs(m.W,1),E=rs(m.E,1),(E<1||E>7)&&(_e=!0)):(D=d._locale._week.dow,j=d._locale._week.doy,We=jn(Ne(),D,j),b=rs(m.gg,d._a[Qe],We.year),v=rs(m.w,We.week),m.d!=null?(E=m.d,(E<0||E>6)&&(_e=!0)):m.e!=null?(E=m.e+D,(m.e<0||m.e>6)&&(_e=!0)):E=D),v<1||v>Bn(b,D,j)?y(d)._overflowWeeks=!0:_e!=null?y(d)._overflowWeekday=!0:(ie=jl(b,v,E,D,j),d._a[Qe]=ie.year,d._dayOfYear=ie.dayOfYear)}e.ISO_8601=function(){},e.RFC_2822=function(){};function Kc(d){if(d._f===e.ISO_8601){Zc(d);return}if(d._f===e.RFC_2822){jh(d);return}d._a=[],y(d).empty=!0;var m=""+d._i,b,v,E,D,j,ie=m.length,_e=0,We,ir;for(E=Lc(d._f,d._locale).match(wr)||[],ir=E.length,b=0;b<ir;b++)D=E[b],v=(m.match(cb(D,d))||[])[0],v&&(j=m.substr(0,m.indexOf(v)),j.length>0&&y(d).unusedInput.push(j),m=m.slice(m.indexOf(v)+v.length),_e+=v.length),at[D]?(v?y(d).empty=!1:y(d).unusedTokens.push(D),Nn(D,v,d)):d._strict&&!v&&y(d).unusedTokens.push(D);y(d).charsLeftOver=ie-_e,m.length>0&&y(d).unusedInput.push(m),d._a[ot]<=12&&y(d).bigHour===!0&&d._a[ot]>0&&(y(d).bigHour=void 0),y(d).parsedDateParts=d._a.slice(0),y(d).meridiem=d._meridiem,d._a[ot]=Nb(d._locale,d._a[ot],d._meridiem),We=y(d).era,We!==null&&(d._a[Qe]=d._locale.erasConvertYear(We,d._a[Qe])),da(d),Un(d)}function Nb(d,m,b){var v;return b==null?m:d.meridiemHour!=null?d.meridiemHour(m,b):(d.isPM!=null&&(v=d.isPM(b),v&&m<12&&(m+=12),!v&&m===12&&(m=0)),m)}function Xc(d){var m,b,v,E,D,j,ie=!1,_e=d._f.length;if(_e===0){y(d).invalidFormat=!0,d._d=new Date(NaN);return}for(E=0;E<_e;E++)D=0,j=!1,m=O({},d),d._useUTC!=null&&(m._useUTC=d._useUTC),m._f=d._f[E],Kc(m),x(m)&&(j=!0),D+=y(m).charsLeftOver,D+=y(m).unusedTokens.length*10,y(m).score=D,ie?D<v&&(v=D,b=m):(v==null||D<v||j)&&(v=D,b=m,j&&(ie=!0));h(d,b||m)}function Bh(d){if(!d._d){var m=un(d._i),b=m.day===void 0?m.date:m.day;d._a=c([m.year,m.month,b,m.hour,m.minute,m.second,m.millisecond],function(v){return v&&parseInt(v,10)}),da(d)}}function Jl(d){var m=new A(Un(Kl(d)));return m._nextDay&&(m.add(1,"d"),m._nextDay=void 0),m}function Kl(d){var m=d._i,b=d._f;return d._locale=d._locale||Vr(d._l),m===null||b===void 0&&m===""?k({nullInput:!0}):(typeof m=="string"&&(d._i=m=d._locale.preparse(m)),R(m)?new A(Un(m)):(u(m)?d._d=m:n(b)?Xc(d):b?Kc(d):ns(d),x(d)||(d._d=null),d))}function ns(d){var m=d._i;o(m)?d._d=new Date(e.now()):u(m)?d._d=new Date(m.valueOf()):typeof m=="string"?Lb(d):n(m)?(d._a=c(m.slice(0),function(b){return parseInt(b,10)}),da(d)):i(m)?Bh(d):l(m)?d._d=new Date(m):e.createFromInputFallback(d)}function fa(d,m,b,v,E){var D={};return(m===!0||m===!1)&&(v=m,m=void 0),(b===!0||b===!1)&&(v=b,b=void 0),(i(d)&&a(d)||n(d)&&d.length===0)&&(d=void 0),D._isAMomentObject=!0,D._useUTC=D._isUTC=E,D._l=b,D._i=d,D._f=m,D._strict=v,Jl(D)}function Ne(d,m,b,v){return fa(d,m,b,v,!1)}var $h=I("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var d=Ne.apply(null,arguments);return this.isValid()&&d.isValid()?d<this?this:d:k()}),jb=I("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var d=Ne.apply(null,arguments);return this.isValid()&&d.isValid()?d>this?this:d:k()});function Xl(d,m){var b,v;if(m.length===1&&n(m[0])&&(m=m[0]),!m.length)return Ne();for(b=m[0],v=1;v<m.length;++v)(!m[v].isValid()||m[v][d](b))&&(b=m[v]);return b}function Bb(){var d=[].slice.call(arguments,0);return Xl("isBefore",d)}function zh(){var d=[].slice.call(arguments,0);return Xl("isAfter",d)}var Ql=function(){return Date.now?Date.now():+new Date},is=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Uh(d){var m,b=!1,v,E=is.length;for(m in d)if(s(d,m)&&!(et.call(is,m)!==-1&&(d[m]==null||!isNaN(d[m]))))return!1;for(v=0;v<E;++v)if(d[is[v]]){if(b)return!1;parseFloat(d[is[v]])!==pe(d[is[v]])&&(b=!0)}return!0}function Wh(){return this._isValid}function $b(){return Yt(NaN)}function eu(d){var m=un(d),b=m.year||0,v=m.quarter||0,E=m.month||0,D=m.week||m.isoWeek||0,j=m.day||0,ie=m.hour||0,_e=m.minute||0,We=m.second||0,ir=m.millisecond||0;this._isValid=Uh(m),this._milliseconds=+ir+We*1e3+_e*6e4+ie*1e3*60*60,this._days=+j+D*7,this._months=+E+v*3+b*12,this._data={},this._locale=Vr(),this._bubble()}function ha(d){return d instanceof eu}function Qc(d){return d<0?Math.round(-1*d)*-1:Math.round(d)}function ed(d,m,b){var v=Math.min(d.length,m.length),E=Math.abs(d.length-m.length),D=0,j;for(j=0;j<v;j++)(b&&d[j]!==m[j]||!b&&pe(d[j])!==pe(m[j]))&&D++;return D+E}function qh(d,m){Q(d,0,0,function(){var b=this.utcOffset(),v="+";return b<0&&(b=-b,v="-"),v+De(~~(b/60),2)+m+De(~~b%60,2)})}qh("Z",":"),qh("ZZ",""),G("Z",Dl),G("ZZ",Dl),Fe(["Z","ZZ"],function(d,m,b){b._useUTC=!0,b._tzm=td(Dl,d)});var zb=/([\+\-]|\d\d)/gi;function td(d,m){var b=(m||"").match(d),v,E,D;return b===null?null:(v=b[b.length-1]||[],E=(v+"").match(zb)||["-",0,0],D=+(E[1]*60)+pe(E[2]),D===0?0:E[0]==="+"?D:-D)}function rd(d,m){var b,v;return m._isUTC?(b=m.clone(),v=(R(d)||u(d)?d.valueOf():Ne(d).valueOf())-b.valueOf(),b._d.setTime(b._d.valueOf()+v),e.updateOffset(b,!1),b):Ne(d).local()}function tu(d){return-Math.round(d._d.getTimezoneOffset())}e.updateOffset=function(){};function Wn(d,m,b){var v=this._offset||0,E;if(!this.isValid())return d!=null?this:NaN;if(d!=null){if(typeof d=="string"){if(d=td(Dl,d),d===null)return this}else Math.abs(d)<16&&!b&&(d=d*60);return!this._isUTC&&m&&(E=tu(this)),this._offset=d,this._isUTC=!0,E!=null&&this.add(E,"m"),v!==d&&(!m||this._changeInProgress?Zh(this,Yt(d-v,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?v:tu(this)}function ru(d,m){return d!=null?(typeof d!="string"&&(d=-d),this.utcOffset(d,m),this):-this.utcOffset()}function no(d){return this.utcOffset(0,d)}function Hh(d){return this._isUTC&&(this.utcOffset(0,d),this._isUTC=!1,d&&this.subtract(tu(this),"m")),this}function nu(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var d=td(lb,this._i);d!=null?this.utcOffset(d):this.utcOffset(0,!0)}return this}function ss(d){return this.isValid()?(d=d?Ne(d).utcOffset():0,(this.utcOffset()-d)%60===0):!1}function pa(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Yr(){if(!o(this._isDSTShifted))return this._isDSTShifted;var d={},m;return O(d,this),d=Kl(d),d._a?(m=d._isUTC?p(d._a):Ne(d._a),this._isDSTShifted=this.isValid()&&ed(d._a,m.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function nd(){return this.isValid()?!this._isUTC:!1}function Ub(){return this.isValid()?this._isUTC:!1}function as(){return this.isValid()?this._isUTC&&this._offset===0:!1}var Vh=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Wb=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Yt(d,m){var b=d,v=null,E,D,j;return ha(d)?b={ms:d._milliseconds,d:d._days,M:d._months}:l(d)||!isNaN(+d)?(b={},m?b[m]=+d:b.milliseconds=+d):(v=Vh.exec(d))?(E=v[1]==="-"?-1:1,b={y:0,d:pe(v[Ct])*E,h:pe(v[ot])*E,m:pe(v[rr])*E,s:pe(v[cn])*E,ms:pe(Qc(v[dn]*1e3))*E}):(v=Wb.exec(d))?(E=v[1]==="-"?-1:1,b={y:os(v[2],E),M:os(v[3],E),w:os(v[4],E),d:os(v[5],E),h:os(v[6],E),m:os(v[7],E),s:os(v[8],E)}):b==null?b={}:typeof b=="object"&&("from"in b||"to"in b)&&(j=qb(Ne(b.from),Ne(b.to)),b={},b.ms=j.milliseconds,b.M=j.months),D=new eu(b),ha(d)&&s(d,"_locale")&&(D._locale=d._locale),ha(d)&&s(d,"_isValid")&&(D._isValid=d._isValid),D}Yt.fn=eu.prototype,Yt.invalid=$b;function os(d,m){var b=d&&parseFloat(d.replace(",","."));return(isNaN(b)?0:b)*m}function Yh(d,m){var b={};return b.months=m.month()-d.month()+(m.year()-d.year())*12,d.clone().add(b.months,"M").isAfter(m)&&--b.months,b.milliseconds=+m-+d.clone().add(b.months,"M"),b}function qb(d,m){var b;return d.isValid()&&m.isValid()?(m=rd(m,d),d.isBefore(m)?b=Yh(d,m):(b=Yh(m,d),b.milliseconds=-b.milliseconds,b.months=-b.months),b):{milliseconds:0,months:0}}function Gh(d,m){return function(b,v){var E,D;return v!==null&&!isNaN(+v)&&(X(m,"moment()."+m+"(period, number) is deprecated. Please use moment()."+m+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),D=b,b=v,v=D),E=Yt(b,v),Zh(this,E,d),this}}function Zh(d,m,b,v){var E=m._milliseconds,D=Qc(m._days),j=Qc(m._months);d.isValid()&&(v=v==null?!0:v,j&&Ka(d,Al(d,"Month")+j*b),D&&zc(d,"Date",Al(d,"Date")+D*b),E&&d._d.setTime(d._d.valueOf()+E*b),v&&e.updateOffset(d,D||j))}var Hb=Gh(1,"add"),Vb=Gh(-1,"subtract");function Jh(d){return typeof d=="string"||d instanceof String}function Yb(d){return R(d)||u(d)||Jh(d)||l(d)||Zb(d)||Gb(d)||d===null||d===void 0}function Gb(d){var m=i(d)&&!a(d),b=!1,v=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],E,D,j=v.length;for(E=0;E<j;E+=1)D=v[E],b=b||s(d,D);return m&&b}function Zb(d){var m=n(d),b=!1;return m&&(b=d.filter(function(v){return!l(v)&&Jh(d)}).length===0),m&&b}function Jb(d){var m=i(d)&&!a(d),b=!1,v=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],E,D;for(E=0;E<v.length;E+=1)D=v[E],b=b||s(d,D);return m&&b}function Kb(d,m){var b=d.diff(m,"days",!0);return b<-6?"sameElse":b<-1?"lastWeek":b<0?"lastDay":b<1?"sameDay":b<2?"nextDay":b<7?"nextWeek":"sameElse"}function Kh(d,m){arguments.length===1&&(arguments[0]?Yb(arguments[0])?(d=arguments[0],m=void 0):Jb(arguments[0])&&(m=arguments[0],d=void 0):(d=void 0,m=void 0));var b=d||Ne(),v=rd(b,this).startOf("day"),E=e.calendarFormat(this,v)||"sameElse",D=m&&(z(m[E])?m[E].call(this,b):m[E]);return this.format(D||this.localeData().calendar(E,this,Ne(b)))}function Xb(){return new A(this)}function Qb(d,m){var b=R(d)?d:Ne(d);return this.isValid()&&b.isValid()?(m=ct(m)||"millisecond",m==="millisecond"?this.valueOf()>b.valueOf():b.valueOf()<this.clone().startOf(m).valueOf()):!1}function At(d,m){var b=R(d)?d:Ne(d);return this.isValid()&&b.isValid()?(m=ct(m)||"millisecond",m==="millisecond"?this.valueOf()<b.valueOf():this.clone().endOf(m).valueOf()<b.valueOf()):!1}function io(d,m,b,v){var E=R(d)?d:Ne(d),D=R(m)?m:Ne(m);return this.isValid()&&E.isValid()&&D.isValid()?(v=v||"()",(v[0]==="("?this.isAfter(E,b):!this.isBefore(E,b))&&(v[1]===")"?this.isBefore(D,b):!this.isAfter(D,b))):!1}function Xh(d,m){var b=R(d)?d:Ne(d),v;return this.isValid()&&b.isValid()?(m=ct(m)||"millisecond",m==="millisecond"?this.valueOf()===b.valueOf():(v=b.valueOf(),this.clone().startOf(m).valueOf()<=v&&v<=this.clone().endOf(m).valueOf())):!1}function id(d,m){return this.isSame(d,m)||this.isAfter(d,m)}function bi(d,m){return this.isSame(d,m)||this.isBefore(d,m)}function yi(d,m,b){var v,E,D;if(!this.isValid())return NaN;if(v=rd(d,this),!v.isValid())return NaN;switch(E=(v.utcOffset()-this.utcOffset())*6e4,m=ct(m),m){case"year":D=Gt(this,v)/12;break;case"month":D=Gt(this,v);break;case"quarter":D=Gt(this,v)/3;break;case"second":D=(this-v)/1e3;break;case"minute":D=(this-v)/6e4;break;case"hour":D=(this-v)/36e5;break;case"day":D=(this-v-E)/864e5;break;case"week":D=(this-v-E)/6048e5;break;default:D=this-v}return b?D:Sr(D)}function Gt(d,m){if(d.date()<m.date())return-Gt(m,d);var b=(m.year()-d.year())*12+(m.month()-d.month()),v=d.clone().add(b,"months"),E,D;return m-v<0?(E=d.clone().add(b-1,"months"),D=(m-v)/(v-E)):(E=d.clone().add(b+1,"months"),D=(m-v)/(E-v)),-(b+D)||0}e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function so(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Qh(d){if(!this.isValid())return null;var m=d!==!0,b=m?this.clone().utc():this;return b.year()<0||b.year()>9999?xr(b,m?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):z(Date.prototype.toISOString)?m?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",xr(b,"Z")):xr(b,m?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function ls(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var d="moment",m="",b,v,E,D;return this.isLocal()||(d=this.utcOffset()===0?"moment.utc":"moment.parseZone",m="Z"),b="["+d+'("]',v=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",E="-MM-DD[T]HH:mm:ss.SSS",D=m+'[")]',this.format(b+v+E+D)}function ep(d){d||(d=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var m=xr(this,d);return this.localeData().postformat(m)}function tp(d,m){return this.isValid()&&(R(d)&&d.isValid()||Ne(d).isValid())?Yt({to:this,from:d}).locale(this.locale()).humanize(!m):this.localeData().invalidDate()}function iu(d){return this.from(Ne(),d)}function rp(d,m){return this.isValid()&&(R(d)&&d.isValid()||Ne(d).isValid())?Yt({from:this,to:d}).locale(this.locale()).humanize(!m):this.localeData().invalidDate()}function np(d){return this.to(Ne(),d)}function sd(d){var m;return d===void 0?this._locale._abbr:(m=Vr(d),m!=null&&(this._locale=m),this)}var ao=I("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(d){return d===void 0?this.localeData():this.locale(d)});function ad(){return this._locale}var oo=1e3,ma=60*oo,su=60*ma,ip=(365*400+97)*24*su;function ga(d,m){return(d%m+m)%m}function sp(d,m,b){return d<100&&d>=0?new Date(d+400,m,b)-ip:new Date(d,m,b).valueOf()}function lo(d,m,b){return d<100&&d>=0?Date.UTC(d+400,m,b)-ip:Date.UTC(d,m,b)}function ey(d){var m,b;if(d=ct(d),d===void 0||d==="millisecond"||!this.isValid())return this;switch(b=this._isUTC?lo:sp,d){case"year":m=b(this.year(),0,1);break;case"quarter":m=b(this.year(),this.month()-this.month()%3,1);break;case"month":m=b(this.year(),this.month(),1);break;case"week":m=b(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":m=b(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":m=b(this.year(),this.month(),this.date());break;case"hour":m=this._d.valueOf(),m-=ga(m+(this._isUTC?0:this.utcOffset()*ma),su);break;case"minute":m=this._d.valueOf(),m-=ga(m,ma);break;case"second":m=this._d.valueOf(),m-=ga(m,oo);break}return this._d.setTime(m),e.updateOffset(this,!0),this}function ap(d){var m,b;if(d=ct(d),d===void 0||d==="millisecond"||!this.isValid())return this;switch(b=this._isUTC?lo:sp,d){case"year":m=b(this.year()+1,0,1)-1;break;case"quarter":m=b(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":m=b(this.year(),this.month()+1,1)-1;break;case"week":m=b(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":m=b(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":m=b(this.year(),this.month(),this.date()+1)-1;break;case"hour":m=this._d.valueOf(),m+=su-ga(m+(this._isUTC?0:this.utcOffset()*ma),su)-1;break;case"minute":m=this._d.valueOf(),m+=ma-ga(m,ma)-1;break;case"second":m=this._d.valueOf(),m+=oo-ga(m,oo)-1;break}return this._d.setTime(m),e.updateOffset(this,!0),this}function op(){return this._d.valueOf()-(this._offset||0)*6e4}function od(){return Math.floor(this.valueOf()/1e3)}function ld(){return new Date(this.valueOf())}function au(){var d=this;return[d.year(),d.month(),d.date(),d.hour(),d.minute(),d.second(),d.millisecond()]}function wi(){var d=this;return{years:d.year(),months:d.month(),date:d.date(),hours:d.hours(),minutes:d.minutes(),seconds:d.seconds(),milliseconds:d.milliseconds()}}function ou(){return this.isValid()?this.toISOString():null}function ty(){return x(this)}function ry(){return h({},y(this))}function lu(){return y(this).overflow}function lp(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Q("N",0,0,"eraAbbr"),Q("NN",0,0,"eraAbbr"),Q("NNN",0,0,"eraAbbr"),Q("NNNN",0,0,"eraName"),Q("NNNNN",0,0,"eraNarrow"),Q("y",["y",1],"yo","eraYear"),Q("y",["yy",2],0,"eraYear"),Q("y",["yyy",3],0,"eraYear"),Q("y",["yyyy",4],0,"eraYear"),G("N",vi),G("NN",vi),G("NNN",vi),G("NNNN",cp),G("NNNNN",f),Fe(["N","NN","NNN","NNNN","NNNNN"],function(d,m,b,v){var E=b._locale.erasParse(d,v,b._strict);E?y(b).era=E:y(b).invalidEra=d}),G("y",Qi),G("yy",Qi),G("yyy",Qi),G("yyyy",Qi),G("yo",g),Fe(["y","yy","yyy","yyyy"],Qe),Fe(["yo"],function(d,m,b,v){var E;b._locale._eraYearOrdinalRegex&&(E=d.match(b._locale._eraYearOrdinalRegex)),b._locale.eraYearOrdinalParse?m[Qe]=b._locale.eraYearOrdinalParse(d,E):m[Qe]=parseInt(d,10)});function ny(d,m){var b,v,E,D=this._eras||Vr("en")._eras;for(b=0,v=D.length;b<v;++b){switch(typeof D[b].since){case"string":E=e(D[b].since).startOf("day"),D[b].since=E.valueOf();break}switch(typeof D[b].until){case"undefined":D[b].until=1/0;break;case"string":E=e(D[b].until).startOf("day").valueOf(),D[b].until=E.valueOf();break}}return D}function up(d,m,b){var v,E,D=this.eras(),j,ie,_e;for(d=d.toUpperCase(),v=0,E=D.length;v<E;++v)if(j=D[v].name.toUpperCase(),ie=D[v].abbr.toUpperCase(),_e=D[v].narrow.toUpperCase(),b)switch(m){case"N":case"NN":case"NNN":if(ie===d)return D[v];break;case"NNNN":if(j===d)return D[v];break;case"NNNNN":if(_e===d)return D[v];break}else if([j,ie,_e].indexOf(d)>=0)return D[v]}function iy(d,m){var b=d.since<=d.until?1:-1;return m===void 0?e(d.since).year():e(d.since).year()+(m-d.offset)*b}function sy(){var d,m,b,v=this.localeData().eras();for(d=0,m=v.length;d<m;++d)if(b=this.clone().startOf("day").valueOf(),v[d].since<=b&&b<=v[d].until||v[d].until<=b&&b<=v[d].since)return v[d].name;return""}function ay(){var d,m,b,v=this.localeData().eras();for(d=0,m=v.length;d<m;++d)if(b=this.clone().startOf("day").valueOf(),v[d].since<=b&&b<=v[d].until||v[d].until<=b&&b<=v[d].since)return v[d].narrow;return""}function oy(){var d,m,b,v=this.localeData().eras();for(d=0,m=v.length;d<m;++d)if(b=this.clone().startOf("day").valueOf(),v[d].since<=b&&b<=v[d].until||v[d].until<=b&&b<=v[d].since)return v[d].abbr;return""}function ly(){var d,m,b,v,E=this.localeData().eras();for(d=0,m=E.length;d<m;++d)if(b=E[d].since<=E[d].until?1:-1,v=this.clone().startOf("day").valueOf(),E[d].since<=v&&v<=E[d].until||E[d].until<=v&&v<=E[d].since)return(this.year()-e(E[d].since).year())*b+E[d].offset;return this.year()}function uy(d){return s(this,"_erasNameRegex")||w.call(this),d?this._erasNameRegex:this._erasRegex}function uu(d){return s(this,"_erasAbbrRegex")||w.call(this),d?this._erasAbbrRegex:this._erasRegex}function ud(d){return s(this,"_erasNarrowRegex")||w.call(this),d?this._erasNarrowRegex:this._erasRegex}function vi(d,m){return m.erasAbbrRegex(d)}function cp(d,m){return m.erasNameRegex(d)}function f(d,m){return m.erasNarrowRegex(d)}function g(d,m){return m._eraYearOrdinalRegex||Qi}function w(){var d=[],m=[],b=[],v=[],E,D,j=this.eras();for(E=0,D=j.length;E<D;++E)m.push(Vt(j[E].name)),d.push(Vt(j[E].abbr)),b.push(Vt(j[E].narrow)),v.push(Vt(j[E].name)),v.push(Vt(j[E].abbr)),v.push(Vt(j[E].narrow));this._erasRegex=new RegExp("^("+v.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+m.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+d.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+b.join("|")+")","i")}Q(0,["gg",2],0,function(){return this.weekYear()%100}),Q(0,["GG",2],0,function(){return this.isoWeekYear()%100});function C(d,m){Q(0,[d,d.length],0,m)}C("gggg","weekYear"),C("ggggg","weekYear"),C("GGGG","isoWeekYear"),C("GGGGG","isoWeekYear"),kt("weekYear","gg"),kt("isoWeekYear","GG"),Tt("weekYear",1),Tt("isoWeekYear",1),G("G",Rl),G("g",Rl),G("GG",xe,Nt),G("gg",xe,Nt),G("GGGG",Wc,Ki),G("gggg",Wc,Ki),G("GGGGG",na,Za),G("ggggg",na,Za),qr(["gggg","ggggg","GGGG","GGGGG"],function(d,m,b,v){m[v.substr(0,2)]=pe(d)}),qr(["gg","GG"],function(d,m,b,v){m[v]=e.parseTwoDigitYear(d)});function M(d){return ce.call(this,d,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function N(d){return ce.call(this,d,this.isoWeek(),this.isoWeekday(),1,4)}function $(){return Bn(this.year(),1,4)}function H(){return Bn(this.isoWeekYear(),1,4)}function oe(){var d=this.localeData()._week;return Bn(this.year(),d.dow,d.doy)}function te(){var d=this.localeData()._week;return Bn(this.weekYear(),d.dow,d.doy)}function ce(d,m,b,v,E){var D;return d==null?jn(this,v,E).year:(D=Bn(d,v,E),m>D&&(m=D),me.call(this,d,m,b,v,E))}function me(d,m,b,v,E){var D=jl(d,m,b,v,E),j=Qa(D.year,0,D.dayOfYear);return this.year(j.getUTCFullYear()),this.month(j.getUTCMonth()),this.date(j.getUTCDate()),this}Q("Q",0,"Qo","quarter"),kt("quarter","Q"),Tt("quarter",7),G("Q",Pl),Fe("Q",function(d,m){m[Hr]=(pe(d)-1)*3});function Be(d){return d==null?Math.ceil((this.month()+1)/3):this.month((d-1)*3+this.month()%3)}Q("D",["DD",2],"Do","date"),kt("date","D"),Tt("date",9),G("D",xe),G("DD",xe,Nt),G("Do",function(d,m){return d?m._dayOfMonthOrdinalParse||m._ordinalParse:m._dayOfMonthOrdinalParseLenient}),Fe(["D","DD"],Ct),Fe("Do",function(d,m){m[Ct]=pe(d.match(xe)[0])});var Er=Ji("Date",!0);Q("DDD",["DDDD",3],"DDDo","dayOfYear"),kt("dayOfYear","DDD"),Tt("dayOfYear",4),G("DDD",Xi),G("DDDD",Ol),Fe(["DDD","DDDD"],function(d,m,b){b._dayOfYear=pe(d)});function _a(d){var m=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return d==null?m:this.add(d-m,"d")}Q("m",["mm",2],0,"minute"),kt("minute","m"),Tt("minute",14),G("m",xe),G("mm",xe,Nt),Fe(["m","mm"],rr);var xi=Ji("Minutes",!1);Q("s",["ss",2],0,"second"),kt("second","s"),Tt("second",15),G("s",xe),G("ss",xe,Nt),Fe(["s","ss"],cn);var qn=Ji("Seconds",!1);Q("S",0,0,function(){return~~(this.millisecond()/100)}),Q(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Q(0,["SSS",3],0,"millisecond"),Q(0,["SSSS",4],0,function(){return this.millisecond()*10}),Q(0,["SSSSS",5],0,function(){return this.millisecond()*100}),Q(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),Q(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),Q(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),Q(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),kt("millisecond","ms"),Tt("millisecond",16),G("S",Xi,Pl),G("SS",Xi,Nt),G("SSS",Xi,Ol);var tt,jt;for(tt="SSSS";tt.length<=9;tt+="S")G(tt,Qi);function Tr(d,m){m[dn]=pe(("0."+d)*1e3)}for(tt="S";tt.length<=9;tt+="S")Fe(tt,Tr);jt=Ji("Milliseconds",!1),Q("z",0,0,"zoneAbbr"),Q("zz",0,0,"zoneName");function Hn(){return this._isUTC?"UTC":""}function se(){return this._isUTC?"Coordinated Universal Time":""}var B=A.prototype;B.add=Hb,B.calendar=Kh,B.clone=Xb,B.diff=yi,B.endOf=ap,B.format=ep,B.from=tp,B.fromNow=iu,B.to=rp,B.toNow=np,B.get=gh,B.invalidAt=lu,B.isAfter=Qb,B.isBefore=At,B.isBetween=io,B.isSame=Xh,B.isSameOrAfter=id,B.isSameOrBefore=bi,B.isValid=ty,B.lang=ao,B.locale=sd,B.localeData=ad,B.max=jb,B.min=$h,B.parsingFlags=ry,B.set=_h,B.startOf=ey,B.subtract=Vb,B.toArray=au,B.toObject=wi,B.toDate=ld,B.toISOString=Qh,B.inspect=ls,typeof Symbol!="undefined"&&Symbol.for!=null&&(B[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),B.toJSON=ou,B.toString=so,B.unix=od,B.valueOf=op,B.creationData=lp,B.eraName=sy,B.eraNarrow=ay,B.eraAbbr=oy,B.eraYear=ly,B.year=Xa,B.isLeapYear=Fl,B.weekYear=M,B.isoWeekYear=N,B.quarter=B.quarters=Be,B.month=oa,B.daysInMonth=Il,B.week=B.weeks=_b,B.isoWeek=B.isoWeeks=Ch,B.weeksInYear=oe,B.weeksInWeekYear=te,B.isoWeeksInYear=$,B.isoWeeksInISOWeekYear=H,B.date=Er,B.day=B.days=xb,B.weekday=Sb,B.isoWeekday=Rh,B.dayOfYear=_a,B.hour=B.hours=Dh,B.minute=B.minutes=xi,B.second=B.seconds=qn,B.millisecond=B.milliseconds=jt,B.utcOffset=Wn,B.utc=no,B.local=Hh,B.parseZone=nu,B.hasAlignedHourOffset=ss,B.isDST=pa,B.isLocal=nd,B.isUtcOffset=Ub,B.isUtc=as,B.isUTC=as,B.zoneAbbr=Hn,B.zoneName=se,B.dates=I("dates accessor is deprecated. Use date instead.",Er),B.months=I("months accessor is deprecated. Use month instead",oa),B.years=I("years accessor is deprecated. Use year instead",Xa),B.zone=I("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",ru),B.isDSTShifted=I("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Yr);function Ue(d){return Ne(d*1e3)}function nr(){return Ne.apply(null,arguments).parseZone()}function us(d){return d}var ye=$e.prototype;ye.calendar=Xe,ye.longDateFormat=Fc,ye.invalidDate=hh,ye.ordinal=Bc,ye.preparse=us,ye.postformat=us,ye.relativeTime=ph,ye.pastFuture=$c,ye.set=ne,ye.eras=ny,ye.erasParse=up,ye.erasConvertYear=iy,ye.erasAbbrRegex=uu,ye.erasNameRegex=uy,ye.erasNarrowRegex=ud,ye.months=hb,ye.monthsShort=xh,ye.monthsParse=pb,ye.monthsRegex=Sh,ye.monthsShortRegex=kr,ye.week=mb,ye.firstDayOfYear=Th,ye.firstDayOfWeek=Eh,ye.weekdays=zl,ye.weekdaysMin=yb,ye.weekdaysShort=bb,ye.weekdaysParse=vb,ye.weekdaysRegex=kb,ye.weekdaysShortRegex=Eb,ye.weekdaysMinRegex=Tb,ye.isPM=ua,ye.meridiem=Ab;function Vn(d,m,b,v){var E=Vr(),D=p().set(v,m);return E[b](D,d)}function uo(d,m,b){if(l(d)&&(m=d,d=void 0),d=d||"",m!=null)return Vn(d,m,b,"month");var v,E=[];for(v=0;v<12;v++)E[v]=Vn(d,v,b,"month");return E}function cu(d,m,b,v){typeof d=="boolean"?(l(m)&&(b=m,m=void 0),m=m||""):(m=d,b=m,d=!1,l(m)&&(b=m,m=void 0),m=m||"");var E=Vr(),D=d?E._week.dow:0,j,ie=[];if(b!=null)return Vn(m,(b+D)%7,v,"day");for(j=0;j<7;j++)ie[j]=Vn(m,(j+D)%7,v,"day");return ie}function cd(d,m){return uo(d,m,"months")}function EI(d,m){return uo(d,m,"monthsShort")}function TI(d,m,b){return cu(d,m,b,"weekdays")}function CI(d,m,b){return cu(d,m,b,"weekdaysShort")}function AI(d,m,b){return cu(d,m,b,"weekdaysMin")}_i("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(d){var m=d%10,b=pe(d%100/10)===1?"th":m===1?"st":m===2?"nd":m===3?"rd":"th";return d+b}}),e.lang=I("moment.lang is deprecated. Use moment.locale instead.",_i),e.langData=I("moment.langData is deprecated. Use moment.localeData instead.",Vr);var cs=Math.abs;function PI(){var d=this._data;return this._milliseconds=cs(this._milliseconds),this._days=cs(this._days),this._months=cs(this._months),d.milliseconds=cs(d.milliseconds),d.seconds=cs(d.seconds),d.minutes=cs(d.minutes),d.hours=cs(d.hours),d.months=cs(d.months),d.years=cs(d.years),this}function O1(d,m,b,v){var E=Yt(m,b);return d._milliseconds+=v*E._milliseconds,d._days+=v*E._days,d._months+=v*E._months,d._bubble()}function OI(d,m){return O1(this,d,m,1)}function RI(d,m){return O1(this,d,m,-1)}function R1(d){return d<0?Math.floor(d):Math.ceil(d)}function DI(){var d=this._milliseconds,m=this._days,b=this._months,v=this._data,E,D,j,ie,_e;return d>=0&&m>=0&&b>=0||d<=0&&m<=0&&b<=0||(d+=R1(cy(b)+m)*864e5,m=0,b=0),v.milliseconds=d%1e3,E=Sr(d/1e3),v.seconds=E%60,D=Sr(E/60),v.minutes=D%60,j=Sr(D/60),v.hours=j%24,m+=Sr(j/24),_e=Sr(D1(m)),b+=_e,m-=R1(cy(_e)),ie=Sr(b/12),b%=12,v.days=m,v.months=b,v.years=ie,this}function D1(d){return d*4800/146097}function cy(d){return d*146097/4800}function MI(d){if(!this.isValid())return NaN;var m,b,v=this._milliseconds;if(d=ct(d),d==="month"||d==="quarter"||d==="year")switch(m=this._days+v/864e5,b=this._months+D1(m),d){case"month":return b;case"quarter":return b/3;case"year":return b/12}else switch(m=this._days+Math.round(cy(this._months)),d){case"week":return m/7+v/6048e5;case"day":return m+v/864e5;case"hour":return m*24+v/36e5;case"minute":return m*1440+v/6e4;case"second":return m*86400+v/1e3;case"millisecond":return Math.floor(m*864e5)+v;default:throw new Error("Unknown unit "+d)}}function II(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+pe(this._months/12)*31536e6:NaN}function ds(d){return function(){return this.as(d)}}var LI=ds("ms"),FI=ds("s"),NI=ds("m"),jI=ds("h"),BI=ds("d"),$I=ds("w"),zI=ds("M"),UI=ds("Q"),WI=ds("y");function qI(){return Yt(this)}function HI(d){return d=ct(d),this.isValid()?this[d+"s"]():NaN}function co(d){return function(){return this.isValid()?this._data[d]:NaN}}var VI=co("milliseconds"),YI=co("seconds"),GI=co("minutes"),ZI=co("hours"),JI=co("days"),KI=co("months"),XI=co("years");function QI(){return Sr(this.days()/7)}var fs=Math.round,du={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function e5(d,m,b,v,E){return E.relativeTime(m||1,!!b,d,v)}function t5(d,m,b,v){var E=Yt(d).abs(),D=fs(E.as("s")),j=fs(E.as("m")),ie=fs(E.as("h")),_e=fs(E.as("d")),We=fs(E.as("M")),ir=fs(E.as("w")),hs=fs(E.as("y")),ba=D<=b.ss&&["s",D]||D<b.s&&["ss",D]||j<=1&&["m"]||j<b.m&&["mm",j]||ie<=1&&["h"]||ie<b.h&&["hh",ie]||_e<=1&&["d"]||_e<b.d&&["dd",_e];return b.w!=null&&(ba=ba||ir<=1&&["w"]||ir<b.w&&["ww",ir]),ba=ba||We<=1&&["M"]||We<b.M&&["MM",We]||hs<=1&&["y"]||["yy",hs],ba[2]=m,ba[3]=+d>0,ba[4]=v,e5.apply(null,ba)}function r5(d){return d===void 0?fs:typeof d=="function"?(fs=d,!0):!1}function n5(d,m){return du[d]===void 0?!1:m===void 0?du[d]:(du[d]=m,d==="s"&&(du.ss=m-1),!0)}function i5(d,m){if(!this.isValid())return this.localeData().invalidDate();var b=!1,v=du,E,D;return typeof d=="object"&&(m=d,d=!1),typeof d=="boolean"&&(b=d),typeof m=="object"&&(v=Object.assign({},du,m),m.s!=null&&m.ss==null&&(v.ss=m.s-1)),E=this.localeData(),D=t5(this,!b,v,E),b&&(D=E.pastFuture(+this,D)),E.postformat(D)}var dy=Math.abs;function fu(d){return(d>0)-(d<0)||+d}function dp(){if(!this.isValid())return this.localeData().invalidDate();var d=dy(this._milliseconds)/1e3,m=dy(this._days),b=dy(this._months),v,E,D,j,ie=this.asSeconds(),_e,We,ir,hs;return ie?(v=Sr(d/60),E=Sr(v/60),d%=60,v%=60,D=Sr(b/12),b%=12,j=d?d.toFixed(3).replace(/\.?0+$/,""):"",_e=ie<0?"-":"",We=fu(this._months)!==fu(ie)?"-":"",ir=fu(this._days)!==fu(ie)?"-":"",hs=fu(this._milliseconds)!==fu(ie)?"-":"",_e+"P"+(D?We+D+"Y":"")+(b?We+b+"M":"")+(m?ir+m+"D":"")+(E||v||d?"T":"")+(E?hs+E+"H":"")+(v?hs+v+"M":"")+(d?hs+j+"S":"")):"P0D"}var Te=eu.prototype;Te.isValid=Wh,Te.abs=PI,Te.add=OI,Te.subtract=RI,Te.as=MI,Te.asMilliseconds=LI,Te.asSeconds=FI,Te.asMinutes=NI,Te.asHours=jI,Te.asDays=BI,Te.asWeeks=$I,Te.asMonths=zI,Te.asQuarters=UI,Te.asYears=WI,Te.valueOf=II,Te._bubble=DI,Te.clone=qI,Te.get=HI,Te.milliseconds=VI,Te.seconds=YI,Te.minutes=GI,Te.hours=ZI,Te.days=JI,Te.weeks=QI,Te.months=KI,Te.years=XI,Te.humanize=i5,Te.toISOString=dp,Te.toString=dp,Te.toJSON=dp,Te.locale=sd,Te.localeData=ad,Te.toIsoString=I("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",dp),Te.lang=ao,Q("X",0,0,"unix"),Q("x",0,0,"valueOf"),G("x",Rl),G("X",ub),Fe("X",function(d,m,b){b._d=new Date(parseFloat(d)*1e3)}),Fe("x",function(d,m,b){b._d=new Date(pe(d))});return e.version="2.29.4",r(Ne),e.fn=B,e.min=Bb,e.max=zh,e.now=Ql,e.utc=p,e.unix=Ue,e.months=cd,e.isDate=u,e.locale=_i,e.invalid=k,e.duration=Yt,e.isMoment=R,e.weekdays=TI,e.parseZone=nr,e.localeData=Vr,e.isDuration=ha,e.monthsShort=EI,e.weekdaysMin=AI,e.defineLocale=Gc,e.updateLocale=Vl,e.locales=zn,e.weekdaysShort=CI,e.normalizeUnits=ct,e.relativeTimeRounding=r5,e.relativeTimeThreshold=n5,e.calendarFormat=Kb,e.prototype=B,e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},e})});var B1=L((fp,j1)=>{(function(t,e){typeof fp=="object"&&typeof j1!="undefined"?e(fp):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis!="undefined"?globalThis:t||self,e(t.WebStreamsPolyfill={}))})(fp,function(t){"use strict";function e(){}function r(f){return typeof f=="object"&&f!==null||typeof f=="function"}let n=e;function i(f,g){try{Object.defineProperty(f,"name",{value:g,configurable:!0})}catch(w){}}let s=Promise,a=Promise.prototype.then,o=Promise.reject.bind(s);function l(f){return new s(f)}function u(f){return l(g=>g(f))}function c(f){return o(f)}function h(f,g,w){return a.call(f,g,w)}function p(f,g,w){h(h(f,g,w),void 0,n)}function _(f,g){p(f,g)}function y(f,g){p(f,void 0,g)}function S(f,g,w){return h(f,g,w)}function x(f){h(f,void 0,n)}let k=f=>{if(typeof queueMicrotask=="function")k=queueMicrotask;else{let g=u(void 0);k=w=>h(g,w)}return k(f)};function T(f,g,w){if(typeof f!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(f,g,w)}function P(f,g,w){try{return u(T(f,g,w))}catch(C){return c(C)}}let O=16384;class A{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(g){let w=this._back,C=w;w._elements.length===O-1&&(C={_elements:[],_next:void 0}),w._elements.push(g),C!==w&&(this._back=C,w._next=C),++this._size}shift(){let g=this._front,w=g,C=this._cursor,M=C+1,N=g._elements,$=N[C];return M===O&&(w=g._next,M=0),--this._size,this._cursor=M,g!==w&&(this._front=w),N[C]=void 0,$}forEach(g){let w=this._cursor,C=this._front,M=C._elements;for(;(w!==M.length||C._next!==void 0)&&!(w===M.length&&(C=C._next,M=C._elements,w=0,M.length===0));)g(M[w]),++w}peek(){let g=this._front,w=this._cursor;return g._elements[w]}}let R=Symbol("[[AbortSteps]]"),F=Symbol("[[ErrorSteps]]"),I=Symbol("[[CancelSteps]]"),U=Symbol("[[PullSteps]]"),X=Symbol("[[ReleaseSteps]]");function z(f,g){f._ownerReadableStream=g,g._reader=f,g._state==="readable"?ve(f):g._state==="closed"?Xe(f):Le(f,g._storedError)}function ne(f,g){let w=f._ownerReadableStream;return Gt(w,g)}function ge(f){let g=f._ownerReadableStream;g._state==="readable"?De(f,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):wr(f,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),g._readableStreamController[X](),g._reader=void 0,f._ownerReadableStream=void 0}function $e(f){return new TypeError("Cannot "+f+" a stream using a released reader")}function ve(f){f._closedPromise=l((g,w)=>{f._closedPromise_resolve=g,f._closedPromise_reject=w})}function Le(f,g){ve(f),De(f,g)}function Xe(f){ve(f),Ft(f)}function De(f,g){f._closedPromise_reject!==void 0&&(x(f._closedPromise),f._closedPromise_reject(g),f._closedPromise_resolve=void 0,f._closedPromise_reject=void 0)}function wr(f,g){Le(f,g)}function Ft(f){f._closedPromise_resolve!==void 0&&(f._closedPromise_resolve(void 0),f._closedPromise_resolve=void 0,f._closedPromise_reject=void 0)}let vr=Number.isFinite||function(f){return typeof f=="number"&&isFinite(f)},at=Math.trunc||function(f){return f<0?Math.ceil(f):Math.floor(f)};function Q(f){return typeof f=="object"||typeof f=="function"}function mt(f,g){if(f!==void 0&&!Q(f))throw new TypeError(`${g} is not an object.`)}function gt(f,g){if(typeof f!="function")throw new TypeError(`${g} is not a function.`)}function xr(f){return typeof f=="object"&&f!==null||typeof f=="function"}function Lc(f,g){if(!xr(f))throw new TypeError(`${g} is not an object.`)}function Ln(f,g,w){if(f===void 0)throw new TypeError(`Parameter ${g} is required in '${w}'.`)}function Fc(f,g,w){if(f===void 0)throw new TypeError(`${g} is required in '${w}'.`)}function Nc(f){return Number(f)}function hh(f){return f===0?0:f}function ob(f){return hh(at(f))}function jc(f,g){let C=Number.MAX_SAFE_INTEGER,M=Number(f);if(M=hh(M),!vr(M))throw new TypeError(`${g} is not a finite number`);if(M=ob(M),M<0||M>C)throw new TypeError(`${g} is outside the accepted range of 0 to ${C}, inclusive`);return!vr(M)||M===0?0:M}function Bc(f,g){if(!bi(f))throw new TypeError(`${g} is not a ReadableStream.`)}function ta(f){return new ct(f)}function ph(f,g){f._reader._readRequests.push(g)}function $c(f,g,w){let M=f._reader._readRequests.shift();w?M._closeSteps():M._chunkSteps(g)}function pi(f){return f._reader._readRequests.length}function kt(f){let g=f._reader;return!(g===void 0||!un(g))}class ct{constructor(g){if(Ln(g,1,"ReadableStreamDefaultReader"),Bc(g,"First parameter"),yi(g))throw new TypeError("This stream has already been locked for exclusive reading by another reader");z(this,g),this._readRequests=new A}get closed(){return un(this)?this._closedPromise:c(Zi("closed"))}cancel(g=void 0){return un(this)?this._ownerReadableStream===void 0?c($e("cancel")):ne(this,g):c(Zi("cancel"))}read(){if(!un(this))return c(Zi("read"));if(this._ownerReadableStream===void 0)return c($e("read from"));let g,w,C=l((N,$)=>{g=N,w=$});return ra(this,{_chunkSteps:N=>g({value:N,done:!1}),_closeSteps:()=>g({value:void 0,done:!0}),_errorSteps:N=>w(N)}),C}releaseLock(){if(!un(this))throw Zi("releaseLock");this._ownerReadableStream!==void 0&&Tt(this)}}Object.defineProperties(ct.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),i(ct.prototype.cancel,"cancel"),i(ct.prototype.read,"read"),i(ct.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ct.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function un(f){return!r(f)||!Object.prototype.hasOwnProperty.call(f,"_readRequests")?!1:f instanceof ct}function ra(f,g){let w=f._ownerReadableStream;w._disturbed=!0,w._state==="closed"?g._closeSteps():w._state==="errored"?g._errorSteps(w._storedError):w._readableStreamController[U](g)}function Tt(f){ge(f);let g=new TypeError("Reader was released");mh(f,g)}function mh(f,g){let w=f._readRequests;f._readRequests=new A,w.forEach(C=>{C._errorSteps(g)})}function Zi(f){return new TypeError(`ReadableStreamDefaultReader.prototype.${f} can only be used on a ReadableStreamDefaultReader`)}let Sr=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class pe{constructor(g,w){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=g,this._preventCancel=w}next(){let g=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?S(this._ongoingPromise,g,g):g(),this._ongoingPromise}return(g){let w=()=>this._returnSteps(g);return this._ongoingPromise?S(this._ongoingPromise,w,w):w()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let g=this._reader,w,C,M=l(($,H)=>{w=$,C=H});return ra(g,{_chunkSteps:$=>{this._ongoingPromise=void 0,k(()=>w({value:$,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,ge(g),w({value:void 0,done:!0})},_errorSteps:$=>{this._ongoingPromise=void 0,this._isFinished=!0,ge(g),C($)}}),M}_returnSteps(g){if(this._isFinished)return Promise.resolve({value:g,done:!0});this._isFinished=!0;let w=this._reader;if(!this._preventCancel){let C=ne(w,g);return ge(w),S(C,()=>({value:g,done:!0}))}return ge(w),u({value:g,done:!0})}}let Ji={next(){return zc(this)?this._asyncIteratorImpl.next():c(gh("next"))},return(f){return zc(this)?this._asyncIteratorImpl.return(f):c(gh("return"))}};Object.setPrototypeOf(Ji,Sr);function Al(f,g){let w=ta(f),C=new pe(w,g),M=Object.create(Ji);return M._asyncIteratorImpl=C,M}function zc(f){if(!r(f)||!Object.prototype.hasOwnProperty.call(f,"_asyncIteratorImpl"))return!1;try{return f._asyncIteratorImpl instanceof pe}catch(g){return!1}}function gh(f){return new TypeError(`ReadableStreamAsyncIterator.${f} can only be used on a ReadableSteamAsyncIterator`)}let _h=Number.isNaN||function(f){return f!==f};var Pl,Nt,Ol;function Ki(f){return f.slice()}function Za(f,g,w,C,M){new Uint8Array(f).set(new Uint8Array(w,C,M),g)}let xe=f=>(typeof f.transfer=="function"?xe=g=>g.transfer():typeof structuredClone=="function"?xe=g=>structuredClone(g,{transfer:[g]}):xe=g=>g,xe(f)),Fn=f=>(typeof f.detached=="boolean"?Fn=g=>g.detached:Fn=g=>g.byteLength===0,Fn(f));function Uc(f,g,w){if(f.slice)return f.slice(g,w);let C=w-g,M=new ArrayBuffer(C);return Za(M,0,f,g,C),M}function Xi(f,g){let w=f[g];if(w!=null){if(typeof w!="function")throw new TypeError(`${String(g)} is not a function`);return w}}function Wc(f){let g={[Symbol.iterator]:()=>f.iterator},w=async function*(){return yield*g}(),C=w.next;return{iterator:w,nextMethod:C,done:!1}}let na=(Ol=(Pl=Symbol.asyncIterator)!==null&&Pl!==void 0?Pl:(Nt=Symbol.for)===null||Nt===void 0?void 0:Nt.call(Symbol,"Symbol.asyncIterator"))!==null&&Ol!==void 0?Ol:"@@asyncIterator";function Qi(f,g="sync",w){if(w===void 0)if(g==="async"){if(w=Xi(f,na),w===void 0){let N=Xi(f,Symbol.iterator),$=Qi(f,"sync",N);return Wc($)}}else w=Xi(f,Symbol.iterator);if(w===void 0)throw new TypeError("The object is not iterable");let C=T(w,f,[]);if(!r(C))throw new TypeError("The iterator method must return an object");let M=C.next;return{iterator:C,nextMethod:M,done:!1}}function Rl(f){let g=T(f.nextMethod,f.iterator,[]);if(!r(g))throw new TypeError("The iterator.next() method must return an object");return g}function lb(f){return!!f.done}function Dl(f){return f.value}function ub(f){return!(typeof f!="number"||_h(f)||f<0)}function ia(f){let g=Uc(f.buffer,f.byteOffset,f.byteOffset+f.byteLength);return new Uint8Array(g)}function sa(f){let g=f._queue.shift();return f._queueTotalSize-=g.size,f._queueTotalSize<0&&(f._queueTotalSize=0),g.value}function G(f,g,w){if(!ub(w)||w===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");f._queue.push({value:g,size:w}),f._queueTotalSize+=w}function cb(f){return f._queue.peek().value}function mi(f){f._queue=new A,f._queueTotalSize=0}function Vt(f){return f===DataView}function qc(f){return Vt(f.constructor)}function Fe(f){return Vt(f)?1:f.BYTES_PER_ELEMENT}class qr{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!Hr(this))throw jl("view");return this._view}respond(g){if(!Hr(this))throw jl("respond");if(Ln(g,1,"respond"),g=jc(g,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Fn(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");Xa(this._associatedReadableByteStreamController,g)}respondWithNewView(g){if(!Hr(this))throw jl("respondWithNewView");if(Ln(g,1,"respondWithNewView"),!ArrayBuffer.isView(g))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Fn(g.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");Fl(this._associatedReadableByteStreamController,g)}}Object.defineProperties(qr.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),i(qr.prototype.respond,"respond"),i(qr.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(qr.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Nn{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Qe(this))throw jn("byobRequest");return Ll(this)}get desiredSize(){if(!Qe(this))throw jn("desiredSize");return la(this)}close(){if(!Qe(this))throw jn("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let g=this._controlledReadableByteStream._state;if(g!=="readable")throw new TypeError(`The stream (in ${g} state) is not in the readable state and cannot be closed`);oa(this)}enqueue(g){if(!Qe(this))throw jn("enqueue");if(Ln(g,1,"enqueue"),!ArrayBuffer.isView(g))throw new TypeError("chunk must be an array buffer view");if(g.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(g.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let w=this._controlledReadableByteStream._state;if(w!=="readable")throw new TypeError(`The stream (in ${w} state) is not in the readable state and cannot be enqueued to`);Il(this,g)}error(g=void 0){if(!Qe(this))throw jn("error");kr(this,g)}[I](g){ot(this),mi(this);let w=this._cancelAlgorithm(g);return Ka(this),w}[U](g){let w=this._controlledReadableByteStream;if(this._queueTotalSize>0){Sh(this,g);return}let C=this._autoAllocateChunkSize;if(C!==void 0){let M;try{M=new ArrayBuffer(C)}catch($){g._errorSteps($);return}let N={buffer:M,bufferByteLength:C,byteOffset:0,byteLength:C,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(N)}ph(w,g),Ct(this)}[X](){if(this._pendingPullIntos.length>0){let g=this._pendingPullIntos.peek();g.readerType="none",this._pendingPullIntos=new A,this._pendingPullIntos.push(g)}}}Object.defineProperties(Nn.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),i(Nn.prototype.close,"close"),i(Nn.prototype.enqueue,"enqueue"),i(Nn.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Nn.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Qe(f){return!r(f)||!Object.prototype.hasOwnProperty.call(f,"_controlledReadableByteStream")?!1:f instanceof Nn}function Hr(f){return!r(f)||!Object.prototype.hasOwnProperty.call(f,"_associatedReadableByteStreamController")?!1:f instanceof qr}function Ct(f){if(!pb(f))return;if(f._pulling){f._pullAgain=!0;return}f._pulling=!0;let w=f._pullAlgorithm();p(w,()=>(f._pulling=!1,f._pullAgain&&(f._pullAgain=!1,Ct(f)),null),C=>(kr(f,C),null))}function ot(f){Hc(f),f._pendingPullIntos=new A}function rr(f,g){let w=!1;f._state==="closed"&&(w=!0);let C=cn(g);g.readerType==="default"?$c(f,C,w):_b(f,C,w)}function cn(f){let g=f.bytesFilled,w=f.elementSize;return new f.viewConstructor(f.buffer,f.byteOffset,g/w)}function dn(f,g,w,C){f._queue.push({buffer:g,byteOffset:w,byteLength:C}),f._queueTotalSize+=C}function bh(f,g,w,C){let M;try{M=Uc(g,w,w+C)}catch(N){throw kr(f,N),N}dn(f,M,0,C)}function yh(f,g){g.bytesFilled>0&&bh(f,g.buffer,g.byteOffset,g.bytesFilled),aa(f)}function wh(f,g){let w=Math.min(f._queueTotalSize,g.byteLength-g.bytesFilled),C=g.bytesFilled+w,M=w,N=!1,$=C%g.elementSize,H=C-$;H>=g.minimumFill&&(M=H-g.bytesFilled,N=!0);let oe=f._queue;for(;M>0;){let te=oe.peek(),ce=Math.min(M,te.byteLength),me=g.byteOffset+g.bytesFilled;Za(g.buffer,me,te.buffer,te.byteOffset,ce),te.byteLength===ce?oe.shift():(te.byteOffset+=ce,te.byteLength-=ce),f._queueTotalSize-=ce,et(f,ce,g),M-=ce}return N}function et(f,g,w){w.bytesFilled+=g}function Ja(f){f._queueTotalSize===0&&f._closeRequested?(Ka(f),so(f._controlledReadableByteStream)):Ct(f)}function Hc(f){f._byobRequest!==null&&(f._byobRequest._associatedReadableByteStreamController=void 0,f._byobRequest._view=null,f._byobRequest=null)}function Ml(f){for(;f._pendingPullIntos.length>0;){if(f._queueTotalSize===0)return;let g=f._pendingPullIntos.peek();wh(f,g)&&(aa(f),rr(f._controlledReadableByteStream,g))}}function vh(f){let g=f._controlledReadableByteStream._reader;for(;g._readRequests.length>0;){if(f._queueTotalSize===0)return;let w=g._readRequests.shift();Sh(f,w)}}function db(f,g,w,C){let M=f._controlledReadableByteStream,N=g.constructor,$=Fe(N),{byteOffset:H,byteLength:oe}=g,te=w*$,ce;try{ce=xe(g.buffer)}catch(Be){C._errorSteps(Be);return}let me={buffer:ce,bufferByteLength:ce.byteLength,byteOffset:H,byteLength:oe,bytesFilled:0,minimumFill:te,elementSize:$,viewConstructor:N,readerType:"byob"};if(f._pendingPullIntos.length>0){f._pendingPullIntos.push(me),Th(M,C);return}if(M._state==="closed"){let Be=new N(me.buffer,me.byteOffset,0);C._closeSteps(Be);return}if(f._queueTotalSize>0){if(wh(f,me)){let Be=cn(me);Ja(f),C._chunkSteps(Be);return}if(f._closeRequested){let Be=new TypeError("Insufficient bytes to fill elements in the given buffer");kr(f,Be),C._errorSteps(Be);return}}f._pendingPullIntos.push(me),Th(M,C),Ct(f)}function fb(f,g){g.readerType==="none"&&aa(f);let w=f._controlledReadableByteStream;if(Vc(w))for(;Ch(w)>0;){let C=aa(f);rr(w,C)}}function hb(f,g,w){if(et(f,g,w),w.readerType==="none"){yh(f,w),Ml(f);return}if(w.bytesFilled<w.minimumFill)return;aa(f);let C=w.bytesFilled%w.elementSize;if(C>0){let M=w.byteOffset+w.bytesFilled;bh(f,w.buffer,M-C,C)}w.bytesFilled-=C,rr(f._controlledReadableByteStream,w),Ml(f)}function xh(f,g){let w=f._pendingPullIntos.peek();Hc(f),f._controlledReadableByteStream._state==="closed"?fb(f,w):hb(f,g,w),Ct(f)}function aa(f){return f._pendingPullIntos.shift()}function pb(f){let g=f._controlledReadableByteStream;return g._state!=="readable"||f._closeRequested||!f._started?!1:!!(kt(g)&&pi(g)>0||Vc(g)&&Ch(g)>0||la(f)>0)}function Ka(f){f._pullAlgorithm=void 0,f._cancelAlgorithm=void 0}function oa(f){let g=f._controlledReadableByteStream;if(!(f._closeRequested||g._state!=="readable")){if(f._queueTotalSize>0){f._closeRequested=!0;return}if(f._pendingPullIntos.length>0){let w=f._pendingPullIntos.peek();if(w.bytesFilled%w.elementSize!==0){let C=new TypeError("Insufficient bytes to fill elements in the given buffer");throw kr(f,C),C}}Ka(f),so(g)}}function Il(f,g){let w=f._controlledReadableByteStream;if(f._closeRequested||w._state!=="readable")return;let{buffer:C,byteOffset:M,byteLength:N}=g;if(Fn(C))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");let $=xe(C);if(f._pendingPullIntos.length>0){let H=f._pendingPullIntos.peek();if(Fn(H.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");Hc(f),H.buffer=xe(H.buffer),H.readerType==="none"&&yh(f,H)}if(kt(w))if(vh(f),pi(w)===0)dn(f,$,M,N);else{f._pendingPullIntos.length>0&&aa(f);let H=new Uint8Array($,M,N);$c(w,H,!1)}else Vc(w)?(dn(f,$,M,N),Ml(f)):dn(f,$,M,N);Ct(f)}function kr(f,g){let w=f._controlledReadableByteStream;w._state==="readable"&&(ot(f),mi(f),Ka(f),Qh(w,g))}function Sh(f,g){let w=f._queue.shift();f._queueTotalSize-=w.byteLength,Ja(f);let C=new Uint8Array(w.buffer,w.byteOffset,w.byteLength);g._chunkSteps(C)}function Ll(f){if(f._byobRequest===null&&f._pendingPullIntos.length>0){let g=f._pendingPullIntos.peek(),w=new Uint8Array(g.buffer,g.byteOffset+g.bytesFilled,g.byteLength-g.bytesFilled),C=Object.create(qr.prototype);Nl(C,f,w),f._byobRequest=C}return f._byobRequest}function la(f){let g=f._controlledReadableByteStream._state;return g==="errored"?null:g==="closed"?0:f._strategyHWM-f._queueTotalSize}function Xa(f,g){let w=f._pendingPullIntos.peek();if(f._controlledReadableByteStream._state==="closed"){if(g!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(g===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(w.bytesFilled+g>w.byteLength)throw new RangeError("bytesWritten out of range")}w.buffer=xe(w.buffer),xh(f,g)}function Fl(f,g){let w=f._pendingPullIntos.peek();if(f._controlledReadableByteStream._state==="closed"){if(g.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(g.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(w.byteOffset+w.bytesFilled!==g.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(w.bufferByteLength!==g.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(w.bytesFilled+g.byteLength>w.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let M=g.byteLength;w.buffer=xe(g.buffer),xh(f,M)}function kh(f,g,w,C,M,N,$){g._controlledReadableByteStream=f,g._pullAgain=!1,g._pulling=!1,g._byobRequest=null,g._queue=g._queueTotalSize=void 0,mi(g),g._closeRequested=!1,g._started=!1,g._strategyHWM=N,g._pullAlgorithm=C,g._cancelAlgorithm=M,g._autoAllocateChunkSize=$,g._pendingPullIntos=new A,f._readableStreamController=g;let H=w();p(u(H),()=>(g._started=!0,Ct(g),null),oe=>(kr(g,oe),null))}function Qa(f,g,w){let C=Object.create(Nn.prototype),M,N,$;g.start!==void 0?M=()=>g.start(C):M=()=>{},g.pull!==void 0?N=()=>g.pull(C):N=()=>u(void 0),g.cancel!==void 0?$=oe=>g.cancel(oe):$=()=>u(void 0);let H=g.autoAllocateChunkSize;if(H===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");kh(f,C,M,N,$,w,H)}function Nl(f,g,w){f._associatedReadableByteStreamController=g,f._view=w}function jl(f){return new TypeError(`ReadableStreamBYOBRequest.prototype.${f} can only be used on a ReadableStreamBYOBRequest`)}function jn(f){return new TypeError(`ReadableByteStreamController.prototype.${f} can only be used on a ReadableByteStreamController`)}function Bn(f,g){mt(f,g);let w=f==null?void 0:f.mode;return{mode:w===void 0?void 0:mb(w,`${g} has member 'mode' that`)}}function mb(f,g){if(f=`${f}`,f!=="byob")throw new TypeError(`${g} '${f}' is not a valid enumeration value for ReadableStreamReaderMode`);return f}function gb(f,g){var w;mt(f,g);let C=(w=f==null?void 0:f.min)!==null&&w!==void 0?w:1;return{min:jc(C,`${g} has member 'min' that`)}}function Eh(f){return new gi(f)}function Th(f,g){f._reader._readIntoRequests.push(g)}function _b(f,g,w){let M=f._reader._readIntoRequests.shift();w?M._closeSteps(g):M._chunkSteps(g)}function Ch(f){return f._reader._readIntoRequests.length}function Vc(f){let g=f._reader;return!(g===void 0||!$n(g))}class gi{constructor(g){if(Ln(g,1,"ReadableStreamBYOBReader"),Bc(g,"First parameter"),yi(g))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Qe(g._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");z(this,g),this._readIntoRequests=new A}get closed(){return $n(this)?this._closedPromise:c(Bl("closed"))}cancel(g=void 0){return $n(this)?this._ownerReadableStream===void 0?c($e("cancel")):ne(this,g):c(Bl("cancel"))}read(g,w={}){if(!$n(this))return c(Bl("read"));if(!ArrayBuffer.isView(g))return c(new TypeError("view must be an array buffer view"));if(g.byteLength===0)return c(new TypeError("view must have non-zero byteLength"));if(g.buffer.byteLength===0)return c(new TypeError("view's buffer must have non-zero byteLength"));if(Fn(g.buffer))return c(new TypeError("view's buffer has been detached"));let C;try{C=gb(w,"options")}catch(te){return c(te)}let M=C.min;if(M===0)return c(new TypeError("options.min must be greater than 0"));if(qc(g)){if(M>g.byteLength)return c(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(M>g.length)return c(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return c($e("read from"));let N,$,H=l((te,ce)=>{N=te,$=ce});return Ah(this,g,M,{_chunkSteps:te=>N({value:te,done:!1}),_closeSteps:te=>N({value:te,done:!0}),_errorSteps:te=>$(te)}),H}releaseLock(){if(!$n(this))throw Bl("releaseLock");this._ownerReadableStream!==void 0&&Ph(this)}}Object.defineProperties(gi.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),i(gi.prototype.cancel,"cancel"),i(gi.prototype.read,"read"),i(gi.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(gi.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function $n(f){return!r(f)||!Object.prototype.hasOwnProperty.call(f,"_readIntoRequests")?!1:f instanceof gi}function Ah(f,g,w,C){let M=f._ownerReadableStream;M._disturbed=!0,M._state==="errored"?C._errorSteps(M._storedError):db(M._readableStreamController,g,w,C)}function Ph(f){ge(f);let g=new TypeError("Reader was released");Oh(f,g)}function Oh(f,g){let w=f._readIntoRequests;f._readIntoRequests=new A,w.forEach(C=>{C._errorSteps(g)})}function Bl(f){return new TypeError(`ReadableStreamBYOBReader.prototype.${f} can only be used on a ReadableStreamBYOBReader`)}function eo(f,g){let{highWaterMark:w}=f;if(w===void 0)return g;if(_h(w)||w<0)throw new RangeError("Invalid highWaterMark");return w}function $l(f){let{size:g}=f;return g||(()=>1)}function zl(f,g){mt(f,g);let w=f==null?void 0:f.highWaterMark,C=f==null?void 0:f.size;return{highWaterMark:w===void 0?void 0:Nc(w),size:C===void 0?void 0:bb(C,`${g} has member 'size' that`)}}function bb(f,g){return gt(f,g),w=>Nc(f(w))}function yb(f,g){mt(f,g);let w=f==null?void 0:f.abort,C=f==null?void 0:f.close,M=f==null?void 0:f.start,N=f==null?void 0:f.type,$=f==null?void 0:f.write;return{abort:w===void 0?void 0:wb(w,f,`${g} has member 'abort' that`),close:C===void 0?void 0:vb(C,f,`${g} has member 'close' that`),start:M===void 0?void 0:xb(M,f,`${g} has member 'start' that`),write:$===void 0?void 0:Sb($,f,`${g} has member 'write' that`),type:N}}function wb(f,g,w){return gt(f,w),C=>P(f,g,[C])}function vb(f,g,w){return gt(f,w),()=>P(f,g,[])}function xb(f,g,w){return gt(f,w),C=>T(f,g,[C])}function Sb(f,g,w){return gt(f,w),(C,M)=>P(f,g,[C,M])}function Rh(f,g){if(!es(f))throw new TypeError(`${g} is not a WritableStream.`)}function kb(f){if(typeof f!="object"||f===null)return!1;try{return typeof f.aborted=="boolean"}catch(g){return!1}}let Eb=typeof AbortController=="function";function Tb(){if(Eb)return new AbortController}class fn{constructor(g={},w={}){g===void 0?g=null:Lc(g,"First parameter");let C=zl(w,"Second parameter"),M=yb(g,"First parameter");if(Yc(this),M.type!==void 0)throw new RangeError("Invalid type is specified");let $=$l(C),H=eo(C,1);Ib(this,M,H,$)}get locked(){if(!es(this))throw Jl("locked");return ua(this)}abort(g=void 0){return es(this)?ua(this)?c(new TypeError("Cannot abort a stream that already has a writer")):Wl(this,g):c(Jl("abort"))}close(){return es(this)?ua(this)?c(new TypeError("Cannot close a stream that already has a writer")):hn(this)?c(new TypeError("Cannot close an already-closing stream")):Dh(this):c(Jl("close"))}getWriter(){if(!es(this))throw Jl("getWriter");return Ul(this)}}Object.defineProperties(fn.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),i(fn.prototype.abort,"abort"),i(fn.prototype.close,"close"),i(fn.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(fn.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});function Ul(f){return new zn(f)}function Cb(f,g,w,C,M=1,N=()=>1){let $=Object.create(fn.prototype);Yc($);let H=Object.create(ca.prototype);return Nh($,H,f,g,w,C,M,N),$}function Yc(f){f._state="writable",f._storedError=void 0,f._writer=void 0,f._writableStreamController=void 0,f._writeRequests=new A,f._inFlightWriteRequest=void 0,f._closeRequest=void 0,f._inFlightCloseRequest=void 0,f._pendingAbortRequest=void 0,f._backpressure=!1}function es(f){return!r(f)||!Object.prototype.hasOwnProperty.call(f,"_writableStreamController")?!1:f instanceof fn}function ua(f){return f._writer!==void 0}function Wl(f,g){var w;if(f._state==="closed"||f._state==="errored")return u(void 0);f._writableStreamController._abortReason=g,(w=f._writableStreamController._abortController)===null||w===void 0||w.abort(g);let C=f._state;if(C==="closed"||C==="errored")return u(void 0);if(f._pendingAbortRequest!==void 0)return f._pendingAbortRequest._promise;let M=!1;C==="erroring"&&(M=!0,g=void 0);let N=l(($,H)=>{f._pendingAbortRequest={_promise:void 0,_resolve:$,_reject:H,_reason:g,_wasAlreadyErroring:M}});return f._pendingAbortRequest._promise=N,M||ze(f,g),N}function Dh(f){let g=f._state;if(g==="closed"||g==="errored")return c(new TypeError(`The stream (in ${g} state) is not in the writable state and cannot be closed`));let w=l((M,N)=>{let $={_resolve:M,_reject:N};f._closeRequest=$}),C=f._writer;return C!==void 0&&f._backpressure&&g==="writable"&&ha(C),jh(f._writableStreamController),w}function Ab(f){return l((w,C)=>{let M={_resolve:w,_reject:C};f._writeRequests.push(M)})}function ql(f,g){if(f._state==="writable"){ze(f,g);return}ts(f)}function ze(f,g){let w=f._writableStreamController;f._state="erroring",f._storedError=g;let C=f._writer;C!==void 0&&Gl(C,g),!Hl(f)&&w._started&&ts(f)}function ts(f){f._state="errored",f._writableStreamController[F]();let g=f._storedError;if(f._writeRequests.forEach(M=>{M._reject(g)}),f._writeRequests=new A,f._pendingAbortRequest===void 0){Vl(f);return}let w=f._pendingAbortRequest;if(f._pendingAbortRequest=void 0,w._wasAlreadyErroring){w._reject(g),Vl(f);return}let C=f._writableStreamController[R](w._reason);p(C,()=>(w._resolve(),Vl(f),null),M=>(w._reject(M),Vl(f),null))}function to(f){f._inFlightWriteRequest._resolve(void 0),f._inFlightWriteRequest=void 0}function Pb(f,g){f._inFlightWriteRequest._reject(g),f._inFlightWriteRequest=void 0,ql(f,g)}function Mh(f){f._inFlightCloseRequest._resolve(void 0),f._inFlightCloseRequest=void 0,f._state==="erroring"&&(f._storedError=void 0,f._pendingAbortRequest!==void 0&&(f._pendingAbortRequest._resolve(),f._pendingAbortRequest=void 0)),f._state="closed";let w=f._writer;w!==void 0&&zh(w)}function Ob(f,g){f._inFlightCloseRequest._reject(g),f._inFlightCloseRequest=void 0,f._pendingAbortRequest!==void 0&&(f._pendingAbortRequest._reject(g),f._pendingAbortRequest=void 0),ql(f,g)}function hn(f){return!(f._closeRequest===void 0&&f._inFlightCloseRequest===void 0)}function Hl(f){return!(f._inFlightWriteRequest===void 0&&f._inFlightCloseRequest===void 0)}function _i(f){f._inFlightCloseRequest=f._closeRequest,f._closeRequest=void 0}function Gc(f){f._inFlightWriteRequest=f._writeRequests.shift()}function Vl(f){f._closeRequest!==void 0&&(f._closeRequest._reject(f._storedError),f._closeRequest=void 0);let g=f._writer;g!==void 0&&Xl(g,f._storedError)}function Vr(f,g){let w=f._writer;w!==void 0&&g!==f._backpressure&&(g?$b(w):ha(w)),f._backpressure=g}class zn{constructor(g){if(Ln(g,1,"WritableStreamDefaultWriter"),Rh(g,"First parameter"),ua(g))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=g,g._writer=this;let w=g._state;if(w==="writable")!hn(g)&&g._backpressure?Ql(this):Uh(this),Ne(this);else if(w==="erroring")is(this,g._storedError),Ne(this);else if(w==="closed")Uh(this),jb(this);else{let C=g._storedError;is(this,C),$h(this,C)}}get closed(){return Un(this)?this._closedPromise:c(ns("closed"))}get desiredSize(){if(!Un(this))throw ns("desiredSize");if(this._ownerWritableStream===void 0)throw fa("desiredSize");return Mb(this)}get ready(){return Un(this)?this._readyPromise:c(ns("ready"))}abort(g=void 0){return Un(this)?this._ownerWritableStream===void 0?c(fa("abort")):Rb(this,g):c(ns("abort"))}close(){if(!Un(this))return c(ns("close"));let g=this._ownerWritableStream;return g===void 0?c(fa("close")):hn(g)?c(new TypeError("Cannot close an already-closing stream")):Ih(this)}releaseLock(){if(!Un(this))throw ns("releaseLock");this._ownerWritableStream!==void 0&&Lh(this)}write(g=void 0){return Un(this)?this._ownerWritableStream===void 0?c(fa("write to")):Fh(this,g):c(ns("write"))}}Object.defineProperties(zn.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),i(zn.prototype.abort,"abort"),i(zn.prototype.close,"close"),i(zn.prototype.releaseLock,"releaseLock"),i(zn.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(zn.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Un(f){return!r(f)||!Object.prototype.hasOwnProperty.call(f,"_ownerWritableStream")?!1:f instanceof zn}function Rb(f,g){let w=f._ownerWritableStream;return Wl(w,g)}function Ih(f){let g=f._ownerWritableStream;return Dh(g)}function Db(f){let g=f._ownerWritableStream,w=g._state;return hn(g)||w==="closed"?u(void 0):w==="errored"?c(g._storedError):Ih(f)}function Yl(f,g){f._closedPromiseState==="pending"?Xl(f,g):Bb(f,g)}function Gl(f,g){f._readyPromiseState==="pending"?Wh(f,g):eu(f,g)}function Mb(f){let g=f._ownerWritableStream,w=g._state;return w==="errored"||w==="erroring"?null:w==="closed"?0:rs(g._writableStreamController)}function Lh(f){let g=f._ownerWritableStream,w=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Gl(f,w),Yl(f,w),g._writer=void 0,f._ownerWritableStream=void 0}function Fh(f,g){let w=f._ownerWritableStream,C=w._writableStreamController,M=Lb(C,g);if(w!==f._ownerWritableStream)return c(fa("write to"));let N=w._state;if(N==="errored")return c(w._storedError);if(hn(w)||N==="closed")return c(new TypeError("The stream is closing or closed and cannot be written to"));if(N==="erroring")return c(w._storedError);let $=Ab(w);return Fb(C,g,M),$}let Zc={};class ca{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Jc(this))throw Kl("abortReason");return this._abortReason}get signal(){if(!Jc(this))throw Kl("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(g=void 0){if(!Jc(this))throw Kl("error");this._controlledWritableStream._state==="writable"&&Bh(this,g)}[R](g){let w=this._abortAlgorithm(g);return Zl(this),w}[F](){mi(this)}}Object.defineProperties(ca.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ca.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Jc(f){return!r(f)||!Object.prototype.hasOwnProperty.call(f,"_controlledWritableStream")?!1:f instanceof ca}function Nh(f,g,w,C,M,N,$,H){g._controlledWritableStream=f,f._writableStreamController=g,g._queue=void 0,g._queueTotalSize=void 0,mi(g),g._abortReason=void 0,g._abortController=Tb(),g._started=!1,g._strategySizeAlgorithm=H,g._strategyHWM=$,g._writeAlgorithm=C,g._closeAlgorithm=M,g._abortAlgorithm=N;let oe=Xc(g);Vr(f,oe);let te=w(),ce=u(te);p(ce,()=>(g._started=!0,da(g),null),me=>(g._started=!0,ql(f,me),null))}function Ib(f,g,w,C){let M=Object.create(ca.prototype),N,$,H,oe;g.start!==void 0?N=()=>g.start(M):N=()=>{},g.write!==void 0?$=te=>g.write(te,M):$=()=>u(void 0),g.close!==void 0?H=()=>g.close():H=()=>u(void 0),g.abort!==void 0?oe=te=>g.abort(te):oe=()=>u(void 0),Nh(f,M,N,$,H,oe,w,C)}function Zl(f){f._writeAlgorithm=void 0,f._closeAlgorithm=void 0,f._abortAlgorithm=void 0,f._strategySizeAlgorithm=void 0}function jh(f){G(f,Zc,0),da(f)}function Lb(f,g){try{return f._strategySizeAlgorithm(g)}catch(w){return ro(f,w),1}}function rs(f){return f._strategyHWM-f._queueTotalSize}function Fb(f,g,w){try{G(f,g,w)}catch(M){ro(f,M);return}let C=f._controlledWritableStream;if(!hn(C)&&C._state==="writable"){let M=Xc(f);Vr(C,M)}da(f)}function da(f){let g=f._controlledWritableStream;if(!f._started||g._inFlightWriteRequest!==void 0)return;if(g._state==="erroring"){ts(g);return}if(f._queue.length===0)return;let C=cb(f);C===Zc?Kc(f):Nb(f,C)}function ro(f,g){f._controlledWritableStream._state==="writable"&&Bh(f,g)}function Kc(f){let g=f._controlledWritableStream;_i(g),sa(f);let w=f._closeAlgorithm();Zl(f),p(w,()=>(Mh(g),null),C=>(Ob(g,C),null))}function Nb(f,g){let w=f._controlledWritableStream;Gc(w);let C=f._writeAlgorithm(g);p(C,()=>{to(w);let M=w._state;if(sa(f),!hn(w)&&M==="writable"){let N=Xc(f);Vr(w,N)}return da(f),null},M=>(w._state==="writable"&&Zl(f),Pb(w,M),null))}function Xc(f){return rs(f)<=0}function Bh(f,g){let w=f._controlledWritableStream;Zl(f),ze(w,g)}function Jl(f){return new TypeError(`WritableStream.prototype.${f} can only be used on a WritableStream`)}function Kl(f){return new TypeError(`WritableStreamDefaultController.prototype.${f} can only be used on a WritableStreamDefaultController`)}function ns(f){return new TypeError(`WritableStreamDefaultWriter.prototype.${f} can only be used on a WritableStreamDefaultWriter`)}function fa(f){return new TypeError("Cannot "+f+" a stream using a released writer")}function Ne(f){f._closedPromise=l((g,w)=>{f._closedPromise_resolve=g,f._closedPromise_reject=w,f._closedPromiseState="pending"})}function $h(f,g){Ne(f),Xl(f,g)}function jb(f){Ne(f),zh(f)}function Xl(f,g){f._closedPromise_reject!==void 0&&(x(f._closedPromise),f._closedPromise_reject(g),f._closedPromise_resolve=void 0,f._closedPromise_reject=void 0,f._closedPromiseState="rejected")}function Bb(f,g){$h(f,g)}function zh(f){f._closedPromise_resolve!==void 0&&(f._closedPromise_resolve(void 0),f._closedPromise_resolve=void 0,f._closedPromise_reject=void 0,f._closedPromiseState="resolved")}function Ql(f){f._readyPromise=l((g,w)=>{f._readyPromise_resolve=g,f._readyPromise_reject=w}),f._readyPromiseState="pending"}function is(f,g){Ql(f),Wh(f,g)}function Uh(f){Ql(f),ha(f)}function Wh(f,g){f._readyPromise_reject!==void 0&&(x(f._readyPromise),f._readyPromise_reject(g),f._readyPromise_resolve=void 0,f._readyPromise_reject=void 0,f._readyPromiseState="rejected")}function $b(f){Ql(f)}function eu(f,g){is(f,g)}function ha(f){f._readyPromise_resolve!==void 0&&(f._readyPromise_resolve(void 0),f._readyPromise_resolve=void 0,f._readyPromise_reject=void 0,f._readyPromiseState="fulfilled")}function Qc(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof global!="undefined")return global}let ed=Qc();function qh(f){if(!(typeof f=="function"||typeof f=="object")||f.name!=="DOMException")return!1;try{return new f,!0}catch(g){return!1}}function zb(){let f=ed==null?void 0:ed.DOMException;return qh(f)?f:void 0}function td(){let f=function(w,C){this.message=w||"",this.name=C||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return i(f,"DOMException"),f.prototype=Object.create(Error.prototype),Object.defineProperty(f.prototype,"constructor",{value:f,writable:!0,configurable:!0}),f}let rd=zb()||td();function tu(f,g,w,C,M,N){let $=ta(f),H=Ul(g);f._disturbed=!0;let oe=!1,te=u(void 0);return l((ce,me)=>{let Be;if(N!==void 0){if(Be=()=>{let se=N.reason!==void 0?N.reason:new rd("Aborted","AbortError"),B=[];C||B.push(()=>g._state==="writable"?Wl(g,se):u(void 0)),M||B.push(()=>f._state==="readable"?Gt(f,se):u(void 0)),jt(()=>Promise.all(B.map(Ue=>Ue())),!0,se)},N.aborted){Be();return}N.addEventListener("abort",Be)}function Er(){return l((se,B)=>{function Ue(nr){nr?se():h(_a(),Ue,B)}Ue(!1)})}function _a(){return oe?u(!0):h(H._readyPromise,()=>l((se,B)=>{ra($,{_chunkSteps:Ue=>{te=h(Fh(H,Ue),void 0,e),se(!1)},_closeSteps:()=>se(!0),_errorSteps:B})}))}if(qn(f,$._closedPromise,se=>(C?Tr(!0,se):jt(()=>Wl(g,se),!0,se),null)),qn(g,H._closedPromise,se=>(M?Tr(!0,se):jt(()=>Gt(f,se),!0,se),null)),tt(f,$._closedPromise,()=>(w?Tr():jt(()=>Db(H)),null)),hn(g)||g._state==="closed"){let se=new TypeError("the destination writable stream closed before all data could be piped to it");M?Tr(!0,se):jt(()=>Gt(f,se),!0,se)}x(Er());function xi(){let se=te;return h(te,()=>se!==te?xi():void 0)}function qn(se,B,Ue){se._state==="errored"?Ue(se._storedError):y(B,Ue)}function tt(se,B,Ue){se._state==="closed"?Ue():_(B,Ue)}function jt(se,B,Ue){if(oe)return;oe=!0,g._state==="writable"&&!hn(g)?_(xi(),nr):nr();function nr(){return p(se(),()=>Hn(B,Ue),us=>Hn(!0,us)),null}}function Tr(se,B){oe||(oe=!0,g._state==="writable"&&!hn(g)?_(xi(),()=>Hn(se,B)):Hn(se,B))}function Hn(se,B){return Lh(H),ge($),N!==void 0&&N.removeEventListener("abort",Be),se?me(B):ce(void 0),null}})}class Wn{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!ru(this))throw Yt("desiredSize");return nd(this)}close(){if(!ru(this))throw Yt("close");if(!as(this))throw new TypeError("The stream is not in a state that permits close");ss(this)}enqueue(g=void 0){if(!ru(this))throw Yt("enqueue");if(!as(this))throw new TypeError("The stream is not in a state that permits enqueue");return pa(this,g)}error(g=void 0){if(!ru(this))throw Yt("error");Yr(this,g)}[I](g){mi(this);let w=this._cancelAlgorithm(g);return nu(this),w}[U](g){let w=this._controlledReadableStream;if(this._queue.length>0){let C=sa(this);this._closeRequested&&this._queue.length===0?(nu(this),so(w)):no(this),g._chunkSteps(C)}else ph(w,g),no(this)}[X](){}}Object.defineProperties(Wn.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),i(Wn.prototype.close,"close"),i(Wn.prototype.enqueue,"enqueue"),i(Wn.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Wn.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function ru(f){return!r(f)||!Object.prototype.hasOwnProperty.call(f,"_controlledReadableStream")?!1:f instanceof Wn}function no(f){if(!Hh(f))return;if(f._pulling){f._pullAgain=!0;return}f._pulling=!0;let w=f._pullAlgorithm();p(w,()=>(f._pulling=!1,f._pullAgain&&(f._pullAgain=!1,no(f)),null),C=>(Yr(f,C),null))}function Hh(f){let g=f._controlledReadableStream;return!as(f)||!f._started?!1:!!(yi(g)&&pi(g)>0||nd(f)>0)}function nu(f){f._pullAlgorithm=void 0,f._cancelAlgorithm=void 0,f._strategySizeAlgorithm=void 0}function ss(f){if(!as(f))return;let g=f._controlledReadableStream;f._closeRequested=!0,f._queue.length===0&&(nu(f),so(g))}function pa(f,g){if(!as(f))return;let w=f._controlledReadableStream;if(yi(w)&&pi(w)>0)$c(w,g,!1);else{let C;try{C=f._strategySizeAlgorithm(g)}catch(M){throw Yr(f,M),M}try{G(f,g,C)}catch(M){throw Yr(f,M),M}}no(f)}function Yr(f,g){let w=f._controlledReadableStream;w._state==="readable"&&(mi(f),nu(f),Qh(w,g))}function nd(f){let g=f._controlledReadableStream._state;return g==="errored"?null:g==="closed"?0:f._strategyHWM-f._queueTotalSize}function Ub(f){return!Hh(f)}function as(f){let g=f._controlledReadableStream._state;return!f._closeRequested&&g==="readable"}function Vh(f,g,w,C,M,N,$){g._controlledReadableStream=f,g._queue=void 0,g._queueTotalSize=void 0,mi(g),g._started=!1,g._closeRequested=!1,g._pullAgain=!1,g._pulling=!1,g._strategySizeAlgorithm=$,g._strategyHWM=N,g._pullAlgorithm=C,g._cancelAlgorithm=M,f._readableStreamController=g;let H=w();p(u(H),()=>(g._started=!0,no(g),null),oe=>(Yr(g,oe),null))}function Wb(f,g,w,C){let M=Object.create(Wn.prototype),N,$,H;g.start!==void 0?N=()=>g.start(M):N=()=>{},g.pull!==void 0?$=()=>g.pull(M):$=()=>u(void 0),g.cancel!==void 0?H=oe=>g.cancel(oe):H=()=>u(void 0),Vh(f,M,N,$,H,w,C)}function Yt(f){return new TypeError(`ReadableStreamDefaultController.prototype.${f} can only be used on a ReadableStreamDefaultController`)}function os(f,g){return Qe(f._readableStreamController)?qb(f):Yh(f)}function Yh(f,g){let w=ta(f),C=!1,M=!1,N=!1,$=!1,H,oe,te,ce,me,Be=l(tt=>{me=tt});function Er(){return C?(M=!0,u(void 0)):(C=!0,ra(w,{_chunkSteps:jt=>{k(()=>{M=!1;let Tr=jt,Hn=jt;N||pa(te._readableStreamController,Tr),$||pa(ce._readableStreamController,Hn),C=!1,M&&Er()})},_closeSteps:()=>{C=!1,N||ss(te._readableStreamController),$||ss(ce._readableStreamController),(!N||!$)&&me(void 0)},_errorSteps:()=>{C=!1}}),u(void 0))}function _a(tt){if(N=!0,H=tt,$){let jt=Ki([H,oe]),Tr=Gt(f,jt);me(Tr)}return Be}function xi(tt){if($=!0,oe=tt,N){let jt=Ki([H,oe]),Tr=Gt(f,jt);me(Tr)}return Be}function qn(){}return te=io(qn,Er,_a),ce=io(qn,Er,xi),y(w._closedPromise,tt=>(Yr(te._readableStreamController,tt),Yr(ce._readableStreamController,tt),(!N||!$)&&me(void 0),null)),[te,ce]}function qb(f){let g=ta(f),w=!1,C=!1,M=!1,N=!1,$=!1,H,oe,te,ce,me,Be=l(se=>{me=se});function Er(se){y(se._closedPromise,B=>(se!==g||(kr(te._readableStreamController,B),kr(ce._readableStreamController,B),(!N||!$)&&me(void 0)),null))}function _a(){$n(g)&&(ge(g),g=ta(f),Er(g)),ra(g,{_chunkSteps:B=>{k(()=>{C=!1,M=!1;let Ue=B,nr=B;if(!N&&!$)try{nr=ia(B)}catch(us){kr(te._readableStreamController,us),kr(ce._readableStreamController,us),me(Gt(f,us));return}N||Il(te._readableStreamController,Ue),$||Il(ce._readableStreamController,nr),w=!1,C?qn():M&&tt()})},_closeSteps:()=>{w=!1,N||oa(te._readableStreamController),$||oa(ce._readableStreamController),te._readableStreamController._pendingPullIntos.length>0&&Xa(te._readableStreamController,0),ce._readableStreamController._pendingPullIntos.length>0&&Xa(ce._readableStreamController,0),(!N||!$)&&me(void 0)},_errorSteps:()=>{w=!1}})}function xi(se,B){un(g)&&(ge(g),g=Eh(f),Er(g));let Ue=B?ce:te,nr=B?te:ce;Ah(g,se,1,{_chunkSteps:ye=>{k(()=>{C=!1,M=!1;let Vn=B?$:N;if(B?N:$)Vn||Fl(Ue._readableStreamController,ye);else{let cu;try{cu=ia(ye)}catch(cd){kr(Ue._readableStreamController,cd),kr(nr._readableStreamController,cd),me(Gt(f,cd));return}Vn||Fl(Ue._readableStreamController,ye),Il(nr._readableStreamController,cu)}w=!1,C?qn():M&&tt()})},_closeSteps:ye=>{w=!1;let Vn=B?$:N,uo=B?N:$;Vn||oa(Ue._readableStreamController),uo||oa(nr._readableStreamController),ye!==void 0&&(Vn||Fl(Ue._readableStreamController,ye),!uo&&nr._readableStreamController._pendingPullIntos.length>0&&Xa(nr._readableStreamController,0)),(!Vn||!uo)&&me(void 0)},_errorSteps:()=>{w=!1}})}function qn(){if(w)return C=!0,u(void 0);w=!0;let se=Ll(te._readableStreamController);return se===null?_a():xi(se._view,!1),u(void 0)}function tt(){if(w)return M=!0,u(void 0);w=!0;let se=Ll(ce._readableStreamController);return se===null?_a():xi(se._view,!0),u(void 0)}function jt(se){if(N=!0,H=se,$){let B=Ki([H,oe]),Ue=Gt(f,B);me(Ue)}return Be}function Tr(se){if($=!0,oe=se,N){let B=Ki([H,oe]),Ue=Gt(f,B);me(Ue)}return Be}function Hn(){}return te=Xh(Hn,qn,jt),ce=Xh(Hn,tt,Tr),Er(g),[te,ce]}function Gh(f){return r(f)&&typeof f.getReader!="undefined"}function Zh(f){return Gh(f)?Vb(f.getReader()):Hb(f)}function Hb(f){let g,w=Qi(f,"async"),C=e;function M(){let $;try{$=Rl(w)}catch(oe){return c(oe)}let H=u($);return S(H,oe=>{if(!r(oe))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(lb(oe))ss(g._readableStreamController);else{let ce=Dl(oe);pa(g._readableStreamController,ce)}})}function N($){let H=w.iterator,oe;try{oe=Xi(H,"return")}catch(me){return c(me)}if(oe===void 0)return u(void 0);let te;try{te=T(oe,H,[$])}catch(me){return c(me)}let ce=u(te);return S(ce,me=>{if(!r(me))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return g=io(C,M,N,0),g}function Vb(f){let g,w=e;function C(){let N;try{N=f.read()}catch($){return c($)}return S(N,$=>{if(!r($))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if($.done)ss(g._readableStreamController);else{let H=$.value;pa(g._readableStreamController,H)}})}function M(N){try{return u(f.cancel(N))}catch($){return c($)}}return g=io(w,C,M,0),g}function Jh(f,g){mt(f,g);let w=f,C=w==null?void 0:w.autoAllocateChunkSize,M=w==null?void 0:w.cancel,N=w==null?void 0:w.pull,$=w==null?void 0:w.start,H=w==null?void 0:w.type;return{autoAllocateChunkSize:C===void 0?void 0:jc(C,`${g} has member 'autoAllocateChunkSize' that`),cancel:M===void 0?void 0:Yb(M,w,`${g} has member 'cancel' that`),pull:N===void 0?void 0:Gb(N,w,`${g} has member 'pull' that`),start:$===void 0?void 0:Zb($,w,`${g} has member 'start' that`),type:H===void 0?void 0:Jb(H,`${g} has member 'type' that`)}}function Yb(f,g,w){return gt(f,w),C=>P(f,g,[C])}function Gb(f,g,w){return gt(f,w),C=>P(f,g,[C])}function Zb(f,g,w){return gt(f,w),C=>T(f,g,[C])}function Jb(f,g){if(f=`${f}`,f!=="bytes")throw new TypeError(`${g} '${f}' is not a valid enumeration value for ReadableStreamType`);return f}function Kb(f,g){return mt(f,g),{preventCancel:!!(f==null?void 0:f.preventCancel)}}function Kh(f,g){mt(f,g);let w=f==null?void 0:f.preventAbort,C=f==null?void 0:f.preventCancel,M=f==null?void 0:f.preventClose,N=f==null?void 0:f.signal;return N!==void 0&&Xb(N,`${g} has member 'signal' that`),{preventAbort:!!w,preventCancel:!!C,preventClose:!!M,signal:N}}function Xb(f,g){if(!kb(f))throw new TypeError(`${g} is not an AbortSignal.`)}function Qb(f,g){mt(f,g);let w=f==null?void 0:f.readable;Fc(w,"readable","ReadableWritablePair"),Bc(w,`${g} has member 'readable' that`);let C=f==null?void 0:f.writable;return Fc(C,"writable","ReadableWritablePair"),Rh(C,`${g} has member 'writable' that`),{readable:w,writable:C}}class At{constructor(g={},w={}){g===void 0?g=null:Lc(g,"First parameter");let C=zl(w,"Second parameter"),M=Jh(g,"First parameter");if(id(this),M.type==="bytes"){if(C.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let N=eo(C,0);Qa(this,M,N)}else{let N=$l(C),$=eo(C,1);Wb(this,M,$,N)}}get locked(){if(!bi(this))throw ls("locked");return yi(this)}cancel(g=void 0){return bi(this)?yi(this)?c(new TypeError("Cannot cancel a stream that already has a reader")):Gt(this,g):c(ls("cancel"))}getReader(g=void 0){if(!bi(this))throw ls("getReader");return Bn(g,"First parameter").mode===void 0?ta(this):Eh(this)}pipeThrough(g,w={}){if(!bi(this))throw ls("pipeThrough");Ln(g,1,"pipeThrough");let C=Qb(g,"First parameter"),M=Kh(w,"Second parameter");if(yi(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(ua(C.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let N=tu(this,C.writable,M.preventClose,M.preventAbort,M.preventCancel,M.signal);return x(N),C.readable}pipeTo(g,w={}){if(!bi(this))return c(ls("pipeTo"));if(g===void 0)return c("Parameter 1 is required in 'pipeTo'.");if(!es(g))return c(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let C;try{C=Kh(w,"Second parameter")}catch(M){return c(M)}return yi(this)?c(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):ua(g)?c(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):tu(this,g,C.preventClose,C.preventAbort,C.preventCancel,C.signal)}tee(){if(!bi(this))throw ls("tee");let g=os(this);return Ki(g)}values(g=void 0){if(!bi(this))throw ls("values");let w=Kb(g,"First parameter");return Al(this,w.preventCancel)}[na](g){return this.values(g)}static from(g){return Zh(g)}}Object.defineProperties(At,{from:{enumerable:!0}}),Object.defineProperties(At.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),i(At.from,"from"),i(At.prototype.cancel,"cancel"),i(At.prototype.getReader,"getReader"),i(At.prototype.pipeThrough,"pipeThrough"),i(At.prototype.pipeTo,"pipeTo"),i(At.prototype.tee,"tee"),i(At.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(At.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(At.prototype,na,{value:At.prototype.values,writable:!0,configurable:!0});function io(f,g,w,C=1,M=()=>1){let N=Object.create(At.prototype);id(N);let $=Object.create(Wn.prototype);return Vh(N,$,f,g,w,C,M),N}function Xh(f,g,w){let C=Object.create(At.prototype);id(C);let M=Object.create(Nn.prototype);return kh(C,M,f,g,w,0,void 0),C}function id(f){f._state="readable",f._reader=void 0,f._storedError=void 0,f._disturbed=!1}function bi(f){return!r(f)||!Object.prototype.hasOwnProperty.call(f,"_readableStreamController")?!1:f instanceof At}function yi(f){return f._reader!==void 0}function Gt(f,g){if(f._disturbed=!0,f._state==="closed")return u(void 0);if(f._state==="errored")return c(f._storedError);so(f);let w=f._reader;if(w!==void 0&&$n(w)){let M=w._readIntoRequests;w._readIntoRequests=new A,M.forEach(N=>{N._closeSteps(void 0)})}let C=f._readableStreamController[I](g);return S(C,e)}function so(f){f._state="closed";let g=f._reader;if(g!==void 0&&(Ft(g),un(g))){let w=g._readRequests;g._readRequests=new A,w.forEach(C=>{C._closeSteps()})}}function Qh(f,g){f._state="errored",f._storedError=g;let w=f._reader;w!==void 0&&(De(w,g),un(w)?mh(w,g):Oh(w,g))}function ls(f){return new TypeError(`ReadableStream.prototype.${f} can only be used on a ReadableStream`)}function ep(f,g){mt(f,g);let w=f==null?void 0:f.highWaterMark;return Fc(w,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Nc(w)}}let tp=f=>f.byteLength;i(tp,"size");class iu{constructor(g){Ln(g,1,"ByteLengthQueuingStrategy"),g=ep(g,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=g.highWaterMark}get highWaterMark(){if(!np(this))throw rp("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!np(this))throw rp("size");return tp}}Object.defineProperties(iu.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(iu.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function rp(f){return new TypeError(`ByteLengthQueuingStrategy.prototype.${f} can only be used on a ByteLengthQueuingStrategy`)}function np(f){return!r(f)||!Object.prototype.hasOwnProperty.call(f,"_byteLengthQueuingStrategyHighWaterMark")?!1:f instanceof iu}let sd=()=>1;i(sd,"size");class ao{constructor(g){Ln(g,1,"CountQueuingStrategy"),g=ep(g,"First parameter"),this._countQueuingStrategyHighWaterMark=g.highWaterMark}get highWaterMark(){if(!oo(this))throw ad("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!oo(this))throw ad("size");return sd}}Object.defineProperties(ao.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ao.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function ad(f){return new TypeError(`CountQueuingStrategy.prototype.${f} can only be used on a CountQueuingStrategy`)}function oo(f){return!r(f)||!Object.prototype.hasOwnProperty.call(f,"_countQueuingStrategyHighWaterMark")?!1:f instanceof ao}function ma(f,g){mt(f,g);let w=f==null?void 0:f.cancel,C=f==null?void 0:f.flush,M=f==null?void 0:f.readableType,N=f==null?void 0:f.start,$=f==null?void 0:f.transform,H=f==null?void 0:f.writableType;return{cancel:w===void 0?void 0:sp(w,f,`${g} has member 'cancel' that`),flush:C===void 0?void 0:su(C,f,`${g} has member 'flush' that`),readableType:M,start:N===void 0?void 0:ip(N,f,`${g} has member 'start' that`),transform:$===void 0?void 0:ga($,f,`${g} has member 'transform' that`),writableType:H}}function su(f,g,w){return gt(f,w),C=>P(f,g,[C])}function ip(f,g,w){return gt(f,w),C=>T(f,g,[C])}function ga(f,g,w){return gt(f,w),(C,M)=>P(f,g,[C,M])}function sp(f,g,w){return gt(f,w),C=>P(f,g,[C])}class lo{constructor(g={},w={},C={}){g===void 0&&(g=null);let M=zl(w,"Second parameter"),N=zl(C,"Third parameter"),$=ma(g,"First parameter");if($.readableType!==void 0)throw new RangeError("Invalid readableType specified");if($.writableType!==void 0)throw new RangeError("Invalid writableType specified");let H=eo(N,0),oe=$l(N),te=eo(M,1),ce=$l(M),me,Be=l(Er=>{me=Er});ey(this,Be,te,ce,H,oe),ry(this,$),$.start!==void 0?me($.start(this._transformStreamController)):me(void 0)}get readable(){if(!ap(this))throw cp("readable");return this._readable}get writable(){if(!ap(this))throw cp("writable");return this._writable}}Object.defineProperties(lo.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(lo.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});function ey(f,g,w,C,M,N){function $(){return g}function H(Be){return sy(f,Be)}function oe(Be){return ay(f,Be)}function te(){return oy(f)}f._writable=Cb($,H,te,oe,w,C);function ce(){return ly(f)}function me(Be){return uy(f,Be)}f._readable=io($,ce,me,M,N),f._backpressure=void 0,f._backpressureChangePromise=void 0,f._backpressureChangePromise_resolve=void 0,au(f,!0),f._transformStreamController=void 0}function ap(f){return!r(f)||!Object.prototype.hasOwnProperty.call(f,"_transformStreamController")?!1:f instanceof lo}function op(f,g){Yr(f._readable._readableStreamController,g),od(f,g)}function od(f,g){lu(f._transformStreamController),ro(f._writable._writableStreamController,g),ld(f)}function ld(f){f._backpressure&&au(f,!1)}function au(f,g){f._backpressureChangePromise!==void 0&&f._backpressureChangePromise_resolve(),f._backpressureChangePromise=l(w=>{f._backpressureChangePromise_resolve=w}),f._backpressure=g}class wi{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!ou(this))throw uu("desiredSize");let g=this._controlledTransformStream._readable._readableStreamController;return nd(g)}enqueue(g=void 0){if(!ou(this))throw uu("enqueue");lp(this,g)}error(g=void 0){if(!ou(this))throw uu("error");ny(this,g)}terminate(){if(!ou(this))throw uu("terminate");iy(this)}}Object.defineProperties(wi.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),i(wi.prototype.enqueue,"enqueue"),i(wi.prototype.error,"error"),i(wi.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(wi.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function ou(f){return!r(f)||!Object.prototype.hasOwnProperty.call(f,"_controlledTransformStream")?!1:f instanceof wi}function ty(f,g,w,C,M){g._controlledTransformStream=f,f._transformStreamController=g,g._transformAlgorithm=w,g._flushAlgorithm=C,g._cancelAlgorithm=M,g._finishPromise=void 0,g._finishPromise_resolve=void 0,g._finishPromise_reject=void 0}function ry(f,g){let w=Object.create(wi.prototype),C,M,N;g.transform!==void 0?C=$=>g.transform($,w):C=$=>{try{return lp(w,$),u(void 0)}catch(H){return c(H)}},g.flush!==void 0?M=()=>g.flush(w):M=()=>u(void 0),g.cancel!==void 0?N=$=>g.cancel($):N=()=>u(void 0),ty(f,w,C,M,N)}function lu(f){f._transformAlgorithm=void 0,f._flushAlgorithm=void 0,f._cancelAlgorithm=void 0}function lp(f,g){let w=f._controlledTransformStream,C=w._readable._readableStreamController;if(!as(C))throw new TypeError("Readable side is not in a state that permits enqueue");try{pa(C,g)}catch(N){throw od(w,N),w._readable._storedError}Ub(C)!==w._backpressure&&au(w,!0)}function ny(f,g){op(f._controlledTransformStream,g)}function up(f,g){let w=f._transformAlgorithm(g);return S(w,void 0,C=>{throw op(f._controlledTransformStream,C),C})}function iy(f){let g=f._controlledTransformStream,w=g._readable._readableStreamController;ss(w);let C=new TypeError("TransformStream terminated");od(g,C)}function sy(f,g){let w=f._transformStreamController;if(f._backpressure){let C=f._backpressureChangePromise;return S(C,()=>{let M=f._writable;if(M._state==="erroring")throw M._storedError;return up(w,g)})}return up(w,g)}function ay(f,g){let w=f._transformStreamController;if(w._finishPromise!==void 0)return w._finishPromise;let C=f._readable;w._finishPromise=l((N,$)=>{w._finishPromise_resolve=N,w._finishPromise_reject=$});let M=w._cancelAlgorithm(g);return lu(w),p(M,()=>(C._state==="errored"?vi(w,C._storedError):(Yr(C._readableStreamController,g),ud(w)),null),N=>(Yr(C._readableStreamController,N),vi(w,N),null)),w._finishPromise}function oy(f){let g=f._transformStreamController;if(g._finishPromise!==void 0)return g._finishPromise;let w=f._readable;g._finishPromise=l((M,N)=>{g._finishPromise_resolve=M,g._finishPromise_reject=N});let C=g._flushAlgorithm();return lu(g),p(C,()=>(w._state==="errored"?vi(g,w._storedError):(ss(w._readableStreamController),ud(g)),null),M=>(Yr(w._readableStreamController,M),vi(g,M),null)),g._finishPromise}function ly(f){return au(f,!1),f._backpressureChangePromise}function uy(f,g){let w=f._transformStreamController;if(w._finishPromise!==void 0)return w._finishPromise;let C=f._writable;w._finishPromise=l((N,$)=>{w._finishPromise_resolve=N,w._finishPromise_reject=$});let M=w._cancelAlgorithm(g);return lu(w),p(M,()=>(C._state==="errored"?vi(w,C._storedError):(ro(C._writableStreamController,g),ld(f),ud(w)),null),N=>(ro(C._writableStreamController,N),ld(f),vi(w,N),null)),w._finishPromise}function uu(f){return new TypeError(`TransformStreamDefaultController.prototype.${f} can only be used on a TransformStreamDefaultController`)}function ud(f){f._finishPromise_resolve!==void 0&&(f._finishPromise_resolve(),f._finishPromise_resolve=void 0,f._finishPromise_reject=void 0)}function vi(f,g){f._finishPromise_reject!==void 0&&(x(f._finishPromise),f._finishPromise_reject(g),f._finishPromise_resolve=void 0,f._finishPromise_reject=void 0)}function cp(f){return new TypeError(`TransformStream.prototype.${f} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=iu,t.CountQueuingStrategy=ao,t.ReadableByteStreamController=Nn,t.ReadableStream=At,t.ReadableStreamBYOBReader=gi,t.ReadableStreamBYOBRequest=qr,t.ReadableStreamDefaultController=Wn,t.ReadableStreamDefaultReader=ct,t.TransformStream=lo,t.TransformStreamDefaultController=wi,t.WritableStream=fn,t.WritableStreamDefaultController=ca,t.WritableStreamDefaultWriter=zn})});var $1=L(()=>{if(!globalThis.ReadableStream)try{let t=require("process"),{emitWarning:e}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,require("stream/web")),t.emitWarning=e}catch(r){throw t.emitWarning=e,r}}catch(t){Object.assign(globalThis,B1())}try{let{Blob:t}=require("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(r){let n=0,i=this;return new ReadableStream({type:"bytes",async pull(s){let o=await i.slice(n,Math.min(i.size,n+65536)).arrayBuffer();n+=o.byteLength,s.enqueue(new Uint8Array(o)),n===i.size&&s.close()}})})}catch(t){}});async function*gy(t,e=!0){for(let r of t)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(e){let n=r.byteOffset,i=r.byteOffset+r.byteLength;for(;n!==i;){let s=Math.min(i-n,z1),a=r.buffer.slice(n,n+s);n+=a.byteLength,yield new Uint8Array(a)}}else yield r;else{let n=0,i=r;for(;n!==i.size;){let a=await i.slice(n,Math.min(i.size,n+z1)).arrayBuffer();n+=a.byteLength,yield new Uint8Array(a)}}}var vH,z1,ps,hd,pu,hp,mu,U1,p5,ms,pd=fd(()=>{vH=He($1(),1);z1=65536;U1=(mu=class{constructor(e=[],r={}){Yn(this,ps,[]);Yn(this,hd,"");Yn(this,pu,0);Yn(this,hp,"transparent");if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof r!="object"&&typeof r!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");r===null&&(r={});let n=new TextEncoder;for(let s of e){let a;ArrayBuffer.isView(s)?a=new Uint8Array(s.buffer.slice(s.byteOffset,s.byteOffset+s.byteLength)):s instanceof ArrayBuffer?a=new Uint8Array(s.slice(0)):s instanceof mu?a=s:a=n.encode(`${s}`),Gr(this,pu,dt(this,pu)+(ArrayBuffer.isView(a)?a.byteLength:a.size)),dt(this,ps).push(a)}Gr(this,hp,`${r.endings===void 0?"transparent":r.endings}`);let i=r.type===void 0?"":String(r.type);Gr(this,hd,/^[\x20-\x7E]*$/.test(i)?i:"")}get size(){return dt(this,pu)}get type(){return dt(this,hd)}async text(){let e=new TextDecoder,r="";for await(let n of gy(dt(this,ps),!1))r+=e.decode(n,{stream:!0});return r+=e.decode(),r}async arrayBuffer(){let e=new Uint8Array(this.size),r=0;for await(let n of gy(dt(this,ps),!1))e.set(n,r),r+=n.length;return e.buffer}stream(){let e=gy(dt(this,ps),!0);return new globalThis.ReadableStream({type:"bytes",async pull(r){let n=await e.next();n.done?r.close():r.enqueue(n.value)},async cancel(){await e.return()}})}slice(e=0,r=this.size,n=""){let{size:i}=this,s=e<0?Math.max(i+e,0):Math.min(e,i),a=r<0?Math.max(i+r,0):Math.min(r,i),o=Math.max(a-s,0),l=dt(this,ps),u=[],c=0;for(let p of l){if(c>=o)break;let _=ArrayBuffer.isView(p)?p.byteLength:p.size;if(s&&_<=s)s-=_,a-=_;else{let y;ArrayBuffer.isView(p)?(y=p.subarray(s,Math.min(_,a)),c+=y.byteLength):(y=p.slice(s,Math.min(_,a)),c+=y.size),a-=_,u.push(y),s=0}}let h=new mu([],{type:String(n).toLowerCase()});return Gr(h,pu,o),Gr(h,ps,u),h}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}},ps=new WeakMap,hd=new WeakMap,pu=new WeakMap,hp=new WeakMap,mu);Object.defineProperties(U1.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});p5=U1,ms=p5});var md,gd,W1,m5,g5,gu,_y=fd(()=>{pd();m5=(W1=class extends ms{constructor(r,n,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,i);Yn(this,md,0);Yn(this,gd,"");i===null&&(i={});let s=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(s)||Gr(this,md,s),Gr(this,gd,String(n))}get name(){return dt(this,gd)}get lastModified(){return dt(this,md)}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof ms&&/^(File)$/.test(r[Symbol.toStringTag])}},md=new WeakMap,gd=new WeakMap,W1),g5=m5,gu=g5});function Y1(t,e=ms){var r=`${q1()}${q1()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],i=`--${r}\r
Content-Disposition: form-data; name="`;return t.forEach((s,a)=>typeof s=="string"?n.push(i+by(a)+`"\r
\r
${s.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):n.push(i+by(a)+`"; filename="${by(s.name,1)}"\r
Content-Type: ${s.type||"application/octet-stream"}\r
\r
`,s,`\r
`)),n.push(`--${r}--`),new e(n,{type:"multipart/form-data; boundary="+r})}var _d,_5,b5,q1,y5,H1,by,fo,pn,V1,ho,pp=fd(()=>{pd();_y();({toStringTag:_d,iterator:_5,hasInstance:b5}=Symbol),q1=Math.random,y5="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),H1=(t,e,r)=>(t+="",/^(Blob|File)$/.test(e&&e[_d])?[(r=r!==void 0?r+"":e[_d]=="File"?e.name:"blob",t),e.name!==r||e[_d]=="blob"?new gu([e],r,e):e]:[t,e+""]),by=(t,e)=>(e?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),fo=(t,e,r)=>{if(e.length<r)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${r} arguments required, but only ${e.length} present.`)},ho=(V1=class{constructor(...e){Yn(this,pn,[]);if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[_d](){return"FormData"}[_5](){return this.entries()}static[b5](e){return e&&typeof e=="object"&&e[_d]==="FormData"&&!y5.some(r=>typeof e[r]!="function")}append(...e){fo("append",arguments,2),dt(this,pn).push(H1(...e))}delete(e){fo("delete",arguments,1),e+="",Gr(this,pn,dt(this,pn).filter(([r])=>r!==e))}get(e){fo("get",arguments,1),e+="";for(var r=dt(this,pn),n=r.length,i=0;i<n;i++)if(r[i][0]===e)return r[i][1];return null}getAll(e,r){return fo("getAll",arguments,1),r=[],e+="",dt(this,pn).forEach(n=>n[0]===e&&r.push(n[1])),r}has(e){return fo("has",arguments,1),e+="",dt(this,pn).some(r=>r[0]===e)}forEach(e,r){fo("forEach",arguments,1);for(var[n,i]of this)e.call(r,i,n,this)}set(...e){fo("set",arguments,2);var r=[],n=!0;e=H1(...e),dt(this,pn).forEach(i=>{i[0]===e[0]?n&&(n=!r.push(e)):r.push(i)}),n&&r.push(e),Gr(this,pn,r)}*entries(){yield*dt(this,pn)}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}},pn=new WeakMap,V1)});var X1=L((NH,K1)=>{if(!globalThis.DOMException)try{let{MessageChannel:t}=require("worker_threads"),e=new t().port1,r=new ArrayBuffer;e.postMessage(r,[r,r])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}K1.exports=globalThis.DOMException});var gp,w5,$H,wy=fd(()=>{gp=require("fs"),w5=He(X1(),1);_y();pd();({stat:$H}=gp.promises)});var eS={};fy(eS,{toFormData:()=>C5});function T5(t){let e=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let r=e[2]||e[3]||"",n=r.slice(r.lastIndexOf("\\")+1);return n=n.replace(/%22/g,'"'),n=n.replace(/&#(\d{4});/g,(i,s)=>String.fromCharCode(s)),n}async function C5(t,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let r=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!r)throw new TypeError("no or bad content-type header, no multipart boundary");let n=new vy(r[1]||r[2]),i,s,a,o,l,u,c=[],h=new ho,p=k=>{a+=x.decode(k,{stream:!0})},_=k=>{c.push(k)},y=()=>{let k=new gu(c,u,{type:l});h.append(o,k)},S=()=>{h.append(o,a)},x=new TextDecoder("utf-8");x.decode(),n.onPartBegin=function(){n.onPartData=p,n.onPartEnd=S,i="",s="",a="",o="",l="",u=null,c.length=0},n.onHeaderField=function(k){i+=x.decode(k,{stream:!0})},n.onHeaderValue=function(k){s+=x.decode(k,{stream:!0})},n.onHeaderEnd=function(){if(s+=x.decode(),i=i.toLowerCase(),i==="content-disposition"){let k=s.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);k&&(o=k[2]||k[3]||""),u=T5(s),u&&(n.onPartData=_,n.onPartEnd=y)}else i==="content-type"&&(l=s);s="",i=""};for await(let k of t)n.write(k);return n.end(),h}var Si,Ve,Q1,ya,_p,bp,v5,yd,x5,S5,k5,E5,po,vy,tS=fd(()=>{wy();pp();Si=0,Ve={START_BOUNDARY:Si++,HEADER_FIELD_START:Si++,HEADER_FIELD:Si++,HEADER_VALUE_START:Si++,HEADER_VALUE:Si++,HEADER_VALUE_ALMOST_DONE:Si++,HEADERS_ALMOST_DONE:Si++,PART_DATA_START:Si++,PART_DATA:Si++,END:Si++},Q1=1,ya={PART_BOUNDARY:Q1,LAST_BOUNDARY:Q1*=2},_p=10,bp=13,v5=32,yd=45,x5=58,S5=97,k5=122,E5=t=>t|32,po=()=>{},vy=class{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=po,this.onHeaderField=po,this.onHeadersEnd=po,this.onHeaderValue=po,this.onPartBegin=po,this.onPartData=po,this.onPartEnd=po,this.boundaryChars={},e=`\r
--`+e;let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n),this.boundaryChars[r[n]]=!0;this.boundary=r,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=Ve.START_BOUNDARY}write(e){let r=0,n=e.length,i=this.index,{lookbehind:s,boundary:a,boundaryChars:o,index:l,state:u,flags:c}=this,h=this.boundary.length,p=h-1,_=e.length,y,S,x=O=>{this[O+"Mark"]=r},k=O=>{delete this[O+"Mark"]},T=(O,A,R,F)=>{(A===void 0||A!==R)&&this[O](F&&F.subarray(A,R))},P=(O,A)=>{let R=O+"Mark";R in this&&(A?(T(O,this[R],r,e),delete this[R]):(T(O,this[R],e.length,e),this[R]=0))};for(r=0;r<n;r++)switch(y=e[r],u){case Ve.START_BOUNDARY:if(l===a.length-2){if(y===yd)c|=ya.LAST_BOUNDARY;else if(y!==bp)return;l++;break}else if(l-1===a.length-2){if(c&ya.LAST_BOUNDARY&&y===yd)u=Ve.END,c=0;else if(!(c&ya.LAST_BOUNDARY)&&y===_p)l=0,T("onPartBegin"),u=Ve.HEADER_FIELD_START;else return;break}y!==a[l+2]&&(l=-2),y===a[l+2]&&l++;break;case Ve.HEADER_FIELD_START:u=Ve.HEADER_FIELD,x("onHeaderField"),l=0;case Ve.HEADER_FIELD:if(y===bp){k("onHeaderField"),u=Ve.HEADERS_ALMOST_DONE;break}if(l++,y===yd)break;if(y===x5){if(l===1)return;P("onHeaderField",!0),u=Ve.HEADER_VALUE_START;break}if(S=E5(y),S<S5||S>k5)return;break;case Ve.HEADER_VALUE_START:if(y===v5)break;x("onHeaderValue"),u=Ve.HEADER_VALUE;case Ve.HEADER_VALUE:y===bp&&(P("onHeaderValue",!0),T("onHeaderEnd"),u=Ve.HEADER_VALUE_ALMOST_DONE);break;case Ve.HEADER_VALUE_ALMOST_DONE:if(y!==_p)return;u=Ve.HEADER_FIELD_START;break;case Ve.HEADERS_ALMOST_DONE:if(y!==_p)return;T("onHeadersEnd"),u=Ve.PART_DATA_START;break;case Ve.PART_DATA_START:u=Ve.PART_DATA,x("onPartData");case Ve.PART_DATA:if(i=l,l===0){for(r+=p;r<_&&!(e[r]in o);)r+=h;r-=p,y=e[r]}if(l<a.length)a[l]===y?(l===0&&P("onPartData",!0),l++):l=0;else if(l===a.length)l++,y===bp?c|=ya.PART_BOUNDARY:y===yd?c|=ya.LAST_BOUNDARY:l=0;else if(l-1===a.length)if(c&ya.PART_BOUNDARY){if(l=0,y===_p){c&=~ya.PART_BOUNDARY,T("onPartEnd"),T("onPartBegin"),u=Ve.HEADER_FIELD_START;break}}else c&ya.LAST_BOUNDARY&&y===yd?(T("onPartEnd"),u=Ve.END,c=0):l=0;if(l>0)s[l-1]=y;else if(i>0){let O=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);T("onPartData",0,i,O),i=0,x("onPartData"),r--}break;case Ve.END:break;default:throw new Error(`Unexpected state entered: ${u}`)}P("onHeaderField"),P("onHeaderValue"),P("onPartData"),this.index=l,this.state=u,this.flags=c}end(){if(this.state===Ve.HEADER_FIELD_START&&this.index===0||this.state===Ve.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==Ve.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var hk=L((lZ,fk)=>{"use strict";fk.exports=function(t,e){if(typeof t!="string")throw new TypeError("Expected a string");return e=typeof e=="undefined"?"_":e,t.replace(/([a-z\d])([A-Z])/g,"$1"+e+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+e+"$2").toLowerCase()}});var wk=L((uZ,My)=>{"use strict";var HL=/[\p{Lu}]/u,VL=/[\p{Ll}]/u,pk=/^[\p{Lu}](?![\p{Lu}])/gu,_k=/([\p{Alpha}\p{N}_]|$)/u,bk=/[_.\- ]+/,YL=new RegExp("^"+bk.source),mk=new RegExp(bk.source+_k.source,"gu"),gk=new RegExp("\\d+"+_k.source,"gu"),GL=(t,e,r)=>{let n=!1,i=!1,s=!1;for(let a=0;a<t.length;a++){let o=t[a];n&&HL.test(o)?(t=t.slice(0,a)+"-"+t.slice(a),n=!1,s=i,i=!0,a++):i&&s&&VL.test(o)?(t=t.slice(0,a-1)+"-"+t.slice(a-1),s=i,i=!1,n=!0):(n=e(o)===o&&r(o)!==o,s=i,i=r(o)===o&&e(o)!==o)}return t},ZL=(t,e)=>(pk.lastIndex=0,t.replace(pk,r=>e(r))),JL=(t,e)=>(mk.lastIndex=0,gk.lastIndex=0,t.replace(mk,(r,n)=>e(n)).replace(gk,r=>e(r))),yk=(t,e)=>{if(!(typeof t=="string"||Array.isArray(t)))throw new TypeError("Expected the input to be `string | string[]`");if(e={pascalCase:!1,preserveConsecutiveUppercase:!1,...e},Array.isArray(t)?t=t.map(s=>s.trim()).filter(s=>s.length).join("-"):t=t.trim(),t.length===0)return"";let r=e.locale===!1?s=>s.toLowerCase():s=>s.toLocaleLowerCase(e.locale),n=e.locale===!1?s=>s.toUpperCase():s=>s.toLocaleUpperCase(e.locale);return t.length===1?e.pascalCase?n(t):r(t):(t!==r(t)&&(t=GL(t,r,n)),t=t.replace(YL,""),e.preserveConsecutiveUppercase?t=ZL(t,r):t=r(t),e.pascalCase&&(t=n(t.charAt(0))+t.slice(1)),JL(t,n))};My.exports=yk;My.exports.default=yk});var Pk=L((zZ,Ak)=>{function yn(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}Ak.exports=yn;yn.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};yn.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};yn.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0};yn.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};yn.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};yn.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};yn.prototype.start=yn.prototype.try;yn.prototype.errors=function(){return this._errors};yn.prototype.attempts=function(){return this._attempts};yn.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,n=0;n<this._errors.length;n++){var i=this._errors[n],s=i.message,a=(t[s]||0)+1;t[s]=a,a>=r&&(e=i,r=a)}return e}});var Ok=L(Lo=>{var aF=Pk();Lo.operation=function(t){var e=Lo.timeouts(t);return new aF(e,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})};Lo.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var r in t)e[r]=t[r];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],i=0;i<e.retries;i++)n.push(this.createTimeout(i,e));return t&&t.forever&&!n.length&&n.push(this.createTimeout(i,e)),n.sort(function(s,a){return s-a}),n};Lo.createTimeout=function(t,e){var r=e.randomize?Math.random()+1:1,n=Math.round(r*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return n=Math.min(n,e.maxTimeout),n};Lo.wrap=function(t,e,r){if(e instanceof Array&&(r=e,e=null),!r){r=[];for(var n in t)typeof t[n]=="function"&&r.push(n)}for(var i=0;i<r.length;i++){var s=r[i],a=t[s];t[s]=function(l){var u=Lo.operation(e),c=Array.prototype.slice.call(arguments,1),h=c.pop();c.push(function(p){u.retry(p)||(p&&(arguments[0]=u.mainError()),h.apply(this,arguments))}),u.attempt(function(){l.apply(t,c)})}.bind(t,a),t[s].options=e}}});var Dk=L((WZ,Rk)=>{Rk.exports=Ok()});var Np=L((qZ,Fp)=>{"use strict";var oF=Dk(),lF=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"],Lp=class extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}},uF=(t,e,r)=>{let n=r.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=n,t},cF=t=>lF.includes(t),Mk=(t,e)=>new Promise((r,n)=>{e={onFailedAttempt:()=>{},retries:10,...e};let i=oF.operation(e);i.attempt(async s=>{try{r(await t(s))}catch(a){if(!(a instanceof Error)){n(new TypeError(`Non-error was thrown: "${a}". You should only throw errors.`));return}if(a instanceof Lp)i.stop(),n(a.originalError);else if(a instanceof TypeError&&!cF(a.message))i.stop(),n(a);else{uF(a,s,e);try{await e.onFailedAttempt(a)}catch(o){n(o);return}i.retry(a)||n(i.mainError())}}})});Fp.exports=Mk;Fp.exports.default=Mk;Fp.exports.AbortError=Lp});var Ik=L(jp=>{"use strict";Object.defineProperty(jp,"__esModule",{value:!0});jp.default=void 0;var HZ=jp.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var Lk=L(Bp=>{"use strict";Object.defineProperty(Bp,"__esModule",{value:!0});Bp.default=void 0;var YZ=Bp.default="00000000-0000-0000-0000-000000000000"});var Fk=L($p=>{"use strict";Object.defineProperty($p,"__esModule",{value:!0});$p.default=void 0;var ZZ=$p.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var Dd=L(zp=>{"use strict";Object.defineProperty(zp,"__esModule",{value:!0});zp.default=void 0;var dF=fF(Fk());function fF(t){return t&&t.__esModule?t:{default:t}}function hF(t){return typeof t=="string"&&dF.default.test(t)}var KZ=zp.default=hF});var Md=L(Up=>{"use strict";Object.defineProperty(Up,"__esModule",{value:!0});Up.default=void 0;var pF=mF(Dd());function mF(t){return t&&t.__esModule?t:{default:t}}function gF(t){if(!(0,pF.default)(t))throw TypeError("Invalid UUID");let e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}var QZ=Up.default=gF});var ks=L(Id=>{"use strict";Object.defineProperty(Id,"__esModule",{value:!0});Id.default=void 0;Id.unsafeStringify=Nk;var _F=bF(Dd());function bF(t){return t&&t.__esModule?t:{default:t}}var Bt=[];for(let t=0;t<256;++t)Bt.push((t+256).toString(16).slice(1));function Nk(t,e=0){return(Bt[t[e+0]]+Bt[t[e+1]]+Bt[t[e+2]]+Bt[t[e+3]]+"-"+Bt[t[e+4]]+Bt[t[e+5]]+"-"+Bt[t[e+6]]+Bt[t[e+7]]+"-"+Bt[t[e+8]]+Bt[t[e+9]]+"-"+Bt[t[e+10]]+Bt[t[e+11]]+Bt[t[e+12]]+Bt[t[e+13]]+Bt[t[e+14]]+Bt[t[e+15]]).toLowerCase()}function yF(t,e=0){let r=Nk(t,e);if(!(0,_F.default)(r))throw TypeError("Stringified UUID is invalid");return r}var tJ=Id.default=yF});var Hp=L(Fy=>{"use strict";Object.defineProperty(Fy,"__esModule",{value:!0});Fy.default=xF;var wF=vF(require("crypto"));function vF(t){return t&&t.__esModule?t:{default:t}}var qp=new Uint8Array(256),Wp=qp.length;function xF(){return Wp>qp.length-16&&(wF.default.randomFillSync(qp),Wp=0),qp.slice(Wp,Wp+=16)}});var $y=L(Yp=>{"use strict";Object.defineProperty(Yp,"__esModule",{value:!0});Yp.default=void 0;var SF=EF(Hp()),kF=ks();function EF(t){return t&&t.__esModule?t:{default:t}}var Ny,Vp,jy=0,By=0;function TF(t,e,r){let n=e&&r||0,i=e||new Array(16);t=t||{};let s=t.node,a=t.clockseq;if(t._v6||(s||(s=Ny),a==null&&(a=Vp)),s==null||a==null){let p=t.random||(t.rng||SF.default)();s==null&&(s=[p[0],p[1],p[2],p[3],p[4],p[5]],!Ny&&!t._v6&&(s[0]|=1,Ny=s)),a==null&&(a=(p[6]<<8|p[7])&16383,Vp===void 0&&!t._v6&&(Vp=a))}let o=t.msecs!==void 0?t.msecs:Date.now(),l=t.nsecs!==void 0?t.nsecs:By+1,u=o-jy+(l-By)/1e4;if(u<0&&t.clockseq===void 0&&(a=a+1&16383),(u<0||o>jy)&&t.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");jy=o,By=l,Vp=a,o+=122192928e5;let c=((o&268435455)*1e4+l)%4294967296;i[n++]=c>>>24&255,i[n++]=c>>>16&255,i[n++]=c>>>8&255,i[n++]=c&255;let h=o/4294967296*1e4&268435455;i[n++]=h>>>8&255,i[n++]=h&255,i[n++]=h>>>24&15|16,i[n++]=h>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let p=0;p<6;++p)i[n+p]=s[p];return e||(0,kF.unsafeStringify)(i)}var iJ=Yp.default=TF});var Uy=L(zy=>{"use strict";Object.defineProperty(zy,"__esModule",{value:!0});zy.default=OF;var CF=PF(Md()),AF=ks();function PF(t){return t&&t.__esModule?t:{default:t}}function OF(t){let e=typeof t=="string"?(0,CF.default)(t):t,r=RF(e);return typeof t=="string"?(0,AF.unsafeStringify)(r):r}function RF(t,e=!1){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var Wy=L(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});Fo.URL=Fo.DNS=void 0;Fo.default=jF;var DF=ks(),MF=IF(Md());function IF(t){return t&&t.__esModule?t:{default:t}}function LF(t){t=unescape(encodeURIComponent(t));let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var FF=Fo.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",NF=Fo.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function jF(t,e,r){function n(i,s,a,o){var l;if(typeof i=="string"&&(i=LF(i)),typeof s=="string"&&(s=(0,MF.default)(s)),((l=s)===null||l===void 0?void 0:l.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(s),u.set(i,s.length),u=r(u),u[6]=u[6]&15|e,u[8]=u[8]&63|128,a){o=o||0;for(let c=0;c<16;++c)a[o+c]=u[c];return a}return(0,DF.unsafeStringify)(u)}try{n.name=t}catch(i){}return n.DNS=FF,n.URL=NF,n}});var jk=L(Gp=>{"use strict";Object.defineProperty(Gp,"__esModule",{value:!0});Gp.default=void 0;var BF=$F(require("crypto"));function $F(t){return t&&t.__esModule?t:{default:t}}function zF(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),BF.default.createHash("md5").update(t).digest()}var lJ=Gp.default=zF});var $k=L(Zp=>{"use strict";Object.defineProperty(Zp,"__esModule",{value:!0});Zp.default=void 0;var UF=Bk(Wy()),WF=Bk(jk());function Bk(t){return t&&t.__esModule?t:{default:t}}var qF=(0,UF.default)("v3",48,WF.default),cJ=Zp.default=qF});var zk=L(Jp=>{"use strict";Object.defineProperty(Jp,"__esModule",{value:!0});Jp.default=void 0;var HF=VF(require("crypto"));function VF(t){return t&&t.__esModule?t:{default:t}}var fJ=Jp.default={randomUUID:HF.default.randomUUID}});var qk=L(Kp=>{"use strict";Object.defineProperty(Kp,"__esModule",{value:!0});Kp.default=void 0;var Uk=Wk(zk()),YF=Wk(Hp()),GF=ks();function Wk(t){return t&&t.__esModule?t:{default:t}}function ZF(t,e,r){if(Uk.default.randomUUID&&!e&&!t)return Uk.default.randomUUID();t=t||{};let n=t.random||(t.rng||YF.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return(0,GF.unsafeStringify)(n)}var pJ=Kp.default=ZF});var Hk=L(Xp=>{"use strict";Object.defineProperty(Xp,"__esModule",{value:!0});Xp.default=void 0;var JF=KF(require("crypto"));function KF(t){return t&&t.__esModule?t:{default:t}}function XF(t){return Array.isArray(t)?t=Buffer.from(t):typeof t=="string"&&(t=Buffer.from(t,"utf8")),JF.default.createHash("sha1").update(t).digest()}var gJ=Xp.default=XF});var Yk=L(Qp=>{"use strict";Object.defineProperty(Qp,"__esModule",{value:!0});Qp.default=void 0;var QF=Vk(Wy()),eN=Vk(Hk());function Vk(t){return t&&t.__esModule?t:{default:t}}var tN=(0,QF.default)("v5",80,eN.default),bJ=Qp.default=tN});var Zk=L(qy=>{"use strict";Object.defineProperty(qy,"__esModule",{value:!0});qy.default=sN;var rN=ks(),nN=Gk($y()),iN=Gk(Uy());function Gk(t){return t&&t.__esModule?t:{default:t}}function sN(t={},e,r=0){let n=(0,nN.default)({...t,_v6:!0},new Uint8Array(16));if(n=(0,iN.default)(n),e){for(let i=0;i<16;i++)e[r+i]=n[i];return e}return(0,rN.unsafeStringify)(n)}});var Jk=L(Hy=>{"use strict";Object.defineProperty(Hy,"__esModule",{value:!0});Hy.default=uN;var aN=lN(Md()),oN=ks();function lN(t){return t&&t.__esModule?t:{default:t}}function uN(t){let e=typeof t=="string"?(0,aN.default)(t):t,r=cN(e);return typeof t=="string"?(0,oN.unsafeStringify)(r):r}function cN(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}});var Qk=L(em=>{"use strict";Object.defineProperty(em,"__esModule",{value:!0});em.default=void 0;var dN=hN(Hp()),fN=ks();function hN(t){return t&&t.__esModule?t:{default:t}}var Kk=null,Xk=null,Qn=0;function pN(t,e,r){t=t||{};let n=e&&r||0,i=e||new Uint8Array(16),s=t.random||(t.rng||dN.default)(),a=t.msecs!==void 0?t.msecs:Date.now(),o=t.seq!==void 0?t.seq:null,l=Xk,u=Kk;return a>Qn&&t.msecs===void 0&&(Qn=a,o!==null&&(l=null,u=null)),o!==null&&(o>2147483647&&(o=2147483647),l=o>>>19&4095,u=o&524287),(l===null||u===null)&&(l=s[6]&127,l=l<<8|s[7],u=s[8]&63,u=u<<8|s[9],u=u<<5|s[10]>>>3),a+1e4>Qn&&o===null?++u>524287&&(u=0,++l>4095&&(l=0,Qn++)):Qn=a,Xk=l,Kk=u,i[n++]=Qn/1099511627776&255,i[n++]=Qn/4294967296&255,i[n++]=Qn/16777216&255,i[n++]=Qn/65536&255,i[n++]=Qn/256&255,i[n++]=Qn&255,i[n++]=l>>>4&15|112,i[n++]=l&255,i[n++]=u>>>13&63|128,i[n++]=u>>>5&255,i[n++]=u<<3&255|s[10]&7,i[n++]=s[11],i[n++]=s[12],i[n++]=s[13],i[n++]=s[14],i[n++]=s[15],e||(0,fN.unsafeStringify)(i)}var xJ=em.default=pN});var eE=L(tm=>{"use strict";Object.defineProperty(tm,"__esModule",{value:!0});tm.default=void 0;var mN=gN(Dd());function gN(t){return t&&t.__esModule?t:{default:t}}function _N(t){if(!(0,mN.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var kJ=tm.default=_N});var tE=L(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Object.defineProperty(Jt,"MAX",{enumerable:!0,get:function(){return bN.default}});Object.defineProperty(Jt,"NIL",{enumerable:!0,get:function(){return yN.default}});Object.defineProperty(Jt,"parse",{enumerable:!0,get:function(){return wN.default}});Object.defineProperty(Jt,"stringify",{enumerable:!0,get:function(){return vN.default}});Object.defineProperty(Jt,"v1",{enumerable:!0,get:function(){return xN.default}});Object.defineProperty(Jt,"v1ToV6",{enumerable:!0,get:function(){return SN.default}});Object.defineProperty(Jt,"v3",{enumerable:!0,get:function(){return kN.default}});Object.defineProperty(Jt,"v4",{enumerable:!0,get:function(){return EN.default}});Object.defineProperty(Jt,"v5",{enumerable:!0,get:function(){return TN.default}});Object.defineProperty(Jt,"v6",{enumerable:!0,get:function(){return CN.default}});Object.defineProperty(Jt,"v6ToV1",{enumerable:!0,get:function(){return AN.default}});Object.defineProperty(Jt,"v7",{enumerable:!0,get:function(){return PN.default}});Object.defineProperty(Jt,"validate",{enumerable:!0,get:function(){return ON.default}});Object.defineProperty(Jt,"version",{enumerable:!0,get:function(){return RN.default}});var bN=Rr(Ik()),yN=Rr(Lk()),wN=Rr(Md()),vN=Rr(ks()),xN=Rr($y()),SN=Rr(Uy()),kN=Rr($k()),EN=Rr(qk()),TN=Rr(Yk()),CN=Rr(Zk()),AN=Rr(Jk()),PN=Rr(Qk()),ON=Rr(Dd()),RN=Rr(eE());function Rr(t){return t&&t.__esModule?t:{default:t}}});var cE=L((aK,Qy)=>{"use strict";var HN=Object.prototype.hasOwnProperty,ur="~";function Nd(){}Object.create&&(Nd.prototype=Object.create(null),new Nd().__proto__||(ur=!1));function VN(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function uE(t,e,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new VN(r,n||t,i),a=ur?ur+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],s]:t._events[a].push(s):(t._events[a]=s,t._eventsCount++),t}function um(t,e){--t._eventsCount===0?t._events=new Nd:delete t._events[e]}function Kt(){this._events=new Nd,this._eventsCount=0}Kt.prototype.eventNames=function(){var e=[],r,n;if(this._eventsCount===0)return e;for(n in r=this._events)HN.call(r,n)&&e.push(ur?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(r)):e};Kt.prototype.listeners=function(e){var r=ur?ur+e:e,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,a=new Array(s);i<s;i++)a[i]=n[i].fn;return a};Kt.prototype.listenerCount=function(e){var r=ur?ur+e:e,n=this._events[r];return n?n.fn?1:n.length:0};Kt.prototype.emit=function(e,r,n,i,s,a){var o=ur?ur+e:e;if(!this._events[o])return!1;var l=this._events[o],u=arguments.length,c,h;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,r),!0;case 3:return l.fn.call(l.context,r,n),!0;case 4:return l.fn.call(l.context,r,n,i),!0;case 5:return l.fn.call(l.context,r,n,i,s),!0;case 6:return l.fn.call(l.context,r,n,i,s,a),!0}for(h=1,c=new Array(u-1);h<u;h++)c[h-1]=arguments[h];l.fn.apply(l.context,c)}else{var p=l.length,_;for(h=0;h<p;h++)switch(l[h].once&&this.removeListener(e,l[h].fn,void 0,!0),u){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,r);break;case 3:l[h].fn.call(l[h].context,r,n);break;case 4:l[h].fn.call(l[h].context,r,n,i);break;default:if(!c)for(_=1,c=new Array(u-1);_<u;_++)c[_-1]=arguments[_];l[h].fn.apply(l[h].context,c)}}return!0};Kt.prototype.on=function(e,r,n){return uE(this,e,r,n,!1)};Kt.prototype.once=function(e,r,n){return uE(this,e,r,n,!0)};Kt.prototype.removeListener=function(e,r,n,i){var s=ur?ur+e:e;if(!this._events[s])return this;if(!r)return um(this,s),this;var a=this._events[s];if(a.fn)a.fn===r&&(!i||a.once)&&(!n||a.context===n)&&um(this,s);else{for(var o=0,l=[],u=a.length;o<u;o++)(a[o].fn!==r||i&&!a[o].once||n&&a[o].context!==n)&&l.push(a[o]);l.length?this._events[s]=l.length===1?l[0]:l:um(this,s)}return this};Kt.prototype.removeAllListeners=function(e){var r;return e?(r=ur?ur+e:e,this._events[r]&&um(this,r)):(this._events=new Nd,this._eventsCount=0),this};Kt.prototype.off=Kt.prototype.removeListener;Kt.prototype.addListener=Kt.prototype.on;Kt.prefixed=ur;Kt.EventEmitter=Kt;typeof Qy!="undefined"&&(Qy.exports=Kt)});var fE=L((oK,dE)=>{"use strict";dE.exports=(t,e)=>(e=e||(()=>{}),t.then(r=>new Promise(n=>{n(e())}).then(()=>r),r=>new Promise(n=>{n(e())}).then(()=>{throw r})))});var pE=L((lK,dm)=>{"use strict";var YN=fE(),cm=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},hE=(t,e,r)=>new Promise((n,i)=>{if(typeof e!="number"||e<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(e===1/0){n(t);return}let s=setTimeout(()=>{if(typeof r=="function"){try{n(r())}catch(l){i(l)}return}let a=typeof r=="string"?r:`Promise timed out after ${e} milliseconds`,o=r instanceof Error?r:new cm(a);typeof t.cancel=="function"&&t.cancel(),i(o)},e);YN(t.then(n,i),()=>{clearTimeout(s)})});dm.exports=hE;dm.exports.default=hE;dm.exports.TimeoutError=cm});var mE=L(e0=>{"use strict";Object.defineProperty(e0,"__esModule",{value:!0});function GN(t,e,r){let n=0,i=t.length;for(;i>0;){let s=i/2|0,a=n+s;r(t[a],e)<=0?(n=++a,i-=s+1):i=s}return n}e0.default=GN});var gE=L(r0=>{"use strict";Object.defineProperty(r0,"__esModule",{value:!0});var ZN=mE(),t0=class{constructor(){this._queue=[]}enqueue(e,r){r=Object.assign({priority:0},r);let n={priority:r.priority,run:e};if(this.size&&this._queue[this.size-1].priority>=r.priority){this._queue.push(n);return}let i=ZN.default(this._queue,n,(s,a)=>a.priority-s.priority);this._queue.splice(i,0,n)}dequeue(){let e=this._queue.shift();return e==null?void 0:e.run}filter(e){return this._queue.filter(r=>r.priority===e.priority).map(r=>r.run)}get size(){return this._queue.length}};r0.default=t0});var hm=L(i0=>{"use strict";Object.defineProperty(i0,"__esModule",{value:!0});var JN=cE(),_E=pE(),KN=gE(),fm=()=>{},XN=new _E.TimeoutError,n0=class extends JN{constructor(e){var r,n,i,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=fm,this._resolveIdle=fm,e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:KN.default},e),!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=e.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=e.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||e.interval===0,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=e.throwOnTimeout===!0,this._isPaused=e.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=fm,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=fm,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){let e=Date.now();if(this._intervalId===void 0){let r=this._intervalEnd-e;if(r<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},r)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){let e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){let r=this._queue.dequeue();return r?(this.emit("active"),r(),e&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((n,i)=>{let s=async()=>{this._pendingCount++,this._intervalCount++;try{let a=this._timeout===void 0&&r.timeout===void 0?e():_E.default(Promise.resolve(e()),r.timeout===void 0?this._timeout:r.timeout,()=>{(r.throwOnTimeout===void 0?this._throwOnTimeout:r.throwOnTimeout)&&i(XN)});n(await a)}catch(a){i(a)}this._next()};this._queue.enqueue(s,r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,r){return Promise.all(e.map(async n=>this.add(n,r)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(e=>{let r=this._resolveEmpty;this._resolveEmpty=()=>{r(),e()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(e=>{let r=this._resolveIdle;this._resolveIdle=()=>{r(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}};i0.default=n0});var Bd=L((wK,xE)=>{var c3="2.0.0",d3=Number.MAX_SAFE_INTEGER||9007199254740991,f3=16,h3=250,p3=["major","premajor","minor","preminor","patch","prepatch","prerelease"];xE.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:f3,MAX_SAFE_BUILD_LENGTH:h3,MAX_SAFE_INTEGER:d3,RELEASE_TYPES:p3,SEMVER_SPEC_VERSION:c3,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var $d=L((vK,SE)=>{var m3=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};SE.exports=m3});var Mu=L((Cs,kE)=>{var{MAX_SAFE_COMPONENT_LENGTH:u0,MAX_SAFE_BUILD_LENGTH:g3,MAX_LENGTH:_3}=Bd(),b3=$d();Cs=kE.exports={};var y3=Cs.re=[],w3=Cs.safeRe=[],J=Cs.src=[],K=Cs.t={},v3=0,c0="[a-zA-Z0-9-]",x3=[["\\s",1],["\\d",_3],[c0,g3]],S3=t=>{for(let[e,r]of x3)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},de=(t,e,r)=>{let n=S3(e),i=v3++;b3(t,i,e),K[t]=i,J[i]=e,y3[i]=new RegExp(e,r?"g":void 0),w3[i]=new RegExp(n,r?"g":void 0)};de("NUMERICIDENTIFIER","0|[1-9]\\d*");de("NUMERICIDENTIFIERLOOSE","\\d+");de("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${c0}*`);de("MAINVERSION",`(${J[K.NUMERICIDENTIFIER]})\\.(${J[K.NUMERICIDENTIFIER]})\\.(${J[K.NUMERICIDENTIFIER]})`);de("MAINVERSIONLOOSE",`(${J[K.NUMERICIDENTIFIERLOOSE]})\\.(${J[K.NUMERICIDENTIFIERLOOSE]})\\.(${J[K.NUMERICIDENTIFIERLOOSE]})`);de("PRERELEASEIDENTIFIER",`(?:${J[K.NUMERICIDENTIFIER]}|${J[K.NONNUMERICIDENTIFIER]})`);de("PRERELEASEIDENTIFIERLOOSE",`(?:${J[K.NUMERICIDENTIFIERLOOSE]}|${J[K.NONNUMERICIDENTIFIER]})`);de("PRERELEASE",`(?:-(${J[K.PRERELEASEIDENTIFIER]}(?:\\.${J[K.PRERELEASEIDENTIFIER]})*))`);de("PRERELEASELOOSE",`(?:-?(${J[K.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${J[K.PRERELEASEIDENTIFIERLOOSE]})*))`);de("BUILDIDENTIFIER",`${c0}+`);de("BUILD",`(?:\\+(${J[K.BUILDIDENTIFIER]}(?:\\.${J[K.BUILDIDENTIFIER]})*))`);de("FULLPLAIN",`v?${J[K.MAINVERSION]}${J[K.PRERELEASE]}?${J[K.BUILD]}?`);de("FULL",`^${J[K.FULLPLAIN]}$`);de("LOOSEPLAIN",`[v=\\s]*${J[K.MAINVERSIONLOOSE]}${J[K.PRERELEASELOOSE]}?${J[K.BUILD]}?`);de("LOOSE",`^${J[K.LOOSEPLAIN]}$`);de("GTLT","((?:<|>)?=?)");de("XRANGEIDENTIFIERLOOSE",`${J[K.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);de("XRANGEIDENTIFIER",`${J[K.NUMERICIDENTIFIER]}|x|X|\\*`);de("XRANGEPLAIN",`[v=\\s]*(${J[K.XRANGEIDENTIFIER]})(?:\\.(${J[K.XRANGEIDENTIFIER]})(?:\\.(${J[K.XRANGEIDENTIFIER]})(?:${J[K.PRERELEASE]})?${J[K.BUILD]}?)?)?`);de("XRANGEPLAINLOOSE",`[v=\\s]*(${J[K.XRANGEIDENTIFIERLOOSE]})(?:\\.(${J[K.XRANGEIDENTIFIERLOOSE]})(?:\\.(${J[K.XRANGEIDENTIFIERLOOSE]})(?:${J[K.PRERELEASELOOSE]})?${J[K.BUILD]}?)?)?`);de("XRANGE",`^${J[K.GTLT]}\\s*${J[K.XRANGEPLAIN]}$`);de("XRANGELOOSE",`^${J[K.GTLT]}\\s*${J[K.XRANGEPLAINLOOSE]}$`);de("COERCEPLAIN",`(^|[^\\d])(\\d{1,${u0}})(?:\\.(\\d{1,${u0}}))?(?:\\.(\\d{1,${u0}}))?`);de("COERCE",`${J[K.COERCEPLAIN]}(?:$|[^\\d])`);de("COERCEFULL",J[K.COERCEPLAIN]+`(?:${J[K.PRERELEASE]})?(?:${J[K.BUILD]})?(?:$|[^\\d])`);de("COERCERTL",J[K.COERCE],!0);de("COERCERTLFULL",J[K.COERCEFULL],!0);de("LONETILDE","(?:~>?)");de("TILDETRIM",`(\\s*)${J[K.LONETILDE]}\\s+`,!0);Cs.tildeTrimReplace="$1~";de("TILDE",`^${J[K.LONETILDE]}${J[K.XRANGEPLAIN]}$`);de("TILDELOOSE",`^${J[K.LONETILDE]}${J[K.XRANGEPLAINLOOSE]}$`);de("LONECARET","(?:\\^)");de("CARETTRIM",`(\\s*)${J[K.LONECARET]}\\s+`,!0);Cs.caretTrimReplace="$1^";de("CARET",`^${J[K.LONECARET]}${J[K.XRANGEPLAIN]}$`);de("CARETLOOSE",`^${J[K.LONECARET]}${J[K.XRANGEPLAINLOOSE]}$`);de("COMPARATORLOOSE",`^${J[K.GTLT]}\\s*(${J[K.LOOSEPLAIN]})$|^$`);de("COMPARATOR",`^${J[K.GTLT]}\\s*(${J[K.FULLPLAIN]})$|^$`);de("COMPARATORTRIM",`(\\s*)${J[K.GTLT]}\\s*(${J[K.LOOSEPLAIN]}|${J[K.XRANGEPLAIN]})`,!0);Cs.comparatorTrimReplace="$1$2$3";de("HYPHENRANGE",`^\\s*(${J[K.XRANGEPLAIN]})\\s+-\\s+(${J[K.XRANGEPLAIN]})\\s*$`);de("HYPHENRANGELOOSE",`^\\s*(${J[K.XRANGEPLAINLOOSE]})\\s+-\\s+(${J[K.XRANGEPLAINLOOSE]})\\s*$`);de("STAR","(<|>)?=?\\s*\\*");de("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");de("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var bm=L((xK,EE)=>{var k3=Object.freeze({loose:!0}),E3=Object.freeze({}),T3=t=>t?typeof t!="object"?k3:t:E3;EE.exports=T3});var d0=L((SK,AE)=>{var TE=/^[0-9]+$/,CE=(t,e)=>{let r=TE.test(t),n=TE.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},C3=(t,e)=>CE(e,t);AE.exports={compareIdentifiers:CE,rcompareIdentifiers:C3}});var Xt=L((kK,DE)=>{var ym=$d(),{MAX_LENGTH:PE,MAX_SAFE_INTEGER:wm}=Bd(),{safeRe:OE,t:RE}=Mu(),A3=bm(),{compareIdentifiers:Iu}=d0(),f0=class t{constructor(e,r){if(r=A3(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>PE)throw new TypeError(`version is longer than ${PE} characters`);ym("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?OE[RE.LOOSE]:OE[RE.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>wm||this.major<0)throw new TypeError("Invalid major version");if(this.minor>wm||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>wm||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let s=+i;if(s>=0&&s<wm)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ym("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),Iu(this.major,e.major)||Iu(this.minor,e.minor)||Iu(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(ym("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Iu(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(ym("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Iu(n,i)}while(++r)}inc(e,r,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),Iu(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};DE.exports=f0});var zo=L((EK,IE)=>{var ME=Xt(),P3=(t,e,r=!1)=>{if(t instanceof ME)return t;try{return new ME(t,e)}catch(n){if(!r)return null;throw n}};IE.exports=P3});var FE=L((TK,LE)=>{var O3=zo(),R3=(t,e)=>{let r=O3(t,e);return r?r.version:null};LE.exports=R3});var jE=L((CK,NE)=>{var D3=zo(),M3=(t,e)=>{let r=D3(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};NE.exports=M3});var zE=L((AK,$E)=>{var BE=Xt(),I3=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new BE(t instanceof BE?t.version:t,r).inc(e,n,i).version}catch(s){return null}};$E.exports=I3});var qE=L((PK,WE)=>{var UE=zo(),L3=(t,e)=>{let r=UE(t,null,!0),n=UE(e,null,!0),i=r.compare(n);if(i===0)return null;let s=i>0,a=s?r:n,o=s?n:r,l=!!a.prerelease.length;if(!!o.prerelease.length&&!l)return!o.patch&&!o.minor?"major":a.patch?"patch":a.minor?"minor":"major";let c=l?"pre":"";return r.major!==n.major?c+"major":r.minor!==n.minor?c+"minor":r.patch!==n.patch?c+"patch":"prerelease"};WE.exports=L3});var VE=L((OK,HE)=>{var F3=Xt(),N3=(t,e)=>new F3(t,e).major;HE.exports=N3});var GE=L((RK,YE)=>{var j3=Xt(),B3=(t,e)=>new j3(t,e).minor;YE.exports=B3});var JE=L((DK,ZE)=>{var $3=Xt(),z3=(t,e)=>new $3(t,e).patch;ZE.exports=z3});var XE=L((MK,KE)=>{var U3=zo(),W3=(t,e)=>{let r=U3(t,e);return r&&r.prerelease.length?r.prerelease:null};KE.exports=W3});var Sn=L((IK,eT)=>{var QE=Xt(),q3=(t,e,r)=>new QE(t,r).compare(new QE(e,r));eT.exports=q3});var rT=L((LK,tT)=>{var H3=Sn(),V3=(t,e,r)=>H3(e,t,r);tT.exports=V3});var iT=L((FK,nT)=>{var Y3=Sn(),G3=(t,e)=>Y3(t,e,!0);nT.exports=G3});var vm=L((NK,aT)=>{var sT=Xt(),Z3=(t,e,r)=>{let n=new sT(t,r),i=new sT(e,r);return n.compare(i)||n.compareBuild(i)};aT.exports=Z3});var lT=L((jK,oT)=>{var J3=vm(),K3=(t,e)=>t.sort((r,n)=>J3(r,n,e));oT.exports=K3});var cT=L((BK,uT)=>{var X3=vm(),Q3=(t,e)=>t.sort((r,n)=>X3(n,r,e));uT.exports=Q3});var zd=L(($K,dT)=>{var e8=Sn(),t8=(t,e,r)=>e8(t,e,r)>0;dT.exports=t8});var xm=L((zK,fT)=>{var r8=Sn(),n8=(t,e,r)=>r8(t,e,r)<0;fT.exports=n8});var h0=L((UK,hT)=>{var i8=Sn(),s8=(t,e,r)=>i8(t,e,r)===0;hT.exports=s8});var p0=L((WK,pT)=>{var a8=Sn(),o8=(t,e,r)=>a8(t,e,r)!==0;pT.exports=o8});var Sm=L((qK,mT)=>{var l8=Sn(),u8=(t,e,r)=>l8(t,e,r)>=0;mT.exports=u8});var km=L((HK,gT)=>{var c8=Sn(),d8=(t,e,r)=>c8(t,e,r)<=0;gT.exports=d8});var m0=L((VK,_T)=>{var f8=h0(),h8=p0(),p8=zd(),m8=Sm(),g8=xm(),_8=km(),b8=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return f8(t,r,n);case"!=":return h8(t,r,n);case">":return p8(t,r,n);case">=":return m8(t,r,n);case"<":return g8(t,r,n);case"<=":return _8(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};_T.exports=b8});var yT=L((YK,bT)=>{var y8=Xt(),w8=zo(),{safeRe:Em,t:Tm}=Mu(),v8=(t,e)=>{if(t instanceof y8)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?Em[Tm.COERCEFULL]:Em[Tm.COERCE]);else{let l=e.includePrerelease?Em[Tm.COERCERTLFULL]:Em[Tm.COERCERTL],u;for(;(u=l.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||u.index+u[0].length!==r.index+r[0].length)&&(r=u),l.lastIndex=u.index+u[1].length+u[2].length;l.lastIndex=-1}if(r===null)return null;let n=r[2],i=r[3]||"0",s=r[4]||"0",a=e.includePrerelease&&r[5]?`-${r[5]}`:"",o=e.includePrerelease&&r[6]?`+${r[6]}`:"";return w8(`${n}.${i}.${s}${a}${o}`,e)};bT.exports=v8});var vT=L((GK,wT)=>{var g0=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};wT.exports=g0});var kn=L((ZK,ET)=>{var x8=/\s+/g,_0=class t{constructor(e,r){if(r=k8(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof b0)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(x8," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!ST(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&R8(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&P8)|(this.options.loose&&O8))+":"+e,i=xT.get(n);if(i)return i;let s=this.options.loose,a=s?Dr[cr.HYPHENRANGELOOSE]:Dr[cr.HYPHENRANGE];e=e.replace(a,z8(this.options.includePrerelease)),Ze("hyphen replace",e),e=e.replace(Dr[cr.COMPARATORTRIM],T8),Ze("comparator trim",e),e=e.replace(Dr[cr.TILDETRIM],C8),Ze("tilde trim",e),e=e.replace(Dr[cr.CARETTRIM],A8),Ze("caret trim",e);let o=e.split(" ").map(h=>D8(h,this.options)).join(" ").split(/\s+/).map(h=>$8(h,this.options));s&&(o=o.filter(h=>(Ze("loose invalid filter",h,this.options),!!h.match(Dr[cr.COMPARATORLOOSE])))),Ze("range list",o);let l=new Map,u=o.map(h=>new b0(h,this.options));for(let h of u){if(ST(h))return[h];l.set(h.value,h)}l.size>1&&l.has("")&&l.delete("");let c=[...l.values()];return xT.set(n,c),c}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>kT(n,r)&&e.set.some(i=>kT(i,r)&&n.every(s=>i.every(a=>s.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new E8(e,this.options)}catch(r){return!1}for(let r=0;r<this.set.length;r++)if(U8(this.set[r],e,this.options))return!0;return!1}};ET.exports=_0;var S8=vT(),xT=new S8,k8=bm(),b0=Ud(),Ze=$d(),E8=Xt(),{safeRe:Dr,t:cr,comparatorTrimReplace:T8,tildeTrimReplace:C8,caretTrimReplace:A8}=Mu(),{FLAG_INCLUDE_PRERELEASE:P8,FLAG_LOOSE:O8}=Bd(),ST=t=>t.value==="<0.0.0-0",R8=t=>t.value==="",kT=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(s=>i.intersects(s,e)),i=n.pop();return r},D8=(t,e)=>(Ze("comp",t,e),t=L8(t,e),Ze("caret",t),t=M8(t,e),Ze("tildes",t),t=N8(t,e),Ze("xrange",t),t=B8(t,e),Ze("stars",t),t),dr=t=>!t||t.toLowerCase()==="x"||t==="*",M8=(t,e)=>t.trim().split(/\s+/).map(r=>I8(r,e)).join(" "),I8=(t,e)=>{let r=e.loose?Dr[cr.TILDELOOSE]:Dr[cr.TILDE];return t.replace(r,(n,i,s,a,o)=>{Ze("tilde",t,n,i,s,a,o);let l;return dr(i)?l="":dr(s)?l=`>=${i}.0.0 <${+i+1}.0.0-0`:dr(a)?l=`>=${i}.${s}.0 <${i}.${+s+1}.0-0`:o?(Ze("replaceTilde pr",o),l=`>=${i}.${s}.${a}-${o} <${i}.${+s+1}.0-0`):l=`>=${i}.${s}.${a} <${i}.${+s+1}.0-0`,Ze("tilde return",l),l})},L8=(t,e)=>t.trim().split(/\s+/).map(r=>F8(r,e)).join(" "),F8=(t,e)=>{Ze("caret",t,e);let r=e.loose?Dr[cr.CARETLOOSE]:Dr[cr.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,s,a,o,l)=>{Ze("caret",t,i,s,a,o,l);let u;return dr(s)?u="":dr(a)?u=`>=${s}.0.0${n} <${+s+1}.0.0-0`:dr(o)?s==="0"?u=`>=${s}.${a}.0${n} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.0${n} <${+s+1}.0.0-0`:l?(Ze("replaceCaret pr",l),s==="0"?a==="0"?u=`>=${s}.${a}.${o}-${l} <${s}.${a}.${+o+1}-0`:u=`>=${s}.${a}.${o}-${l} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${o}-${l} <${+s+1}.0.0-0`):(Ze("no pr"),s==="0"?a==="0"?u=`>=${s}.${a}.${o}${n} <${s}.${a}.${+o+1}-0`:u=`>=${s}.${a}.${o}${n} <${s}.${+a+1}.0-0`:u=`>=${s}.${a}.${o} <${+s+1}.0.0-0`),Ze("caret return",u),u})},N8=(t,e)=>(Ze("replaceXRanges",t,e),t.split(/\s+/).map(r=>j8(r,e)).join(" ")),j8=(t,e)=>{t=t.trim();let r=e.loose?Dr[cr.XRANGELOOSE]:Dr[cr.XRANGE];return t.replace(r,(n,i,s,a,o,l)=>{Ze("xRange",t,n,i,s,a,o,l);let u=dr(s),c=u||dr(a),h=c||dr(o),p=h;return i==="="&&p&&(i=""),l=e.includePrerelease?"-0":"",u?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&p?(c&&(a=0),o=0,i===">"?(i=">=",c?(s=+s+1,a=0,o=0):(a=+a+1,o=0)):i==="<="&&(i="<",c?s=+s+1:a=+a+1),i==="<"&&(l="-0"),n=`${i+s}.${a}.${o}${l}`):c?n=`>=${s}.0.0${l} <${+s+1}.0.0-0`:h&&(n=`>=${s}.${a}.0${l} <${s}.${+a+1}.0-0`),Ze("xRange return",n),n})},B8=(t,e)=>(Ze("replaceStars",t,e),t.trim().replace(Dr[cr.STAR],"")),$8=(t,e)=>(Ze("replaceGTE0",t,e),t.trim().replace(Dr[e.includePrerelease?cr.GTE0PRE:cr.GTE0],"")),z8=t=>(e,r,n,i,s,a,o,l,u,c,h,p)=>(dr(n)?r="":dr(i)?r=`>=${n}.0.0${t?"-0":""}`:dr(s)?r=`>=${n}.${i}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,dr(u)?l="":dr(c)?l=`<${+u+1}.0.0-0`:dr(h)?l=`<${u}.${+c+1}.0-0`:p?l=`<=${u}.${c}.${h}-${p}`:t?l=`<${u}.${c}.${+h+1}-0`:l=`<=${l}`,`${r} ${l}`.trim()),U8=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Ze(t[n].semver),t[n].semver!==b0.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var Ud=L((JK,RT)=>{var Wd=Symbol("SemVer ANY"),v0=class t{static get ANY(){return Wd}constructor(e,r){if(r=TT(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),w0("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===Wd?this.value="":this.value=this.operator+this.semver.version,w0("comp",this)}parse(e){let r=this.options.loose?CT[AT.COMPARATORLOOSE]:CT[AT.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new PT(n[2],this.options.loose):this.semver=Wd}toString(){return this.value}test(e){if(w0("Comparator.test",e,this.options.loose),this.semver===Wd||e===Wd)return!0;if(typeof e=="string")try{e=new PT(e,this.options)}catch(r){return!1}return y0(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new OT(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new OT(this.value,r).test(e.semver):(r=TT(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||y0(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||y0(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};RT.exports=v0;var TT=bm(),{safeRe:CT,t:AT}=Mu(),y0=m0(),w0=$d(),PT=Xt(),OT=kn()});var qd=L((KK,DT)=>{var W8=kn(),q8=(t,e,r)=>{try{e=new W8(e,r)}catch(n){return!1}return e.test(t)};DT.exports=q8});var IT=L((XK,MT)=>{var H8=kn(),V8=(t,e)=>new H8(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));MT.exports=V8});var FT=L((QK,LT)=>{var Y8=Xt(),G8=kn(),Z8=(t,e,r)=>{let n=null,i=null,s=null;try{s=new G8(e,r)}catch(a){return null}return t.forEach(a=>{s.test(a)&&(!n||i.compare(a)===-1)&&(n=a,i=new Y8(n,r))}),n};LT.exports=Z8});var jT=L((eX,NT)=>{var J8=Xt(),K8=kn(),X8=(t,e,r)=>{let n=null,i=null,s=null;try{s=new K8(e,r)}catch(a){return null}return t.forEach(a=>{s.test(a)&&(!n||i.compare(a)===1)&&(n=a,i=new J8(n,r))}),n};NT.exports=X8});var zT=L((tX,$T)=>{var x0=Xt(),Q8=kn(),BT=zd(),e4=(t,e)=>{t=new Q8(t,e);let r=new x0("0.0.0");if(t.test(r)||(r=new x0("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){let i=t.set[n],s=null;i.forEach(a=>{let o=new x0(a.semver.version);switch(a.operator){case">":o.prerelease.length===0?o.patch++:o.prerelease.push(0),o.raw=o.format();case"":case">=":(!s||BT(o,s))&&(s=o);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),s&&(!r||BT(r,s))&&(r=s)}return r&&t.test(r)?r:null};$T.exports=e4});var WT=L((rX,UT)=>{var t4=kn(),r4=(t,e)=>{try{return new t4(t,e).range||"*"}catch(r){return null}};UT.exports=r4});var Cm=L((nX,YT)=>{var n4=Xt(),VT=Ud(),{ANY:i4}=VT,s4=kn(),a4=qd(),qT=zd(),HT=xm(),o4=km(),l4=Sm(),u4=(t,e,r,n)=>{t=new n4(t,n),e=new s4(e,n);let i,s,a,o,l;switch(r){case">":i=qT,s=o4,a=HT,o=">",l=">=";break;case"<":i=HT,s=l4,a=qT,o="<",l="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a4(t,e,n))return!1;for(let u=0;u<e.set.length;++u){let c=e.set[u],h=null,p=null;if(c.forEach(_=>{_.semver===i4&&(_=new VT(">=0.0.0")),h=h||_,p=p||_,i(_.semver,h.semver,n)?h=_:a(_.semver,p.semver,n)&&(p=_)}),h.operator===o||h.operator===l||(!p.operator||p.operator===o)&&s(t,p.semver))return!1;if(p.operator===l&&a(t,p.semver))return!1}return!0};YT.exports=u4});var ZT=L((iX,GT)=>{var c4=Cm(),d4=(t,e,r)=>c4(t,e,">",r);GT.exports=d4});var KT=L((sX,JT)=>{var f4=Cm(),h4=(t,e,r)=>f4(t,e,"<",r);JT.exports=h4});var eC=L((aX,QT)=>{var XT=kn(),p4=(t,e,r)=>(t=new XT(t,r),e=new XT(e,r),t.intersects(e,r));QT.exports=p4});var rC=L((oX,tC)=>{var m4=qd(),g4=Sn();tC.exports=(t,e,r)=>{let n=[],i=null,s=null,a=t.sort((c,h)=>g4(c,h,r));for(let c of a)m4(c,e,r)?(s=c,i||(i=c)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);let o=[];for(let[c,h]of n)c===h?o.push(c):!h&&c===a[0]?o.push("*"):h?c===a[0]?o.push(`<=${h}`):o.push(`${c} - ${h}`):o.push(`>=${c}`);let l=o.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return l.length<u.length?l:e}});var lC=L((lX,oC)=>{var nC=kn(),k0=Ud(),{ANY:S0}=k0,Hd=qd(),E0=Sn(),_4=(t,e,r={})=>{if(t===e)return!0;t=new nC(t,r),e=new nC(e,r);let n=!1;e:for(let i of t.set){for(let s of e.set){let a=y4(i,s,r);if(n=n||a!==null,a)continue e}if(n)return!1}return!0},b4=[new k0(">=0.0.0-0")],iC=[new k0(">=0.0.0")],y4=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===S0){if(e.length===1&&e[0].semver===S0)return!0;r.includePrerelease?t=b4:t=iC}if(e.length===1&&e[0].semver===S0){if(r.includePrerelease)return!0;e=iC}let n=new Set,i,s;for(let _ of t)_.operator===">"||_.operator===">="?i=sC(i,_,r):_.operator==="<"||_.operator==="<="?s=aC(s,_,r):n.add(_.semver);if(n.size>1)return null;let a;if(i&&s){if(a=E0(i.semver,s.semver,r),a>0)return null;if(a===0&&(i.operator!==">="||s.operator!=="<="))return null}for(let _ of n){if(i&&!Hd(_,String(i),r)||s&&!Hd(_,String(s),r))return null;for(let y of e)if(!Hd(_,String(y),r))return!1;return!0}let o,l,u,c,h=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,p=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;h&&h.prerelease.length===1&&s.operator==="<"&&h.prerelease[0]===0&&(h=!1);for(let _ of e){if(c=c||_.operator===">"||_.operator===">=",u=u||_.operator==="<"||_.operator==="<=",i){if(p&&_.semver.prerelease&&_.semver.prerelease.length&&_.semver.major===p.major&&_.semver.minor===p.minor&&_.semver.patch===p.patch&&(p=!1),_.operator===">"||_.operator===">="){if(o=sC(i,_,r),o===_&&o!==i)return!1}else if(i.operator===">="&&!Hd(i.semver,String(_),r))return!1}if(s){if(h&&_.semver.prerelease&&_.semver.prerelease.length&&_.semver.major===h.major&&_.semver.minor===h.minor&&_.semver.patch===h.patch&&(h=!1),_.operator==="<"||_.operator==="<="){if(l=aC(s,_,r),l===_&&l!==s)return!1}else if(s.operator==="<="&&!Hd(s.semver,String(_),r))return!1}if(!_.operator&&(s||i)&&a!==0)return!1}return!(i&&u&&!s&&a!==0||s&&c&&!i&&a!==0||p||h)},sC=(t,e,r)=>{if(!t)return e;let n=E0(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},aC=(t,e,r)=>{if(!t)return e;let n=E0(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};oC.exports=_4});var Am=L((uX,dC)=>{var T0=Mu(),uC=Bd(),w4=Xt(),cC=d0(),v4=zo(),x4=FE(),S4=jE(),k4=zE(),E4=qE(),T4=VE(),C4=GE(),A4=JE(),P4=XE(),O4=Sn(),R4=rT(),D4=iT(),M4=vm(),I4=lT(),L4=cT(),F4=zd(),N4=xm(),j4=h0(),B4=p0(),$4=Sm(),z4=km(),U4=m0(),W4=yT(),q4=Ud(),H4=kn(),V4=qd(),Y4=IT(),G4=FT(),Z4=jT(),J4=zT(),K4=WT(),X4=Cm(),Q4=ZT(),ej=KT(),tj=eC(),rj=rC(),nj=lC();dC.exports={parse:v4,valid:x4,clean:S4,inc:k4,diff:E4,major:T4,minor:C4,patch:A4,prerelease:P4,compare:O4,rcompare:R4,compareLoose:D4,compareBuild:M4,sort:I4,rsort:L4,gt:F4,lt:N4,eq:j4,neq:B4,gte:$4,lte:z4,cmp:U4,coerce:W4,Comparator:q4,Range:H4,satisfies:V4,toComparators:Y4,maxSatisfying:G4,minSatisfying:Z4,minVersion:J4,validRange:K4,outside:X4,gtr:Q4,ltr:ej,intersects:tj,simplifyRange:rj,subset:nj,SemVer:w4,re:T0.re,src:T0.src,tokens:T0.t,SEMVER_SPEC_VERSION:uC.SEMVER_SPEC_VERSION,RELEASE_TYPES:uC.RELEASE_TYPES,compareIdentifiers:cC.compareIdentifiers,rcompareIdentifiers:cC.rcompareIdentifiers}});var vC=L((jX,wC)=>{"use strict";var bC=(t=0)=>e=>`\x1B[${38+t};5;${e}m`,yC=(t=0)=>(e,r,n)=>`\x1B[${38+t};2;${e};${r};${n}m`;function gj(){let t=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(let[r,n]of Object.entries(e)){for(let[i,s]of Object.entries(n))e[i]={open:`\x1B[${s[0]}m`,close:`\x1B[${s[1]}m`},n[i]=e[i],t.set(s[0],s[1]);Object.defineProperty(e,r,{value:n,enumerable:!1})}return Object.defineProperty(e,"codes",{value:t,enumerable:!1}),e.color.close="\x1B[39m",e.bgColor.close="\x1B[49m",e.color.ansi256=bC(),e.color.ansi16m=yC(),e.bgColor.ansi256=bC(10),e.bgColor.ansi16m=yC(10),Object.defineProperties(e,{rgbToAnsi256:{value:(r,n,i)=>r===n&&n===i?r<8?16:r>248?231:Math.round((r-8)/247*24)+232:16+36*Math.round(r/255*5)+6*Math.round(n/255*5)+Math.round(i/255*5),enumerable:!1},hexToRgb:{value:r=>{let n=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(r.toString(16));if(!n)return[0,0,0];let{colorString:i}=n.groups;i.length===3&&(i=i.split("").map(a=>a+a).join(""));let s=Number.parseInt(i,16);return[s>>16&255,s>>8&255,s&255]},enumerable:!1},hexToAnsi256:{value:r=>e.rgbToAnsi256(...e.hexToRgb(r)),enumerable:!1}}),e}Object.defineProperty(wC,"exports",{enumerable:!0,get:gj})});var NC=L(Ym=>{"use strict";Ym.byteLength=Mj;Ym.toByteArray=Lj;Ym.fromByteArray=jj;var Oi=[],Cn=[],Dj=typeof Uint8Array!="undefined"?Uint8Array:Array,iw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Go=0,LC=iw.length;Go<LC;++Go)Oi[Go]=iw[Go],Cn[iw.charCodeAt(Go)]=Go;var Go,LC;Cn[45]=62;Cn[95]=63;function FC(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function Mj(t){var e=FC(t),r=e[0],n=e[1];return(r+n)*3/4-n}function Ij(t,e,r){return(e+r)*3/4-r}function Lj(t){var e,r=FC(t),n=r[0],i=r[1],s=new Dj(Ij(t,n,i)),a=0,o=i>0?n-4:n,l;for(l=0;l<o;l+=4)e=Cn[t.charCodeAt(l)]<<18|Cn[t.charCodeAt(l+1)]<<12|Cn[t.charCodeAt(l+2)]<<6|Cn[t.charCodeAt(l+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=e&255;return i===2&&(e=Cn[t.charCodeAt(l)]<<2|Cn[t.charCodeAt(l+1)]>>4,s[a++]=e&255),i===1&&(e=Cn[t.charCodeAt(l)]<<10|Cn[t.charCodeAt(l+1)]<<4|Cn[t.charCodeAt(l+2)]>>2,s[a++]=e>>8&255,s[a++]=e&255),s}function Fj(t){return Oi[t>>18&63]+Oi[t>>12&63]+Oi[t>>6&63]+Oi[t&63]}function Nj(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(Fj(n));return i.join("")}function jj(t){for(var e,r=t.length,n=r%3,i=[],s=16383,a=0,o=r-n;a<o;a+=s)i.push(Nj(t,a,a+s>o?o:a+s));return n===1?(e=t[r-1],i.push(Oi[e>>2]+Oi[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Oi[e>>10]+Oi[e>>4&63]+Oi[e<<2&63]+"=")),i.join("")}});var tf=L(($te,lw)=>{"use strict";typeof process=="undefined"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?lw.exports={nextTick:Jj}:lw.exports=process;function Jj(t,e,r,n){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,s,a;switch(i){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,r)});case 4:return process.nextTick(function(){t.call(null,e,r,n)});default:for(s=new Array(i-1),a=0;a<s.length;)s[a++]=arguments[a];return process.nextTick(function(){t.apply(null,s)})}}});var WC=L((zte,UC)=>{var Kj={}.toString;UC.exports=Array.isArray||function(t){return Kj.call(t)=="[object Array]"}});var uw=L((Ute,qC)=>{qC.exports=require("stream")});var eg=L((cw,VC)=>{var Qm=require("buffer"),Os=Qm.Buffer;function HC(t,e){for(var r in t)e[r]=t[r]}Os.from&&Os.alloc&&Os.allocUnsafe&&Os.allocUnsafeSlow?VC.exports=Qm:(HC(Qm,cw),cw.Buffer=zu);function zu(t,e,r){return Os(t,e,r)}HC(Os,zu);zu.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Os(t,e,r)};zu.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Os(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};zu.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Os(t)};zu.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Qm.SlowBuffer(t)}});var Uu=L(Qt=>{function Xj(t){return Array.isArray?Array.isArray(t):tg(t)==="[object Array]"}Qt.isArray=Xj;function Qj(t){return typeof t=="boolean"}Qt.isBoolean=Qj;function e6(t){return t===null}Qt.isNull=e6;function t6(t){return t==null}Qt.isNullOrUndefined=t6;function r6(t){return typeof t=="number"}Qt.isNumber=r6;function n6(t){return typeof t=="string"}Qt.isString=n6;function i6(t){return typeof t=="symbol"}Qt.isSymbol=i6;function s6(t){return t===void 0}Qt.isUndefined=s6;function a6(t){return tg(t)==="[object RegExp]"}Qt.isRegExp=a6;function o6(t){return typeof t=="object"&&t!==null}Qt.isObject=o6;function l6(t){return tg(t)==="[object Date]"}Qt.isDate=l6;function u6(t){return tg(t)==="[object Error]"||t instanceof Error}Qt.isError=u6;function c6(t){return typeof t=="function"}Qt.isFunction=c6;function d6(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t=="undefined"}Qt.isPrimitive=d6;Qt.isBuffer=require("buffer").Buffer.isBuffer;function tg(t){return Object.prototype.toString.call(t)}});var Wu=L((qte,dw)=>{typeof Object.create=="function"?dw.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:dw.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var GC=L((Hte,fw)=>{"use strict";function f6(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var YC=eg().Buffer,rf=require("util");function h6(t,e,r){t.copy(e,r)}fw.exports=function(){function t(){f6(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},t.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},t.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},t.prototype.concat=function(r){if(this.length===0)return YC.alloc(0);for(var n=YC.allocUnsafe(r>>>0),i=this.head,s=0;i;)h6(i.data,n,s),s+=i.data.length,i=i.next;return n},t}();rf&&rf.inspect&&rf.inspect.custom&&(fw.exports.prototype[rf.inspect.custom]=function(){var t=rf.inspect({length:this.length});return this.constructor.name+" "+t})});var hw=L((Vte,ZC)=>{"use strict";var rg=tf();function p6(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,rg.nextTick(ng,this,t)):rg.nextTick(ng,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,rg.nextTick(ng,r,s)):rg.nextTick(ng,r,s):e&&e(s)}),this)}function m6(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function ng(t,e){t.emit("error",e)}ZC.exports={destroy:p6,undestroy:m6}});var KC=L((Yte,JC)=>{JC.exports=g6;function g6(t,e){if(pw("noDeprecation"))return t;var r=!1;function n(){if(!r){if(pw("throwDeprecation"))throw new Error(e);pw("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function pw(t){try{if(!global.localStorage)return!1}catch(r){return!1}var e=global.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}});var gw=L((Gte,sA)=>{"use strict";var Zo=tf();sA.exports=yt;function QC(t){var e=this;this.next=null,this.entry=null,this.finish=function(){I6(e,t)}}var _6=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:Zo.nextTick,qu;yt.WritableState=sf;var eA=Object.create(Uu());eA.inherits=Wu();var b6={deprecate:KC()},tA=uw(),sg=eg().Buffer,y6=(typeof global!="undefined"?global:typeof window!="undefined"?window:typeof self!="undefined"?self:{}).Uint8Array||function(){};function w6(t){return sg.from(t)}function v6(t){return sg.isBuffer(t)||t instanceof y6}var rA=hw();eA.inherits(yt,tA);function x6(){}function sf(t,e){qu=qu||Jo(),t=t||{};var r=e instanceof qu;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=t.writableHighWaterMark,s=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=t.decodeStrings===!1;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(o){P6(e,o)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new QC(this)}sf.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(sf.prototype,"buffer",{get:b6.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}})();var ig;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ig=Function.prototype[Symbol.hasInstance],Object.defineProperty(yt,Symbol.hasInstance,{value:function(t){return ig.call(this,t)?!0:this!==yt?!1:t&&t._writableState instanceof sf}})):ig=function(t){return t instanceof this};function yt(t){if(qu=qu||Jo(),!ig.call(yt,this)&&!(this instanceof qu))return new yt(t);this._writableState=new sf(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),tA.call(this)}yt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function S6(t,e){var r=new Error("write after end");t.emit("error",r),Zo.nextTick(e,r)}function k6(t,e,r,n){var i=!0,s=!1;return r===null?s=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!e.objectMode&&(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),Zo.nextTick(n,s),i=!1),i}yt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&v6(t);return s&&!sg.isBuffer(t)&&(t=w6(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=x6),n.ended?S6(this,r):(s||k6(this,n,t,r))&&(n.pendingcb++,i=T6(this,n,s,t,e,r)),i};yt.prototype.cork=function(){var t=this._writableState;t.corked++};yt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&nA(this,t))};yt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function E6(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=sg.from(e,r)),e}Object.defineProperty(yt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function T6(t,e,r,n,i,s){if(!r){var a=E6(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var o=e.objectMode?1:n.length;e.length+=o;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else mw(t,e,!1,o,n,i,s);return l}function mw(t,e,r,n,i,s,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function C6(t,e,r,n,i){--e.pendingcb,r?(Zo.nextTick(i,n),Zo.nextTick(nf,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),nf(t,e))}function A6(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function P6(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(A6(r),e)C6(t,r,n,e,i);else{var s=iA(r);!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&nA(t,r),n?_6(XC,t,r,s,i):XC(t,r,s,i)}}function XC(t,e,r,n){r||O6(t,e),e.pendingcb--,n(),nf(t,e)}function O6(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function nA(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var a=0,o=!0;r;)i[a]=r,r.isBuf||(o=!1),r=r.next,a+=1;i.allBuffers=o,mw(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new QC(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,c=r.callback,h=e.objectMode?1:l.length;if(mw(t,e,!1,h,l,u,c),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}yt.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))};yt.prototype._writev=null;yt.prototype.end=function(t,e,r){var n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||M6(this,n,r)};function iA(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function R6(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),nf(t,e)})}function D6(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"?(e.pendingcb++,e.finalCalled=!0,Zo.nextTick(R6,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function nf(t,e){var r=iA(e);return r&&(D6(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"))),r}function M6(t,e,r){e.ending=!0,nf(t,e),r&&(e.finished?Zo.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function I6(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(yt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});yt.prototype.destroy=rA.destroy;yt.prototype._undestroy=rA.undestroy;yt.prototype._destroy=function(t,e){this.end(),e(t)}});var Jo=L((Zte,uA)=>{"use strict";var aA=tf(),L6=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};uA.exports=Rs;var oA=Object.create(Uu());oA.inherits=Wu();var lA=yw(),bw=gw();oA.inherits(Rs,lA);for(_w=L6(bw.prototype),ag=0;ag<_w.length;ag++)og=_w[ag],Rs.prototype[og]||(Rs.prototype[og]=bw.prototype[og]);var _w,og,ag;function Rs(t){if(!(this instanceof Rs))return new Rs(t);lA.call(this,t),bw.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",F6)}Object.defineProperty(Rs.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function F6(){this.allowHalfOpen||this._writableState.ended||aA.nextTick(N6,this)}function N6(t){t.end()}Object.defineProperty(Rs.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});Rs.prototype._destroy=function(t,e){this.push(null),this.end(),aA.nextTick(e,t)}});var yw=L((Kte,vA)=>{"use strict";var Vu=tf();vA.exports=Je;var j6=WC(),af;Je.ReadableState=gA;var Jte=require("events").EventEmitter,hA=function(t,e){return t.listeners(e).length},kw=uw(),of=eg().Buffer,B6=(typeof global!="undefined"?global:typeof window!="undefined"?window:typeof self!="undefined"?self:{}).Uint8Array||function(){};function $6(t){return of.from(t)}function z6(t){return of.isBuffer(t)||t instanceof B6}var pA=Object.create(Uu());pA.inherits=Wu();var ww=require("util"),Ie=void 0;ww&&ww.debuglog?Ie=ww.debuglog("stream"):Ie=function(){};var U6=GC(),mA=hw(),Hu;pA.inherits(Je,kw);var vw=["error","close","destroy","pause","resume"];function W6(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):j6(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function gA(t,e){af=af||Jo(),t=t||{};var r=e instanceof af;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=t.readableHighWaterMark,s=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new U6,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Hu||(Hu=require("string_decoder/").StringDecoder),this.decoder=new Hu(t.encoding),this.encoding=t.encoding)}function Je(t){if(af=af||Jo(),!(this instanceof Je))return new Je(t);this._readableState=new gA(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),kw.call(this)}Object.defineProperty(Je.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});Je.prototype.destroy=mA.destroy;Je.prototype._undestroy=mA.undestroy;Je.prototype._destroy=function(t,e){this.push(null),e(t)};Je.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=of.from(t,e),e=""),n=!0),_A(this,t,e,!1,n)};Je.prototype.unshift=function(t){return _A(this,t,null,!0,!1)};function _A(t,e,r,n,i){var s=t._readableState;if(e===null)s.reading=!1,Y6(t,s);else{var a;i||(a=q6(s,e)),a?t.emit("error",a):s.objectMode||e&&e.length>0?(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==of.prototype&&(e=$6(e)),n?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):xw(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?xw(t,s,e,!1):bA(t,s)):xw(t,s,e,!1))):n||(s.reading=!1)}return H6(s)}function xw(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&lg(t)),bA(t,e)}function q6(t,e){var r;return!z6(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function H6(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}Je.prototype.isPaused=function(){return this._readableState.flowing===!1};Je.prototype.setEncoding=function(t){return Hu||(Hu=require("string_decoder/").StringDecoder),this._readableState.decoder=new Hu(t),this._readableState.encoding=t,this};var cA=8388608;function V6(t){return t>=cA?t=cA:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function dA(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=V6(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Je.prototype.read=function(t){Ie("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return Ie("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Sw(this):lg(this),null;if(t=dA(t,e),t===0&&e.ended)return e.length===0&&Sw(this),null;var n=e.needReadable;Ie("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Ie("length less than watermark",n)),e.ended||e.reading?(n=!1,Ie("reading or ended",n)):n&&(Ie("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=dA(r,e)));var i;return t>0?i=yA(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Sw(this)),i!==null&&this.emit("data",i),i};function Y6(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,lg(t)}}function lg(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(Ie("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?Vu.nextTick(fA,t):fA(t))}function fA(t){Ie("emit readable"),t.emit("readable"),Ew(t)}function bA(t,e){e.readingMore||(e.readingMore=!0,Vu.nextTick(G6,t,e))}function G6(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(Ie("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}Je.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))};Je.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Ie("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?o:x;n.endEmitted?Vu.nextTick(s):r.once("end",s),t.on("unpipe",a);function a(k,T){Ie("onunpipe"),k===r&&T&&T.hasUnpiped===!1&&(T.hasUnpiped=!0,c())}function o(){Ie("onend"),t.end()}var l=Z6(r);t.on("drain",l);var u=!1;function c(){Ie("cleanup"),t.removeListener("close",y),t.removeListener("finish",S),t.removeListener("drain",l),t.removeListener("error",_),t.removeListener("unpipe",a),r.removeListener("end",o),r.removeListener("end",x),r.removeListener("data",p),u=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}var h=!1;r.on("data",p);function p(k){Ie("ondata"),h=!1;var T=t.write(k);T===!1&&!h&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&wA(n.pipes,t)!==-1)&&!u&&(Ie("false write response, pause",n.awaitDrain),n.awaitDrain++,h=!0),r.pause())}function _(k){Ie("onerror",k),x(),t.removeListener("error",_),hA(t,"error")===0&&t.emit("error",k)}W6(t,"error",_);function y(){t.removeListener("finish",S),x()}t.once("close",y);function S(){Ie("onfinish"),t.removeListener("close",y),x()}t.once("finish",S);function x(){Ie("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Ie("pipe resume"),r.resume()),t};function Z6(t){return function(){var e=t._readableState;Ie("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&hA(t,"data")&&(e.flowing=!0,Ew(t))}}Je.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var a=wA(e.pipes,t);return a===-1?this:(e.pipes.splice(a,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Je.prototype.on=function(t,e){var r=kw.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&lg(this):Vu.nextTick(J6,this))}return r};Je.prototype.addListener=Je.prototype.on;function J6(t){Ie("readable nexttick read 0"),t.read(0)}Je.prototype.resume=function(){var t=this._readableState;return t.flowing||(Ie("resume"),t.flowing=!0,K6(this,t)),this};function K6(t,e){e.resumeScheduled||(e.resumeScheduled=!0,Vu.nextTick(X6,t,e))}function X6(t,e){e.reading||(Ie("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),Ew(t),e.flowing&&!e.reading&&t.read(0)}Je.prototype.pause=function(){return Ie("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Ie("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Ew(t){var e=t._readableState;for(Ie("flow",e.flowing);e.flowing&&t.read()!==null;);}Je.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(Ie("wrapped end"),r.decoder&&!r.ended){var a=r.decoder.end();a&&a.length&&e.push(a)}e.push(null)}),t.on("data",function(a){if(Ie("wrapped data"),r.decoder&&(a=r.decoder.write(a)),!(r.objectMode&&a==null)&&!(!r.objectMode&&(!a||!a.length))){var o=e.push(a);o||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var s=0;s<vw.length;s++)t.on(vw[s],this.emit.bind(this,vw[s]));return this._read=function(a){Ie("wrapped _read",a),n&&(n=!1,t.resume())},this};Object.defineProperty(Je.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Je._fromList=yA;function yA(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=Q6(t,e.buffer,e.decoder),r}function Q6(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?n=e.shift():n=r?eB(t,e):tB(t,e),n}function eB(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var s=r.data,a=t>s.length?s.length:t;if(a===s.length?i+=s:i+=s.slice(0,t),t-=a,t===0){a===s.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(a));break}++n}return e.length-=n,i}function tB(t,e){var r=of.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var s=n.data,a=t>s.length?s.length:t;if(s.copy(r,r.length-t,0,a),t-=a,t===0){a===s.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=s.slice(a));break}++i}return e.length-=i,r}function Sw(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,Vu.nextTick(rB,e,t))}function rB(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function wA(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var Tw=L((Xte,kA)=>{"use strict";kA.exports=Ds;var ug=Jo(),SA=Object.create(Uu());SA.inherits=Wu();SA.inherits(Ds,ug);function nB(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Ds(t){if(!(this instanceof Ds))return new Ds(t);ug.call(this,t),this._transformState={afterTransform:nB.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",iB)}function iB(){var t=this;typeof this._flush=="function"?this._flush(function(e,r){xA(t,e,r)}):xA(this,null,null)}Ds.prototype.push=function(t,e){return this._transformState.needTransform=!1,ug.prototype.push.call(this,t,e)};Ds.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")};Ds.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Ds.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Ds.prototype._destroy=function(t,e){var r=this;ug.prototype._destroy.call(this,t,function(n){e(n),r.emit("close")})};function xA(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}});var AA=L((Qte,CA)=>{"use strict";CA.exports=lf;var EA=Tw(),TA=Object.create(Uu());TA.inherits=Wu();TA.inherits(lf,EA);function lf(t){if(!(this instanceof lf))return new lf(t);EA.call(this,t)}lf.prototype._transform=function(t,e,r){r(null,t)}});var Cw=L((zt,cg)=>{var Ri=require("stream");process.env.READABLE_STREAM==="disable"&&Ri?(cg.exports=Ri,zt=cg.exports=Ri.Readable,zt.Readable=Ri.Readable,zt.Writable=Ri.Writable,zt.Duplex=Ri.Duplex,zt.Transform=Ri.Transform,zt.PassThrough=Ri.PassThrough,zt.Stream=Ri):(zt=cg.exports=yw(),zt.Stream=Ri||zt,zt.Readable=zt,zt.Writable=gw(),zt.Duplex=Jo(),zt.Transform=Tw(),zt.PassThrough=AA())});var Ms=L(Qr=>{"use strict";Qr.base64=!0;Qr.array=!0;Qr.string=!0;Qr.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined";Qr.nodebuffer=typeof Buffer!="undefined";Qr.uint8array=typeof Uint8Array!="undefined";if(typeof ArrayBuffer=="undefined")Qr.blob=!1;else{Aw=new ArrayBuffer(0);try{Qr.blob=new Blob([Aw],{type:"application/zip"}).size===0}catch(t){try{PA=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,Pw=new PA,Pw.append(Aw),Qr.blob=Pw.getBlob("application/zip").size===0}catch(e){Qr.blob=!1}}}var Aw,PA,Pw;try{Qr.nodestream=!!Cw().Readable}catch(t){Qr.nodestream=!1}});var Rw=L(Ow=>{"use strict";var sB=nt(),aB=Ms(),Di="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";Ow.encode=function(t){for(var e=[],r,n,i,s,a,o,l,u=0,c=t.length,h=c,p=sB.getTypeOf(t)!=="string";u<t.length;)h=c-u,p?(r=t[u++],n=u<c?t[u++]:0,i=u<c?t[u++]:0):(r=t.charCodeAt(u++),n=u<c?t.charCodeAt(u++):0,i=u<c?t.charCodeAt(u++):0),s=r>>2,a=(r&3)<<4|n>>4,o=h>1?(n&15)<<2|i>>6:64,l=h>2?i&63:64,e.push(Di.charAt(s)+Di.charAt(a)+Di.charAt(o)+Di.charAt(l));return e.join("")};Ow.decode=function(t){var e,r,n,i,s,a,o,l=0,u=0,c="data:";if(t.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");t=t.replace(/[^A-Za-z0-9+/=]/g,"");var h=t.length*3/4;if(t.charAt(t.length-1)===Di.charAt(64)&&h--,t.charAt(t.length-2)===Di.charAt(64)&&h--,h%1!==0)throw new Error("Invalid base64 input, bad content length.");var p;for(aB.uint8array?p=new Uint8Array(h|0):p=new Array(h|0);l<t.length;)i=Di.indexOf(t.charAt(l++)),s=Di.indexOf(t.charAt(l++)),a=Di.indexOf(t.charAt(l++)),o=Di.indexOf(t.charAt(l++)),e=i<<2|s>>4,r=(s&15)<<4|a>>2,n=(a&3)<<6|o,p[u++]=e,a!==64&&(p[u++]=r),o!==64&&(p[u++]=n);return p}});var uf=L((rre,OA)=>{"use strict";OA.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(t,e){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(t,e);if(typeof t=="number")throw new Error('The "data" argument must not be a number');return new Buffer(t,e)},allocBuffer:function(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e},isBuffer:function(t){return Buffer.isBuffer(t)},isStream:function(t){return t&&typeof t.on=="function"&&typeof t.pause=="function"&&typeof t.resume=="function"}}});var IA=L((nre,MA)=>{"use strict";var RA=global.MutationObserver||global.WebKitMutationObserver,Yu;process.browser?RA?(Dw=0,DA=new RA(cf),Mw=global.document.createTextNode(""),DA.observe(Mw,{characterData:!0}),Yu=function(){Mw.data=Dw=++Dw%2}):!global.setImmediate&&typeof global.MessageChannel!="undefined"?(Iw=new global.MessageChannel,Iw.port1.onmessage=cf,Yu=function(){Iw.port2.postMessage(0)}):"document"in global&&"onreadystatechange"in global.document.createElement("script")?Yu=function(){var t=global.document.createElement("script");t.onreadystatechange=function(){cf(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},global.document.documentElement.appendChild(t)}:Yu=function(){setTimeout(cf,0)}:Yu=function(){process.nextTick(cf)};var Dw,DA,Mw,Iw,Lw,df=[];function cf(){Lw=!0;for(var t,e,r=df.length;r;){for(e=df,df=[],t=-1;++t<r;)e[t]();r=df.length}Lw=!1}MA.exports=oB;function oB(t){df.push(t)===1&&!Lw&&Yu()}});var zA=L((ire,$A)=>{"use strict";var LA=IA();function Gu(){}var er={},FA=["REJECTED"],Fw=["FULFILLED"],NA=["PENDING"];process.browser||(ff=["UNHANDLED"]);var ff;$A.exports=Ca;function Ca(t){if(typeof t!="function")throw new TypeError("resolver must be a function");this.state=NA,this.queue=[],this.outcome=void 0,process.browser||(this.handled=ff),t!==Gu&&jA(this,t)}Ca.prototype.finally=function(t){if(typeof t!="function")return this;var e=this.constructor;return this.then(r,n);function r(i){function s(){return i}return e.resolve(t()).then(s)}function n(i){function s(){throw i}return e.resolve(t()).then(s)}};Ca.prototype.catch=function(t){return this.then(null,t)};Ca.prototype.then=function(t,e){if(typeof t!="function"&&this.state===Fw||typeof e!="function"&&this.state===FA)return this;var r=new this.constructor(Gu);if(process.browser||this.handled===ff&&(this.handled=null),this.state!==NA){var n=this.state===Fw?t:e;Nw(r,n,this.outcome)}else this.queue.push(new hf(r,t,e));return r};function hf(t,e,r){this.promise=t,typeof e=="function"&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),typeof r=="function"&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}hf.prototype.callFulfilled=function(t){er.resolve(this.promise,t)};hf.prototype.otherCallFulfilled=function(t){Nw(this.promise,this.onFulfilled,t)};hf.prototype.callRejected=function(t){er.reject(this.promise,t)};hf.prototype.otherCallRejected=function(t){Nw(this.promise,this.onRejected,t)};function Nw(t,e,r){LA(function(){var n;try{n=e(r)}catch(i){return er.reject(t,i)}n===t?er.reject(t,new TypeError("Cannot resolve promise with itself")):er.resolve(t,n)})}er.resolve=function(t,e){var r=BA(lB,e);if(r.status==="error")return er.reject(t,r.value);var n=r.value;if(n)jA(t,n);else{t.state=Fw,t.outcome=e;for(var i=-1,s=t.queue.length;++i<s;)t.queue[i].callFulfilled(e)}return t};er.reject=function(t,e){t.state=FA,t.outcome=e,process.browser||t.handled===ff&&LA(function(){t.handled===ff&&process.emit("unhandledRejection",e,t)});for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t};function lB(t){var e=t&&t.then;if(t&&(typeof t=="object"||typeof t=="function")&&typeof e=="function")return function(){e.apply(t,arguments)}}function jA(t,e){var r=!1;function n(o){r||(r=!0,er.reject(t,o))}function i(o){r||(r=!0,er.resolve(t,o))}function s(){e(i,n)}var a=BA(s);a.status==="error"&&n(a.value)}function BA(t,e){var r={};try{r.value=t(e),r.status="success"}catch(n){r.status="error",r.value=n}return r}Ca.resolve=uB;function uB(t){return t instanceof this?t:er.resolve(new this(Gu),t)}Ca.reject=cB;function cB(t){var e=new this(Gu);return er.reject(e,t)}Ca.all=dB;function dB(t){var e=this;if(Object.prototype.toString.call(t)!=="[object Array]")return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var i=new Array(r),s=0,a=-1,o=new this(Gu);++a<r;)l(t[a],a);return o;function l(u,c){e.resolve(u).then(h,function(p){n||(n=!0,er.reject(o,p))});function h(p){i[c]=p,++s===r&&!n&&(n=!0,er.resolve(o,i))}}}Ca.race=fB;function fB(t){var e=this;if(Object.prototype.toString.call(t)!=="[object Array]")return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var i=-1,s=new this(Gu);++i<r;)a(t[i]);return s;function a(o){e.resolve(o).then(function(l){n||(n=!0,er.resolve(s,l))},function(l){n||(n=!0,er.reject(s,l))})}}});var Zu=L((sre,UA)=>{"use strict";var jw=null;typeof Promise!="undefined"?jw=Promise:jw=zA();UA.exports={Promise:jw}});var qA=L(WA=>{(function(t,e){"use strict";if(t.setImmediate)return;var r=1,n={},i=!1,s=t.document,a;function o(T){typeof T!="function"&&(T=new Function(""+T));for(var P=new Array(arguments.length-1),O=0;O<P.length;O++)P[O]=arguments[O+1];var A={callback:T,args:P};return n[r]=A,a(r),r++}function l(T){delete n[T]}function u(T){var P=T.callback,O=T.args;switch(O.length){case 0:P();break;case 1:P(O[0]);break;case 2:P(O[0],O[1]);break;case 3:P(O[0],O[1],O[2]);break;default:P.apply(e,O);break}}function c(T){if(i)setTimeout(c,0,T);else{var P=n[T];if(P){i=!0;try{u(P)}finally{l(T),i=!1}}}}function h(){a=function(T){process.nextTick(function(){c(T)})}}function p(){if(t.postMessage&&!t.importScripts){var T=!0,P=t.onmessage;return t.onmessage=function(){T=!1},t.postMessage("","*"),t.onmessage=P,T}}function _(){var T="setImmediate$"+Math.random()+"$",P=function(O){O.source===t&&typeof O.data=="string"&&O.data.indexOf(T)===0&&c(+O.data.slice(T.length))};t.addEventListener?t.addEventListener("message",P,!1):t.attachEvent("onmessage",P),a=function(O){t.postMessage(T+O,"*")}}function y(){var T=new MessageChannel;T.port1.onmessage=function(P){var O=P.data;c(O)},a=function(P){T.port2.postMessage(P)}}function S(){var T=s.documentElement;a=function(P){var O=s.createElement("script");O.onreadystatechange=function(){c(P),O.onreadystatechange=null,T.removeChild(O),O=null},T.appendChild(O)}}function x(){a=function(T){setTimeout(c,0,T)}}var k=Object.getPrototypeOf&&Object.getPrototypeOf(t);k=k&&k.setTimeout?k:t,{}.toString.call(t.process)==="[object process]"?h():p()?_():t.MessageChannel?y():s&&"onreadystatechange"in s.createElement("script")?S():x(),k.setImmediate=o,k.clearImmediate=l})(typeof self=="undefined"?typeof global=="undefined"?WA:global:self)});var nt=L(wt=>{"use strict";var Aa=Ms(),hB=Rw(),Ju=uf(),Bw=Zu();qA();function pB(t){var e=null;return Aa.uint8array?e=new Uint8Array(t.length):e=new Array(t.length),fg(t,e)}wt.newBlob=function(t,e){wt.checkSupport("blob");try{return new Blob([t],{type:e})}catch(i){try{var r=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,n=new r;return n.append(t),n.getBlob(e)}catch(s){throw new Error("Bug : can't construct the Blob.")}}};function pf(t){return t}function fg(t,e){for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)&255;return e}var dg={stringifyByChunk:function(t,e,r){var n=[],i=0,s=t.length;if(s<=r)return String.fromCharCode.apply(null,t);for(;i<s;)e==="array"||e==="nodebuffer"?n.push(String.fromCharCode.apply(null,t.slice(i,Math.min(i+r,s)))):n.push(String.fromCharCode.apply(null,t.subarray(i,Math.min(i+r,s)))),i+=r;return n.join("")},stringifyByChar:function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},applyCanBeUsed:{uint8array:function(){try{return Aa.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch(t){return!1}}(),nodebuffer:function(){try{return Aa.nodebuffer&&String.fromCharCode.apply(null,Ju.allocBuffer(1)).length===1}catch(t){return!1}}()}};function mf(t){var e=65536,r=wt.getTypeOf(t),n=!0;if(r==="uint8array"?n=dg.applyCanBeUsed.uint8array:r==="nodebuffer"&&(n=dg.applyCanBeUsed.nodebuffer),n)for(;e>1;)try{return dg.stringifyByChunk(t,r,e)}catch(i){e=Math.floor(e/2)}return dg.stringifyByChar(t)}wt.applyFromCharCode=mf;function hg(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}var Pa={};Pa.string={string:pf,array:function(t){return fg(t,new Array(t.length))},arraybuffer:function(t){return Pa.string.uint8array(t).buffer},uint8array:function(t){return fg(t,new Uint8Array(t.length))},nodebuffer:function(t){return fg(t,Ju.allocBuffer(t.length))}};Pa.array={string:mf,array:pf,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return Ju.newBufferFrom(t)}};Pa.arraybuffer={string:function(t){return mf(new Uint8Array(t))},array:function(t){return hg(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:pf,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return Ju.newBufferFrom(new Uint8Array(t))}};Pa.uint8array={string:mf,array:function(t){return hg(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:pf,nodebuffer:function(t){return Ju.newBufferFrom(t)}};Pa.nodebuffer={string:mf,array:function(t){return hg(t,new Array(t.length))},arraybuffer:function(t){return Pa.nodebuffer.uint8array(t).buffer},uint8array:function(t){return hg(t,new Uint8Array(t.length))},nodebuffer:pf};wt.transformTo=function(t,e){if(e||(e=""),!t)return e;wt.checkSupport(t);var r=wt.getTypeOf(e),n=Pa[r][t](e);return n};wt.resolve=function(t){for(var e=t.split("/"),r=[],n=0;n<e.length;n++){var i=e[n];i==="."||i===""&&n!==0&&n!==e.length-1||(i===".."?r.pop():r.push(i))}return r.join("/")};wt.getTypeOf=function(t){if(typeof t=="string")return"string";if(Object.prototype.toString.call(t)==="[object Array]")return"array";if(Aa.nodebuffer&&Ju.isBuffer(t))return"nodebuffer";if(Aa.uint8array&&t instanceof Uint8Array)return"uint8array";if(Aa.arraybuffer&&t instanceof ArrayBuffer)return"arraybuffer"};wt.checkSupport=function(t){var e=Aa[t.toLowerCase()];if(!e)throw new Error(t+" is not supported by this platform")};wt.MAX_VALUE_16BITS=65535;wt.MAX_VALUE_32BITS=-1;wt.pretty=function(t){var e="",r,n;for(n=0;n<(t||"").length;n++)r=t.charCodeAt(n),e+="\\x"+(r<16?"0":"")+r.toString(16).toUpperCase();return e};wt.delay=function(t,e,r){setImmediate(function(){t.apply(r||null,e||[])})};wt.inherits=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r};wt.extend=function(){var t={},e,r;for(e=0;e<arguments.length;e++)for(r in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],r)&&typeof t[r]=="undefined"&&(t[r]=arguments[e][r]);return t};wt.prepareContent=function(t,e,r,n,i){var s=Bw.Promise.resolve(e).then(function(a){var o=Aa.blob&&(a instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(a))!==-1);return o&&typeof FileReader!="undefined"?new Bw.Promise(function(l,u){var c=new FileReader;c.onload=function(h){l(h.target.result)},c.onerror=function(h){u(h.target.error)},c.readAsArrayBuffer(a)}):a});return s.then(function(a){var o=wt.getTypeOf(a);return o?(o==="arraybuffer"?a=wt.transformTo("uint8array",a):o==="string"&&(i?a=hB.decode(a):r&&n!==!0&&(a=pB(a))),a):Bw.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}});var en=L((lre,VA)=>{"use strict";function HA(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}HA.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return this.isFinished?!1:(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var r=0;r<this._listeners[t].length;r++)this._listeners[t][r].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",function(r){e.processChunk(r)}),t.on("end",function(){e.end()}),t.on("error",function(r){e.error(r)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}};VA.exports=HA});var Xu=L(Oa=>{"use strict";var Ku=nt(),Ko=Ms(),mB=uf(),pg=en(),gf=new Array(256);for(Is=0;Is<256;Is++)gf[Is]=Is>=252?6:Is>=248?5:Is>=240?4:Is>=224?3:Is>=192?2:1;var Is;gf[254]=gf[254]=1;var gB=function(t){var e,r,n,i,s,a=t.length,o=0;for(i=0;i<a;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(Ko.uint8array?e=new Uint8Array(o):e=new Array(o),s=0,i=0;s<o;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e},_B=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+gf[t[r]]>e?r:e},bB=function(t){var e,r,n,i,s=t.length,a=new Array(s*2);for(r=0,e=0;e<s;){if(n=t[e++],n<128){a[r++]=n;continue}if(i=gf[n],i>4){a[r++]=65533,e+=i-1;continue}for(n&=i===2?31:i===3?15:7;i>1&&e<s;)n=n<<6|t[e++]&63,i--;if(i>1){a[r++]=65533;continue}n<65536?a[r++]=n:(n-=65536,a[r++]=55296|n>>10&1023,a[r++]=56320|n&1023)}return a.length!==r&&(a.subarray?a=a.subarray(0,r):a.length=r),Ku.applyFromCharCode(a)};Oa.utf8encode=function(e){return Ko.nodebuffer?mB.newBufferFrom(e,"utf-8"):gB(e)};Oa.utf8decode=function(e){return Ko.nodebuffer?Ku.transformTo("nodebuffer",e).toString("utf-8"):(e=Ku.transformTo(Ko.uint8array?"uint8array":"array",e),bB(e))};function mg(){pg.call(this,"utf-8 decode"),this.leftOver=null}Ku.inherits(mg,pg);mg.prototype.processChunk=function(t){var e=Ku.transformTo(Ko.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(Ko.uint8array){var r=e;e=new Uint8Array(r.length+this.leftOver.length),e.set(this.leftOver,0),e.set(r,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var n=_B(e),i=e;n!==e.length&&(Ko.uint8array?(i=e.subarray(0,n),this.leftOver=e.subarray(n,e.length)):(i=e.slice(0,n),this.leftOver=e.slice(n,e.length))),this.push({data:Oa.utf8decode(i),meta:t.meta})};mg.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:Oa.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)};Oa.Utf8DecodeWorker=mg;function $w(){pg.call(this,"utf-8 encode")}Ku.inherits($w,pg);$w.prototype.processChunk=function(t){this.push({data:Oa.utf8encode(t.data),meta:t.meta})};Oa.Utf8EncodeWorker=$w});var JA=L((cre,ZA)=>{"use strict";var YA=en(),GA=nt();function zw(t){YA.call(this,"ConvertWorker to "+t),this.destType=t}GA.inherits(zw,YA);zw.prototype.processChunk=function(t){this.push({data:GA.transformTo(this.destType,t.data),meta:t.meta})};ZA.exports=zw});var QA=L((dre,XA)=>{"use strict";var KA=Cw().Readable,yB=nt();yB.inherits(Uw,KA);function Uw(t,e,r){KA.call(this,e),this._helper=t;var n=this;t.on("data",function(i,s){n.push(i)||n._helper.pause(),r&&r(s)}).on("error",function(i){n.emit("error",i)}).on("end",function(){n.push(null)})}Uw.prototype._read=function(){this._helper.resume()};XA.exports=Uw});var Ww=L((fre,rP)=>{"use strict";var Xo=nt(),wB=JA(),vB=en(),xB=Rw(),SB=Ms(),kB=Zu(),eP=null;if(SB.nodestream)try{eP=QA()}catch(t){}function EB(t,e,r){switch(t){case"blob":return Xo.newBlob(Xo.transformTo("arraybuffer",e),r);case"base64":return xB.encode(e);default:return Xo.transformTo(t,e)}}function TB(t,e){var r,n=0,i=null,s=0;for(r=0;r<e.length;r++)s+=e[r].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(i=new Uint8Array(s),r=0;r<e.length;r++)i.set(e[r],n),n+=e[r].length;return i;case"nodebuffer":return Buffer.concat(e);default:throw new Error("concat : unsupported type '"+t+"'")}}function CB(t,e){return new kB.Promise(function(r,n){var i=[],s=t._internalType,a=t._outputType,o=t._mimeType;t.on("data",function(l,u){i.push(l),e&&e(u)}).on("error",function(l){i=[],n(l)}).on("end",function(){try{var l=EB(a,TB(s,i),o);r(l)}catch(u){n(u)}i=[]}).resume()})}function tP(t,e,r){var n=e;switch(e){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string";break}try{this._internalType=n,this._outputType=e,this._mimeType=r,Xo.checkSupport(n),this._worker=t.pipe(new wB(n)),t.lock()}catch(i){this._worker=new vB("error"),this._worker.error(i)}}tP.prototype={accumulate:function(t){return CB(this,t)},on:function(t,e){var r=this;return t==="data"?this._worker.on(t,function(n){e.call(r,n.data,n.meta)}):this._worker.on(t,function(){Xo.delay(e,arguments,r)}),this},resume:function(){return Xo.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(Xo.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new eP(this,{objectMode:this._outputType!=="nodebuffer"},t)}};rP.exports=tP});var qw=L(ii=>{"use strict";ii.base64=!1;ii.binary=!1;ii.dir=!1;ii.createFolders=!0;ii.date=null;ii.compression=null;ii.compressionOptions=null;ii.comment=null;ii.unixPermissions=null;ii.dosPermissions=null});var Hw=L((pre,nP)=>{"use strict";var gg=nt(),_g=en(),AB=16*1024;function Qu(t){_g.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then(function(r){e.dataIsReady=!0,e.data=r,e.max=r&&r.length||0,e.type=gg.getTypeOf(r),e.isPaused||e._tickAndRepeat()},function(r){e.error(r)})}gg.inherits(Qu,_g);Qu.prototype.cleanUp=function(){_g.prototype.cleanUp.call(this),this.data=null};Qu.prototype.resume=function(){return _g.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,gg.delay(this._tickAndRepeat,[],this)),!0):!1};Qu.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(gg.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))};Qu.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=AB,e=null,r=Math.min(this.max,this.index+t);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,r);break;case"uint8array":e=this.data.subarray(this.index,r);break;case"array":case"nodebuffer":e=this.data.slice(this.index,r);break}return this.index=r,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})};nP.exports=Qu});var bg=L((mre,sP)=>{"use strict";var PB=nt();function OB(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e}var iP=OB();function RB(t,e,r,n){var i=iP,s=n+r;t=t^-1;for(var a=n;a<s;a++)t=t>>>8^i[(t^e[a])&255];return t^-1}function DB(t,e,r,n){var i=iP,s=n+r;t=t^-1;for(var a=n;a<s;a++)t=t>>>8^i[(t^e.charCodeAt(a))&255];return t^-1}sP.exports=function(e,r){if(typeof e=="undefined"||!e.length)return 0;var n=PB.getTypeOf(e)!=="string";return n?RB(r|0,e,e.length,0):DB(r|0,e,e.length,0)}});var Yw=L((gre,oP)=>{"use strict";var aP=en(),MB=bg(),IB=nt();function Vw(){aP.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}IB.inherits(Vw,aP);Vw.prototype.processChunk=function(t){this.streamInfo.crc32=MB(t.data,this.streamInfo.crc32||0),this.push(t)};oP.exports=Vw});var uP=L((_re,lP)=>{"use strict";var LB=nt(),Gw=en();function Zw(t){Gw.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}LB.inherits(Zw,Gw);Zw.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}Gw.prototype.processChunk.call(this,t)};lP.exports=Zw});var yg=L((bre,fP)=>{"use strict";var cP=Zu(),dP=Hw(),FB=Yw(),Jw=uP();function Kw(t,e,r,n,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=n,this.compressedContent=i}Kw.prototype={getContentWorker:function(){var t=new dP(cP.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new Jw("data_length")),e=this;return t.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),t},getCompressedWorker:function(){return new dP(cP.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}};Kw.createWorkerFrom=function(t,e,r){return t.pipe(new FB).pipe(new Jw("uncompressedSize")).pipe(e.compressWorker(r)).pipe(new Jw("compressedSize")).withStreamInfo("compression",e)};fP.exports=Kw});var gP=L((yre,mP)=>{"use strict";var NB=Ww(),jB=Hw(),Xw=Xu(),Qw=yg(),hP=en(),ev=function(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}};ev.prototype={internalStream:function(t){var e=null,r="string";try{if(!t)throw new Error("No output type specified.");r=t.toLowerCase();var n=r==="string"||r==="text";(r==="binarystring"||r==="text")&&(r="string"),e=this._decompressWorker();var i=!this._dataBinary;i&&!n&&(e=e.pipe(new Xw.Utf8EncodeWorker)),!i&&n&&(e=e.pipe(new Xw.Utf8DecodeWorker))}catch(s){e=new hP("error"),e.error(s)}return new NB(e,r,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof Qw&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new Xw.Utf8EncodeWorker)),Qw.createWorkerFrom(r,t,e)},_decompressWorker:function(){return this._data instanceof Qw?this._data.getContentWorker():this._data instanceof hP?this._data:new jB(this._data)}};var pP=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],BB=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")};for(wg=0;wg<pP.length;wg++)ev.prototype[pP[wg]]=BB;var wg;mP.exports=ev});var Ls=L(hr=>{"use strict";var $B=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";function zB(t,e){return Object.prototype.hasOwnProperty.call(t,e)}hr.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(var n in r)zB(r,n)&&(t[n]=r[n])}}return t};hr.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var UB={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray){t.set(e.subarray(r,r+n),i);return}for(var s=0;s<n;s++)t[i+s]=e[r+s]},flattenChunks:function(t){var e,r,n,i,s,a;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(a=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)s=t[e],a.set(s,i),i+=s.length;return a}},WB={arraySet:function(t,e,r,n,i){for(var s=0;s<n;s++)t[i+s]=e[r+s]},flattenChunks:function(t){return[].concat.apply([],t)}};hr.setTyped=function(t){t?(hr.Buf8=Uint8Array,hr.Buf16=Uint16Array,hr.Buf32=Int32Array,hr.assign(hr,UB)):(hr.Buf8=Array,hr.Buf16=Array,hr.Buf32=Array,hr.assign(hr,WB))};hr.setTyped($B)});var BP=L(rc=>{"use strict";var qB=Ls(),HB=4,_P=0,bP=1,VB=2;function tc(t){for(var e=t.length;--e>=0;)t[e]=0}var YB=0,kP=1,GB=2,ZB=3,JB=258,ov=29,xf=256,bf=xf+1+ov,ec=30,lv=19,EP=2*bf+1,Qo=15,tv=16,KB=7,uv=256,TP=16,CP=17,AP=18,sv=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],vg=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],XB=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],PP=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],QB=512,Fs=new Array((bf+2)*2);tc(Fs);var _f=new Array(ec*2);tc(_f);var yf=new Array(QB);tc(yf);var wf=new Array(JB-ZB+1);tc(wf);var cv=new Array(ov);tc(cv);var xg=new Array(ec);tc(xg);function rv(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}var OP,RP,DP;function nv(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function MP(t){return t<256?yf[t]:yf[256+(t>>>7)]}function vf(t,e){t.pending_buf[t.pending++]=e&255,t.pending_buf[t.pending++]=e>>>8&255}function Fr(t,e,r){t.bi_valid>tv-r?(t.bi_buf|=e<<t.bi_valid&65535,vf(t,t.bi_buf),t.bi_buf=e>>tv-t.bi_valid,t.bi_valid+=r-tv):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function Mi(t,e,r){Fr(t,r[e*2],r[e*2+1])}function IP(t,e){var r=0;do r|=t&1,t>>>=1,r<<=1;while(--e>0);return r>>>1}function e$(t){t.bi_valid===16?(vf(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=t.bi_buf&255,t.bi_buf>>=8,t.bi_valid-=8)}function t$(t,e){var r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,s=e.stat_desc.has_stree,a=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,l=e.stat_desc.max_length,u,c,h,p,_,y,S=0;for(p=0;p<=Qo;p++)t.bl_count[p]=0;for(r[t.heap[t.heap_max]*2+1]=0,u=t.heap_max+1;u<EP;u++)c=t.heap[u],p=r[r[c*2+1]*2+1]+1,p>l&&(p=l,S++),r[c*2+1]=p,!(c>n)&&(t.bl_count[p]++,_=0,c>=o&&(_=a[c-o]),y=r[c*2],t.opt_len+=y*(p+_),s&&(t.static_len+=y*(i[c*2+1]+_)));if(S!==0){do{for(p=l-1;t.bl_count[p]===0;)p--;t.bl_count[p]--,t.bl_count[p+1]+=2,t.bl_count[l]--,S-=2}while(S>0);for(p=l;p!==0;p--)for(c=t.bl_count[p];c!==0;)h=t.heap[--u],!(h>n)&&(r[h*2+1]!==p&&(t.opt_len+=(p-r[h*2+1])*r[h*2],r[h*2+1]=p),c--)}}function LP(t,e,r){var n=new Array(Qo+1),i=0,s,a;for(s=1;s<=Qo;s++)n[s]=i=i+r[s-1]<<1;for(a=0;a<=e;a++){var o=t[a*2+1];o!==0&&(t[a*2]=IP(n[o]++,o))}}function r$(){var t,e,r,n,i,s=new Array(Qo+1);for(r=0,n=0;n<ov-1;n++)for(cv[n]=r,t=0;t<1<<sv[n];t++)wf[r++]=n;for(wf[r-1]=n,i=0,n=0;n<16;n++)for(xg[n]=i,t=0;t<1<<vg[n];t++)yf[i++]=n;for(i>>=7;n<ec;n++)for(xg[n]=i<<7,t=0;t<1<<vg[n]-7;t++)yf[256+i++]=n;for(e=0;e<=Qo;e++)s[e]=0;for(t=0;t<=143;)Fs[t*2+1]=8,t++,s[8]++;for(;t<=255;)Fs[t*2+1]=9,t++,s[9]++;for(;t<=279;)Fs[t*2+1]=7,t++,s[7]++;for(;t<=287;)Fs[t*2+1]=8,t++,s[8]++;for(LP(Fs,bf+1,s),t=0;t<ec;t++)_f[t*2+1]=5,_f[t*2]=IP(t,5);OP=new rv(Fs,sv,xf+1,bf,Qo),RP=new rv(_f,vg,0,ec,Qo),DP=new rv(new Array(0),XB,0,lv,KB)}function FP(t){var e;for(e=0;e<bf;e++)t.dyn_ltree[e*2]=0;for(e=0;e<ec;e++)t.dyn_dtree[e*2]=0;for(e=0;e<lv;e++)t.bl_tree[e*2]=0;t.dyn_ltree[uv*2]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function NP(t){t.bi_valid>8?vf(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function n$(t,e,r,n){NP(t),n&&(vf(t,r),vf(t,~r)),qB.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function yP(t,e,r,n){var i=e*2,s=r*2;return t[i]<t[s]||t[i]===t[s]&&n[e]<=n[r]}function iv(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&yP(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!yP(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function wP(t,e,r){var n,i,s=0,a,o;if(t.last_lit!==0)do n=t.pending_buf[t.d_buf+s*2]<<8|t.pending_buf[t.d_buf+s*2+1],i=t.pending_buf[t.l_buf+s],s++,n===0?Mi(t,i,e):(a=wf[i],Mi(t,a+xf+1,e),o=sv[a],o!==0&&(i-=cv[a],Fr(t,i,o)),n--,a=MP(n),Mi(t,a,r),o=vg[a],o!==0&&(n-=xg[a],Fr(t,n,o)));while(s<t.last_lit);Mi(t,uv,e)}function av(t,e){var r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,s=e.stat_desc.elems,a,o,l=-1,u;for(t.heap_len=0,t.heap_max=EP,a=0;a<s;a++)r[a*2]!==0?(t.heap[++t.heap_len]=l=a,t.depth[a]=0):r[a*2+1]=0;for(;t.heap_len<2;)u=t.heap[++t.heap_len]=l<2?++l:0,r[u*2]=1,t.depth[u]=0,t.opt_len--,i&&(t.static_len-=n[u*2+1]);for(e.max_code=l,a=t.heap_len>>1;a>=1;a--)iv(t,r,a);u=s;do a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],iv(t,r,1),o=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=o,r[u*2]=r[a*2]+r[o*2],t.depth[u]=(t.depth[a]>=t.depth[o]?t.depth[a]:t.depth[o])+1,r[a*2+1]=r[o*2+1]=u,t.heap[1]=u++,iv(t,r,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],t$(t,e),LP(r,l,t.bl_count)}function vP(t,e,r){var n,i=-1,s,a=e[0*2+1],o=0,l=7,u=4;for(a===0&&(l=138,u=3),e[(r+1)*2+1]=65535,n=0;n<=r;n++)s=a,a=e[(n+1)*2+1],!(++o<l&&s===a)&&(o<u?t.bl_tree[s*2]+=o:s!==0?(s!==i&&t.bl_tree[s*2]++,t.bl_tree[TP*2]++):o<=10?t.bl_tree[CP*2]++:t.bl_tree[AP*2]++,o=0,i=s,a===0?(l=138,u=3):s===a?(l=6,u=3):(l=7,u=4))}function xP(t,e,r){var n,i=-1,s,a=e[0*2+1],o=0,l=7,u=4;for(a===0&&(l=138,u=3),n=0;n<=r;n++)if(s=a,a=e[(n+1)*2+1],!(++o<l&&s===a)){if(o<u)do Mi(t,s,t.bl_tree);while(--o!==0);else s!==0?(s!==i&&(Mi(t,s,t.bl_tree),o--),Mi(t,TP,t.bl_tree),Fr(t,o-3,2)):o<=10?(Mi(t,CP,t.bl_tree),Fr(t,o-3,3)):(Mi(t,AP,t.bl_tree),Fr(t,o-11,7));o=0,i=s,a===0?(l=138,u=3):s===a?(l=6,u=3):(l=7,u=4)}}function i$(t){var e;for(vP(t,t.dyn_ltree,t.l_desc.max_code),vP(t,t.dyn_dtree,t.d_desc.max_code),av(t,t.bl_desc),e=lv-1;e>=3&&t.bl_tree[PP[e]*2+1]===0;e--);return t.opt_len+=3*(e+1)+5+5+4,e}function s$(t,e,r,n){var i;for(Fr(t,e-257,5),Fr(t,r-1,5),Fr(t,n-4,4),i=0;i<n;i++)Fr(t,t.bl_tree[PP[i]*2+1],3);xP(t,t.dyn_ltree,e-1),xP(t,t.dyn_dtree,r-1)}function a$(t){var e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(e&1&&t.dyn_ltree[r*2]!==0)return _P;if(t.dyn_ltree[9*2]!==0||t.dyn_ltree[10*2]!==0||t.dyn_ltree[13*2]!==0)return bP;for(r=32;r<xf;r++)if(t.dyn_ltree[r*2]!==0)return bP;return _P}var SP=!1;function o$(t){SP||(r$(),SP=!0),t.l_desc=new nv(t.dyn_ltree,OP),t.d_desc=new nv(t.dyn_dtree,RP),t.bl_desc=new nv(t.bl_tree,DP),t.bi_buf=0,t.bi_valid=0,FP(t)}function jP(t,e,r,n){Fr(t,(YB<<1)+(n?1:0),3),n$(t,e,r,!0)}function l$(t){Fr(t,kP<<1,3),Mi(t,uv,Fs),e$(t)}function u$(t,e,r,n){var i,s,a=0;t.level>0?(t.strm.data_type===VB&&(t.strm.data_type=a$(t)),av(t,t.l_desc),av(t,t.d_desc),a=i$(t),i=t.opt_len+3+7>>>3,s=t.static_len+3+7>>>3,s<=i&&(i=s)):i=s=r+5,r+4<=i&&e!==-1?jP(t,e,r,n):t.strategy===HB||s===i?(Fr(t,(kP<<1)+(n?1:0),3),wP(t,Fs,_f)):(Fr(t,(GB<<1)+(n?1:0),3),s$(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),wP(t,t.dyn_ltree,t.dyn_dtree)),FP(t),n&&NP(t)}function c$(t,e,r){return t.pending_buf[t.d_buf+t.last_lit*2]=e>>>8&255,t.pending_buf[t.d_buf+t.last_lit*2+1]=e&255,t.pending_buf[t.l_buf+t.last_lit]=r&255,t.last_lit++,e===0?t.dyn_ltree[r*2]++:(t.matches++,e--,t.dyn_ltree[(wf[r]+xf+1)*2]++,t.dyn_dtree[MP(e)*2]++),t.last_lit===t.lit_bufsize-1}rc._tr_init=o$;rc._tr_stored_block=jP;rc._tr_flush_block=u$;rc._tr_tally=c$;rc._tr_align=l$});var dv=L((xre,$P)=>{"use strict";function d$(t,e,r,n){for(var i=t&65535|0,s=t>>>16&65535|0,a=0;r!==0;){a=r>2e3?2e3:r,r-=a;do i=i+e[n++]|0,s=s+i|0;while(--a);i%=65521,s%=65521}return i|s<<16|0}$P.exports=d$});var fv=L((Sre,zP)=>{"use strict";function f$(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e}var h$=f$();function p$(t,e,r,n){var i=h$,s=n+r;t^=-1;for(var a=n;a<s;a++)t=t>>>8^i[(t^e[a])&255];return t^-1}zP.exports=p$});var Sg=L((kre,UP)=>{"use strict";UP.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var KP=L(Fi=>{"use strict";var pr=Ls(),An=BP(),VP=dv(),Ra=fv(),m$=Sg(),nl=0,g$=1,_$=3,Fa=4,WP=5,Li=0,qP=1,Pn=-2,b$=-3,hv=-5,y$=-1,w$=1,kg=2,v$=3,x$=4,S$=0,k$=2,Ag=8,E$=9,T$=15,C$=8,A$=29,P$=256,mv=P$+1+A$,O$=30,R$=19,D$=2*mv+1,M$=15,ke=3,Ia=258,si=Ia+ke+1,I$=32,Pg=42,gv=69,Eg=73,Tg=91,Cg=103,el=113,kf=666,Et=1,Ef=2,tl=3,sc=4,L$=3;function La(t,e){return t.msg=m$[e],e}function HP(t){return(t<<1)-(t>4?9:0)}function Ma(t){for(var e=t.length;--e>=0;)t[e]=0}function Da(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),r!==0&&(pr.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,e.pending===0&&(e.pending_out=0))}function Ut(t,e){An._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Da(t.strm)}function Oe(t,e){t.pending_buf[t.pending++]=e}function Sf(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=e&255}function F$(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),i===0?0:(t.avail_in-=i,pr.arraySet(e,t.input,t.next_in,i,r),t.state.wrap===1?t.adler=VP(t.adler,e,i,r):t.state.wrap===2&&(t.adler=Ra(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)}function YP(t,e){var r=t.max_chain_length,n=t.strstart,i,s,a=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-si?t.strstart-(t.w_size-si):0,u=t.window,c=t.w_mask,h=t.prev,p=t.strstart+Ia,_=u[n+a-1],y=u[n+a];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do if(i=e,!(u[i+a]!==y||u[i+a-1]!==_||u[i]!==u[n]||u[++i]!==u[n+1])){n+=2,i++;do;while(u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&u[++n]===u[++i]&&n<p);if(s=Ia-(p-n),n=p-Ia,s>a){if(t.match_start=e,a=s,s>=o)break;_=u[n+a-1],y=u[n+a]}}while((e=h[e&c])>l&&--r!==0);return a<=t.lookahead?a:t.lookahead}function rl(t){var e=t.w_size,r,n,i,s,a;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-si)){pr.arraySet(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,n=t.hash_size,r=n;do i=t.head[--r],t.head[r]=i>=e?i-e:0;while(--n);n=e,r=n;do i=t.prev[--r],t.prev[r]=i>=e?i-e:0;while(--n);s+=e}if(t.strm.avail_in===0)break;if(n=F$(t.strm,t.window,t.strstart+t.lookahead,s),t.lookahead+=n,t.lookahead+t.insert>=ke)for(a=t.strstart-t.insert,t.ins_h=t.window[a],t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[a+ke-1])&t.hash_mask,t.prev[a&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=a,a++,t.insert--,!(t.lookahead+t.insert<ke)););}while(t.lookahead<si&&t.strm.avail_in!==0)}function N$(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(rl(t),t.lookahead===0&&e===nl)return Et;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((t.strstart===0||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,Ut(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-si&&(Ut(t,!1),t.strm.avail_out===0))return Et}return t.insert=0,e===Fa?(Ut(t,!0),t.strm.avail_out===0?tl:sc):(t.strstart>t.block_start&&(Ut(t,!1),t.strm.avail_out===0),Et)}function pv(t,e){for(var r,n;;){if(t.lookahead<si){if(rl(t),t.lookahead<si&&e===nl)return Et;if(t.lookahead===0)break}if(r=0,t.lookahead>=ke&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ke-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),r!==0&&t.strstart-r<=t.w_size-si&&(t.match_length=YP(t,r)),t.match_length>=ke)if(n=An._tr_tally(t,t.strstart-t.match_start,t.match_length-ke),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=ke){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ke-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(--t.match_length!==0);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=An._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(Ut(t,!1),t.strm.avail_out===0))return Et}return t.insert=t.strstart<ke-1?t.strstart:ke-1,e===Fa?(Ut(t,!0),t.strm.avail_out===0?tl:sc):t.last_lit&&(Ut(t,!1),t.strm.avail_out===0)?Et:Ef}function nc(t,e){for(var r,n,i;;){if(t.lookahead<si){if(rl(t),t.lookahead<si&&e===nl)return Et;if(t.lookahead===0)break}if(r=0,t.lookahead>=ke&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ke-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=ke-1,r!==0&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-si&&(t.match_length=YP(t,r),t.match_length<=5&&(t.strategy===w$||t.match_length===ke&&t.strstart-t.match_start>4096)&&(t.match_length=ke-1)),t.prev_length>=ke&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-ke,n=An._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-ke),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+ke-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(--t.prev_length!==0);if(t.match_available=0,t.match_length=ke-1,t.strstart++,n&&(Ut(t,!1),t.strm.avail_out===0))return Et}else if(t.match_available){if(n=An._tr_tally(t,0,t.window[t.strstart-1]),n&&Ut(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return Et}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=An._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<ke-1?t.strstart:ke-1,e===Fa?(Ut(t,!0),t.strm.avail_out===0?tl:sc):t.last_lit&&(Ut(t,!1),t.strm.avail_out===0)?Et:Ef}function j$(t,e){for(var r,n,i,s,a=t.window;;){if(t.lookahead<=Ia){if(rl(t),t.lookahead<=Ia&&e===nl)return Et;if(t.lookahead===0)break}if(t.match_length=0,t.lookahead>=ke&&t.strstart>0&&(i=t.strstart-1,n=a[i],n===a[++i]&&n===a[++i]&&n===a[++i])){s=t.strstart+Ia;do;while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&i<s);t.match_length=Ia-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=ke?(r=An._tr_tally(t,1,t.match_length-ke),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=An._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(Ut(t,!1),t.strm.avail_out===0))return Et}return t.insert=0,e===Fa?(Ut(t,!0),t.strm.avail_out===0?tl:sc):t.last_lit&&(Ut(t,!1),t.strm.avail_out===0)?Et:Ef}function B$(t,e){for(var r;;){if(t.lookahead===0&&(rl(t),t.lookahead===0)){if(e===nl)return Et;break}if(t.match_length=0,r=An._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(Ut(t,!1),t.strm.avail_out===0))return Et}return t.insert=0,e===Fa?(Ut(t,!0),t.strm.avail_out===0?tl:sc):t.last_lit&&(Ut(t,!1),t.strm.avail_out===0)?Et:Ef}function Ii(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i}var ic;ic=[new Ii(0,0,0,0,N$),new Ii(4,4,8,4,pv),new Ii(4,5,16,8,pv),new Ii(4,6,32,32,pv),new Ii(4,4,16,16,nc),new Ii(8,16,32,32,nc),new Ii(8,16,128,128,nc),new Ii(8,32,128,256,nc),new Ii(32,128,258,1024,nc),new Ii(32,258,258,4096,nc)];function $$(t){t.window_size=2*t.w_size,Ma(t.head),t.max_lazy_match=ic[t.level].max_lazy,t.good_match=ic[t.level].good_length,t.nice_match=ic[t.level].nice_length,t.max_chain_length=ic[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=ke-1,t.match_available=0,t.ins_h=0}function z$(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Ag,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new pr.Buf16(D$*2),this.dyn_dtree=new pr.Buf16((2*O$+1)*2),this.bl_tree=new pr.Buf16((2*R$+1)*2),Ma(this.dyn_ltree),Ma(this.dyn_dtree),Ma(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new pr.Buf16(M$+1),this.heap=new pr.Buf16(2*mv+1),Ma(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new pr.Buf16(2*mv+1),Ma(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function GP(t){var e;return!t||!t.state?La(t,Pn):(t.total_in=t.total_out=0,t.data_type=k$,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?Pg:el,t.adler=e.wrap===2?0:1,e.last_flush=nl,An._tr_init(e),Li)}function ZP(t){var e=GP(t);return e===Li&&$$(t.state),e}function U$(t,e){return!t||!t.state||t.state.wrap!==2?Pn:(t.state.gzhead=e,Li)}function JP(t,e,r,n,i,s){if(!t)return Pn;var a=1;if(e===y$&&(e=6),n<0?(a=0,n=-n):n>15&&(a=2,n-=16),i<1||i>E$||r!==Ag||n<8||n>15||e<0||e>9||s<0||s>x$)return La(t,Pn);n===8&&(n=9);var o=new z$;return t.state=o,o.strm=t,o.wrap=a,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+ke-1)/ke),o.window=new pr.Buf8(o.w_size*2),o.head=new pr.Buf16(o.hash_size),o.prev=new pr.Buf16(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new pr.Buf8(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=e,o.strategy=s,o.method=r,ZP(t)}function W$(t,e){return JP(t,e,Ag,T$,C$,S$)}function q$(t,e){var r,n,i,s;if(!t||!t.state||e>WP||e<0)return t?La(t,Pn):Pn;if(n=t.state,!t.output||!t.input&&t.avail_in!==0||n.status===kf&&e!==Fa)return La(t,t.avail_out===0?hv:Pn);if(n.strm=t,r=n.last_flush,n.last_flush=e,n.status===Pg)if(n.wrap===2)t.adler=0,Oe(n,31),Oe(n,139),Oe(n,8),n.gzhead?(Oe(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Oe(n,n.gzhead.time&255),Oe(n,n.gzhead.time>>8&255),Oe(n,n.gzhead.time>>16&255),Oe(n,n.gzhead.time>>24&255),Oe(n,n.level===9?2:n.strategy>=kg||n.level<2?4:0),Oe(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(Oe(n,n.gzhead.extra.length&255),Oe(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=Ra(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=gv):(Oe(n,0),Oe(n,0),Oe(n,0),Oe(n,0),Oe(n,0),Oe(n,n.level===9?2:n.strategy>=kg||n.level<2?4:0),Oe(n,L$),n.status=el);else{var a=Ag+(n.w_bits-8<<4)<<8,o=-1;n.strategy>=kg||n.level<2?o=0:n.level<6?o=1:n.level===6?o=2:o=3,a|=o<<6,n.strstart!==0&&(a|=I$),a+=31-a%31,n.status=el,Sf(n,a),n.strstart!==0&&(Sf(n,t.adler>>>16),Sf(n,t.adler&65535)),t.adler=1}if(n.status===gv)if(n.gzhead.extra){for(i=n.pending;n.gzindex<(n.gzhead.extra.length&65535)&&!(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=Ra(t.adler,n.pending_buf,n.pending-i,i)),Da(t),i=n.pending,n.pending===n.pending_buf_size));)Oe(n,n.gzhead.extra[n.gzindex]&255),n.gzindex++;n.gzhead.hcrc&&n.pending>i&&(t.adler=Ra(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=Eg)}else n.status=Eg;if(n.status===Eg)if(n.gzhead.name){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=Ra(t.adler,n.pending_buf,n.pending-i,i)),Da(t),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}n.gzindex<n.gzhead.name.length?s=n.gzhead.name.charCodeAt(n.gzindex++)&255:s=0,Oe(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(t.adler=Ra(t.adler,n.pending_buf,n.pending-i,i)),s===0&&(n.gzindex=0,n.status=Tg)}else n.status=Tg;if(n.status===Tg)if(n.gzhead.comment){i=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>i&&(t.adler=Ra(t.adler,n.pending_buf,n.pending-i,i)),Da(t),i=n.pending,n.pending===n.pending_buf_size)){s=1;break}n.gzindex<n.gzhead.comment.length?s=n.gzhead.comment.charCodeAt(n.gzindex++)&255:s=0,Oe(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>i&&(t.adler=Ra(t.adler,n.pending_buf,n.pending-i,i)),s===0&&(n.status=Cg)}else n.status=Cg;if(n.status===Cg&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&Da(t),n.pending+2<=n.pending_buf_size&&(Oe(n,t.adler&255),Oe(n,t.adler>>8&255),t.adler=0,n.status=el)):n.status=el),n.pending!==0){if(Da(t),t.avail_out===0)return n.last_flush=-1,Li}else if(t.avail_in===0&&HP(e)<=HP(r)&&e!==Fa)return La(t,hv);if(n.status===kf&&t.avail_in!==0)return La(t,hv);if(t.avail_in!==0||n.lookahead!==0||e!==nl&&n.status!==kf){var l=n.strategy===kg?B$(n,e):n.strategy===v$?j$(n,e):ic[n.level].func(n,e);if((l===tl||l===sc)&&(n.status=kf),l===Et||l===tl)return t.avail_out===0&&(n.last_flush=-1),Li;if(l===Ef&&(e===g$?An._tr_align(n):e!==WP&&(An._tr_stored_block(n,0,0,!1),e===_$&&(Ma(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),Da(t),t.avail_out===0))return n.last_flush=-1,Li}return e!==Fa?Li:n.wrap<=0?qP:(n.wrap===2?(Oe(n,t.adler&255),Oe(n,t.adler>>8&255),Oe(n,t.adler>>16&255),Oe(n,t.adler>>24&255),Oe(n,t.total_in&255),Oe(n,t.total_in>>8&255),Oe(n,t.total_in>>16&255),Oe(n,t.total_in>>24&255)):(Sf(n,t.adler>>>16),Sf(n,t.adler&65535)),Da(t),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Li:qP)}function H$(t){var e;return!t||!t.state?Pn:(e=t.state.status,e!==Pg&&e!==gv&&e!==Eg&&e!==Tg&&e!==Cg&&e!==el&&e!==kf?La(t,Pn):(t.state=null,e===el?La(t,b$):Li))}function V$(t,e){var r=e.length,n,i,s,a,o,l,u,c;if(!t||!t.state||(n=t.state,a=n.wrap,a===2||a===1&&n.status!==Pg||n.lookahead))return Pn;for(a===1&&(t.adler=VP(t.adler,e,r,0)),n.wrap=0,r>=n.w_size&&(a===0&&(Ma(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new pr.Buf8(n.w_size),pr.arraySet(c,e,r-n.w_size,n.w_size,0),e=c,r=n.w_size),o=t.avail_in,l=t.next_in,u=t.input,t.avail_in=r,t.next_in=0,t.input=e,rl(n);n.lookahead>=ke;){i=n.strstart,s=n.lookahead-(ke-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+ke-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++;while(--s);n.strstart=i,n.lookahead=ke-1,rl(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=ke-1,n.match_available=0,t.next_in=l,t.input=u,t.avail_in=o,n.wrap=a,Li}Fi.deflateInit=W$;Fi.deflateInit2=JP;Fi.deflateReset=ZP;Fi.deflateResetKeep=GP;Fi.deflateSetHeader=U$;Fi.deflate=q$;Fi.deflateEnd=H$;Fi.deflateSetDictionary=V$;Fi.deflateInfo="pako deflate (from Nodeca project)"});var _v=L(ac=>{"use strict";var Og=Ls(),XP=!0,QP=!0;try{String.fromCharCode.apply(null,[0])}catch(t){XP=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){QP=!1}var Tf=new Og.Buf8(256);for(Ns=0;Ns<256;Ns++)Tf[Ns]=Ns>=252?6:Ns>=248?5:Ns>=240?4:Ns>=224?3:Ns>=192?2:1;var Ns;Tf[254]=Tf[254]=1;ac.string2buf=function(t){var e,r,n,i,s,a=t.length,o=0;for(i=0;i<a;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Og.Buf8(o),s=0,i=0;s<o;i++)r=t.charCodeAt(i),(r&64512)===55296&&i+1<a&&(n=t.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|r&63):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|r&63):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|r&63);return e};function eO(t,e){if(e<65534&&(t.subarray&&QP||!t.subarray&&XP))return String.fromCharCode.apply(null,Og.shrinkBuf(t,e));for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}ac.buf2binstring=function(t){return eO(t,t.length)};ac.binstring2buf=function(t){for(var e=new Og.Buf8(t.length),r=0,n=e.length;r<n;r++)e[r]=t.charCodeAt(r);return e};ac.buf2string=function(t,e){var r,n,i,s,a=e||t.length,o=new Array(a*2);for(n=0,r=0;r<a;){if(i=t[r++],i<128){o[n++]=i;continue}if(s=Tf[i],s>4){o[n++]=65533,r+=s-1;continue}for(i&=s===2?31:s===3?15:7;s>1&&r<a;)i=i<<6|t[r++]&63,s--;if(s>1){o[n++]=65533;continue}i<65536?o[n++]=i:(i-=65536,o[n++]=55296|i>>10&1023,o[n++]=56320|i&1023)}return eO(o,n)};ac.utf8border=function(t,e){var r;for(e=e||t.length,e>t.length&&(e=t.length),r=e-1;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+Tf[t[r]]>e?r:e}});var bv=L((Cre,tO)=>{"use strict";function Y$(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}tO.exports=Y$});var sO=L(Pf=>{"use strict";var Cf=KP(),Af=Ls(),wv=_v(),vv=Sg(),G$=bv(),iO=Object.prototype.toString,Z$=0,yv=4,oc=0,rO=1,nO=2,J$=-1,K$=0,X$=8;function il(t){if(!(this instanceof il))return new il(t);this.options=Af.assign({level:J$,method:X$,chunkSize:16384,windowBits:15,memLevel:8,strategy:K$,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new G$,this.strm.avail_out=0;var r=Cf.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==oc)throw new Error(vv[r]);if(e.header&&Cf.deflateSetHeader(this.strm,e.header),e.dictionary){var n;if(typeof e.dictionary=="string"?n=wv.string2buf(e.dictionary):iO.call(e.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(e.dictionary):n=e.dictionary,r=Cf.deflateSetDictionary(this.strm,n),r!==oc)throw new Error(vv[r]);this._dict_set=!0}}il.prototype.push=function(t,e){var r=this.strm,n=this.options.chunkSize,i,s;if(this.ended)return!1;s=e===~~e?e:e===!0?yv:Z$,typeof t=="string"?r.input=wv.string2buf(t):iO.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Af.Buf8(n),r.next_out=0,r.avail_out=n),i=Cf.deflate(r,s),i!==rO&&i!==oc)return this.onEnd(i),this.ended=!0,!1;(r.avail_out===0||r.avail_in===0&&(s===yv||s===nO))&&(this.options.to==="string"?this.onData(wv.buf2binstring(Af.shrinkBuf(r.output,r.next_out))):this.onData(Af.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||r.avail_out===0)&&i!==rO);return s===yv?(i=Cf.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===oc):(s===nO&&(this.onEnd(oc),r.avail_out=0),!0)};il.prototype.onData=function(t){this.chunks.push(t)};il.prototype.onEnd=function(t){t===oc&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Af.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function xv(t,e){var r=new il(e);if(r.push(t,!0),r.err)throw r.msg||vv[r.err];return r.result}function Q$(t,e){return e=e||{},e.raw=!0,xv(t,e)}function e7(t,e){return e=e||{},e.gzip=!0,xv(t,e)}Pf.Deflate=il;Pf.deflate=xv;Pf.deflateRaw=Q$;Pf.gzip=e7});var oO=L((Pre,aO)=>{"use strict";var Rg=30,t7=12;aO.exports=function(e,r){var n,i,s,a,o,l,u,c,h,p,_,y,S,x,k,T,P,O,A,R,F,I,U,X,z;n=e.state,i=e.next_in,X=e.input,s=i+(e.avail_in-5),a=e.next_out,z=e.output,o=a-(r-e.avail_out),l=a+(e.avail_out-257),u=n.dmax,c=n.wsize,h=n.whave,p=n.wnext,_=n.window,y=n.hold,S=n.bits,x=n.lencode,k=n.distcode,T=(1<<n.lenbits)-1,P=(1<<n.distbits)-1;e:do{S<15&&(y+=X[i++]<<S,S+=8,y+=X[i++]<<S,S+=8),O=x[y&T];t:for(;;){if(A=O>>>24,y>>>=A,S-=A,A=O>>>16&255,A===0)z[a++]=O&65535;else if(A&16){R=O&65535,A&=15,A&&(S<A&&(y+=X[i++]<<S,S+=8),R+=y&(1<<A)-1,y>>>=A,S-=A),S<15&&(y+=X[i++]<<S,S+=8,y+=X[i++]<<S,S+=8),O=k[y&P];r:for(;;){if(A=O>>>24,y>>>=A,S-=A,A=O>>>16&255,A&16){if(F=O&65535,A&=15,S<A&&(y+=X[i++]<<S,S+=8,S<A&&(y+=X[i++]<<S,S+=8)),F+=y&(1<<A)-1,F>u){e.msg="invalid distance too far back",n.mode=Rg;break e}if(y>>>=A,S-=A,A=a-o,F>A){if(A=F-A,A>h&&n.sane){e.msg="invalid distance too far back",n.mode=Rg;break e}if(I=0,U=_,p===0){if(I+=c-A,A<R){R-=A;do z[a++]=_[I++];while(--A);I=a-F,U=z}}else if(p<A){if(I+=c+p-A,A-=p,A<R){R-=A;do z[a++]=_[I++];while(--A);if(I=0,p<R){A=p,R-=A;do z[a++]=_[I++];while(--A);I=a-F,U=z}}}else if(I+=p-A,A<R){R-=A;do z[a++]=_[I++];while(--A);I=a-F,U=z}for(;R>2;)z[a++]=U[I++],z[a++]=U[I++],z[a++]=U[I++],R-=3;R&&(z[a++]=U[I++],R>1&&(z[a++]=U[I++]))}else{I=a-F;do z[a++]=z[I++],z[a++]=z[I++],z[a++]=z[I++],R-=3;while(R>2);R&&(z[a++]=z[I++],R>1&&(z[a++]=z[I++]))}}else if(A&64){e.msg="invalid distance code",n.mode=Rg;break e}else{O=k[(O&65535)+(y&(1<<A)-1)];continue r}break}}else if(A&64)if(A&32){n.mode=t7;break e}else{e.msg="invalid literal/length code",n.mode=Rg;break e}else{O=x[(O&65535)+(y&(1<<A)-1)];continue t}break}}while(i<s&&a<l);R=S>>3,i-=R,S-=R<<3,y&=(1<<S)-1,e.next_in=i,e.next_out=a,e.avail_in=i<s?5+(s-i):5-(i-s),e.avail_out=a<l?257+(l-a):257-(a-l),n.hold=y,n.bits=S}});var pO=L((Ore,hO)=>{"use strict";var lO=Ls(),lc=15,uO=852,cO=592,dO=0,Sv=1,fO=2,r7=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n7=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],i7=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s7=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];hO.exports=function(e,r,n,i,s,a,o,l){var u=l.bits,c=0,h=0,p=0,_=0,y=0,S=0,x=0,k=0,T=0,P=0,O,A,R,F,I,U=null,X=0,z,ne=new lO.Buf16(lc+1),ge=new lO.Buf16(lc+1),$e=null,ve=0,Le,Xe,De;for(c=0;c<=lc;c++)ne[c]=0;for(h=0;h<i;h++)ne[r[n+h]]++;for(y=u,_=lc;_>=1&&ne[_]===0;_--);if(y>_&&(y=_),_===0)return s[a++]=1<<24|64<<16|0,s[a++]=1<<24|64<<16|0,l.bits=1,0;for(p=1;p<_&&ne[p]===0;p++);for(y<p&&(y=p),k=1,c=1;c<=lc;c++)if(k<<=1,k-=ne[c],k<0)return-1;if(k>0&&(e===dO||_!==1))return-1;for(ge[1]=0,c=1;c<lc;c++)ge[c+1]=ge[c]+ne[c];for(h=0;h<i;h++)r[n+h]!==0&&(o[ge[r[n+h]]++]=h);if(e===dO?(U=$e=o,z=19):e===Sv?(U=r7,X-=257,$e=n7,ve-=257,z=256):(U=i7,$e=s7,z=-1),P=0,h=0,c=p,I=a,S=y,x=0,R=-1,T=1<<y,F=T-1,e===Sv&&T>uO||e===fO&&T>cO)return 1;for(;;){Le=c-x,o[h]<z?(Xe=0,De=o[h]):o[h]>z?(Xe=$e[ve+o[h]],De=U[X+o[h]]):(Xe=96,De=0),O=1<<c-x,A=1<<S,p=A;do A-=O,s[I+(P>>x)+A]=Le<<24|Xe<<16|De|0;while(A!==0);for(O=1<<c-1;P&O;)O>>=1;if(O!==0?(P&=O-1,P+=O):P=0,h++,--ne[c]===0){if(c===_)break;c=r[n+o[h]]}if(c>y&&(P&F)!==R){for(x===0&&(x=y),I+=p,S=c-x,k=1<<S;S+x<_&&(k-=ne[S+x],!(k<=0));)S++,k<<=1;if(T+=1<<S,e===Sv&&T>uO||e===fO&&T>cO)return 1;R=P&F,s[R]=y<<24|S<<16|I-a|0}}return P!==0&&(s[I+P]=c-x<<24|64<<16|0),l.bits=y,0}});var ZO=L(ai=>{"use strict";var tn=Ls(),Pv=dv(),Ni=fv(),a7=oO(),Of=pO(),o7=0,$O=1,zO=2,mO=4,l7=5,Dg=6,sl=0,u7=1,c7=2,On=-2,UO=-3,Ov=-4,d7=-5,gO=8,WO=1,_O=2,bO=3,yO=4,wO=5,vO=6,xO=7,SO=8,kO=9,EO=10,Lg=11,js=12,kv=13,TO=14,Ev=15,CO=16,AO=17,PO=18,OO=19,Mg=20,Ig=21,RO=22,DO=23,MO=24,IO=25,LO=26,Tv=27,FO=28,NO=29,rt=30,Rv=31,f7=32,h7=852,p7=592,m7=15,g7=m7;function jO(t){return(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24)}function _7(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new tn.Buf16(320),this.work=new tn.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function qO(t){var e;return!t||!t.state?On:(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=WO,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new tn.Buf32(h7),e.distcode=e.distdyn=new tn.Buf32(p7),e.sane=1,e.back=-1,sl)}function HO(t){var e;return!t||!t.state?On:(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,qO(t))}function VO(t,e){var r,n;return!t||!t.state||(n=t.state,e<0?(r=0,e=-e):(r=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15))?On:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,HO(t))}function YO(t,e){var r,n;return t?(n=new _7,t.state=n,n.window=null,r=VO(t,e),r!==sl&&(t.state=null),r):On}function b7(t){return YO(t,g7)}var BO=!0,Cv,Av;function y7(t){if(BO){var e;for(Cv=new tn.Buf32(512),Av=new tn.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Of($O,t.lens,0,288,Cv,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Of(zO,t.lens,0,32,Av,0,t.work,{bits:5}),BO=!1}t.lencode=Cv,t.lenbits=9,t.distcode=Av,t.distbits=5}function GO(t,e,r,n){var i,s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new tn.Buf8(s.wsize)),n>=s.wsize?(tn.arraySet(s.window,e,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>n&&(i=n),tn.arraySet(s.window,e,r-n,i,s.wnext),n-=i,n?(tn.arraySet(s.window,e,r-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0}function w7(t,e){var r,n,i,s,a,o,l,u,c,h,p,_,y,S,x=0,k,T,P,O,A,R,F,I,U=new tn.Buf8(4),X,z,ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&t.avail_in!==0)return On;r=t.state,r.mode===js&&(r.mode=kv),a=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,u=r.hold,c=r.bits,h=o,p=l,I=sl;e:for(;;)switch(r.mode){case WO:if(r.wrap===0){r.mode=kv;break}for(;c<16;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(r.wrap&2&&u===35615){r.check=0,U[0]=u&255,U[1]=u>>>8&255,r.check=Ni(r.check,U,2,0),u=0,c=0,r.mode=_O;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=rt;break}if((u&15)!==gO){t.msg="unknown compression method",r.mode=rt;break}if(u>>>=4,c-=4,F=(u&15)+8,r.wbits===0)r.wbits=F;else if(F>r.wbits){t.msg="invalid window size",r.mode=rt;break}r.dmax=1<<F,t.adler=r.check=1,r.mode=u&512?EO:js,u=0,c=0;break;case _O:for(;c<16;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(r.flags=u,(r.flags&255)!==gO){t.msg="unknown compression method",r.mode=rt;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=rt;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&(U[0]=u&255,U[1]=u>>>8&255,r.check=Ni(r.check,U,2,0)),u=0,c=0,r.mode=bO;case bO:for(;c<32;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}r.head&&(r.head.time=u),r.flags&512&&(U[0]=u&255,U[1]=u>>>8&255,U[2]=u>>>16&255,U[3]=u>>>24&255,r.check=Ni(r.check,U,4,0)),u=0,c=0,r.mode=yO;case yO:for(;c<16;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&(U[0]=u&255,U[1]=u>>>8&255,r.check=Ni(r.check,U,2,0)),u=0,c=0,r.mode=wO;case wO:if(r.flags&1024){for(;c<16;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&(U[0]=u&255,U[1]=u>>>8&255,r.check=Ni(r.check,U,2,0)),u=0,c=0}else r.head&&(r.head.extra=null);r.mode=vO;case vO:if(r.flags&1024&&(_=r.length,_>o&&(_=o),_&&(r.head&&(F=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),tn.arraySet(r.head.extra,n,s,_,F)),r.flags&512&&(r.check=Ni(r.check,n,_,s)),o-=_,s+=_,r.length-=_),r.length))break e;r.length=0,r.mode=xO;case xO:if(r.flags&2048){if(o===0)break e;_=0;do F=n[s+_++],r.head&&F&&r.length<65536&&(r.head.name+=String.fromCharCode(F));while(F&&_<o);if(r.flags&512&&(r.check=Ni(r.check,n,_,s)),o-=_,s+=_,F)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=SO;case SO:if(r.flags&4096){if(o===0)break e;_=0;do F=n[s+_++],r.head&&F&&r.length<65536&&(r.head.comment+=String.fromCharCode(F));while(F&&_<o);if(r.flags&512&&(r.check=Ni(r.check,n,_,s)),o-=_,s+=_,F)break e}else r.head&&(r.head.comment=null);r.mode=kO;case kO:if(r.flags&512){for(;c<16;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=rt;break}u=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=js;break;case EO:for(;c<32;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}t.adler=r.check=jO(u),u=0,c=0,r.mode=Lg;case Lg:if(r.havedict===0)return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=c,c7;t.adler=r.check=1,r.mode=js;case js:if(e===l7||e===Dg)break e;case kv:if(r.last){u>>>=c&7,c-=c&7,r.mode=Tv;break}for(;c<3;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}switch(r.last=u&1,u>>>=1,c-=1,u&3){case 0:r.mode=TO;break;case 1:if(y7(r),r.mode=Mg,e===Dg){u>>>=2,c-=2;break e}break;case 2:r.mode=AO;break;case 3:t.msg="invalid block type",r.mode=rt}u>>>=2,c-=2;break;case TO:for(u>>>=c&7,c-=c&7;c<32;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=rt;break}if(r.length=u&65535,u=0,c=0,r.mode=Ev,e===Dg)break e;case Ev:r.mode=CO;case CO:if(_=r.length,_){if(_>o&&(_=o),_>l&&(_=l),_===0)break e;tn.arraySet(i,n,s,_,a),o-=_,s+=_,l-=_,a+=_,r.length-=_;break}r.mode=js;break;case AO:for(;c<14;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(r.nlen=(u&31)+257,u>>>=5,c-=5,r.ndist=(u&31)+1,u>>>=5,c-=5,r.ncode=(u&15)+4,u>>>=4,c-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=rt;break}r.have=0,r.mode=PO;case PO:for(;r.have<r.ncode;){for(;c<3;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}r.lens[ne[r.have++]]=u&7,u>>>=3,c-=3}for(;r.have<19;)r.lens[ne[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,X={bits:r.lenbits},I=Of(o7,r.lens,0,19,r.lencode,0,r.work,X),r.lenbits=X.bits,I){t.msg="invalid code lengths set",r.mode=rt;break}r.have=0,r.mode=OO;case OO:for(;r.have<r.nlen+r.ndist;){for(;x=r.lencode[u&(1<<r.lenbits)-1],k=x>>>24,T=x>>>16&255,P=x&65535,!(k<=c);){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(P<16)u>>>=k,c-=k,r.lens[r.have++]=P;else{if(P===16){for(z=k+2;c<z;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(u>>>=k,c-=k,r.have===0){t.msg="invalid bit length repeat",r.mode=rt;break}F=r.lens[r.have-1],_=3+(u&3),u>>>=2,c-=2}else if(P===17){for(z=k+3;c<z;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}u>>>=k,c-=k,F=0,_=3+(u&7),u>>>=3,c-=3}else{for(z=k+7;c<z;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}u>>>=k,c-=k,F=0,_=11+(u&127),u>>>=7,c-=7}if(r.have+_>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=rt;break}for(;_--;)r.lens[r.have++]=F}}if(r.mode===rt)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=rt;break}if(r.lenbits=9,X={bits:r.lenbits},I=Of($O,r.lens,0,r.nlen,r.lencode,0,r.work,X),r.lenbits=X.bits,I){t.msg="invalid literal/lengths set",r.mode=rt;break}if(r.distbits=6,r.distcode=r.distdyn,X={bits:r.distbits},I=Of(zO,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,X),r.distbits=X.bits,I){t.msg="invalid distances set",r.mode=rt;break}if(r.mode=Mg,e===Dg)break e;case Mg:r.mode=Ig;case Ig:if(o>=6&&l>=258){t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=c,a7(t,p),a=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,n=t.input,o=t.avail_in,u=r.hold,c=r.bits,r.mode===js&&(r.back=-1);break}for(r.back=0;x=r.lencode[u&(1<<r.lenbits)-1],k=x>>>24,T=x>>>16&255,P=x&65535,!(k<=c);){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(T&&!(T&240)){for(O=k,A=T,R=P;x=r.lencode[R+((u&(1<<O+A)-1)>>O)],k=x>>>24,T=x>>>16&255,P=x&65535,!(O+k<=c);){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}u>>>=O,c-=O,r.back+=O}if(u>>>=k,c-=k,r.back+=k,r.length=P,T===0){r.mode=LO;break}if(T&32){r.back=-1,r.mode=js;break}if(T&64){t.msg="invalid literal/length code",r.mode=rt;break}r.extra=T&15,r.mode=RO;case RO:if(r.extra){for(z=r.extra;c<z;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=DO;case DO:for(;x=r.distcode[u&(1<<r.distbits)-1],k=x>>>24,T=x>>>16&255,P=x&65535,!(k<=c);){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(!(T&240)){for(O=k,A=T,R=P;x=r.distcode[R+((u&(1<<O+A)-1)>>O)],k=x>>>24,T=x>>>16&255,P=x&65535,!(O+k<=c);){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}u>>>=O,c-=O,r.back+=O}if(u>>>=k,c-=k,r.back+=k,T&64){t.msg="invalid distance code",r.mode=rt;break}r.offset=P,r.extra=T&15,r.mode=MO;case MO:if(r.extra){for(z=r.extra;c<z;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=rt;break}r.mode=IO;case IO:if(l===0)break e;if(_=p-l,r.offset>_){if(_=r.offset-_,_>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=rt;break}_>r.wnext?(_-=r.wnext,y=r.wsize-_):y=r.wnext-_,_>r.length&&(_=r.length),S=r.window}else S=i,y=a-r.offset,_=r.length;_>l&&(_=l),l-=_,r.length-=_;do i[a++]=S[y++];while(--_);r.length===0&&(r.mode=Ig);break;case LO:if(l===0)break e;i[a++]=r.length,l--,r.mode=Ig;break;case Tv:if(r.wrap){for(;c<32;){if(o===0)break e;o--,u|=n[s++]<<c,c+=8}if(p-=l,t.total_out+=p,r.total+=p,p&&(t.adler=r.check=r.flags?Ni(r.check,i,p,a-p):Pv(r.check,i,p,a-p)),p=l,(r.flags?u:jO(u))!==r.check){t.msg="incorrect data check",r.mode=rt;break}u=0,c=0}r.mode=FO;case FO:if(r.wrap&&r.flags){for(;c<32;){if(o===0)break e;o--,u+=n[s++]<<c,c+=8}if(u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=rt;break}u=0,c=0}r.mode=NO;case NO:I=u7;break e;case rt:I=UO;break e;case Rv:return Ov;case f7:default:return On}return t.next_out=a,t.avail_out=l,t.next_in=s,t.avail_in=o,r.hold=u,r.bits=c,(r.wsize||p!==t.avail_out&&r.mode<rt&&(r.mode<Tv||e!==mO))&&GO(t,t.output,t.next_out,p-t.avail_out)?(r.mode=Rv,Ov):(h-=t.avail_in,p-=t.avail_out,t.total_in+=h,t.total_out+=p,r.total+=p,r.wrap&&p&&(t.adler=r.check=r.flags?Ni(r.check,i,p,t.next_out-p):Pv(r.check,i,p,t.next_out-p)),t.data_type=r.bits+(r.last?64:0)+(r.mode===js?128:0)+(r.mode===Mg||r.mode===Ev?256:0),(h===0&&p===0||e===mO)&&I===sl&&(I=d7),I)}function v7(t){if(!t||!t.state)return On;var e=t.state;return e.window&&(e.window=null),t.state=null,sl}function x7(t,e){var r;return!t||!t.state||(r=t.state,!(r.wrap&2))?On:(r.head=e,e.done=!1,sl)}function S7(t,e){var r=e.length,n,i,s;return!t||!t.state||(n=t.state,n.wrap!==0&&n.mode!==Lg)?On:n.mode===Lg&&(i=1,i=Pv(i,e,r,0),i!==n.check)?UO:(s=GO(t,e,r,r),s?(n.mode=Rv,Ov):(n.havedict=1,sl))}ai.inflateReset=HO;ai.inflateReset2=VO;ai.inflateResetKeep=qO;ai.inflateInit=b7;ai.inflateInit2=YO;ai.inflate=w7;ai.inflateEnd=v7;ai.inflateGetHeader=x7;ai.inflateSetDictionary=S7;ai.inflateInfo="pako inflate (from Nodeca project)"});var Dv=L((Dre,JO)=>{"use strict";JO.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var XO=L((Mre,KO)=>{"use strict";function k7(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}KO.exports=k7});var eR=L(Df=>{"use strict";var uc=ZO(),Rf=Ls(),Fg=_v(),ft=Dv(),Mv=Sg(),E7=bv(),T7=XO(),QO=Object.prototype.toString;function al(t){if(!(this instanceof al))return new al(t);this.options=Rf.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new E7,this.strm.avail_out=0;var r=uc.inflateInit2(this.strm,e.windowBits);if(r!==ft.Z_OK)throw new Error(Mv[r]);if(this.header=new T7,uc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Fg.string2buf(e.dictionary):QO.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=uc.inflateSetDictionary(this.strm,e.dictionary),r!==ft.Z_OK)))throw new Error(Mv[r])}al.prototype.push=function(t,e){var r=this.strm,n=this.options.chunkSize,i=this.options.dictionary,s,a,o,l,u,c=!1;if(this.ended)return!1;a=e===~~e?e:e===!0?ft.Z_FINISH:ft.Z_NO_FLUSH,typeof t=="string"?r.input=Fg.binstring2buf(t):QO.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new Rf.Buf8(n),r.next_out=0,r.avail_out=n),s=uc.inflate(r,ft.Z_NO_FLUSH),s===ft.Z_NEED_DICT&&i&&(s=uc.inflateSetDictionary(this.strm,i)),s===ft.Z_BUF_ERROR&&c===!0&&(s=ft.Z_OK,c=!1),s!==ft.Z_STREAM_END&&s!==ft.Z_OK)return this.onEnd(s),this.ended=!0,!1;r.next_out&&(r.avail_out===0||s===ft.Z_STREAM_END||r.avail_in===0&&(a===ft.Z_FINISH||a===ft.Z_SYNC_FLUSH))&&(this.options.to==="string"?(o=Fg.utf8border(r.output,r.next_out),l=r.next_out-o,u=Fg.buf2string(r.output,o),r.next_out=l,r.avail_out=n-l,l&&Rf.arraySet(r.output,r.output,o,l,0),this.onData(u)):this.onData(Rf.shrinkBuf(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(c=!0)}while((r.avail_in>0||r.avail_out===0)&&s!==ft.Z_STREAM_END);return s===ft.Z_STREAM_END&&(a=ft.Z_FINISH),a===ft.Z_FINISH?(s=uc.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===ft.Z_OK):(a===ft.Z_SYNC_FLUSH&&(this.onEnd(ft.Z_OK),r.avail_out=0),!0)};al.prototype.onData=function(t){this.chunks.push(t)};al.prototype.onEnd=function(t){t===ft.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Rf.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Iv(t,e){var r=new al(e);if(r.push(t,!0),r.err)throw r.msg||Mv[r.err];return r.result}function C7(t,e){return e=e||{},e.raw=!0,Iv(t,e)}Df.Inflate=al;Df.inflate=Iv;Df.inflateRaw=C7;Df.ungzip=Iv});var nR=L((Lre,rR)=>{"use strict";var A7=Ls().assign,P7=sO(),O7=eR(),R7=Dv(),tR={};A7(tR,P7,O7,R7);rR.exports=tR});var sR=L(jg=>{"use strict";var D7=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",M7=nR(),iR=nt(),Ng=en(),I7=D7?"uint8array":"array";jg.magic="\b\0";function ol(t,e){Ng.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}iR.inherits(ol,Ng);ol.prototype.processChunk=function(t){this.meta=t.meta,this._pako===null&&this._createPako(),this._pako.push(iR.transformTo(I7,t.data),!1)};ol.prototype.flush=function(){Ng.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)};ol.prototype.cleanUp=function(){Ng.prototype.cleanUp.call(this),this._pako=null};ol.prototype._createPako=function(){this._pako=new M7[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}};jg.compressWorker=function(t){return new ol("Deflate",t)};jg.uncompressWorker=function(){return new ol("Inflate",{})}});var Fv=L(Lv=>{"use strict";var aR=en();Lv.STORE={magic:"\0\0",compressWorker:function(){return new aR("STORE compression")},uncompressWorker:function(){return new aR("STORE decompression")}};Lv.DEFLATE=sR()});var Nv=L(ll=>{"use strict";ll.LOCAL_FILE_HEADER="PK";ll.CENTRAL_FILE_HEADER="PK";ll.CENTRAL_DIRECTORY_END="PK";ll.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07";ll.ZIP64_CENTRAL_DIRECTORY_END="PK";ll.DATA_DESCRIPTOR="PK\x07\b"});var cR=L((Bre,uR)=>{"use strict";var cc=nt(),dc=en(),jv=Xu(),oR=bg(),Bg=Nv(),Ye=function(t,e){var r="",n;for(n=0;n<e;n++)r+=String.fromCharCode(t&255),t=t>>>8;return r},L7=function(t,e){var r=t;return t||(r=e?16893:33204),(r&65535)<<16},F7=function(t){return(t||0)&63},lR=function(t,e,r,n,i,s){var a=t.file,o=t.compression,l=s!==jv.utf8encode,u=cc.transformTo("string",s(a.name)),c=cc.transformTo("string",jv.utf8encode(a.name)),h=a.comment,p=cc.transformTo("string",s(h)),_=cc.transformTo("string",jv.utf8encode(h)),y=c.length!==a.name.length,S=_.length!==h.length,x,k,T="",P="",O="",A=a.dir,R=a.date,F={crc32:0,compressedSize:0,uncompressedSize:0};(!e||r)&&(F.crc32=t.crc32,F.compressedSize=t.compressedSize,F.uncompressedSize=t.uncompressedSize);var I=0;e&&(I|=8),!l&&(y||S)&&(I|=2048);var U=0,X=0;A&&(U|=16),i==="UNIX"?(X=798,U|=L7(a.unixPermissions,A)):(X=20,U|=F7(a.dosPermissions,A)),x=R.getUTCHours(),x=x<<6,x=x|R.getUTCMinutes(),x=x<<5,x=x|R.getUTCSeconds()/2,k=R.getUTCFullYear()-1980,k=k<<4,k=k|R.getUTCMonth()+1,k=k<<5,k=k|R.getUTCDate(),y&&(P=Ye(1,1)+Ye(oR(u),4)+c,T+="up"+Ye(P.length,2)+P),S&&(O=Ye(1,1)+Ye(oR(p),4)+_,T+="uc"+Ye(O.length,2)+O);var z="";z+=`
\0`,z+=Ye(I,2),z+=o.magic,z+=Ye(x,2),z+=Ye(k,2),z+=Ye(F.crc32,4),z+=Ye(F.compressedSize,4),z+=Ye(F.uncompressedSize,4),z+=Ye(u.length,2),z+=Ye(T.length,2);var ne=Bg.LOCAL_FILE_HEADER+z+u+T,ge=Bg.CENTRAL_FILE_HEADER+Ye(X,2)+z+Ye(p.length,2)+"\0\0\0\0"+Ye(U,4)+Ye(n,4)+u+T+p;return{fileRecord:ne,dirRecord:ge}},N7=function(t,e,r,n,i){var s="",a=cc.transformTo("string",i(n));return s=Bg.CENTRAL_DIRECTORY_END+"\0\0\0\0"+Ye(t,2)+Ye(t,2)+Ye(e,4)+Ye(r,4)+Ye(a.length,2)+a,s},j7=function(t){var e="";return e=Bg.DATA_DESCRIPTOR+Ye(t.crc32,4)+Ye(t.compressedSize,4)+Ye(t.uncompressedSize,4),e};function oi(t,e,r,n){dc.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=n,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}cc.inherits(oi,dc);oi.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,n=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,dc.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-n-1))/r:100}}))};oi.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=lR(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0};oi.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=lR(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:j7(t),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null};oi.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,n=N7(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:n,meta:{percent:100}})};oi.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()};oi.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",function(r){e.processChunk(r)}),t.on("end",function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()}),t.on("error",function(r){e.error(r)}),this};oi.prototype.resume=function(){if(!dc.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0};oi.prototype.error=function(t){var e=this._sources;if(!dc.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch(n){}return!0};oi.prototype.lock=function(){dc.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()};uR.exports=oi});var fR=L(dR=>{"use strict";var B7=Fv(),$7=cR(),z7=function(t,e){var r=t||e,n=B7[r];if(!n)throw new Error(r+" is not a valid compression method !");return n};dR.generateWorker=function(t,e,r){var n=new $7(e.streamFiles,r,e.platform,e.encodeFileName),i=0;try{t.forEach(function(s,a){i++;var o=z7(a.options.compression,e.compression),l=a.options.compressionOptions||e.compressionOptions||{},u=a.dir,c=a.date;a._compressWorker(o,l).withStreamInfo("file",{name:s,dir:u,date:c,comment:a.comment||"",unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions}).pipe(n)}),n.entriesCount=i}catch(s){n.error(s)}return n}});var pR=L((zre,hR)=>{"use strict";var U7=nt(),$g=en();function Mf(t,e){$g.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}U7.inherits(Mf,$g);Mf.prototype._bindStream=function(t){var e=this;this._stream=t,t.pause(),t.on("data",function(r){e.push({data:r,meta:{percent:0}})}).on("error",function(r){e.isPaused?this.generatedError=r:e.error(r)}).on("end",function(){e.isPaused?e._upstreamEnded=!0:e.end()})};Mf.prototype.pause=function(){return $g.prototype.pause.call(this)?(this._stream.pause(),!0):!1};Mf.prototype.resume=function(){return $g.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1};hR.exports=Mf});var kR=L((Ure,SR)=>{"use strict";var W7=Xu(),If=nt(),bR=en(),q7=Ww(),yR=qw(),mR=yg(),H7=gP(),V7=fR(),gR=uf(),Y7=pR(),wR=function(t,e,r){var n=If.getTypeOf(e),i,s=If.extend(r||{},yR);s.date=s.date||new Date,s.compression!==null&&(s.compression=s.compression.toUpperCase()),typeof s.unixPermissions=="string"&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&s.unixPermissions&16384&&(s.dir=!0),s.dosPermissions&&s.dosPermissions&16&&(s.dir=!0),s.dir&&(t=vR(t)),s.createFolders&&(i=G7(t))&&xR.call(this,i,!0);var a=n==="string"&&s.binary===!1&&s.base64===!1;(!r||typeof r.binary=="undefined")&&(s.binary=!a);var o=e instanceof mR&&e.uncompressedSize===0;(o||s.dir||!e||e.length===0)&&(s.base64=!1,s.binary=!0,e="",s.compression="STORE",n="string");var l=null;e instanceof mR||e instanceof bR?l=e:gR.isNode&&gR.isStream(e)?l=new Y7(t,e):l=If.prepareContent(t,e,s.binary,s.optimizedBinaryString,s.base64);var u=new H7(t,l,s);this.files[t]=u},G7=function(t){t.slice(-1)==="/"&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},vR=function(t){return t.slice(-1)!=="/"&&(t+="/"),t},xR=function(t,e){return e=typeof e!="undefined"?e:yR.createFolders,t=vR(t),this.files[t]||wR.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function _R(t){return Object.prototype.toString.call(t)==="[object RegExp]"}var Z7={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,r,n;for(e in this.files)n=this.files[e],r=e.slice(this.root.length,e.length),r&&e.slice(0,this.root.length)===this.root&&t(r,n)},filter:function(t){var e=[];return this.forEach(function(r,n){t(r,n)&&e.push(n)}),e},file:function(t,e,r){if(arguments.length===1)if(_R(t)){var n=t;return this.filter(function(s,a){return!a.dir&&n.test(s)})}else{var i=this.files[this.root+t];return i&&!i.dir?i:null}else t=this.root+t,wR.call(this,t,e,r);return this},folder:function(t){if(!t)return this;if(_R(t))return this.filter(function(i,s){return s.dir&&t.test(i)});var e=this.root+t,r=xR.call(this,e),n=this.clone();return n.root=r.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||(t.slice(-1)!=="/"&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter(function(i,s){return s.name.slice(0,t.length)===t}),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,r={};try{if(r=If.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:W7.utf8encode}),r.type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),r.type==="binarystring"&&(r.type="string"),!r.type)throw new Error("No output type specified.");If.checkSupport(r.type),(r.platform==="darwin"||r.platform==="freebsd"||r.platform==="linux"||r.platform==="sunos")&&(r.platform="UNIX"),r.platform==="win32"&&(r.platform="DOS");var n=r.comment||this.comment||"";e=V7.generateWorker(this,r,n)}catch(i){e=new bR("error"),e.error(i)}return new q7(e,r.type||"string",r.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return t=t||{},t.type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};SR.exports=Z7});var Bv=L((Wre,TR)=>{"use strict";var J7=nt();function ER(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}ER.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(){},readInt:function(t){var e=0,r;for(this.checkOffset(t),r=this.index+t-1;r>=this.index;r--)e=(e<<8)+this.byteAt(r);return this.index+=t,e},readString:function(t){return J7.transformTo("string",this.readData(t))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC((t>>25&127)+1980,(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(t&31)<<1))}};TR.exports=ER});var $v=L((qre,AR)=>{"use strict";var CR=Bv(),K7=nt();function fc(t){CR.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=t[e]&255}K7.inherits(fc,CR);fc.prototype.byteAt=function(t){return this.data[this.zero+t]};fc.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),s=this.length-4;s>=0;--s)if(this.data[s]===e&&this.data[s+1]===r&&this.data[s+2]===n&&this.data[s+3]===i)return s-this.zero;return-1};fc.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),s=this.readData(4);return e===s[0]&&r===s[1]&&n===s[2]&&i===s[3]};fc.prototype.readData=function(t){if(this.checkOffset(t),t===0)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};AR.exports=fc});var RR=L((Hre,OR)=>{"use strict";var PR=Bv(),X7=nt();function hc(t){PR.call(this,t)}X7.inherits(hc,PR);hc.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)};hc.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero};hc.prototype.readAndCheckSignature=function(t){var e=this.readData(4);return t===e};hc.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};OR.exports=hc});var Uv=L((Vre,MR)=>{"use strict";var DR=$v(),Q7=nt();function zv(t){DR.call(this,t)}Q7.inherits(zv,DR);zv.prototype.readData=function(t){if(this.checkOffset(t),t===0)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};MR.exports=zv});var FR=L((Yre,LR)=>{"use strict";var IR=Uv(),e9=nt();function Wv(t){IR.call(this,t)}e9.inherits(Wv,IR);Wv.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e};LR.exports=Wv});var qv=L((Gre,jR)=>{"use strict";var zg=nt(),NR=Ms(),t9=$v(),r9=RR(),n9=FR(),i9=Uv();jR.exports=function(t){var e=zg.getTypeOf(t);return zg.checkSupport(e),e==="string"&&!NR.uint8array?new r9(t):e==="nodebuffer"?new n9(t):NR.uint8array?new i9(zg.transformTo("uint8array",t)):new t9(zg.transformTo("array",t))}});var UR=L((Zre,zR)=>{"use strict";var Hv=qv(),Na=nt(),s9=yg(),BR=bg(),Ug=Xu(),Wg=Fv(),a9=Ms(),o9=0,l9=3,u9=function(t){for(var e in Wg)if(Object.prototype.hasOwnProperty.call(Wg,e)&&Wg[e].magic===t)return Wg[e];return null};function $R(t,e){this.options=t,this.loadOptions=e}$R.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(e=u9(this.compressionMethod),e===null)throw new Error("Corrupted zip : compression "+Na.pretty(this.compressionMethod)+" unknown (inner file : "+Na.transformTo("string",this.fileName)+")");this.decompressed=new s9(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),t===o9&&(this.dosPermissions=this.externalFileAttributes&63),t===l9&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=Hv(this.extraFields[1].value);this.uncompressedSize===Na.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===Na.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===Na.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===Na.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e=t.index+this.extraFieldsLength,r,n,i;for(this.extraFields||(this.extraFields={});t.index+4<e;)r=t.readInt(2),n=t.readInt(2),i=t.readData(n),this.extraFields[r]={id:r,length:n,value:i};t.setIndex(e)},handleUTF8:function(){var t=a9.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=Ug.utf8decode(this.fileName),this.fileCommentStr=Ug.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(e!==null)this.fileNameStr=e;else{var r=Na.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(n!==null)this.fileCommentStr=n;else{var i=Na.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=Hv(t.value);return e.readInt(1)!==1||BR(this.fileName)!==e.readInt(4)?null:Ug.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=Hv(t.value);return e.readInt(1)!==1||BR(this.fileComment)!==e.readInt(4)?null:Ug.utf8decode(e.readData(t.length-5))}return null}};zR.exports=$R});var HR=L((Jre,qR)=>{"use strict";var c9=qv(),Bs=nt(),li=Nv(),d9=UR(),f9=Ms();function WR(t){this.files=[],this.loadOptions=t}WR.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+Bs.pretty(e)+", expected "+Bs.pretty(t)+")")}},isSignature:function(t,e){var r=this.reader.index;this.reader.setIndex(t);var n=this.reader.readString(4),i=n===e;return this.reader.setIndex(r),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=f9.uint8array?"uint8array":"array",r=Bs.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t=this.zip64EndOfCentralSize-44,e=0,r,n,i;e<t;)r=this.reader.readInt(2),n=this.reader.readInt(4),i=this.reader.readData(n),this.zip64ExtensibleData[r]={id:r,length:n,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(li.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(li.CENTRAL_FILE_HEADER);)t=new d9({zip64:this.zip64},this.loadOptions),t.readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(li.CENTRAL_DIRECTORY_END);if(t<0){var e=!this.isSignature(0,li.LOCAL_FILE_HEADER);throw e?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(t);var r=t;if(this.checkSignature(li.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===Bs.MAX_VALUE_16BITS||this.diskWithCentralDirStart===Bs.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===Bs.MAX_VALUE_16BITS||this.centralDirRecords===Bs.MAX_VALUE_16BITS||this.centralDirSize===Bs.MAX_VALUE_32BITS||this.centralDirOffset===Bs.MAX_VALUE_32BITS){if(this.zip64=!0,t=this.reader.lastIndexOfSignature(li.ZIP64_CENTRAL_DIRECTORY_LOCATOR),t<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(li.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,li.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(li.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(li.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=r-n;if(i>0)this.isSignature(r,li.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(t){this.reader=c9(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}};qR.exports=WR});var GR=L((Kre,YR)=>{"use strict";var Vv=nt(),qg=Zu(),h9=Xu(),p9=HR(),m9=Yw(),VR=uf();function g9(t){return new qg.Promise(function(e,r){var n=t.decompressed.getContentWorker().pipe(new m9);n.on("error",function(i){r(i)}).on("end",function(){n.streamInfo.crc32!==t.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):e()}).resume()})}YR.exports=function(t,e){var r=this;return e=Vv.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:h9.utf8decode}),VR.isNode&&VR.isStream(t)?qg.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):Vv.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then(function(n){var i=new p9(e);return i.load(n),i}).then(function(i){var s=[qg.Promise.resolve(i)],a=i.files;if(e.checkCRC32)for(var o=0;o<a.length;o++)s.push(g9(a[o]));return qg.Promise.all(s)}).then(function(i){for(var s=i.shift(),a=s.files,o=0;o<a.length;o++){var l=a[o],u=l.fileNameStr,c=Vv.resolve(l.fileNameStr);r.file(c,l.decompressed,{binary:!0,optimizedBinaryString:!0,date:l.date,dir:l.dir,comment:l.fileCommentStr.length?l.fileCommentStr:null,unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions,createFolders:e.createFolders}),l.dir||(r.file(c).unsafeOriginalName=u)}return s.zipComment.length&&(r.comment=s.zipComment),r})}});var JR=L((Xre,ZR)=>{"use strict";function Rn(){if(!(this instanceof Rn))return new Rn;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var t=new Rn;for(var e in this)typeof this[e]!="function"&&(t[e]=this[e]);return t}}Rn.prototype=kR();Rn.prototype.loadAsync=GR();Rn.support=Ms();Rn.defaults=qw();Rn.version="3.10.1";Rn.loadAsync=function(t,e){return new Rn().loadAsync(t,e)};Rn.external=Zu();ZR.exports=Rn});var pI=L((Woe,nb)=>{var zM,UM,WM,qM,HM,VM,YM,GM,ZM,JM,KM,XM,QM,tb,_1,eI,tI,rI,Mc,nI,iI,sI,aI,oI,lI,uI,cI,dI,rb,fI,hI;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof nb=="object"&&typeof nb.exports=="object"?t(r(e,r(nb.exports))):t(r(e));function r(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=i?i(s,a):a}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(i[a]=s[a])};zM=function(i,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");e(i,s);function a(){this.constructor=i}i.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)},UM=Object.assign||function(i){for(var s,a=1,o=arguments.length;a<o;a++){s=arguments[a];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(i[l]=s[l])}return i},WM=function(i,s){var a={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&s.indexOf(o)<0&&(a[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(i);l<o.length;l++)s.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(i,o[l])&&(a[o[l]]=i[o[l]]);return a},qM=function(i,s,a,o){var l=arguments.length,u=l<3?s:o===null?o=Object.getOwnPropertyDescriptor(s,a):o,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,s,a,o);else for(var h=i.length-1;h>=0;h--)(c=i[h])&&(u=(l<3?c(u):l>3?c(s,a,u):c(s,a))||u);return l>3&&u&&Object.defineProperty(s,a,u),u},HM=function(i,s){return function(a,o){s(a,o,i)}},VM=function(i,s,a,o,l,u){function c(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var h=o.kind,p=h==="getter"?"get":h==="setter"?"set":"value",_=!s&&i?o.static?i:i.prototype:null,y=s||(_?Object.getOwnPropertyDescriptor(_,o.name):{}),S,x=!1,k=a.length-1;k>=0;k--){var T={};for(var P in o)T[P]=P==="access"?{}:o[P];for(var P in o.access)T.access[P]=o.access[P];T.addInitializer=function(A){if(x)throw new TypeError("Cannot add initializers after decoration has completed");u.push(c(A||null))};var O=(0,a[k])(h==="accessor"?{get:y.get,set:y.set}:y[p],T);if(h==="accessor"){if(O===void 0)continue;if(O===null||typeof O!="object")throw new TypeError("Object expected");(S=c(O.get))&&(y.get=S),(S=c(O.set))&&(y.set=S),(S=c(O.init))&&l.unshift(S)}else(S=c(O))&&(h==="field"?l.unshift(S):y[p]=S)}_&&Object.defineProperty(_,o.name,y),x=!0},YM=function(i,s,a){for(var o=arguments.length>2,l=0;l<s.length;l++)a=o?s[l].call(i,a):s[l].call(i);return o?a:void 0},GM=function(i){return typeof i=="symbol"?i:"".concat(i)},ZM=function(i,s,a){return typeof s=="symbol"&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:a?"".concat(a," ",s):s})},JM=function(i,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,s)},KM=function(i,s,a,o){function l(u){return u instanceof a?u:new a(function(c){c(u)})}return new(a||(a=Promise))(function(u,c){function h(y){try{_(o.next(y))}catch(S){c(S)}}function p(y){try{_(o.throw(y))}catch(S){c(S)}}function _(y){y.done?u(y.value):l(y.value).then(h,p)}_((o=o.apply(i,s||[])).next())})},XM=function(i,s){var a={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,l,u,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(_){return function(y){return p([_,y])}}function p(_){if(o)throw new TypeError("Generator is already executing.");for(;c&&(c=0,_[0]&&(a=0)),a;)try{if(o=1,l&&(u=_[0]&2?l.return:_[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,_[1])).done)return u;switch(l=0,u&&(_=[_[0]&2,u.value]),_[0]){case 0:case 1:u=_;break;case 4:return a.label++,{value:_[1],done:!1};case 5:a.label++,l=_[1],_=[0];continue;case 7:_=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(_[0]===6||_[0]===2)){a=0;continue}if(_[0]===3&&(!u||_[1]>u[0]&&_[1]<u[3])){a.label=_[1];break}if(_[0]===6&&a.label<u[1]){a.label=u[1],u=_;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(_);break}u[2]&&a.ops.pop(),a.trys.pop();continue}_=s.call(i,a)}catch(y){_=[6,y],l=0}finally{o=u=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},QM=function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&rb(s,i,a)},rb=Object.create?function(i,s,a,o){o===void 0&&(o=a);var l=Object.getOwnPropertyDescriptor(s,a);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(i,o,l)}:function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]},tb=function(i){var s=typeof Symbol=="function"&&Symbol.iterator,a=s&&i[s],o=0;if(a)return a.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},_1=function(i,s){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var o=a.call(i),l,u=[],c;try{for(;(s===void 0||s-- >0)&&!(l=o.next()).done;)u.push(l.value)}catch(h){c={error:h}}finally{try{l&&!l.done&&(a=o.return)&&a.call(o)}finally{if(c)throw c.error}}return u},eI=function(){for(var i=[],s=0;s<arguments.length;s++)i=i.concat(_1(arguments[s]));return i},tI=function(){for(var i=0,s=0,a=arguments.length;s<a;s++)i+=arguments[s].length;for(var o=Array(i),l=0,s=0;s<a;s++)for(var u=arguments[s],c=0,h=u.length;c<h;c++,l++)o[l]=u[c];return o},rI=function(i,s,a){if(a||arguments.length===2)for(var o=0,l=s.length,u;o<l;o++)(u||!(o in s))&&(u||(u=Array.prototype.slice.call(s,0,o)),u[o]=s[o]);return i.concat(u||Array.prototype.slice.call(s))},Mc=function(i){return this instanceof Mc?(this.v=i,this):new Mc(i)},nI=function(i,s,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=a.apply(i,s||[]),l,u=[];return l={},c("next"),c("throw"),c("return"),l[Symbol.asyncIterator]=function(){return this},l;function c(x){o[x]&&(l[x]=function(k){return new Promise(function(T,P){u.push([x,k,T,P])>1||h(x,k)})})}function h(x,k){try{p(o[x](k))}catch(T){S(u[0][3],T)}}function p(x){x.value instanceof Mc?Promise.resolve(x.value.v).then(_,y):S(u[0][2],x)}function _(x){h("next",x)}function y(x){h("throw",x)}function S(x,k){x(k),u.shift(),u.length&&h(u[0][0],u[0][1])}},iI=function(i){var s,a;return s={},o("next"),o("throw",function(l){throw l}),o("return"),s[Symbol.iterator]=function(){return this},s;function o(l,u){s[l]=i[l]?function(c){return(a=!a)?{value:Mc(i[l](c)),done:!1}:u?u(c):c}:u}},sI=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i[Symbol.asyncIterator],a;return s?s.call(i):(i=typeof tb=="function"?tb(i):i[Symbol.iterator](),a={},o("next"),o("throw"),o("return"),a[Symbol.asyncIterator]=function(){return this},a);function o(u){a[u]=i[u]&&function(c){return new Promise(function(h,p){c=i[u](c),l(h,p,c.done,c.value)})}}function l(u,c,h,p){Promise.resolve(p).then(function(_){u({value:_,done:h})},c)}},aI=function(i,s){return Object.defineProperty?Object.defineProperty(i,"raw",{value:s}):i.raw=s,i};var r=Object.create?function(i,s){Object.defineProperty(i,"default",{enumerable:!0,value:s})}:function(i,s){i.default=s};oI=function(i){if(i&&i.__esModule)return i;var s={};if(i!=null)for(var a in i)a!=="default"&&Object.prototype.hasOwnProperty.call(i,a)&&rb(s,i,a);return r(s,i),s},lI=function(i){return i&&i.__esModule?i:{default:i}},uI=function(i,s,a,o){if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?i!==s||!o:!s.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?o:a==="a"?o.call(i):o?o.value:s.get(i)},cI=function(i,s,a,o,l){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?i!==s||!l:!s.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?l.call(i,a):l?l.value=a:s.set(i,a),a},dI=function(i,s){if(s===null||typeof s!="object"&&typeof s!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?s===i:i.has(s)},fI=function(i,s,a){if(s!=null){if(typeof s!="object"&&typeof s!="function")throw new TypeError("Object expected.");var o;if(a){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=s[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=s[Symbol.dispose]}if(typeof o!="function")throw new TypeError("Object not disposable.");i.stack.push({value:s,dispose:o,async:a})}else a&&i.stack.push({async:!0});return s};var n=typeof SuppressedError=="function"?SuppressedError:function(i,s,a){var o=new Error(a);return o.name="SuppressedError",o.error=i,o.suppressed=s,o};hI=function(i){function s(o){i.error=i.hasError?new n(o,i.error,"An error was suppressed during disposal."):o,i.hasError=!0}function a(){for(;i.stack.length;){var o=i.stack.pop();try{var l=o.dispose&&o.dispose.call(o.value);if(o.async)return Promise.resolve(l).then(a,function(u){return s(u),a()})}catch(u){s(u)}}if(i.hasError)throw i.error}return a()},t("__extends",zM),t("__assign",UM),t("__rest",WM),t("__decorate",qM),t("__param",HM),t("__esDecorate",VM),t("__runInitializers",YM),t("__propKey",GM),t("__setFunctionName",ZM),t("__metadata",JM),t("__awaiter",KM),t("__generator",XM),t("__exportStar",QM),t("__createBinding",rb),t("__values",tb),t("__read",_1),t("__spread",eI),t("__spreadArrays",tI),t("__spreadArray",rI),t("__await",Mc),t("__asyncGenerator",nI),t("__asyncDelegator",iI),t("__asyncValues",sI),t("__makeTemplateObject",aI),t("__importStar",oI),t("__importDefault",lI),t("__classPrivateFieldGet",uI),t("__classPrivateFieldSet",cI),t("__classPrivateFieldIn",dI),t("__addDisposableResource",fI),t("__disposeResources",hI)})});var mH={};fy(mH,{default:()=>pH});module.exports=d5(mH);var pt=require("obsidian"),P1=He(py());function f5(t,e,r,n){function i(s){return s instanceof r?s:new r(function(a){a(s)})}return new(r||(r=Promise))(function(s,a){function o(c){try{u(n.next(c))}catch(h){a(h)}}function l(c){try{u(n.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):i(c.value).then(o,l)}u((n=n.apply(t,e||[])).next())})}var my="callout-manager",L1="v1";function F1(t){var e;return f5(this,void 0,void 0,function*(){let r=(e=t==null?void 0:t.app)!==null&&e!==void 0?e:globalThis.app,{plugins:n}=r;if(!n.enabledPlugins.has(my))return;let i=yield new Promise((s,a)=>{let o=n.plugins[my];if(o!==void 0)return s(o);let l=setInterval(()=>{let u=n.plugins[my];u!==void 0&&(clearInterval(l),s(u))},10)});return i.newApiHandle(L1,t,()=>{i.destroyApiHandle(L1,t)})})}var ja=require("obsidian");var gS=He(require("http"),1),_S=He(require("https"),1),mo=He(require("zlib"),1),Jr=He(require("stream"),1),xd=require("buffer");function h5(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let e=t.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let r=t.substring(5,e).split(";"),n="",i=!1,s=r[0]||"text/plain",a=s;for(let c=1;c<r.length;c++)r[c]==="base64"?i=!0:r[c]&&(a+=`;${r[c]}`,r[c].indexOf("charset=")===0&&(n=r[c].substring(8)));!r[0]&&!n.length&&(a+=";charset=US-ASCII",n="US-ASCII");let o=i?"base64":"ascii",l=unescape(t.substring(e+1)),u=Buffer.from(l,o);return u.type=s,u.typeFull=a,u.charset=n,u}var N1=h5;var mn=He(require("stream"),1),_s=require("util"),Zr=require("buffer");pd();pp();var gs=class extends Error{constructor(e,r){super(e),Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var Cr=class extends gs{constructor(e,r,n){super(e,r),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}};var mp=Symbol.toStringTag,yy=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[mp]==="URLSearchParams",bd=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[mp]),G1=t=>typeof t=="object"&&(t[mp]==="AbortSignal"||t[mp]==="EventTarget"),Z1=(t,e)=>{let r=new URL(e).hostname,n=new URL(t).hostname;return r===n||r.endsWith(`.${n}`)},J1=(t,e)=>{let r=new URL(e).protocol,n=new URL(t).protocol;return r===n};var A5=(0,_s.promisify)(mn.default.pipeline),Ar=Symbol("Body internals"),ki=class{constructor(e,{size:r=0}={}){let n=null;e===null?e=null:yy(e)?e=Zr.Buffer.from(e.toString()):bd(e)||Zr.Buffer.isBuffer(e)||(_s.types.isAnyArrayBuffer(e)?e=Zr.Buffer.from(e):ArrayBuffer.isView(e)?e=Zr.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof mn.default||(e instanceof ho?(e=Y1(e),n=e.type.split("=")[1]):e=Zr.Buffer.from(String(e))));let i=e;Zr.Buffer.isBuffer(e)?i=mn.default.Readable.from(e):bd(e)&&(i=mn.default.Readable.from(e.stream())),this[Ar]={body:e,stream:i,boundary:n,disturbed:!1,error:null},this.size=r,e instanceof mn.default&&e.on("error",s=>{let a=s instanceof gs?s:new Cr(`Invalid response body while trying to fetch ${this.url}: ${s.message}`,"system",s);this[Ar].error=a})}get body(){return this[Ar].stream}get bodyUsed(){return this[Ar].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:r,byteLength:n}=await xy(this);return e.slice(r,r+n)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let n=new ho,i=new URLSearchParams(await this.text());for(let[s,a]of i)n.append(s,a);return n}let{toFormData:r}=await Promise.resolve().then(()=>(tS(),eS));return r(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[Ar].body&&this[Ar].body.type||"",r=await this.arrayBuffer();return new ms([r],{type:e})}async json(){let e=await this.text();return JSON.parse(e)}async text(){let e=await xy(this);return new TextDecoder().decode(e)}buffer(){return xy(this)}};ki.prototype.buffer=(0,_s.deprecate)(ki.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(ki.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,_s.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function xy(t){if(t[Ar].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[Ar].disturbed=!0,t[Ar].error)throw t[Ar].error;let{body:e}=t;if(e===null)return Zr.Buffer.alloc(0);if(!(e instanceof mn.default))return Zr.Buffer.alloc(0);let r=[],n=0;try{for await(let i of e){if(t.size>0&&n+i.length>t.size){let s=new Cr(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(s),s}n+=i.length,r.push(i)}}catch(i){throw i instanceof gs?i:new Cr(`Invalid response body while trying to fetch ${t.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return r.every(i=>typeof i=="string")?Zr.Buffer.from(r.join("")):Zr.Buffer.concat(r,n)}catch(i){throw new Cr(`Could not create Buffer from response body for ${t.url}: ${i.message}`,"system",i)}else throw new Cr(`Premature close of server response while trying to fetch ${t.url}`)}var _u=(t,e)=>{let r,n,{body:i}=t[Ar];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof mn.default&&typeof i.getBoundary!="function"&&(r=new mn.PassThrough({highWaterMark:e}),n=new mn.PassThrough({highWaterMark:e}),i.pipe(r),i.pipe(n),t[Ar].stream=r,i=n),i},P5=(0,_s.deprecate)(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),yp=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":yy(t)?"application/x-www-form-urlencoded;charset=UTF-8":bd(t)?t.type||null:Zr.Buffer.isBuffer(t)||_s.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof ho?`multipart/form-data; boundary=${e[Ar].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${P5(t)}`:t instanceof mn.default?null:"text/plain;charset=UTF-8",rS=t=>{let{body:e}=t[Ar];return e===null?0:bd(e)?e.size:Zr.Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},nS=async(t,{body:e})=>{e===null?t.end():await A5(e,t)};var Sy=require("util"),wd=He(require("http"),1),wp=typeof wd.default.validateHeaderName=="function"?wd.default.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},ky=typeof wd.default.validateHeaderValue=="function"?wd.default.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let r=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}},sr=class t extends URLSearchParams{constructor(e){let r=[];if(e instanceof t){let n=e.raw();for(let[i,s]of Object.entries(n))r.push(...s.map(a=>[i,a]))}else if(e!=null)if(typeof e=="object"&&!Sy.types.isBoxedPrimitive(e)){let n=e[Symbol.iterator];if(n==null)r.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(i=>{if(typeof i!="object"||Sy.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,i])=>(wp(n),ky(n,String(i)),[String(n).toLowerCase(),String(i)])):void 0,super(r),new Proxy(this,{get(n,i,s){switch(i){case"append":case"set":return(a,o)=>(wp(a),ky(a,String(o)),URLSearchParams.prototype[i].call(n,String(a).toLowerCase(),String(o)));case"delete":case"has":case"getAll":return a=>(wp(a),URLSearchParams.prototype[i].call(n,String(a).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,s)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let r=this.getAll(e);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,r=void 0){for(let n of this.keys())Reflect.apply(e,r,[this.get(n),n,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{let n=this.getAll(r);return r==="host"?e[r]=n[0]:e[r]=n.length>1?n:n[0],e},{})}};Object.defineProperties(sr.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));function iS(t=[]){return new sr(t.reduce((e,r,n,i)=>(n%2===0&&e.push(i.slice(n,n+2)),e),[]).filter(([e,r])=>{try{return wp(e),ky(e,String(r)),!0}catch(n){return!1}}))}var O5=new Set([301,302,303,307,308]),vp=t=>O5.has(t);var Gn=Symbol("Response internals"),Pr=class t extends ki{constructor(e=null,r={}){super(e,r);let n=r.status!=null?r.status:200,i=new sr(r.headers);if(e!==null&&!i.has("Content-Type")){let s=yp(e,this);s&&i.append("Content-Type",s)}this[Gn]={type:"default",url:r.url,status:n,statusText:r.statusText||"",headers:i,counter:r.counter,highWaterMark:r.highWaterMark}}get type(){return this[Gn].type}get url(){return this[Gn].url||""}get status(){return this[Gn].status}get ok(){return this[Gn].status>=200&&this[Gn].status<300}get redirected(){return this[Gn].counter>0}get statusText(){return this[Gn].statusText}get headers(){return this[Gn].headers}get highWaterMark(){return this[Gn].highWaterMark}clone(){return new t(_u(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,r=302){if(!vp(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new t(null,{headers:{location:new URL(e).toString()},status:r})}static error(){let e=new t(null,{status:0,statusText:""});return e[Gn].type="error",e}static json(e=void 0,r={}){let n=JSON.stringify(e);if(n===void 0)throw new TypeError("data is not JSON serializable");let i=new sr(r&&r.headers);return i.has("content-type")||i.set("content-type","application/json"),new t(n,{...r,headers:i})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(Pr.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var hS=require("url"),pS=require("util");var sS=t=>{if(t.search)return t.search;let e=t.href.length-1,r=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-r.length]==="?"?"?":""};var oS=require("net");function aS(t,e=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}var lS=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),uS="strict-origin-when-cross-origin";function cS(t){if(!lS.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function R5(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let e=t.host.replace(/(^\[)|(]$)/g,""),r=(0,oS.isIP)(e);return r===4&&/^127\./.test(e)||r===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:t.host==="localhost"||t.host.endsWith(".localhost")?!1:t.protocol==="file:"}function bu(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:R5(t)}function dS(t,{referrerURLCallback:e,referrerOriginCallback:r}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let n=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let i=t.referrer,s=aS(i),a=aS(i,!0);s.toString().length>4096&&(s=a),e&&(s=e(s)),r&&(a=r(a));let o=new URL(t.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return a;case"unsafe-url":return s;case"strict-origin":return bu(s)&&!bu(o)?"no-referrer":a.toString();case"strict-origin-when-cross-origin":return s.origin===o.origin?s:bu(s)&&!bu(o)?"no-referrer":a;case"same-origin":return s.origin===o.origin?s:"no-referrer";case"origin-when-cross-origin":return s.origin===o.origin?s:a;case"no-referrer-when-downgrade":return bu(s)&&!bu(o)?"no-referrer":s;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}function fS(t){let e=(t.get("referrer-policy")||"").split(/[,\s]+/),r="";for(let n of e)n&&lS.has(n)&&(r=n);return r}var Pt=Symbol("Request internals"),vd=t=>typeof t=="object"&&typeof t[Pt]=="object",D5=(0,pS.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),bs=class t extends ki{constructor(e,r={}){let n;if(vd(e)?n=new URL(e.url):(n=new URL(e),e={}),n.username!==""||n.password!=="")throw new TypeError(`${n} is an url with embedded credentials.`);let i=r.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(i)&&(i=i.toUpperCase()),!vd(r)&&"data"in r&&D5(),(r.body!=null||vd(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body?r.body:vd(e)&&e.body!==null?_u(e):null;super(s,{size:r.size||e.size||0});let a=new sr(r.headers||e.headers||{});if(s!==null&&!a.has("Content-Type")){let u=yp(s,this);u&&a.set("Content-Type",u)}let o=vd(e)?e.signal:null;if("signal"in r&&(o=r.signal),o!=null&&!G1(o))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let l=r.referrer==null?e.referrer:r.referrer;if(l==="")l="no-referrer";else if(l){let u=new URL(l);l=/^about:(\/\/)?client$/.test(u)?"client":u}else l=void 0;this[Pt]={method:i,redirect:r.redirect||e.redirect||"follow",headers:a,parsedURL:n,signal:o,referrer:l},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=r.referrerPolicy||e.referrerPolicy||""}get method(){return this[Pt].method}get url(){return(0,hS.format)(this[Pt].parsedURL)}get headers(){return this[Pt].headers}get redirect(){return this[Pt].redirect}get signal(){return this[Pt].signal}get referrer(){if(this[Pt].referrer==="no-referrer")return"";if(this[Pt].referrer==="client")return"about:client";if(this[Pt].referrer)return this[Pt].referrer.toString()}get referrerPolicy(){return this[Pt].referrerPolicy}set referrerPolicy(e){this[Pt].referrerPolicy=cS(e)}clone(){return new t(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(bs.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var mS=t=>{let{parsedURL:e}=t[Pt],r=new sr(t[Pt].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(n="0"),t.body!==null){let o=rS(t);typeof o=="number"&&!Number.isNaN(o)&&(n=String(o))}n&&r.set("Content-Length",n),t.referrerPolicy===""&&(t.referrerPolicy=uS),t.referrer&&t.referrer!=="no-referrer"?t[Pt].referrer=dS(t):t[Pt].referrer="no-referrer",t[Pt].referrer instanceof URL&&r.set("Referer",t.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:i}=t;typeof i=="function"&&(i=i(e));let s=sS(e),a={path:e.pathname+s,method:t.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:i};return{parsedURL:e,options:a}};var xp=class extends gs{constructor(e,r="aborted"){super(e,r)}};pp();wy();var M5=new Set(["data:","http:","https:"]);async function Sd(t,e){return new Promise((r,n)=>{let i=new bs(t,e),{parsedURL:s,options:a}=mS(i);if(!M5.has(s.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${s.protocol.replace(/:$/,"")}" is not supported.`);if(s.protocol==="data:"){let y=N1(i.url),S=new Pr(y,{headers:{"Content-Type":y.typeFull}});r(S);return}let o=(s.protocol==="https:"?_S.default:gS.default).request,{signal:l}=i,u=null,c=()=>{let y=new xp("The operation was aborted.");n(y),i.body&&i.body instanceof Jr.default.Readable&&i.body.destroy(y),!(!u||!u.body)&&u.body.emit("error",y)};if(l&&l.aborted){c();return}let h=()=>{c(),_()},p=o(s.toString(),a);l&&l.addEventListener("abort",h);let _=()=>{p.abort(),l&&l.removeEventListener("abort",h)};p.on("error",y=>{n(new Cr(`request to ${i.url} failed, reason: ${y.message}`,"system",y)),_()}),I5(p,y=>{u&&u.body&&u.body.destroy(y)}),process.version<"v14"&&p.on("socket",y=>{let S;y.prependListener("end",()=>{S=y._eventsCount}),y.prependListener("close",x=>{if(u&&S<y._eventsCount&&!x){let k=new Error("Premature close");k.code="ERR_STREAM_PREMATURE_CLOSE",u.body.emit("error",k)}})}),p.on("response",y=>{p.setTimeout(0);let S=iS(y.rawHeaders);if(vp(y.statusCode)){let O=S.get("Location"),A=null;try{A=O===null?null:new URL(O,i.url)}catch(R){if(i.redirect!=="manual"){n(new Cr(`uri requested responds with an invalid redirect URL: ${O}`,"invalid-redirect")),_();return}}switch(i.redirect){case"error":n(new Cr(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),_();return;case"manual":break;case"follow":{if(A===null)break;if(i.counter>=i.follow){n(new Cr(`maximum redirect reached at: ${i.url}`,"max-redirect")),_();return}let R={headers:new sr(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:_u(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!Z1(i.url,A)||!J1(i.url,A))for(let I of["authorization","www-authenticate","cookie","cookie2"])R.headers.delete(I);if(y.statusCode!==303&&i.body&&e.body instanceof Jr.default.Readable){n(new Cr("Cannot follow redirect with body being a readable stream","unsupported-redirect")),_();return}(y.statusCode===303||(y.statusCode===301||y.statusCode===302)&&i.method==="POST")&&(R.method="GET",R.body=void 0,R.headers.delete("content-length"));let F=fS(S);F&&(R.referrerPolicy=F),r(Sd(new bs(A,R))),_();return}default:return n(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}l&&y.once("end",()=>{l.removeEventListener("abort",h)});let x=(0,Jr.pipeline)(y,new Jr.PassThrough,O=>{O&&n(O)});process.version<"v12.10"&&y.on("aborted",h);let k={url:i.url,status:y.statusCode,statusText:y.statusMessage,headers:S,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},T=S.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||T===null||y.statusCode===204||y.statusCode===304){u=new Pr(x,k),r(u);return}let P={flush:mo.default.Z_SYNC_FLUSH,finishFlush:mo.default.Z_SYNC_FLUSH};if(T==="gzip"||T==="x-gzip"){x=(0,Jr.pipeline)(x,mo.default.createGunzip(P),O=>{O&&n(O)}),u=new Pr(x,k),r(u);return}if(T==="deflate"||T==="x-deflate"){let O=(0,Jr.pipeline)(y,new Jr.PassThrough,A=>{A&&n(A)});O.once("data",A=>{(A[0]&15)===8?x=(0,Jr.pipeline)(x,mo.default.createInflate(),R=>{R&&n(R)}):x=(0,Jr.pipeline)(x,mo.default.createInflateRaw(),R=>{R&&n(R)}),u=new Pr(x,k),r(u)}),O.once("end",()=>{u||(u=new Pr(x,k),r(u))});return}if(T==="br"){x=(0,Jr.pipeline)(x,mo.default.createBrotliDecompress(),O=>{O&&n(O)}),u=new Pr(x,k),r(u);return}u=new Pr(x,k),r(u)}),nS(p,i).catch(n)})}function I5(t,e){let r=xd.Buffer.from(`0\r
\r
`),n=!1,i=!1,s;t.on("response",a=>{let{headers:o}=a;n=o["transfer-encoding"]==="chunked"&&!o["content-length"]}),t.on("socket",a=>{let o=()=>{if(n&&!i){let u=new Error("Premature close");u.code="ERR_STREAM_PREMATURE_CLOSE",e(u)}},l=u=>{i=xd.Buffer.compare(u.slice(-5),r)===0,!i&&s&&(i=xd.Buffer.compare(s.slice(-3),r.slice(0,3))===0&&xd.Buffer.compare(u.slice(-2),r.slice(3))===0),s=u};a.prependListener("close",o),a.on("data",l),t.on("close",()=>{a.removeListener("close",o),a.removeListener("data",l)})})}var ine=require("@codemirror/view"),t2=require("@codemirror/state");var bS="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var yS=(t=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(t));for(;t--;)e+=bS[r[t]&63];return e};var vS=Symbol("Let zodToJsonSchema decide on which parser to use"),wS={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},xS=t=>typeof t=="string"?{...wS,name:t}:{...wS,...t};var SS=t=>{let e=xS(t),r=e.name!==void 0?[...e.basePath,e.definitionPath,e.name]:e.basePath;return{...e,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(e.definitions).map(([n,i])=>[i._def,{def:i._def,path:[...e.basePath,e.definitionPath,n],jsonSchema:void 0}]))}};function Ey(t,e,r,n){n!=null&&n.errorMessages&&r&&(t.errorMessage={...t.errorMessage,[e]:r})}function Se(t,e,r,n,i){t[e]=r,Ey(t,e,n,i)}var Ce;(function(t){t.assertEqual=i=>i;function e(i){}t.assertIs=e;function r(i){throw new Error}t.assertNever=r,t.arrayToEnum=i=>{let s={};for(let a of i)s[a]=a;return s},t.getValidEnumValues=i=>{let s=t.objectKeys(i).filter(o=>typeof i[i[o]]!="number"),a={};for(let o of s)a[o]=i[o];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(s){return i[s]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let s=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&s.push(a);return s},t.find=(i,s)=>{for(let a of i)if(s(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function n(i,s=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(s)}t.joinValues=n,t.jsonStringifyReplacer=(i,s)=>typeof s=="bigint"?s.toString():s})(Ce||(Ce={}));var Cy;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Cy||(Cy={}));var Z=Ce.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),wa=t=>{switch(typeof t){case"undefined":return Z.undefined;case"string":return Z.string;case"number":return isNaN(t)?Z.nan:Z.number;case"boolean":return Z.boolean;case"function":return Z.function;case"bigint":return Z.bigint;case"symbol":return Z.symbol;case"object":return Array.isArray(t)?Z.array:t===null?Z.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Z.promise:typeof Map!="undefined"&&t instanceof Map?Z.map:typeof Set!="undefined"&&t instanceof Set?Z.set:typeof Date!="undefined"&&t instanceof Date?Z.date:Z.object;default:return Z.unknown}},W=Ce.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),L5=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Kr=class t extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){let r=e||function(s){return s.message},n={_errors:[]},i=s=>{for(let a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)n._errors.push(r(a));else{let o=n,l=0;for(;l<a.path.length;){let u=a.path[l];l===a.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(r(a))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return i(this),n}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Ce.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},n=[];for(let i of this.issues)i.path.length>0?(r[i.path[0]]=r[i.path[0]]||[],r[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}};Kr.create=t=>new Kr(t);var vu=(t,e)=>{let r;switch(t.code){case W.invalid_type:t.received===Z.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case W.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,Ce.jsonStringifyReplacer)}`;break;case W.unrecognized_keys:r=`Unrecognized key(s) in object: ${Ce.joinValues(t.keys,", ")}`;break;case W.invalid_union:r="Invalid input";break;case W.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Ce.joinValues(t.options)}`;break;case W.invalid_enum_value:r=`Invalid enum value. Expected ${Ce.joinValues(t.options)}, received '${t.received}'`;break;case W.invalid_arguments:r="Invalid function arguments";break;case W.invalid_return_type:r="Invalid function return type";break;case W.invalid_date:r="Invalid date";break;case W.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:Ce.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case W.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case W.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case W.custom:r="Invalid input";break;case W.invalid_intersection_types:r="Intersection results could not be merged";break;case W.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case W.not_finite:r="Number must be finite";break;default:r=e.defaultError,Ce.assertNever(t)}return{message:r}},TS=vu;function F5(t){TS=t}function Sp(){return TS}var kp=t=>{let{data:e,path:r,errorMaps:n,issueData:i}=t,s=[...r,...i.path||[]],a={...i,path:s};if(i.message!==void 0)return{...i,path:s,message:i.message};let o="",l=n.filter(u=>!!u).slice().reverse();for(let u of l)o=u(a,{data:e,defaultError:o}).message;return{...i,path:s,message:o}},N5=[];function Y(t,e){let r=Sp(),n=kp({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===vu?void 0:vu].filter(i=>!!i)});t.common.issues.push(n)}var Zt=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let n=[];for(let i of r){if(i.status==="aborted")return ue;i.status==="dirty"&&e.dirty(),n.push(i.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){let n=[];for(let i of r){let s=await i.key,a=await i.value;n.push({key:s,value:a})}return t.mergeObjectSync(e,n)}static mergeObjectSync(e,r){let n={};for(let i of r){let{key:s,value:a}=i;if(s.status==="aborted"||a.status==="aborted")return ue;s.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof a.value!="undefined"||i.alwaysSet)&&(n[s.value]=a.value)}return{status:e.value,value:n}}},ue=Object.freeze({status:"aborted"}),wu=t=>({status:"dirty",value:t}),ar=t=>({status:"valid",value:t}),Ay=t=>t.status==="aborted",Py=t=>t.status==="dirty",Td=t=>t.status==="valid",Cd=t=>typeof Promise!="undefined"&&t instanceof Promise;function Ep(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function CS(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}var re;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(re||(re={}));var kd,Ed,_n=class{constructor(e,r,n,i){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},kS=(t,e)=>{if(Td(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Kr(t.common.issues);return this._error=r,this._error}}};function fe(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:n,description:i}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:(a,o)=>{var l,u;let{message:c}=t;return a.code==="invalid_enum_value"?{message:c!=null?c:o.defaultError}:typeof o.data=="undefined"?{message:(l=c!=null?c:n)!==null&&l!==void 0?l:o.defaultError}:a.code!=="invalid_type"?{message:o.defaultError}:{message:(u=c!=null?c:r)!==null&&u!==void 0?u:o.defaultError}},description:i}}var he=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return wa(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:wa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Zt,ctx:{common:e.parent.common,data:e.data,parsedType:wa(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(Cd(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){var n;let i={common:{issues:[],async:(n=r==null?void 0:r.async)!==null&&n!==void 0?n:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wa(e)},s=this._parseSync({data:e,path:i.path,parent:i});return kS(i,s)}async parseAsync(e,r){let n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){let n={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:wa(e)},i=this._parse({data:e,path:n.path,parent:n}),s=await(Cd(i)?i:Promise.resolve(i));return kS(n,s)}refine(e,r){let n=i=>typeof r=="string"||typeof r=="undefined"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,s)=>{let a=e(i),o=()=>s.addIssue({code:W.custom,...n(i)});return typeof Promise!="undefined"&&a instanceof Promise?a.then(l=>l?!0:(o(),!1)):a?!0:(o(),!1)})}refinement(e,r){return this._refinement((n,i)=>e(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(e){return new Xr({schema:this,typeName:q.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return gn.create(this,this._def)}nullable(){return Ti.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return vs.create(this,this._def)}promise(){return Sa.create(this,this._def)}or(e){return xo.create([this,e],this._def)}and(e){return So.create(this,e,this._def)}transform(e){return new Xr({...fe(this._def),schema:this,typeName:q.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new Ao({...fe(this._def),innerType:this,defaultValue:r,typeName:q.ZodDefault})}brand(){return new Ad({typeName:q.ZodBranded,type:this,...fe(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new Po({...fe(this._def),innerType:this,catchValue:r,typeName:q.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return Pd.create(this,e)}readonly(){return Oo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},j5=/^c[^\s-]{8,}$/i,B5=/^[0-9a-z]+$/,$5=/^[0-9A-HJKMNP-TV-Z]{26}$/,z5=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,U5=/^[a-z0-9_-]{21}$/i,W5=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,q5=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,H5="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Ty,V5=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Y5=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,G5=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,AS="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Z5=new RegExp(`^${AS}$`);function PS(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function J5(t){return new RegExp(`^${PS(t)}$`)}function OS(t){let e=`${AS}T${PS(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function K5(t,e){return!!((e==="v4"||!e)&&V5.test(t)||(e==="v6"||!e)&&Y5.test(t))}var va=class t extends he{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Z.string){let s=this._getOrReturnCtx(e);return Y(s,{code:W.invalid_type,expected:Z.string,received:s.parsedType}),ue}let n=new Zt,i;for(let s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(i=this._getOrReturnCtx(e,i),Y(i,{code:W.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")e.data.length>s.value&&(i=this._getOrReturnCtx(e,i),Y(i,{code:W.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){let a=e.data.length>s.value,o=e.data.length<s.value;(a||o)&&(i=this._getOrReturnCtx(e,i),a?Y(i,{code:W.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):o&&Y(i,{code:W.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")q5.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"email",code:W.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")Ty||(Ty=new RegExp(H5,"u")),Ty.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"emoji",code:W.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")z5.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"uuid",code:W.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")U5.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"nanoid",code:W.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")j5.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"cuid",code:W.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")B5.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"cuid2",code:W.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")$5.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"ulid",code:W.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(e.data)}catch(a){i=this._getOrReturnCtx(e,i),Y(i,{validation:"url",code:W.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"regex",code:W.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(i=this._getOrReturnCtx(e,i),Y(i,{code:W.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(i=this._getOrReturnCtx(e,i),Y(i,{code:W.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(i=this._getOrReturnCtx(e,i),Y(i,{code:W.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?OS(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{code:W.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?Z5.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{code:W.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?J5(s).test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{code:W.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?W5.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"duration",code:W.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?K5(e.data,s.version)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"ip",code:W.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?G5.test(e.data)||(i=this._getOrReturnCtx(e,i),Y(i,{validation:"base64",code:W.invalid_string,message:s.message}),n.dirty()):Ce.assertNever(s);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(i=>e.test(i),{validation:r,code:W.invalid_string,...re.errToObj(n)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...re.errToObj(e)})}url(e){return this._addCheck({kind:"url",...re.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...re.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...re.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...re.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...re.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...re.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...re.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...re.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...re.errToObj(e)})}datetime(e){var r,n;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,offset:(r=e==null?void 0:e.offset)!==null&&r!==void 0?r:!1,local:(n=e==null?void 0:e.local)!==null&&n!==void 0?n:!1,...re.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)=="undefined"?null:e==null?void 0:e.precision,...re.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...re.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...re.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r==null?void 0:r.position,...re.errToObj(r==null?void 0:r.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...re.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...re.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...re.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...re.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...re.errToObj(r)})}nonempty(e){return this.min(1,re.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};va.create=t=>{var e;return new va({checks:[],typeName:q.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...fe(t)})};function X5(t,e){let r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,i=r>n?r:n,s=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return s%a/Math.pow(10,i)}var go=class t extends he{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Z.number){let s=this._getOrReturnCtx(e);return Y(s,{code:W.invalid_type,expected:Z.number,received:s.parsedType}),ue}let n,i=new Zt;for(let s of this._def.checks)s.kind==="int"?Ce.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{code:W.invalid_type,expected:"integer",received:"float",message:s.message}),i.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),Y(n,{code:W.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),Y(n,{code:W.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),i.dirty()):s.kind==="multipleOf"?X5(e.data,s.value)!==0&&(n=this._getOrReturnCtx(e,n),Y(n,{code:W.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{code:W.not_finite,message:s.message}),i.dirty()):Ce.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,re.toString(r))}gt(e,r){return this.setLimit("min",e,!1,re.toString(r))}lte(e,r){return this.setLimit("max",e,!0,re.toString(r))}lt(e,r){return this.setLimit("max",e,!1,re.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:re.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:re.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:re.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:re.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:re.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:re.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:re.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&Ce.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}};go.create=t=>new go({checks:[],typeName:q.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...fe(t)});var _o=class t extends he{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==Z.bigint){let s=this._getOrReturnCtx(e);return Y(s,{code:W.invalid_type,expected:Z.bigint,received:s.parsedType}),ue}let n,i=new Zt;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(n=this._getOrReturnCtx(e,n),Y(n,{code:W.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(n=this._getOrReturnCtx(e,n),Y(n,{code:W.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),i.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),Y(n,{code:W.not_multiple_of,multipleOf:s.value,message:s.message}),i.dirty()):Ce.assertNever(s);return{status:i.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,re.toString(r))}gt(e,r){return this.setLimit("min",e,!1,re.toString(r))}lte(e,r){return this.setLimit("max",e,!0,re.toString(r))}lt(e,r){return this.setLimit("max",e,!1,re.toString(r))}setLimit(e,r,n,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:re.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:re.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:re.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:re.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:re.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:re.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};_o.create=t=>{var e;return new _o({checks:[],typeName:q.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...fe(t)})};var bo=class extends he{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Z.boolean){let n=this._getOrReturnCtx(e);return Y(n,{code:W.invalid_type,expected:Z.boolean,received:n.parsedType}),ue}return ar(e.data)}};bo.create=t=>new bo({typeName:q.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...fe(t)});var yo=class t extends he{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Z.date){let s=this._getOrReturnCtx(e);return Y(s,{code:W.invalid_type,expected:Z.date,received:s.parsedType}),ue}if(isNaN(e.data.getTime())){let s=this._getOrReturnCtx(e);return Y(s,{code:W.invalid_date}),ue}let n=new Zt,i;for(let s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(i=this._getOrReturnCtx(e,i),Y(i,{code:W.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(i=this._getOrReturnCtx(e,i),Y(i,{code:W.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):Ce.assertNever(s);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:re.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:re.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};yo.create=t=>new yo({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:q.ZodDate,...fe(t)});var xu=class extends he{_parse(e){if(this._getType(e)!==Z.symbol){let n=this._getOrReturnCtx(e);return Y(n,{code:W.invalid_type,expected:Z.symbol,received:n.parsedType}),ue}return ar(e.data)}};xu.create=t=>new xu({typeName:q.ZodSymbol,...fe(t)});var wo=class extends he{_parse(e){if(this._getType(e)!==Z.undefined){let n=this._getOrReturnCtx(e);return Y(n,{code:W.invalid_type,expected:Z.undefined,received:n.parsedType}),ue}return ar(e.data)}};wo.create=t=>new wo({typeName:q.ZodUndefined,...fe(t)});var vo=class extends he{_parse(e){if(this._getType(e)!==Z.null){let n=this._getOrReturnCtx(e);return Y(n,{code:W.invalid_type,expected:Z.null,received:n.parsedType}),ue}return ar(e.data)}};vo.create=t=>new vo({typeName:q.ZodNull,...fe(t)});var xa=class extends he{constructor(){super(...arguments),this._any=!0}_parse(e){return ar(e.data)}};xa.create=t=>new xa({typeName:q.ZodAny,...fe(t)});var ws=class extends he{constructor(){super(...arguments),this._unknown=!0}_parse(e){return ar(e.data)}};ws.create=t=>new ws({typeName:q.ZodUnknown,...fe(t)});var Zn=class extends he{_parse(e){let r=this._getOrReturnCtx(e);return Y(r,{code:W.invalid_type,expected:Z.never,received:r.parsedType}),ue}};Zn.create=t=>new Zn({typeName:q.ZodNever,...fe(t)});var Su=class extends he{_parse(e){if(this._getType(e)!==Z.undefined){let n=this._getOrReturnCtx(e);return Y(n,{code:W.invalid_type,expected:Z.void,received:n.parsedType}),ue}return ar(e.data)}};Su.create=t=>new Su({typeName:q.ZodVoid,...fe(t)});var vs=class t extends he{_parse(e){let{ctx:r,status:n}=this._processInputParams(e),i=this._def;if(r.parsedType!==Z.array)return Y(r,{code:W.invalid_type,expected:Z.array,received:r.parsedType}),ue;if(i.exactLength!==null){let a=r.data.length>i.exactLength.value,o=r.data.length<i.exactLength.value;(a||o)&&(Y(r,{code:a?W.too_big:W.too_small,minimum:o?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(Y(r,{code:W.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(Y(r,{code:W.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((a,o)=>i.type._parseAsync(new _n(r,a,r.path,o)))).then(a=>Zt.mergeArray(n,a));let s=[...r.data].map((a,o)=>i.type._parseSync(new _n(r,a,r.path,o)));return Zt.mergeArray(n,s)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:re.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:re.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:re.toString(r)}})}nonempty(e){return this.min(1,e)}};vs.create=(t,e)=>new vs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:q.ZodArray,...fe(e)});function yu(t){if(t instanceof Or){let e={};for(let r in t.shape){let n=t.shape[r];e[r]=gn.create(yu(n))}return new Or({...t._def,shape:()=>e})}else return t instanceof vs?new vs({...t._def,type:yu(t.element)}):t instanceof gn?gn.create(yu(t.unwrap())):t instanceof Ti?Ti.create(yu(t.unwrap())):t instanceof Ei?Ei.create(t.items.map(e=>yu(e))):t}var Or=class t extends he{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=Ce.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==Z.object){let u=this._getOrReturnCtx(e);return Y(u,{code:W.invalid_type,expected:Z.object,received:u.parsedType}),ue}let{status:n,ctx:i}=this._processInputParams(e),{shape:s,keys:a}=this._getCached(),o=[];if(!(this._def.catchall instanceof Zn&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||o.push(u);let l=[];for(let u of a){let c=s[u],h=i.data[u];l.push({key:{status:"valid",value:u},value:c._parse(new _n(i,h,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof Zn){let u=this._def.unknownKeys;if(u==="passthrough")for(let c of o)l.push({key:{status:"valid",value:c},value:{status:"valid",value:i.data[c]}});else if(u==="strict")o.length>0&&(Y(i,{code:W.unrecognized_keys,keys:o}),n.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let c of o){let h=i.data[c];l.push({key:{status:"valid",value:c},value:u._parse(new _n(i,h,i.path,c)),alwaysSet:c in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let c of l){let h=await c.key,p=await c.value;u.push({key:h,value:p,alwaysSet:c.alwaysSet})}return u}).then(u=>Zt.mergeObjectSync(n,u)):Zt.mergeObjectSync(n,l)}get shape(){return this._def.shape()}strict(e){return re.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{var i,s,a,o;let l=(a=(s=(i=this._def).errorMap)===null||s===void 0?void 0:s.call(i,r,n).message)!==null&&a!==void 0?a:n.defaultError;return r.code==="unrecognized_keys"?{message:(o=re.errToObj(e).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:q.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return Ce.objectKeys(e).forEach(n=>{e[n]&&this.shape[n]&&(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return Ce.objectKeys(this.shape).forEach(n=>{e[n]||(r[n]=this.shape[n])}),new t({...this._def,shape:()=>r})}deepPartial(){return yu(this)}partial(e){let r={};return Ce.objectKeys(this.shape).forEach(n=>{let i=this.shape[n];e&&!e[n]?r[n]=i:r[n]=i.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return Ce.objectKeys(this.shape).forEach(n=>{if(e&&!e[n])r[n]=this.shape[n];else{let s=this.shape[n];for(;s instanceof gn;)s=s._def.innerType;r[n]=s}}),new t({...this._def,shape:()=>r})}keyof(){return RS(Ce.objectKeys(this.shape))}};Or.create=(t,e)=>new Or({shape:()=>t,unknownKeys:"strip",catchall:Zn.create(),typeName:q.ZodObject,...fe(e)});Or.strictCreate=(t,e)=>new Or({shape:()=>t,unknownKeys:"strict",catchall:Zn.create(),typeName:q.ZodObject,...fe(e)});Or.lazycreate=(t,e)=>new Or({shape:t,unknownKeys:"strip",catchall:Zn.create(),typeName:q.ZodObject,...fe(e)});var xo=class extends he{_parse(e){let{ctx:r}=this._processInputParams(e),n=this._def.options;function i(s){for(let o of s)if(o.result.status==="valid")return o.result;for(let o of s)if(o.result.status==="dirty")return r.common.issues.push(...o.ctx.common.issues),o.result;let a=s.map(o=>new Kr(o.ctx.common.issues));return Y(r,{code:W.invalid_union,unionErrors:a}),ue}if(r.common.async)return Promise.all(n.map(async s=>{let a={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(i);{let s,a=[];for(let l of n){let u={...r,common:{...r.common,issues:[]},parent:null},c=l._parseSync({data:r.data,path:r.path,parent:u});if(c.status==="valid")return c;c.status==="dirty"&&!s&&(s={result:c,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;let o=a.map(l=>new Kr(l));return Y(r,{code:W.invalid_union,unionErrors:o}),ue}}get options(){return this._def.options}};xo.create=(t,e)=>new xo({options:t,typeName:q.ZodUnion,...fe(e)});var ys=t=>t instanceof ko?ys(t.schema):t instanceof Xr?ys(t.innerType()):t instanceof Eo?[t.value]:t instanceof To?t.options:t instanceof Co?Ce.objectValues(t.enum):t instanceof Ao?ys(t._def.innerType):t instanceof wo?[void 0]:t instanceof vo?[null]:t instanceof gn?[void 0,...ys(t.unwrap())]:t instanceof Ti?[null,...ys(t.unwrap())]:t instanceof Ad||t instanceof Oo?ys(t.unwrap()):t instanceof Po?ys(t._def.innerType):[],Tp=class t extends he{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Z.object)return Y(r,{code:W.invalid_type,expected:Z.object,received:r.parsedType}),ue;let n=this.discriminator,i=r.data[n],s=this.optionsMap.get(i);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(Y(r,{code:W.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ue)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){let i=new Map;for(let s of r){let a=ys(s.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let o of a){if(i.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(o)}`);i.set(o,s)}}return new t({typeName:q.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:i,...fe(n)})}};function Oy(t,e){let r=wa(t),n=wa(e);if(t===e)return{valid:!0,data:t};if(r===Z.object&&n===Z.object){let i=Ce.objectKeys(e),s=Ce.objectKeys(t).filter(o=>i.indexOf(o)!==-1),a={...t,...e};for(let o of s){let l=Oy(t[o],e[o]);if(!l.valid)return{valid:!1};a[o]=l.data}return{valid:!0,data:a}}else if(r===Z.array&&n===Z.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let s=0;s<t.length;s++){let a=t[s],o=e[s],l=Oy(a,o);if(!l.valid)return{valid:!1};i.push(l.data)}return{valid:!0,data:i}}else return r===Z.date&&n===Z.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var So=class extends he{_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=(s,a)=>{if(Ay(s)||Ay(a))return ue;let o=Oy(s.value,a.value);return o.valid?((Py(s)||Py(a))&&r.dirty(),{status:r.value,value:o.data}):(Y(n,{code:W.invalid_intersection_types}),ue)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,a])=>i(s,a)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};So.create=(t,e,r)=>new So({left:t,right:e,typeName:q.ZodIntersection,...fe(r)});var Ei=class t extends he{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Z.array)return Y(n,{code:W.invalid_type,expected:Z.array,received:n.parsedType}),ue;if(n.data.length<this._def.items.length)return Y(n,{code:W.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ue;!this._def.rest&&n.data.length>this._def.items.length&&(Y(n,{code:W.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let s=[...n.data].map((a,o)=>{let l=this._def.items[o]||this._def.rest;return l?l._parse(new _n(n,a,n.path,o)):null}).filter(a=>!!a);return n.common.async?Promise.all(s).then(a=>Zt.mergeArray(r,a)):Zt.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Ei.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ei({items:t,typeName:q.ZodTuple,rest:null,...fe(e)})};var Cp=class t extends he{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Z.object)return Y(n,{code:W.invalid_type,expected:Z.object,received:n.parsedType}),ue;let i=[],s=this._def.keyType,a=this._def.valueType;for(let o in n.data)i.push({key:s._parse(new _n(n,o,n.path,o)),value:a._parse(new _n(n,n.data[o],n.path,o)),alwaysSet:o in n.data});return n.common.async?Zt.mergeObjectAsync(r,i):Zt.mergeObjectSync(r,i)}get element(){return this._def.valueType}static create(e,r,n){return r instanceof he?new t({keyType:e,valueType:r,typeName:q.ZodRecord,...fe(n)}):new t({keyType:va.create(),valueType:e,typeName:q.ZodRecord,...fe(r)})}},ku=class extends he{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Z.map)return Y(n,{code:W.invalid_type,expected:Z.map,received:n.parsedType}),ue;let i=this._def.keyType,s=this._def.valueType,a=[...n.data.entries()].map(([o,l],u)=>({key:i._parse(new _n(n,o,n.path,[u,"key"])),value:s._parse(new _n(n,l,n.path,[u,"value"]))}));if(n.common.async){let o=new Map;return Promise.resolve().then(async()=>{for(let l of a){let u=await l.key,c=await l.value;if(u.status==="aborted"||c.status==="aborted")return ue;(u.status==="dirty"||c.status==="dirty")&&r.dirty(),o.set(u.value,c.value)}return{status:r.value,value:o}})}else{let o=new Map;for(let l of a){let u=l.key,c=l.value;if(u.status==="aborted"||c.status==="aborted")return ue;(u.status==="dirty"||c.status==="dirty")&&r.dirty(),o.set(u.value,c.value)}return{status:r.value,value:o}}}};ku.create=(t,e,r)=>new ku({valueType:e,keyType:t,typeName:q.ZodMap,...fe(r)});var Eu=class t extends he{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Z.set)return Y(n,{code:W.invalid_type,expected:Z.set,received:n.parsedType}),ue;let i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Y(n,{code:W.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Y(n,{code:W.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());let s=this._def.valueType;function a(l){let u=new Set;for(let c of l){if(c.status==="aborted")return ue;c.status==="dirty"&&r.dirty(),u.add(c.value)}return{status:r.value,value:u}}let o=[...n.data.values()].map((l,u)=>s._parse(new _n(n,l,n.path,u)));return n.common.async?Promise.all(o).then(l=>a(l)):a(o)}min(e,r){return new t({...this._def,minSize:{value:e,message:re.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:re.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Eu.create=(t,e)=>new Eu({valueType:t,minSize:null,maxSize:null,typeName:q.ZodSet,...fe(e)});var Ap=class t extends he{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Z.function)return Y(r,{code:W.invalid_type,expected:Z.function,received:r.parsedType}),ue;function n(o,l){return kp({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Sp(),vu].filter(u=>!!u),issueData:{code:W.invalid_arguments,argumentsError:l}})}function i(o,l){return kp({data:o,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,Sp(),vu].filter(u=>!!u),issueData:{code:W.invalid_return_type,returnTypeError:l}})}let s={errorMap:r.common.contextualErrorMap},a=r.data;if(this._def.returns instanceof Sa){let o=this;return ar(async function(...l){let u=new Kr([]),c=await o._def.args.parseAsync(l,s).catch(_=>{throw u.addIssue(n(l,_)),u}),h=await Reflect.apply(a,this,c);return await o._def.returns._def.type.parseAsync(h,s).catch(_=>{throw u.addIssue(i(h,_)),u})})}else{let o=this;return ar(function(...l){let u=o._def.args.safeParse(l,s);if(!u.success)throw new Kr([n(l,u.error)]);let c=Reflect.apply(a,this,u.data),h=o._def.returns.safeParse(c,s);if(!h.success)throw new Kr([i(c,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Ei.create(e).rest(ws.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,n){return new t({args:e||Ei.create([]).rest(ws.create()),returns:r||ws.create(),typeName:q.ZodFunction,...fe(n)})}},ko=class extends he{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};ko.create=(t,e)=>new ko({getter:t,typeName:q.ZodLazy,...fe(e)});var Eo=class extends he{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return Y(r,{received:r.data,code:W.invalid_literal,expected:this._def.value}),ue}return{status:"valid",value:e.data}}get value(){return this._def.value}};Eo.create=(t,e)=>new Eo({value:t,typeName:q.ZodLiteral,...fe(e)});function RS(t,e){return new To({values:t,typeName:q.ZodEnum,...fe(e)})}var To=class t extends he{constructor(){super(...arguments),kd.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),n=this._def.values;return Y(r,{expected:Ce.joinValues(n),received:r.parsedType,code:W.invalid_type}),ue}if(Ep(this,kd,"f")||CS(this,kd,new Set(this._def.values),"f"),!Ep(this,kd,"f").has(e.data)){let r=this._getOrReturnCtx(e),n=this._def.values;return Y(r,{received:r.data,code:W.invalid_enum_value,options:n}),ue}return ar(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}};kd=new WeakMap;To.create=RS;var Co=class extends he{constructor(){super(...arguments),Ed.set(this,void 0)}_parse(e){let r=Ce.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Z.string&&n.parsedType!==Z.number){let i=Ce.objectValues(r);return Y(n,{expected:Ce.joinValues(i),received:n.parsedType,code:W.invalid_type}),ue}if(Ep(this,Ed,"f")||CS(this,Ed,new Set(Ce.getValidEnumValues(this._def.values)),"f"),!Ep(this,Ed,"f").has(e.data)){let i=Ce.objectValues(r);return Y(n,{received:n.data,code:W.invalid_enum_value,options:i}),ue}return ar(e.data)}get enum(){return this._def.values}};Ed=new WeakMap;Co.create=(t,e)=>new Co({values:t,typeName:q.ZodNativeEnum,...fe(e)});var Sa=class extends he{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==Z.promise&&r.common.async===!1)return Y(r,{code:W.invalid_type,expected:Z.promise,received:r.parsedType}),ue;let n=r.parsedType===Z.promise?r.data:Promise.resolve(r.data);return ar(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Sa.create=(t,e)=>new Sa({type:t,typeName:q.ZodPromise,...fe(e)});var Xr=class extends he{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===q.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:n}=this._processInputParams(e),i=this._def.effect||null,s={addIssue:a=>{Y(n,a),a.fatal?r.abort():r.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),i.type==="preprocess"){let a=i.transform(n.data,s);if(n.common.async)return Promise.resolve(a).then(async o=>{if(r.value==="aborted")return ue;let l=await this._def.schema._parseAsync({data:o,path:n.path,parent:n});return l.status==="aborted"?ue:l.status==="dirty"||r.value==="dirty"?wu(l.value):l});{if(r.value==="aborted")return ue;let o=this._def.schema._parseSync({data:a,path:n.path,parent:n});return o.status==="aborted"?ue:o.status==="dirty"||r.value==="dirty"?wu(o.value):o}}if(i.type==="refinement"){let a=o=>{let l=i.refinement(o,s);if(n.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(n.common.async===!1){let o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return o.status==="aborted"?ue:(o.status==="dirty"&&r.dirty(),a(o.value),{status:r.value,value:o.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>o.status==="aborted"?ue:(o.status==="dirty"&&r.dirty(),a(o.value).then(()=>({status:r.value,value:o.value}))))}if(i.type==="transform")if(n.common.async===!1){let a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Td(a))return a;let o=i.transform(a.value,s);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:o}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>Td(a)?Promise.resolve(i.transform(a.value,s)).then(o=>({status:r.value,value:o})):a);Ce.assertNever(i)}};Xr.create=(t,e,r)=>new Xr({schema:t,typeName:q.ZodEffects,effect:e,...fe(r)});Xr.createWithPreprocess=(t,e,r)=>new Xr({schema:e,effect:{type:"preprocess",transform:t},typeName:q.ZodEffects,...fe(r)});var gn=class extends he{_parse(e){return this._getType(e)===Z.undefined?ar(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};gn.create=(t,e)=>new gn({innerType:t,typeName:q.ZodOptional,...fe(e)});var Ti=class extends he{_parse(e){return this._getType(e)===Z.null?ar(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Ti.create=(t,e)=>new Ti({innerType:t,typeName:q.ZodNullable,...fe(e)});var Ao=class extends he{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return r.parsedType===Z.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};Ao.create=(t,e)=>new Ao({innerType:t,typeName:q.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...fe(e)});var Po=class extends he{_parse(e){let{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Cd(i)?i.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Kr(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Kr(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};Po.create=(t,e)=>new Po({innerType:t,typeName:q.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...fe(e)});var Tu=class extends he{_parse(e){if(this._getType(e)!==Z.nan){let n=this._getOrReturnCtx(e);return Y(n,{code:W.invalid_type,expected:Z.nan,received:n.parsedType}),ue}return{status:"valid",value:e.data}}};Tu.create=t=>new Tu({typeName:q.ZodNaN,...fe(t)});var Q5=Symbol("zod_brand"),Ad=class extends he{_parse(e){let{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}},Pd=class t extends he{_parse(e){let{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let s=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?ue:s.status==="dirty"?(r.dirty(),wu(s.value)):this._def.out._parseAsync({data:s.value,path:n.path,parent:n})})();{let i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ue:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(e,r){return new t({in:e,out:r,typeName:q.ZodPipeline})}},Oo=class extends he{_parse(e){let r=this._def.innerType._parse(e),n=i=>(Td(i)&&(i.value=Object.freeze(i.value)),i);return Cd(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}};Oo.create=(t,e)=>new Oo({innerType:t,typeName:q.ZodReadonly,...fe(e)});function DS(t,e={},r){return t?xa.create().superRefine((n,i)=>{var s,a;if(!t(n)){let o=typeof e=="function"?e(n):typeof e=="string"?{message:e}:e,l=(a=(s=o.fatal)!==null&&s!==void 0?s:r)!==null&&a!==void 0?a:!0,u=typeof o=="string"?{message:o}:o;i.addIssue({code:"custom",...u,fatal:l})}}):xa.create()}var eL={object:Or.lazycreate},q;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(q||(q={}));var tL=(t,e={message:`Input not instance of ${t.name}`})=>DS(r=>r instanceof t,e),MS=va.create,IS=go.create,rL=Tu.create,nL=_o.create,LS=bo.create,iL=yo.create,sL=xu.create,aL=wo.create,oL=vo.create,lL=xa.create,uL=ws.create,cL=Zn.create,dL=Su.create,fL=vs.create,hL=Or.create,pL=Or.strictCreate,mL=xo.create,gL=Tp.create,_L=So.create,bL=Ei.create,yL=Cp.create,wL=ku.create,vL=Eu.create,xL=Ap.create,SL=ko.create,kL=Eo.create,EL=To.create,TL=Co.create,CL=Sa.create,ES=Xr.create,AL=gn.create,PL=Ti.create,OL=Xr.createWithPreprocess,RL=Pd.create,DL=()=>MS().optional(),ML=()=>IS().optional(),IL=()=>LS().optional(),LL={string:t=>va.create({...t,coerce:!0}),number:t=>go.create({...t,coerce:!0}),boolean:t=>bo.create({...t,coerce:!0}),bigint:t=>_o.create({...t,coerce:!0}),date:t=>yo.create({...t,coerce:!0})},FL=ue,Cu=Object.freeze({__proto__:null,defaultErrorMap:vu,setErrorMap:F5,getErrorMap:Sp,makeIssue:kp,EMPTY_PATH:N5,addIssueToContext:Y,ParseStatus:Zt,INVALID:ue,DIRTY:wu,OK:ar,isAborted:Ay,isDirty:Py,isValid:Td,isAsync:Cd,get util(){return Ce},get objectUtil(){return Cy},ZodParsedType:Z,getParsedType:wa,ZodType:he,datetimeRegex:OS,ZodString:va,ZodNumber:go,ZodBigInt:_o,ZodBoolean:bo,ZodDate:yo,ZodSymbol:xu,ZodUndefined:wo,ZodNull:vo,ZodAny:xa,ZodUnknown:ws,ZodNever:Zn,ZodVoid:Su,ZodArray:vs,ZodObject:Or,ZodUnion:xo,ZodDiscriminatedUnion:Tp,ZodIntersection:So,ZodTuple:Ei,ZodRecord:Cp,ZodMap:ku,ZodSet:Eu,ZodFunction:Ap,ZodLazy:ko,ZodLiteral:Eo,ZodEnum:To,ZodNativeEnum:Co,ZodPromise:Sa,ZodEffects:Xr,ZodTransformer:Xr,ZodOptional:gn,ZodNullable:Ti,ZodDefault:Ao,ZodCatch:Po,ZodNaN:Tu,BRAND:Q5,ZodBranded:Ad,ZodPipeline:Pd,ZodReadonly:Oo,custom:DS,Schema:he,ZodSchema:he,late:eL,get ZodFirstPartyTypeKind(){return q},coerce:LL,any:lL,array:fL,bigint:nL,boolean:LS,date:iL,discriminatedUnion:gL,effect:ES,enum:EL,function:xL,instanceof:tL,intersection:_L,lazy:SL,literal:kL,map:wL,nan:rL,nativeEnum:TL,never:cL,null:oL,nullable:PL,number:IS,object:hL,oboolean:IL,onumber:ML,optional:AL,ostring:DL,pipeline:RL,preprocess:OL,promise:CL,record:yL,set:vL,strictObject:pL,string:MS,symbol:sL,transformer:ES,tuple:bL,undefined:aL,union:mL,unknown:uL,void:dL,NEVER:FL,ZodIssueCode:W,quotelessJson:L5,ZodError:Kr});function FS(){return{}}function NS(t,e){var n,i;let r={type:"array"};return((i=(n=t.type)==null?void 0:n._def)==null?void 0:i.typeName)!==q.ZodAny&&(r.items=ae(t.type._def,{...e,currentPath:[...e.currentPath,"items"]})),t.minLength&&Se(r,"minItems",t.minLength.value,t.minLength.message,e),t.maxLength&&Se(r,"maxItems",t.maxLength.value,t.maxLength.message,e),t.exactLength&&(Se(r,"minItems",t.exactLength.value,t.exactLength.message,e),Se(r,"maxItems",t.exactLength.value,t.exactLength.message,e)),r}function jS(t,e){let r={type:"integer",format:"int64"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"min":e.target==="jsonSchema7"?n.inclusive?Se(r,"minimum",n.value,n.message,e):Se(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),Se(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?Se(r,"maximum",n.value,n.message,e):Se(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),Se(r,"maximum",n.value,n.message,e));break;case"multipleOf":Se(r,"multipleOf",n.value,n.message,e);break}return r}function BS(){return{type:"boolean"}}function $S(t,e){return ae(t.type._def,e)}var zS=(t,e)=>ae(t.innerType._def,e);function Ry(t,e,r){let n=r!=null?r:e.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((i,s)=>Ry(t,e,i))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return NL(t,e)}}var NL=(t,e)=>{let r={type:"integer",format:"unix-time"};if(e.target==="openApi3")return r;for(let n of t.checks)switch(n.kind){case"min":Se(r,"minimum",n.value,n.message,e);break;case"max":Se(r,"maximum",n.value,n.message,e);break}return r};function US(t,e){return{...ae(t.innerType._def,e),default:t.defaultValue()}}function WS(t,e){return e.effectStrategy==="input"?ae(t.schema._def,e):{}}function qS(t){return{type:"string",enum:t.values}}var jL=t=>"type"in t&&t.type==="string"?!1:"allOf"in t;function HS(t,e){let r=[ae(t.left._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),ae(t.right._def,{...e,currentPath:[...e.currentPath,"allOf","1"]})].filter(s=>!!s),n=e.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0,i=[];return r.forEach(s=>{if(jL(s))i.push(...s.allOf),s.unevaluatedProperties===void 0&&(n=void 0);else{let a=s;if("additionalProperties"in s&&s.additionalProperties===!1){let{additionalProperties:o,...l}=s;a=l}else n=void 0;i.push(a)}}),i.length?{allOf:i,...n}:void 0}function VS(t,e){let r=typeof t.value;return r!=="bigint"&&r!=="number"&&r!=="boolean"&&r!=="string"?{type:Array.isArray(t.value)?"array":"object"}:e.target==="openApi3"?{type:r==="bigint"?"integer":r,enum:[t.value]}:{type:r==="bigint"?"integer":r,const:t.value}}var Dy,Ro={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(Dy===void 0&&(Dy=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),Dy),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function Pp(t,e){let r={type:"string"};function n(i){return e.patternStrategy==="escape"?BL(i):i}if(t.checks)for(let i of t.checks)switch(i.kind){case"min":Se(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,i.value):i.value,i.message,e);break;case"max":Se(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,i.value):i.value,i.message,e);break;case"email":switch(e.emailStrategy){case"format:email":Jn(r,"email",i.message,e);break;case"format:idn-email":Jn(r,"idn-email",i.message,e);break;case"pattern:zod":Kn(r,Ro.email,i.message,e);break}break;case"url":Jn(r,"uri",i.message,e);break;case"uuid":Jn(r,"uuid",i.message,e);break;case"regex":Kn(r,i.regex,i.message,e);break;case"cuid":Kn(r,Ro.cuid,i.message,e);break;case"cuid2":Kn(r,Ro.cuid2,i.message,e);break;case"startsWith":Kn(r,RegExp(`^${n(i.value)}`),i.message,e);break;case"endsWith":Kn(r,RegExp(`${n(i.value)}$`),i.message,e);break;case"datetime":Jn(r,"date-time",i.message,e);break;case"date":Jn(r,"date",i.message,e);break;case"time":Jn(r,"time",i.message,e);break;case"duration":Jn(r,"duration",i.message,e);break;case"length":Se(r,"minLength",typeof r.minLength=="number"?Math.max(r.minLength,i.value):i.value,i.message,e),Se(r,"maxLength",typeof r.maxLength=="number"?Math.min(r.maxLength,i.value):i.value,i.message,e);break;case"includes":{Kn(r,RegExp(n(i.value)),i.message,e);break}case"ip":{i.version!=="v6"&&Jn(r,"ipv4",i.message,e),i.version!=="v4"&&Jn(r,"ipv6",i.message,e);break}case"emoji":Kn(r,Ro.emoji,i.message,e);break;case"ulid":{Kn(r,Ro.ulid,i.message,e);break}case"base64":{switch(e.base64Strategy){case"format:binary":{Jn(r,"binary",i.message,e);break}case"contentEncoding:base64":{Se(r,"contentEncoding","base64",i.message,e);break}case"pattern:zod":{Kn(r,Ro.base64,i.message,e);break}}break}case"nanoid":Kn(r,Ro.nanoid,i.message,e);case"toLowerCase":case"toUpperCase":case"trim":break;default:}return r}var BL=t=>Array.from(t).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),Jn=(t,e,r,n)=>{var i;t.format||(i=t.anyOf)!=null&&i.some(s=>s.format)?(t.anyOf||(t.anyOf=[]),t.format&&(t.anyOf.push({format:t.format,...t.errorMessage&&n.errorMessages&&{errorMessage:{format:t.errorMessage.format}}}),delete t.format,t.errorMessage&&(delete t.errorMessage.format,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.anyOf.push({format:e,...r&&n.errorMessages&&{errorMessage:{format:r}}})):Se(t,"format",e,r,n)},Kn=(t,e,r,n)=>{var i;t.pattern||(i=t.allOf)!=null&&i.some(s=>s.pattern)?(t.allOf||(t.allOf=[]),t.pattern&&(t.allOf.push({pattern:t.pattern,...t.errorMessage&&n.errorMessages&&{errorMessage:{pattern:t.errorMessage.pattern}}}),delete t.pattern,t.errorMessage&&(delete t.errorMessage.pattern,Object.keys(t.errorMessage).length===0&&delete t.errorMessage)),t.allOf.push({pattern:YS(e,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):Se(t,"pattern",YS(e,n),r,n)},YS=(t,e)=>{var u;let r=typeof t=="function"?t():t;if(!e.applyRegexFlags||!r.flags)return r.source;let n={i:r.flags.includes("i"),m:r.flags.includes("m"),s:r.flags.includes("s")},i=n.i?r.source.toLowerCase():r.source,s="",a=!1,o=!1,l=!1;for(let c=0;c<i.length;c++){if(a){s+=i[c],a=!1;continue}if(n.i){if(o){if(i[c].match(/[a-z]/)){l?(s+=i[c],s+=`${i[c-2]}-${i[c]}`.toUpperCase(),l=!1):i[c+1]==="-"&&((u=i[c+2])!=null&&u.match(/[a-z]/))?(s+=i[c],l=!0):s+=`${i[c]}${i[c].toUpperCase()}`;continue}}else if(i[c].match(/[a-z]/)){s+=`[${i[c]}${i[c].toUpperCase()}]`;continue}}if(n.m){if(i[c]==="^"){s+=`(^|(?<=[\r
]))`;continue}else if(i[c]==="$"){s+=`($|(?=[\r
]))`;continue}}if(n.s&&i[c]==="."){s+=o?`${i[c]}\r
`:`[${i[c]}\r
]`;continue}s+=i[c],i[c]==="\\"?a=!0:o&&i[c]==="]"?o=!1:!o&&i[c]==="["&&(o=!0)}try{let c=new RegExp(s)}catch(c){return console.warn(`Could not convert regex pattern at ${e.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),r.source}return s};function Op(t,e){var n,i,s,a,o;if(e.target==="openApi3"&&((n=t.keyType)==null?void 0:n._def.typeName)===q.ZodEnum)return{type:"object",required:t.keyType._def.values,properties:t.keyType._def.values.reduce((l,u)=>{var c;return{...l,[u]:(c=ae(t.valueType._def,{...e,currentPath:[...e.currentPath,"properties",u]}))!=null?c:{}}},{}),additionalProperties:!1};let r={type:"object",additionalProperties:(i=ae(t.valueType._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?i:{}};if(e.target==="openApi3")return r;if(((s=t.keyType)==null?void 0:s._def.typeName)===q.ZodString&&((a=t.keyType._def.checks)!=null&&a.length)){let l=Object.entries(Pp(t.keyType._def,e)).reduce((u,[c,h])=>c==="type"?u:{...u,[c]:h},{});return{...r,propertyNames:l}}else if(((o=t.keyType)==null?void 0:o._def.typeName)===q.ZodEnum)return{...r,propertyNames:{enum:t.keyType._def.values}};return r}function GS(t,e){if(e.mapStrategy==="record")return Op(t,e);let r=ae(t.keyType._def,{...e,currentPath:[...e.currentPath,"items","items","0"]})||{},n=ae(t.valueType._def,{...e,currentPath:[...e.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[r,n],minItems:2,maxItems:2}}}function ZS(t){let e=t.values,n=Object.keys(t.values).filter(s=>typeof e[e[s]]!="number").map(s=>e[s]),i=Array.from(new Set(n.map(s=>typeof s)));return{type:i.length===1?i[0]==="string"?"string":"number":["string","number"],enum:n}}function JS(){return{not:{}}}function KS(t){return t.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}var Od={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function QS(t,e){if(e.target==="openApi3")return XS(t,e);let r=t.options instanceof Map?Array.from(t.options.values()):t.options;if(r.every(n=>n._def.typeName in Od&&(!n._def.checks||!n._def.checks.length))){let n=r.reduce((i,s)=>{let a=Od[s._def.typeName];return a&&!i.includes(a)?[...i,a]:i},[]);return{type:n.length>1?n:n[0]}}else if(r.every(n=>n._def.typeName==="ZodLiteral"&&!n.description)){let n=r.reduce((i,s)=>{let a=typeof s._def.value;switch(a){case"string":case"number":case"boolean":return[...i,a];case"bigint":return[...i,"integer"];case"object":if(s._def.value===null)return[...i,"null"];case"symbol":case"undefined":case"function":default:return i}},[]);if(n.length===r.length){let i=n.filter((s,a,o)=>o.indexOf(s)===a);return{type:i.length>1?i:i[0],enum:r.reduce((s,a)=>s.includes(a._def.value)?s:[...s,a._def.value],[])}}}else if(r.every(n=>n._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((n,i)=>[...n,...i._def.values.filter(s=>!n.includes(s))],[])};return XS(t,e)}var XS=(t,e)=>{let r=(t.options instanceof Map?Array.from(t.options.values()):t.options).map((n,i)=>ae(n._def,{...e,currentPath:[...e.currentPath,"anyOf",`${i}`]})).filter(n=>!!n&&(!e.strictUnions||typeof n=="object"&&Object.keys(n).length>0));return r.length?{anyOf:r}:void 0};function ek(t,e){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(t.innerType._def.typeName)&&(!t.innerType._def.checks||!t.innerType._def.checks.length))return e.target==="openApi3"?{type:Od[t.innerType._def.typeName],nullable:!0}:{type:[Od[t.innerType._def.typeName],"null"]};if(e.target==="openApi3"){let n=ae(t.innerType._def,{...e,currentPath:[...e.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}let r=ae(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function tk(t,e){let r={type:"number"};if(!t.checks)return r;for(let n of t.checks)switch(n.kind){case"int":r.type="integer",Ey(r,"type",n.message,e);break;case"min":e.target==="jsonSchema7"?n.inclusive?Se(r,"minimum",n.value,n.message,e):Se(r,"exclusiveMinimum",n.value,n.message,e):(n.inclusive||(r.exclusiveMinimum=!0),Se(r,"minimum",n.value,n.message,e));break;case"max":e.target==="jsonSchema7"?n.inclusive?Se(r,"maximum",n.value,n.message,e):Se(r,"exclusiveMaximum",n.value,n.message,e):(n.inclusive||(r.exclusiveMaximum=!0),Se(r,"maximum",n.value,n.message,e));break;case"multipleOf":Se(r,"multipleOf",n.value,n.message,e);break}return r}function $L(t,e){var r,n;return e.removeAdditionalStrategy==="strict"?t.catchall._def.typeName==="ZodNever"?t.unknownKeys!=="strict":(r=ae(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?r:!0:t.catchall._def.typeName==="ZodNever"?t.unknownKeys==="passthrough":(n=ae(t.catchall._def,{...e,currentPath:[...e.currentPath,"additionalProperties"]}))!=null?n:!0}function rk(t,e){let r={type:"object",...Object.entries(t.shape()).reduce((n,[i,s])=>{if(s===void 0||s._def===void 0)return n;let a=ae(s._def,{...e,currentPath:[...e.currentPath,"properties",i],propertyPath:[...e.currentPath,"properties",i]});return a===void 0?n:{properties:{...n.properties,[i]:a},required:s.isOptional()?n.required:[...n.required,i]}},{properties:{},required:[]}),additionalProperties:$L(t,e)};return r.required.length||delete r.required,r}var nk=(t,e)=>{var n;if(e.currentPath.toString()===((n=e.propertyPath)==null?void 0:n.toString()))return ae(t.innerType._def,e);let r=ae(t.innerType._def,{...e,currentPath:[...e.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}};var ik=(t,e)=>{if(e.pipeStrategy==="input")return ae(t.in._def,e);if(e.pipeStrategy==="output")return ae(t.out._def,e);let r=ae(t.in._def,{...e,currentPath:[...e.currentPath,"allOf","0"]}),n=ae(t.out._def,{...e,currentPath:[...e.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,n].filter(i=>i!==void 0)}};function sk(t,e){return ae(t.type._def,e)}function ak(t,e){let n={type:"array",uniqueItems:!0,items:ae(t.valueType._def,{...e,currentPath:[...e.currentPath,"items"]})};return t.minSize&&Se(n,"minItems",t.minSize.value,t.minSize.message,e),t.maxSize&&Se(n,"maxItems",t.maxSize.value,t.maxSize.message,e),n}function ok(t,e){return t.rest?{type:"array",minItems:t.items.length,items:t.items.map((r,n)=>ae(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[]),additionalItems:ae(t.rest._def,{...e,currentPath:[...e.currentPath,"additionalItems"]})}:{type:"array",minItems:t.items.length,maxItems:t.items.length,items:t.items.map((r,n)=>ae(r._def,{...e,currentPath:[...e.currentPath,"items",`${n}`]})).reduce((r,n)=>n===void 0?r:[...r,n],[])}}function lk(){return{not:{}}}function uk(){return{}}var ck=(t,e)=>ae(t.innerType._def,e);function ae(t,e,r=!1){var a;let n=e.seen.get(t);if(e.override){let o=(a=e.override)==null?void 0:a.call(e,t,e,n,r);if(o!==vS)return o}if(n&&!r){let o=zL(n,e);if(o!==void 0)return o}let i={def:t,path:e.currentPath,jsonSchema:void 0};e.seen.set(t,i);let s=WL(t,t.typeName,e);return s&&qL(t,e,s),i.jsonSchema=s,s}var zL=(t,e)=>{switch(e.$refStrategy){case"root":return{$ref:t.path.join("/")};case"relative":return{$ref:UL(e.currentPath,t.path)};case"none":case"seen":return t.path.length<e.currentPath.length&&t.path.every((r,n)=>e.currentPath[n]===r)?(console.warn(`Recursive reference detected at ${e.currentPath.join("/")}! Defaulting to any`),{}):e.$refStrategy==="seen"?{}:void 0}},UL=(t,e)=>{let r=0;for(;r<t.length&&r<e.length&&t[r]===e[r];r++);return[(t.length-r).toString(),...e.slice(r)].join("/")},WL=(t,e,r)=>{switch(e){case q.ZodString:return Pp(t,r);case q.ZodNumber:return tk(t,r);case q.ZodObject:return rk(t,r);case q.ZodBigInt:return jS(t,r);case q.ZodBoolean:return BS();case q.ZodDate:return Ry(t,r);case q.ZodUndefined:return lk();case q.ZodNull:return KS(r);case q.ZodArray:return NS(t,r);case q.ZodUnion:case q.ZodDiscriminatedUnion:return QS(t,r);case q.ZodIntersection:return HS(t,r);case q.ZodTuple:return ok(t,r);case q.ZodRecord:return Op(t,r);case q.ZodLiteral:return VS(t,r);case q.ZodEnum:return qS(t);case q.ZodNativeEnum:return ZS(t);case q.ZodNullable:return ek(t,r);case q.ZodOptional:return nk(t,r);case q.ZodMap:return GS(t,r);case q.ZodSet:return ak(t,r);case q.ZodLazy:return ae(t.getter()._def,r);case q.ZodPromise:return sk(t,r);case q.ZodNaN:case q.ZodNever:return JS();case q.ZodEffects:return WS(t,r);case q.ZodAny:return FS();case q.ZodUnknown:return uk();case q.ZodDefault:return US(t,r);case q.ZodBranded:return $S(t,r);case q.ZodReadonly:return ck(t,r);case q.ZodCatch:return zS(t,r);case q.ZodPipeline:return ik(t,r);case q.ZodFunction:case q.ZodVoid:case q.ZodSymbol:return;default:return(n=>{})(e)}},qL=(t,e,r)=>(t.description&&(r.description=t.description,e.markdownDescription&&(r.markdownDescription=t.description)),r);var Rd=(t,e)=>{var l;let r=SS(e),n=typeof e=="object"&&e.definitions?Object.entries(e.definitions).reduce((u,[c,h])=>{var p;return{...u,[c]:(p=ae(h._def,{...r,currentPath:[...r.basePath,r.definitionPath,c]},!0))!=null?p:{}}},{}):void 0,i=typeof e=="string"?e:(e==null?void 0:e.nameStrategy)==="title"||e==null?void 0:e.name,s=(l=ae(t._def,i===void 0?r:{...r,currentPath:[...r.basePath,r.definitionPath,i]},!1))!=null?l:{},a=typeof e=="object"&&e.name!==void 0&&e.nameStrategy==="title"?e.name:void 0;a!==void 0&&(s.title=a);let o=i===void 0?n?{...s,[r.definitionPath]:n}:s:{$ref:[...r.$refStrategy==="relative"?[]:r.basePath,r.definitionPath,i].join("/"),[r.definitionPath]:{...n,[i]:s}};return r.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":r.target==="jsonSchema2019-09"&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),o};function dk(t){if(typeof t=="undefined")return null;try{return JSON.parse(t)}catch(s){}let e="",r=[],n=!1,i=!1;for(let s of t){if(n)s==='"'&&!i?n=!1:s===`
`&&!i?s="\\n":s==="\\"?i=!i:i=!1;else if(s==='"')n=!0,i=!1;else if(s==="{")r.push("}");else if(s==="[")r.push("]");else if(s==="}"||s==="]")if(r&&r[r.length-1]===s)r.pop();else return null;e+=s}n&&(e+='"');for(let s=r.length-1;s>=0;s-=1)e+=r[s];try{return JSON.parse(e)}catch(s){return null}}var vk=He(hk(),1),KL=He(wk(),1);function xk(t,e){return(e==null?void 0:e[t])||(0,vk.default)(t)}function Sk(t,e,r){let n={};for(let i in t)Object.hasOwn(t,i)&&(n[e(i,r)]=t[i]);return n}function kk(t){return Array.isArray(t)?[...t]:{...t}}function XL(t,e){let r=kk(t);for(let[n,i]of Object.entries(e)){let[s,...a]=n.split(".").reverse(),o=r;for(let l of a.reverse()){if(o[l]===void 0)break;o[l]=kk(o[l]),o=o[l]}o[s]!==void 0&&(o[s]={lc:1,type:"secret",id:[i]})}return r}function Iy(t){let e=Object.getPrototypeOf(t);return typeof t.lc_name=="function"&&(typeof e.lc_name!="function"||t.lc_name()!==e.lc_name())?t.lc_name():t.name}var Xn=class t{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Iy(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}constructor(e,...r){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.lc_kwargs=e||{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof t||typeof this.lc_kwargs!="object"||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();let e={},r={},n=Object.keys(this.lc_kwargs).reduce((i,s)=>(i[s]=s in this?this[s]:this.lc_kwargs[s],i),{});for(let i=Object.getPrototypeOf(this);i;i=Object.getPrototypeOf(i))Object.assign(e,Reflect.get(i,"lc_aliases",this)),Object.assign(r,Reflect.get(i,"lc_secrets",this)),Object.assign(n,Reflect.get(i,"lc_attributes",this));return Object.keys(r).forEach(i=>{let s=this,a=n,[o,...l]=i.split(".").reverse();for(let u of l.reverse()){if(!(u in s)||s[u]===void 0)return;(!(u in a)||a[u]===void 0)&&(typeof s[u]=="object"&&s[u]!=null?a[u]={}:Array.isArray(s[u])&&(a[u]=[])),s=s[u],a=a[u]}o in s&&s[o]!==void 0&&(a[o]=a[o]||s[o])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:Sk(Object.keys(r).length?XL(n,r):n,xk,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}};function Do(t,e){var r;return typeof t=="string"?typeof e=="string"?t+e:[{type:"text",text:t},...e]:Array.isArray(e)?(r=Rp(t,e))!=null?r:[...t,...e]:[...t,{type:"text",text:e}]}function QL(t,e){function r(n,i){if(typeof n!="object"||n===null||n===void 0)return n;if(i>=e)return Array.isArray(n)?"[Array]":"[Object]";if(Array.isArray(n))return n.map(a=>r(a,i+1));let s={};for(let a of Object.keys(n))s[a]=r(n[a],i+1);return s}return JSON.stringify(r(t,0),null,2)}var or=class extends Xn{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return typeof this.content=="string"?this.content:""}constructor(e,r){typeof e=="string"&&(e={content:e,additional_kwargs:r,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(e===null)return this;let r=QL(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${r}`}};function Ci(t,e){let r={...t};for(let[n,i]of Object.entries(e))if(r[n]==null)r[n]=i;else{if(i==null)continue;if(typeof r[n]!=typeof i||Array.isArray(r[n])!==Array.isArray(i))throw new Error(`field[${n}] already exists in the message chunk, but with a different type.`);if(typeof r[n]=="string"){if(n==="type")continue;r[n]+=i}else if(typeof r[n]=="object"&&!Array.isArray(r[n]))r[n]=Ci(r[n],i);else if(Array.isArray(r[n]))r[n]=Rp(r[n],i);else{if(r[n]===i)continue;console.warn(`field[${n}] already exists in this message chunk and value has unsupported type.`)}}return r}function Rp(t,e){if(!(t===void 0&&e===void 0)){if(t===void 0||e===void 0)return t||e;{let r=[...t];for(let n of e)if(typeof n=="object"&&"index"in n&&typeof n.index=="number"){let i=r.findIndex(s=>s.index===n.index);i!==-1?r[i]=Ci(r[i],n):r.push(n)}else{if(typeof n=="object"&&"text"in n&&n.text==="")continue;r.push(n)}return r}}}var xs=class extends or{};function Ek(t){return typeof t.role=="string"}function Tk(t){return typeof(t==null?void 0:t._getType)=="function"}var Au=class extends or{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,r,n){typeof e=="string"&&(e={content:e,name:n,tool_call_id:r}),super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return e._getType()==="tool"}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}};function Ck(t){let e=[],r=[];for(let n of t)if(n.function){let i=n.function.name;try{let s=JSON.parse(n.function.arguments),a={name:i||"",args:s||{},id:n.id};e.push(a)}catch(s){r.push({name:i,args:n.function.arguments,id:n.id,error:"Malformed args."})}}else continue;return[e,r]}var Ss=class extends or{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,r){var i,s,a,o,l;let n;if(typeof e=="string")n={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:r!=null?r:{}};else{n=e;let u=(i=n.additional_kwargs)==null?void 0:i.tool_calls,c=n.tool_calls;u!=null&&u.length>0&&(c===void 0||c.length===0)&&console.warn(["New LangChain packages are available that more efficiently handle",`tool calling.

Please upgrade your packages to versions that set`,"message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(u!=null&&c===void 0){let[h,p]=Ck(u);n.tool_calls=h!=null?h:[],n.invalid_tool_calls=p!=null?p:[]}else n.tool_calls=(s=n.tool_calls)!=null?s:[],n.invalid_tool_calls=(a=n.invalid_tool_calls)!=null?a:[]}catch(h){n.tool_calls=[],n.invalid_tool_calls=[]}}super(n),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof n!="string"&&(this.tool_calls=(o=n.tool_calls)!=null?o:this.tool_calls,this.invalid_tool_calls=(l=n.invalid_tool_calls)!=null?l:this.invalid_tool_calls),this.usage_metadata=n.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}};var Ai=class t extends xs{constructor(e){var n,i,s,a,o;let r;if(typeof e=="string")r={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(e.tool_call_chunks===void 0)r={...e,tool_calls:(n=e.tool_calls)!=null?n:[],invalid_tool_calls:[],tool_call_chunks:[]};else{let l=[],u=[];for(let c of e.tool_call_chunks){let h={};try{if(h=dk(c.args||"{}"),h===null||typeof h!="object"||Array.isArray(h))throw new Error("Malformed tool call chunk args.");l.push({name:(i=c.name)!=null?i:"",args:h,id:c.id,type:"tool_call"})}catch(p){u.push({name:c.name,args:c.args,id:c.id,error:"Malformed args.",type:"invalid_tool_call"})}}r={...e,tool_calls:l,invalid_tool_calls:u}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=(s=r.tool_call_chunks)!=null?s:this.tool_call_chunks,this.tool_calls=(a=r.tool_calls)!=null?a:this.tool_calls,this.invalid_tool_calls=(o=r.invalid_tool_calls)!=null?o:this.invalid_tool_calls,this.usage_metadata=r.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){var n,i,s;let r={content:Do(this.content,e.content),additional_kwargs:Ci(this.additional_kwargs,e.additional_kwargs),response_metadata:Ci(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:(n=this.id)!=null?n:e.id};if(this.tool_call_chunks!==void 0||e.tool_call_chunks!==void 0){let a=Rp(this.tool_call_chunks,e.tool_call_chunks);a!==void 0&&a.length>0&&(r.tool_call_chunks=a)}if(this.usage_metadata!==void 0||e.usage_metadata!==void 0){let a=(i=this.usage_metadata)!=null?i:{input_tokens:0,output_tokens:0,total_tokens:0},o=(s=e.usage_metadata)!=null?s:{input_tokens:0,output_tokens:0,total_tokens:0},l={input_tokens:a.input_tokens+o.input_tokens,output_tokens:a.output_tokens+o.output_tokens,total_tokens:a.total_tokens+o.total_tokens};r.usage_metadata=l}return new t(r)}};var Pu=class t extends or{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return t}constructor(e,r){typeof e=="string"&&(e={content:e,role:r}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return e._getType()==="generic"}get _printableFields(){return{...super._printableFields,role:this.role}}};var bn=class extends or{static lc_name(){return"HumanMessage"}_getType(){return"human"}};var Mo=class extends or{static lc_name(){return"SystemMessage"}_getType(){return"system"}};function Mp(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="tool_call")}var Dp=class extends Error{constructor(e,r){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=r}};function sF(t){return Mp(t)?t:typeof t.id=="string"&&t.type==="function"&&typeof t.function=="object"&&t.function!==null&&"arguments"in t.function&&typeof t.function.arguments=="string"&&"name"in t.function&&typeof t.function.name=="string"?{id:t.id,args:JSON.parse(t.function.arguments),name:t.function.name,type:"tool_call"}:t}function Ly(t){let{type:e,...r}=t;if(e==="human"||e==="user")return new bn(r);if(e==="ai"||e==="assistant"){let{tool_calls:n,...i}=r;if(!Array.isArray(n))return new Ss(r);let s=n.map(sF);return new Ss({...i,tool_calls:s})}else{if(e==="system")return new Mo(r);if(e==="tool"&&"tool_call_id"in r)return new Au({...r,content:r.content,tool_call_id:r.tool_call_id,name:r.name});throw new Error("Unable to coerce message from array: only human, AI, or system message coercion is currently supported.")}}function Io(t){if(typeof t=="string")return new bn(t);if(Tk(t))return t;if(Array.isArray(t)){let[e,r]=t;return Ly({type:e,content:r})}else if(Ek(t)){let{role:e,...r}=t;return Ly({...r,type:e})}else return Ly(t)}function Ip(t,e="Human",r="AI"){let n=[];for(let i of t){let s;if(i._getType()==="human")s=e;else if(i._getType()==="ai")s=r;else if(i._getType()==="system")s="System";else if(i._getType()==="function")s="Function";else if(i._getType()==="tool")s="Tool";else if(i._getType()==="generic")s=i.role;else throw new Error(`Got unsupported message type: ${i._getType()}`);let a=i.name?`${i.name}, `:"",o=typeof i.content=="string"?i.content:JSON.stringify(i.content,null,2);n.push(`${s}: ${a}${o}`)}return n.join(`
`)}var J0=He(Np(),1);var lr=He(tE(),1),CJ=lr.default.v1,AJ=lr.default.v1ToV6,PJ=lr.default.v3,Ot=lr.default.v4,OJ=lr.default.v5,RJ=lr.default.v6,DJ=lr.default.v6ToV1,MJ=lr.default.v7,IJ=lr.default.NIL,LJ=lr.default.MAX,FJ=lr.default.version,Ou=lr.default.validate,NJ=lr.default.stringify,jJ=lr.default.parse;var Yy=class{getStore(){}run(e,r){return r()}},Vy=Symbol.for("ls:tracing_async_local_storage"),DN=new Yy,Gy=class{getInstance(){var e;return(e=globalThis[Vy])!=null?e:DN}initializeGlobalInstance(e){globalThis[Vy]===void 0&&(globalThis[Vy]=e)}},MN=new Gy,rE=()=>{let t=MN.getInstance().getStore();if(t===void 0)throw new Error(["Could not get the current run tree.","","Please make sure you are calling this method within a traceable function or the tracing is enabled."].join(`
`));return t};var BJ=Symbol.for("langsmith:traceable:root");function nm(t){return typeof t=="function"&&"langsmith:traceable"in t}var Zy={};fy(Zy,{JsonPatchError:()=>lt,_areEquals:()=>Fd,applyOperation:()=>jo,applyPatch:()=>Bo,applyReducer:()=>NN,deepClone:()=>LN,getValueByPointer:()=>om,validate:()=>aE,validator:()=>lm});var IN=Object.prototype.hasOwnProperty;function iE(t,e){return IN.call(t,e)}function sE(t){if(Array.isArray(t)){let r=new Array(t.length);for(let n=0;n<r.length;n++)r[n]=""+n;return r}if(Object.keys)return Object.keys(t);let e=[];for(let r in t)iE(t,r)&&e.push(r);return e}function wn(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function sm(t){let e=0,r=t.length,n;for(;e<r;){if(n=t.charCodeAt(e),n>=48&&n<=57){e++;continue}return!1}return!0}function am(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function Ld(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function im(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(let r=0,n=t.length;r<n;r++)if(im(t[r]))return!0}else if(typeof t=="object"){let r=sE(t),n=r.length;for(var e=0;e<n;e++)if(im(t[r[e]]))return!0}}return!1}function nE(t,e){let r=[t];for(let n in e){let i=typeof e[n]=="object"?JSON.stringify(e[n],null,2):e[n];typeof i!="undefined"&&r.push(`${n}: ${i}`)}return r.join(`
`)}var No=class extends Error{constructor(e,r,n,i,s){super(nE(e,{name:r,index:n,operation:i,tree:s})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.setPrototypeOf(this,new.target.prototype),this.message=nE(e,{name:r,index:n,operation:i,tree:s})}};var lt=No,LN=wn,Ru={add:function(t,e,r){return t[e]=this.value,{newDocument:r}},remove:function(t,e,r){var n=t[e];return delete t[e],{newDocument:r,removed:n}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:function(t,e,r){let n=om(r,this.path);n&&(n=wn(n));let i=jo(r,{op:"remove",path:this.from}).removed;return jo(r,{op:"add",path:this.path,value:i}),{newDocument:r,removed:n}},copy:function(t,e,r){let n=om(r,this.from);return jo(r,{op:"add",path:this.path,value:wn(n)}),{newDocument:r}},test:function(t,e,r){return{newDocument:r,test:Fd(t[e],this.value)}},_get:function(t,e,r){return this.value=t[e],{newDocument:r}}},FN={add:function(t,e,r){return sm(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:r,index:e}},remove:function(t,e,r){var n=t.splice(e,1);return{newDocument:r,removed:n[0]}},replace:function(t,e,r){var n=t[e];return t[e]=this.value,{newDocument:r,removed:n}},move:Ru.move,copy:Ru.copy,test:Ru.test,_get:Ru._get};function om(t,e){if(e=="")return t;var r={op:"_get",path:e};return jo(t,r),r.value}function jo(t,e,r=!1,n=!0,i=!0,s=0){if(r&&(typeof r=="function"?r(e,0,t,e.path):lm(e,0)),e.path===""){let a={newDocument:t};if(e.op==="add")return a.newDocument=e.value,a;if(e.op==="replace")return a.newDocument=e.value,a.removed=t,a;if(e.op==="move"||e.op==="copy")return a.newDocument=om(t,e.from),e.op==="move"&&(a.removed=t),a;if(e.op==="test"){if(a.test=Fd(t,e.value),a.test===!1)throw new lt("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return a.newDocument=t,a}else{if(e.op==="remove")return a.removed=t,a.newDocument=null,a;if(e.op==="_get")return e.value=t,a;if(r)throw new lt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return a}}else{n||(t=wn(t));let o=(e.path||"").split("/"),l=t,u=1,c=o.length,h,p,_;for(typeof r=="function"?_=r:_=lm;;){if(p=o[u],p&&p.indexOf("~")!=-1&&(p=Ld(p)),i&&(p=="__proto__"||p=="prototype"&&u>0&&o[u-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&h===void 0&&(l[p]===void 0?h=o.slice(0,u).join("/"):u==c-1&&(h=e.path),h!==void 0&&_(e,0,t,h)),u++,Array.isArray(l)){if(p==="-")p=l.length;else{if(r&&!sm(p))throw new lt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);sm(p)&&(p=~~p)}if(u>=c){if(r&&e.op==="add"&&p>l.length)throw new lt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);let y=FN[e.op].call(e,l,p,t);if(y.test===!1)throw new lt("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return y}}else if(u>=c){let y=Ru[e.op].call(e,l,p,t);if(y.test===!1)throw new lt("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return y}if(l=l[p],r&&u<c&&(!l||typeof l!="object"))throw new lt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,e,t)}}}function Bo(t,e,r,n=!0,i=!0){if(r&&!Array.isArray(e))throw new lt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(t=wn(t));let s=new Array(e.length);for(let a=0,o=e.length;a<o;a++)s[a]=jo(t,e[a],r,!0,i,a),t=s[a].newDocument;return s.newDocument=t,s}function NN(t,e,r){let n=jo(t,e);if(n.test===!1)throw new lt("Test operation failed","TEST_OPERATION_FAILED",r,e,t);return n.newDocument}function lm(t,e,r,n){if(typeof t!="object"||t===null||Array.isArray(t))throw new lt("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,r);if(Ru[t.op]){if(typeof t.path!="string")throw new lt("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,r);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new lt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,r);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new lt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new lt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,r);if((t.op==="add"||t.op==="replace"||t.op==="test")&&im(t.value))throw new lt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,r);if(r){if(t.op=="add"){var i=t.path.split("/").length,s=n.split("/").length;if(i!==s+1&&i!==s)throw new lt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,r)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==n)throw new lt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,r)}else if(t.op==="move"||t.op==="copy"){var a={op:"_get",path:t.from,value:void 0},o=aE([a],r);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new lt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,r)}}}else throw new lt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,r)}function aE(t,e,r){try{if(!Array.isArray(t))throw new lt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)Bo(wn(e),wn(t),r||!0);else{r=r||lm;for(var n=0;n<t.length;n++)r(t[n],n,e,void 0)}}catch(i){if(i instanceof lt)return i;throw i}}function Fd(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var r=Array.isArray(t),n=Array.isArray(e),i,s,a;if(r&&n){if(s=t.length,s!=e.length)return!1;for(i=s;i--!==0;)if(!Fd(t[i],e[i]))return!1;return!0}if(r!=n)return!1;var o=Object.keys(t);if(s=o.length,s!==Object.keys(e).length)return!1;for(i=s;i--!==0;)if(!e.hasOwnProperty(o[i]))return!1;for(i=s;i--!==0;)if(a=o[i],!Fd(t[a],e[a]))return!1;return!0}return t!==t&&e!==e}var ZJ={...Zy,JsonPatchError:No,deepClone:wn,escapePathComponent:am,unescapePathComponent:Ld};var jN=()=>typeof window!="undefined"&&typeof window.document!="undefined",BN=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",$N=()=>typeof window!="undefined"&&window.name==="nodejs"||typeof navigator!="undefined"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),oE=()=>typeof Deno!="undefined",zN=()=>typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.node!="undefined"&&!oE(),UN=()=>{let t;return jN()?t="browser":zN()?t="node":BN()?t="webworker":$N()?t="jsdom":oE()?t="deno":t="other",t},Jy;async function lE(){return Jy===void 0&&(Jy={library:"langchain-js",runtime:UN()}),Jy}function vn(t){var e;try{return typeof process!="undefined"?(e=process.env)==null?void 0:e[t]:void 0}catch(r){return}}var Ky=class{},$o=class t extends Ky{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,Iy(this.constructor)]}constructor(e){var r,n,i,s,a,o,l;super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:vn("LANGCHAIN_CALLBACKS_BACKGROUND")==="false"}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=(r=e.ignoreLLM)!=null?r:this.ignoreLLM,this.ignoreChain=(n=e.ignoreChain)!=null?n:this.ignoreChain,this.ignoreAgent=(i=e.ignoreAgent)!=null?i:this.ignoreAgent,this.ignoreRetriever=(s=e.ignoreRetriever)!=null?s:this.ignoreRetriever,this.ignoreCustomEvent=(a=e.ignoreCustomEvent)!=null?a:this.ignoreCustomEvent,this.raiseError=(o=e.raiseError)!=null?o:this.raiseError,this.awaitHandlers=this.raiseError||((l=e._awaitHandler)!=null?l:this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return Xn.prototype.toJSON.call(this)}toJSONNotImplemented(){return Xn.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){class r extends t{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Ot()}),Object.assign(this,e)}}return new r}};function Xy(t,e){return t&&!Array.isArray(t)&&typeof t=="object"?t:{[e]:t}}function WN(t){return t.replace(/[-:.]/g,"")}function qN(t,e,r){let n=r.toFixed(0).slice(0,3).padStart(3,"0");return WN(`${new Date(t).toISOString().slice(0,-1)}${n}Z`)+e}function Du(t){return typeof t._addRunToRunMap=="function"}var xn=class extends $o{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}copy(){return this}stringifyError(e){return e instanceof Error?e.message+(e!=null&&e.stack?`

${e.stack}`:""):typeof e=="string"?e:`${e}`}_addChildRun(e,r){e.child_runs.push(r)}_addRunToRunMap(e){let r=qN(e.start_time,e.id,e.execution_order),n={...e};if(n.parent_run_id!==void 0){let i=this.runMap.get(n.parent_run_id);i&&(this._addChildRun(i,n),i.child_execution_order=Math.max(i.child_execution_order,n.child_execution_order),n.trace_id=i.trace_id,i.dotted_order!==void 0&&(n.dotted_order=[i.dotted_order,r].join(".")))}else n.trace_id=n.id,n.dotted_order=r;return this.runMap.set(n.id,n),n}async _endTrace(e){var n;let r=e.parent_run_id!==void 0&&this.runMap.get(e.parent_run_id);r?r.child_execution_order=Math.max(r.child_execution_order,e.child_execution_order):await this.persistRun(e),this.runMap.delete(e.id),await((n=this.onRunUpdate)==null?void 0:n.call(this,e))}_getExecutionOrder(e){let r=e!==void 0&&this.runMap.get(e);return r?r.child_execution_order+1:1}_createRunForLLMStart(e,r,n,i,s,a,o,l){let u=this._getExecutionOrder(i),c=Date.now(),h=o?{...s,metadata:o}:s,p={id:n,name:l!=null?l:e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{prompts:r},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:h!=null?h:{},tags:a||[]};return this._addRunToRunMap(p)}async handleLLMStart(e,r,n,i,s,a,o,l){var c,h,p;let u=(c=this.runMap.get(n))!=null?c:this._createRunForLLMStart(e,r,n,i,s,a,o,l);return await((h=this.onRunCreate)==null?void 0:h.call(this,u)),await((p=this.onLLMStart)==null?void 0:p.call(this,u)),u}_createRunForChatModelStart(e,r,n,i,s,a,o,l){let u=this._getExecutionOrder(i),c=Date.now(),h=o?{...s,metadata:o}:s,p={id:n,name:l!=null?l:e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{messages:r},execution_order:u,child_runs:[],child_execution_order:u,run_type:"llm",extra:h!=null?h:{},tags:a||[]};return this._addRunToRunMap(p)}async handleChatModelStart(e,r,n,i,s,a,o,l){var c,h,p;let u=(c=this.runMap.get(n))!=null?c:this._createRunForChatModelStart(e,r,n,i,s,a,o,l);return await((h=this.onRunCreate)==null?void 0:h.call(this,u)),await((p=this.onLLMStart)==null?void 0:p.call(this,u)),u}async handleLLMEnd(e,r){var i;let n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="llm")throw new Error("No LLM run to end.");return n.end_time=Date.now(),n.outputs=e,n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onLLMEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleLLMError(e,r){var i;let n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="llm")throw new Error("No LLM run to end.");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onLLMError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}_createRunForChainStart(e,r,n,i,s,a,o,l){let u=this._getExecutionOrder(i),c=Date.now(),h={id:n,name:l!=null?l:e.id[e.id.length-1],parent_run_id:i,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:r,execution_order:u,child_execution_order:u,run_type:o!=null?o:"chain",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(h)}async handleChainStart(e,r,n,i,s,a,o,l){var c,h,p;let u=(c=this.runMap.get(n))!=null?c:this._createRunForChainStart(e,r,n,i,s,a,o,l);return await((h=this.onRunCreate)==null?void 0:h.call(this,u)),await((p=this.onChainStart)==null?void 0:p.call(this,u)),u}async handleChainEnd(e,r,n,i,s){var o;let a=this.runMap.get(r);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.outputs=Xy(e,"output"),a.events.push({name:"end",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=Xy(s.inputs,"input")),await((o=this.onChainEnd)==null?void 0:o.call(this,a)),await this._endTrace(a),a}async handleChainError(e,r,n,i,s){var o;let a=this.runMap.get(r);if(!a)throw new Error("No chain run to end.");return a.end_time=Date.now(),a.error=this.stringifyError(e),a.events.push({name:"error",time:new Date(a.end_time).toISOString()}),(s==null?void 0:s.inputs)!==void 0&&(a.inputs=Xy(s.inputs,"input")),await((o=this.onChainError)==null?void 0:o.call(this,a)),await this._endTrace(a),a}_createRunForToolStart(e,r,n,i,s,a,o){let l=this._getExecutionOrder(i),u=Date.now(),c={id:n,name:o!=null?o:e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{input:r},execution_order:l,child_execution_order:l,run_type:"tool",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(c)}async handleToolStart(e,r,n,i,s,a,o){var u,c,h;let l=(u=this.runMap.get(n))!=null?u:this._createRunForToolStart(e,r,n,i,s,a,o);return await((c=this.onRunCreate)==null?void 0:c.call(this,l)),await((h=this.onToolStart)==null?void 0:h.call(this,l)),l}async handleToolEnd(e,r){var i;let n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.outputs={output:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onToolEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleToolError(e,r){var i;let n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="tool")throw new Error("No tool run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onToolError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleAgentAction(e,r){var s;let n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="chain")return;let i=n;i.actions=i.actions||[],i.actions.push(e),i.events.push({name:"agent_action",time:new Date().toISOString(),kwargs:{action:e}}),await((s=this.onAgentAction)==null?void 0:s.call(this,n))}async handleAgentEnd(e,r){var i;let n=this.runMap.get(r);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"agent_end",time:new Date().toISOString(),kwargs:{action:e}}),await((i=this.onAgentEnd)==null?void 0:i.call(this,n)))}_createRunForRetrieverStart(e,r,n,i,s,a,o){let l=this._getExecutionOrder(i),u=Date.now(),c={id:n,name:o!=null?o:e.id[e.id.length-1],parent_run_id:i,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{query:r},execution_order:l,child_execution_order:l,run_type:"retriever",child_runs:[],extra:a?{metadata:a}:{},tags:s||[]};return this._addRunToRunMap(c)}async handleRetrieverStart(e,r,n,i,s,a,o){var u,c,h;let l=(u=this.runMap.get(n))!=null?u:this._createRunForRetrieverStart(e,r,n,i,s,a,o);return await((c=this.onRunCreate)==null?void 0:c.call(this,l)),await((h=this.onRetrieverStart)==null?void 0:h.call(this,l)),l}async handleRetrieverEnd(e,r){var i;let n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.outputs={documents:e},n.events.push({name:"end",time:new Date(n.end_time).toISOString()}),await((i=this.onRetrieverEnd)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleRetrieverError(e,r){var i;let n=this.runMap.get(r);if(!n||(n==null?void 0:n.run_type)!=="retriever")throw new Error("No retriever run to end");return n.end_time=Date.now(),n.error=this.stringifyError(e),n.events.push({name:"error",time:new Date(n.end_time).toISOString()}),await((i=this.onRetrieverError)==null?void 0:i.call(this,n)),await this._endTrace(n),n}async handleText(e,r){var i;let n=this.runMap.get(r);!n||(n==null?void 0:n.run_type)!=="chain"||(n.events.push({name:"text",time:new Date().toISOString(),kwargs:{text:e}}),await((i=this.onText)==null?void 0:i.call(this,n)))}async handleLLMNewToken(e,r,n,i,s,a){var l;let o=this.runMap.get(n);if(!o||(o==null?void 0:o.run_type)!=="llm")throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return o.events.push({name:"new_token",time:new Date().toISOString(),kwargs:{token:e,idx:r,chunk:a==null?void 0:a.chunk}}),await((l=this.onLLMNewToken)==null?void 0:l.call(this,o,e,{chunk:a==null?void 0:a.chunk})),o}};var bE=He(Np(),1),pm=He(hm(),1);var QN=(...t)=>fetch(...t),e3=Symbol.for("ls:fetch_implementation");var le=()=>{var t;return(t=globalThis[e3])!=null?t:QN};var t3=[400,401,403,404,405,406,407,408],r3=[409],jd=class{constructor(e){var r,n;Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=(r=e.maxConcurrency)!=null?r:1/0,this.maxRetries=(n=e.maxRetries)!=null?n:6,"default"in pm.default?this.queue=new pm.default.default({concurrency:this.maxConcurrency}):this.queue=new pm.default({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook}call(e,...r){let n=this.onFailedResponseHook;return this.queue.add(()=>(0,bE.default)(()=>e(...r).catch(i=>{throw i instanceof Error?i:new Error(i)}),{async onFailedAttempt(i){if(i.message.startsWith("Cancel")||i.message.startsWith("TimeoutError")||i.message.startsWith("AbortError")||(i==null?void 0:i.code)==="ECONNABORTED")throw i;let s=i==null?void 0:i.response,a=s==null?void 0:s.status;if(a){if(t3.includes(+a))throw i;if(r3.includes(+a))return;n&&await n(s)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((i,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>le()(...e).then(r=>r.ok?r:Promise.reject(r)))}};function s0(t){return typeof(t==null?void 0:t._getType)=="function"}function a0(t){let e={type:t._getType(),data:{content:t.content}};return t!=null&&t.additional_kwargs&&Object.keys(t.additional_kwargs).length>0&&(e.data.additional_kwargs={...t.additional_kwargs}),e}var Es,n3=()=>typeof window!="undefined"&&typeof window.document!="undefined",i3=()=>typeof globalThis=="object"&&globalThis.constructor&&globalThis.constructor.name==="DedicatedWorkerGlobalScope",s3=()=>typeof window!="undefined"&&window.name==="nodejs"||typeof navigator!="undefined"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),yE=()=>typeof Deno!="undefined",a3=()=>typeof process!="undefined"&&typeof process.versions!="undefined"&&typeof process.versions.node!="undefined"&&!yE(),o3=()=>Es||(n3()?Es="browser":a3()?Es="node":i3()?Es="webworker":s3()?Es="jsdom":yE()?Es="deno":Es="other",Es),o0;async function mm(){if(o0===void 0){let t=o3(),e=u3();o0={library:"langsmith",runtime:t,sdk:"langsmith-js",sdk_version:gm,...e}}return o0}function wE(){let t=l3()||{},e={},r=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION"];for(let[n,i]of Object.entries(t))n.startsWith("LANGCHAIN_")&&typeof i=="string"&&!r.includes(n)&&!n.toLowerCase().includes("key")&&!n.toLowerCase().includes("secret")&&!n.toLowerCase().includes("token")&&(n==="LANGCHAIN_REVISION_ID"?e.revision_id=i:e[n]=i);return e}function l3(){try{return typeof process!="undefined"&&process.env?Object.entries(process.env).reduce((t,[e,r])=>(t[e]=String(r),t),{}):void 0}catch(t){return}}function ka(t){var e;try{return typeof process!="undefined"?(e=process.env)==null?void 0:e[t]:void 0}catch(r){return}}function Ts(t){return ka(`LANGSMITH_${t}`)||ka(`LANGCHAIN_${t}`)}var l0;function u3(){if(l0!==void 0)return l0;let t=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],e={};for(let r of t){let n=ka(r);n!==void 0&&(e[r]=n)}return l0=e,e}function Me(t){if(!Ou(t))throw new Error(`Invalid UUID: ${t}`)}var vE={};function _m(t){vE[t]||(console.warn(t),vE[t]=!0)}var C0=He(Am(),1);function fC(t,e){let r=(0,C0.parse)(t),n=(0,C0.parse)(e);if(!r||!n)throw new Error("Invalid version format.");return r.compare(n)>=0}function As(t){if(!t||t.split("/").length>2||t.startsWith("/")||t.endsWith("/")||t.split(":").length>2)throw new Error(`Invalid identifier format: ${t}`);let[e,r]=t.split(":"),n=r||"latest";if(e.includes("/")){let[i,s]=e.split("/",2);if(!i||!s)throw new Error(`Invalid identifier format: ${t}`);return[i,s,n]}else{if(!e)throw new Error(`Invalid identifier format: ${t}`);return["-",e,n]}}var A0=class extends Error{constructor(e){super(e),this.name="LangSmithConflictError"}};async function Ae(t,e,r){let n;if(t.ok){r&&(n=await t.text());return}n=await t.text();let i=`Failed to ${e}. Received status [${t.status}]: ${t.statusText}. Server response: ${n}`;throw t.status===409?new A0(i):new Error(i)}var hC="[...]",ij={result:"[Circular]"},Pm=[],Lu=[];function sj(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Fu(t,e,r,n){typeof n=="undefined"&&(n=sj()),O0(t,"",0,[],void 0,0,n);var i;try{Lu.length===0?i=JSON.stringify(t,e,r):i=JSON.stringify(t,aj(e),r)}catch(a){return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;Pm.length!==0;){var s=Pm.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function P0(t,e,r,n){var i=Object.getOwnPropertyDescriptor(n,r);i.get!==void 0?i.configurable?(Object.defineProperty(n,r,{value:t}),Pm.push([n,r,e,i])):Lu.push([e,r,t]):(n[r]=t,Pm.push([n,r,e]))}function O0(t,e,r,n,i,s,a){s+=1;var o;if(typeof t=="object"&&t!==null){for(o=0;o<n.length;o++)if(n[o]===t){P0(ij,t,e,i);return}if(typeof a.depthLimit!="undefined"&&s>a.depthLimit){P0(hC,t,e,i);return}if(typeof a.edgesLimit!="undefined"&&r+1>a.edgesLimit){P0(hC,t,e,i);return}if(n.push(t),Array.isArray(t))for(o=0;o<t.length;o++)O0(t[o],o,o,n,t,s,a);else{var l=Object.keys(t);for(o=0;o<l.length;o++){var u=l[o];O0(t[u],u,o,n,t,s,a)}}n.pop()}}function aj(t){return t=typeof t!="undefined"?t:function(e,r){return r},function(e,r){if(Lu.length>0)for(var n=0;n<Lu.length;n++){var i=Lu[n];if(i[1]===e&&i[0]===r){r=i[2],Lu.splice(n,1);break}}return t.call(this,e,r)}}async function pC(t){let e=await mm(),r=wE();return t.map(n=>{var a,o;let i=(a=n.extra)!=null?a:{},s=i.metadata;return n.extra={...i,runtime:{...e,...i==null?void 0:i.runtime},metadata:{...r,...r.revision_id||n.revision_id?{revision_id:(o=n.revision_id)!=null?o:r.revision_id}:{},...s}},n})}var oj=()=>{let t=Ts("TRACING_SAMPLING_RATE");if(t===void 0)return;let e=parseFloat(t);if(e<0||e>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${e}`);return e},lj=t=>{let r=t.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return r==="localhost"||r==="127.0.0.1"||r==="::1"};async function uj(t){let e=[];for await(let r of t)e.push(r);return e}function R0(t){if(t!==void 0)return t.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}var cj=async t=>{var e;if((t==null?void 0:t.status)===429){let r=parseInt((e=t.headers.get("retry-after"))!=null?e:"30",10)*1e3;if(r>0)return await new Promise(n=>setTimeout(n,r)),!0}return!1},D0=class{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]})}get size(){return this.items.length}push(e){return new Promise(r=>{this.items.push([e,r])})}pop(e){if(e<1)throw new Error("Number of items to pop off may not be less than 1.");let r=[];for(;r.length<e&&this.items.length;){let n=this.items.shift();if(n)r.push(n);else break}return[r.map(n=>n[0]),()=>r.forEach(n=>n[1]())]}},dj=20971520,Uo=class t{constructor(e={}){var n,i,s,a,o,l,u,c,h,p,_,y,S;Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"batchEndpointSupported",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new D0}),Object.defineProperty(this,"pendingAutoBatchedRunLimit",{enumerable:!0,configurable:!0,writable:!0,value:100}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchInitialDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:50}),Object.defineProperty(this,"serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let r=t.getDefaultClientConfig();this.tracingSampleRate=oj(),this.apiUrl=(i=R0((n=e.apiUrl)!=null?n:r.apiUrl))!=null?i:"",this.apiKey=R0((s=e.apiKey)!=null?s:r.apiKey),this.webUrl=R0((a=e.webUrl)!=null?a:r.webUrl),this.timeout_ms=(o=e.timeout_ms)!=null?o:12e3,this.caller=new jd((l=e.callerOptions)!=null?l:{}),this.batchIngestCaller=new jd({...(u=e.callerOptions)!=null?u:{},onFailedResponseHook:cj}),this.hideInputs=(h=(c=e.hideInputs)!=null?c:e.anonymizer)!=null?h:r.hideInputs,this.hideOutputs=(_=(p=e.hideOutputs)!=null?p:e.anonymizer)!=null?_:r.hideOutputs,this.autoBatchTracing=(y=e.autoBatchTracing)!=null?y:this.autoBatchTracing,this.pendingAutoBatchedRunLimit=(S=e.pendingAutoBatchedRunLimit)!=null?S:this.pendingAutoBatchedRunLimit,this.fetchOptions=e.fetchOptions||{}}static getDefaultClientConfig(){var s;let e=Ts("API_KEY"),r=(s=Ts("ENDPOINT"))!=null?s:"https://api.smith.langchain.com",n=Ts("HIDE_INPUTS")==="true",i=Ts("HIDE_OUTPUTS")==="true";return{apiUrl:r,apiKey:e,webUrl:void 0,hideInputs:n,hideOutputs:i}}getHostUrl(){return this.webUrl?this.webUrl:lj(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){let e={"User-Agent":`langsmith-js/${gm}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}processInputs(e){return this.hideInputs===!1?e:this.hideInputs===!0?{}:typeof this.hideInputs=="function"?this.hideInputs(e):e}processOutputs(e){return this.hideOutputs===!1?e:this.hideOutputs===!0?{}:typeof this.hideOutputs=="function"?this.hideOutputs(e):e}prepareRunCreateOrUpdateInputs(e){let r={...e};return r.inputs!==void 0&&(r.inputs=this.processInputs(r.inputs)),r.outputs!==void 0&&(r.outputs=this.processOutputs(r.outputs)),r}async _getResponse(e,r){var a;let n=(a=r==null?void 0:r.toString())!=null?a:"",i=`${this.apiUrl}${e}?${n}`,s=await this.caller.call(le(),i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ae(s,`Failed to fetch ${e}`),s}async _get(e,r){return(await this._getResponse(e,r)).json()}async*_getPaginated(e,r=new URLSearchParams,n){let i=Number(r.get("offset"))||0,s=Number(r.get("limit"))||100;for(;;){r.set("offset",String(i)),r.set("limit",String(s));let a=`${this.apiUrl}${e}?${r}`,o=await this.caller.call(le(),a,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ae(o,`Failed to fetch ${e}`);let l=n?n(await o.json()):await o.json();if(l.length===0||(yield l,l.length<s))break;i+=l.length}}async*_getCursorPaginatedList(e,r=null,n="POST",i="runs"){let s=r?{...r}:{};for(;;){let o=await(await this.caller.call(le(),`${this.apiUrl}${e}`,{method:n,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(s)})).json();if(!o||!o[i])break;yield o[i];let l=o.cursors;if(!l||!l.next)break;s.cursor=l.next}}_filterForSampling(e,r=!1){if(this.tracingSampleRate===void 0)return e;if(r){let n=[];for(let i of e)this.filteredPostUuids.has(i.id)?this.filteredPostUuids.delete(i.id):n.push(i);return n}else{let n=[];for(let i of e)i.id!==i.trace_id&&!this.filteredPostUuids.has(i.trace_id)||Math.random()<this.tracingSampleRate?n.push(i):this.filteredPostUuids.add(i.id);return n}}async drainAutoBatchQueue(){for(;this.autoBatchQueue.size>=0;){let[e,r]=this.autoBatchQueue.pop(this.pendingAutoBatchedRunLimit);if(!e.length){r();return}try{await this.batchIngestRuns({runCreates:e.filter(n=>n.action==="create").map(n=>n.item),runUpdates:e.filter(n=>n.action==="update").map(n=>n.item)})}finally{r()}}}async processRunOperation(e,r){let n=this.autoBatchTimeout;clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0;let i=this.autoBatchQueue.push(e);return(r||this.autoBatchQueue.size>this.pendingAutoBatchedRunLimit)&&await this.drainAutoBatchQueue(),this.autoBatchQueue.size>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue().catch(console.error)},n?this.autoBatchAggregationDelayMs:this.autoBatchInitialDelayMs)),i}async _getServerInfo(){let e=await le()(`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ae(e,"get server info"),e.json()}async batchEndpointIsSupported(){try{this.serverInfo=await this._getServerInfo()}catch(e){return!1}return!0}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async createRun(e){var o;if(!this._filterForSampling([e]).length)return;let r={...this.headers,"Content-Type":"application/json"},n=e.project_name;delete e.project_name;let i=this.prepareRunCreateOrUpdateInputs({session_name:n,...e,start_time:(o=e.start_time)!=null?o:Date.now()});if(this.autoBatchTracing&&i.trace_id!==void 0&&i.dotted_order!==void 0){this.processRunOperation({action:"create",item:i}).catch(console.error);return}let s=await pC([i]),a=await this.caller.call(le(),`${this.apiUrl}/runs`,{method:"POST",headers:r,body:Fu(s[0]),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ae(a,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:r}){var u,c,h,p,_;if(e===void 0&&r===void 0)return;let n=(u=e==null?void 0:e.map(y=>this.prepareRunCreateOrUpdateInputs(y)))!=null?u:[],i=(c=r==null?void 0:r.map(y=>this.prepareRunCreateOrUpdateInputs(y)))!=null?c:[];if(n.length>0&&i.length>0){let y=n.reduce((x,k)=>(k.id&&(x[k.id]=k),x),{}),S=[];for(let x of i)x.id!==void 0&&y[x.id]?y[x.id]={...y[x.id],...x}:S.push(x);n=Object.values(y),i=S}let s={post:this._filterForSampling(n),patch:this._filterForSampling(i,!0)};if(!s.post.length&&!s.patch.length)return;if(n=await pC(n),this.batchEndpointSupported===void 0&&(this.batchEndpointSupported=await this.batchEndpointIsSupported()),!this.batchEndpointSupported){this.autoBatchTracing=!1;for(let y of s.post)await this.createRun(y);for(let y of s.patch)y.id!==void 0&&await this.updateRun(y.id,y);return}let a=(_=(p=(h=this.serverInfo)==null?void 0:h.batch_ingest_config)==null?void 0:p.size_limit_bytes)!=null?_:dj,o={post:[],patch:[]},l=0;for(let y of["post","patch"]){let S=y,x=s[S].reverse(),k=x.pop();for(;k!==void 0;){let T=Fu(k);l>0&&l+T.length>a&&(await this._postBatchIngestRuns(Fu(o)),l=0,o.post=[],o.patch=[]),l+=T.length,o[S].push(k),k=x.pop()}}(o.post.length>0||o.patch.length>0)&&await this._postBatchIngestRuns(Fu(o))}async _postBatchIngestRuns(e){let r={...this.headers,"Content-Type":"application/json",Accept:"application/json"},n=await this.batchIngestCaller.call(le(),`${this.apiUrl}/runs/batch`,{method:"POST",headers:r,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ae(n,"batch create run",!0)}async updateRun(e,r){Me(e),r.inputs&&(r.inputs=this.processInputs(r.inputs)),r.outputs&&(r.outputs=this.processOutputs(r.outputs));let n={...r,id:e};if(!this._filterForSampling([n],!0).length)return;if(this.autoBatchTracing&&n.trace_id!==void 0&&n.dotted_order!==void 0){if(r.end_time!==void 0&&n.parent_run_id===void 0){await this.processRunOperation({action:"update",item:n},!0);return}else this.processRunOperation({action:"update",item:n}).catch(console.error);return}let i={...this.headers,"Content-Type":"application/json"},s=await this.caller.call(le(),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:i,body:Fu(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ae(s,"update run",!0)}async readRun(e,{loadChildRuns:r}={loadChildRuns:!1}){Me(e);let n=await this._get(`/runs/${e}`);return r&&n.child_run_ids&&(n=await this._loadChildRuns(n)),n}async getRunUrl({runId:e,run:r,projectOpts:n}){if(r!==void 0){let i;r.session_id?i=r.session_id:n!=null&&n.projectName?i=(await this.readProject({projectName:n==null?void 0:n.projectName})).id:n!=null&&n.projectId?i=n==null?void 0:n.projectId:i=(await this.readProject({projectName:Ts("PROJECT")||"default"})).id;let s=await this._getTenantId();return`${this.getHostUrl()}/o/${s}/projects/p/${i}/r/${r.id}?poll=true`}else if(e!==void 0){let i=await this.readRun(e);if(!i.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${i.app_path}`}else throw new Error("Must provide either runId or run")}async _loadChildRuns(e){let r=await uj(this.listRuns({id:e.child_run_ids})),n={},i={};r.sort((s,a)=>{var o,l;return((o=s==null?void 0:s.dotted_order)!=null?o:"").localeCompare((l=a==null?void 0:a.dotted_order)!=null?l:"")});for(let s of r){if(s.parent_run_id===null||s.parent_run_id===void 0)throw new Error(`Child run ${s.id} has no parent`);s.parent_run_id in n||(n[s.parent_run_id]=[]),n[s.parent_run_id].push(s),i[s.id]=s}e.child_runs=n[e.id]||[];for(let s in n)s!==e.id&&(i[s].child_runs=n[s]);return e}async*listRuns(e){let{projectId:r,projectName:n,parentRunId:i,traceId:s,referenceExampleId:a,startTime:o,executionOrder:l,isRoot:u,runType:c,error:h,id:p,query:_,filter:y,traceFilter:S,treeFilter:x,limit:k,select:T}=e,P=[];if(r&&(P=Array.isArray(r)?r:[r]),n){let F=Array.isArray(n)?n:[n],I=await Promise.all(F.map(U=>this.readProject({projectName:U}).then(X=>X.id)));P.push(...I)}let O=["app_path","child_run_ids","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],A={session:P.length?P:null,run_type:c,reference_example:a,query:_,filter:y,trace_filter:S,tree_filter:x,execution_order:l,parent_run:i,start_time:o?o.toISOString():null,error:h,id:p,limit:k,trace:s,select:T||O,is_root:u},R=0;for await(let F of this._getCursorPaginatedList("/runs/query",A))if(k){if(R>=k)break;if(F.length+R>k){yield*F.slice(0,k-R);break}R+=F.length,yield*F}else yield*F}async getRunStats({id:e,trace:r,parentRun:n,runType:i,projectNames:s,projectIds:a,referenceExampleIds:o,startTime:l,endTime:u,error:c,query:h,filter:p,traceFilter:_,treeFilter:y,isRoot:S,dataSourceType:x}){let k=a||[];s&&(k=[...a||[],...await Promise.all(s.map(R=>this.readProject({projectName:R}).then(F=>F.id)))]);let P=Object.fromEntries(Object.entries({id:e,trace:r,parent_run:n,run_type:i,session:k,reference_example:o,start_time:l,end_time:u,error:c,query:h,filter:p,trace_filter:_,tree_filter:y,is_root:S,data_source_type:x}).filter(([R,F])=>F!==void 0));return await(await this.caller.call(le(),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(P),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async shareRun(e,{shareId:r}={}){let n={run_id:e,share_token:r||Ot()};Me(e);let s=await(await this.caller.call(le(),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(s===null||!("share_token"in s))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${s.share_token}/r`}async unshareRun(e){Me(e);let r=await this.caller.call(le(),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ae(r,"unshare run",!0)}async readRunSharedLink(e){Me(e);let n=await(await this.caller.call(le(),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();if(!(n===null||!("share_token"in n)))return`${this.getHostUrl()}/public/${n.share_token}/r`}async listSharedRuns(e,{runIds:r}={}){let n=new URLSearchParams({share_token:e});if(r!==void 0)for(let a of r)n.append("id",a);return Me(e),await(await this.caller.call(le(),`${this.apiUrl}/public/${e}/runs${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async readDatasetSharedSchema(e,r){if(!e&&!r)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:r})).id),Me(e);let i=await(await this.caller.call(le(),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return i.url=`${this.getHostUrl()}/public/${i.share_token}/d`,i}async shareDataset(e,r){if(!e&&!r)throw new Error("Either datasetId or datasetName must be given");e||(e=(await this.readDataset({datasetName:r})).id);let n={dataset_id:e};Me(e);let s=await(await this.caller.call(le(),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json();return s.url=`${this.getHostUrl()}/public/${s.share_token}/d`,s}async unshareDataset(e){Me(e);let r=await this.caller.call(le(),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ae(r,"unshare dataset",!0)}async readSharedDataset(e){return Me(e),await(await this.caller.call(le(),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async listSharedExamples(e,r){let n={};r!=null&&r.exampleIds&&(n.id=r.exampleIds);let i=new URLSearchParams;Object.entries(n).forEach(([o,l])=>{Array.isArray(l)?l.forEach(u=>i.append(o,u)):i.append(o,l)});let s=await this.caller.call(le(),`${this.apiUrl}/public/${e}/examples?${i.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),a=await s.json();if(!s.ok)throw"detail"in a?new Error(`Failed to list shared examples.
Status: ${s.status}
Message: ${a.detail.join(`
`)}`):new Error(`Failed to list shared examples: ${s.status} ${s.statusText}`);return a.map(o=>({...o,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:r=null,metadata:n=null,upsert:i=!1,projectExtra:s=null,referenceDatasetId:a=null}){let o=i?"?upsert=true":"",l=`${this.apiUrl}/sessions${o}`,u=s||{};n&&(u.metadata=n);let c={name:e,extra:u,description:r};a!==null&&(c.reference_dataset_id=a);let h=await this.caller.call(le(),l,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ae(h,"create project"),await h.json()}async updateProject(e,{name:r=null,description:n=null,metadata:i=null,projectExtra:s=null,endTime:a=null}){let o=`${this.apiUrl}/sessions/${e}`,l=s;i&&(l={...l||{},metadata:i});let u={name:r,extra:l,description:n,end_time:a?new Date(a).toISOString():null},c=await this.caller.call(le(),o,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ae(c,"update project"),await c.json()}async hasProject({projectId:e,projectName:r}){let n="/sessions",i=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Me(e),n+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide projectName or projectId");let s=await this.caller.call(le(),`${this.apiUrl}${n}?${i}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{let a=await s.json();return s.ok?Array.isArray(a)?a.length>0:!0:!1}catch(a){return!1}}async readProject({projectId:e,projectName:r,includeStats:n}){let i="/sessions",s=new URLSearchParams;if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");if(e!==void 0)Me(e),i+=`/${e}`;else if(r!==void 0)s.append("name",r);else throw new Error("Must provide projectName or projectId");n!==void 0&&s.append("include_stats",n.toString());let a=await this._get(i,s),o;if(Array.isArray(a)){if(a.length===0)throw new Error(`Project[id=${e}, name=${r}] not found`);o=a[0]}else o=a;return o}async getProjectUrl({projectId:e,projectName:r}){if(e===void 0&&r===void 0)throw new Error("Must provide either projectName or projectId");let n=await this.readProject({projectId:e,projectName:r}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/projects/p/${n.id}`}async getDatasetUrl({datasetId:e,datasetName:r}){if(e===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");let n=await this.readDataset({datasetId:e,datasetName:r}),i=await this._getTenantId();return`${this.getHostUrl()}/o/${i}/datasets/${n.id}`}async _getTenantId(){if(this._tenantId!==null)return this._tenantId;let e=new URLSearchParams({limit:"1"});for await(let r of this._getPaginated("/sessions",e))return this._tenantId=r[0].tenant_id,r[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:r,nameContains:n,referenceDatasetId:i,referenceDatasetName:s,referenceFree:a,metadata:o}={}){let l=new URLSearchParams;if(e!==void 0)for(let u of e)l.append("id",u);if(r!==void 0&&l.append("name",r),n!==void 0&&l.append("name_contains",n),i!==void 0)l.append("reference_dataset",i);else if(s!==void 0){let u=await this.readDataset({datasetName:s});l.append("reference_dataset",u.id)}a!==void 0&&l.append("reference_free",a.toString()),o!==void 0&&l.append("metadata",JSON.stringify(o));for await(let u of this._getPaginated("/sessions",l))yield*u}async deleteProject({projectId:e,projectName:r}){let n;if(e===void 0&&r===void 0)throw new Error("Must provide projectName or projectId");if(e!==void 0&&r!==void 0)throw new Error("Must provide either projectName or projectId, not both");e===void 0?n=(await this.readProject({projectName:r})).id:n=e,Me(n);let i=await this.caller.call(le(),`${this.apiUrl}/sessions/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ae(i,`delete session ${n} (${r})`,!0)}async uploadCsv({csvFile:e,fileName:r,inputKeys:n,outputKeys:i,description:s,dataType:a,name:o}){let l=`${this.apiUrl}/datasets/upload`,u=new FormData;u.append("file",e,r),n.forEach(p=>{u.append("input_keys",p)}),i.forEach(p=>{u.append("output_keys",p)}),s&&u.append("description",s),a&&u.append("data_type",a),o&&u.append("name",o);let c=await this.caller.call(le(),l,{method:"POST",headers:this.headers,body:u,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ae(c,"upload CSV"),await c.json()}async createDataset(e,{description:r,dataType:n,inputsSchema:i,outputsSchema:s,metadata:a}={}){let o={name:e,description:r,extra:a?{metadata:a}:void 0};n&&(o.data_type=n),i&&(o.inputs_schema_definition=i),s&&(o.outputs_schema_definition=s);let l=await this.caller.call(le(),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ae(l,"create dataset"),await l.json()}async readDataset({datasetId:e,datasetName:r}){let n="/datasets",i=new URLSearchParams({limit:"1"});if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)Me(e),n+=`/${e}`;else if(r!==void 0)i.append("name",r);else throw new Error("Must provide datasetName or datasetId");let s=await this._get(n,i),a;if(Array.isArray(s)){if(s.length===0)throw new Error(`Dataset[id=${e}, name=${r}] not found`);a=s[0]}else a=s;return a}async hasDataset({datasetId:e,datasetName:r}){try{return await this.readDataset({datasetId:e,datasetName:r}),!0}catch(n){if(n instanceof Error&&n.message.toLocaleLowerCase().includes("not found"))return!1;throw n}}async diffDatasetVersions({datasetId:e,datasetName:r,fromVersion:n,toVersion:i}){let s=e;if(s===void 0&&r===void 0)throw new Error("Must provide either datasetName or datasetId");if(s!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");s===void 0&&(s=(await this.readDataset({datasetName:r})).id);let a=new URLSearchParams({from_version:typeof n=="string"?n:n.toISOString(),to_version:typeof i=="string"?i:i.toISOString()});return await this._get(`/datasets/${s}/versions/diff`,a)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:r}){let n="/datasets";if(e===void 0)if(r!==void 0)e=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide datasetName or datasetId");return(await(await this._getResponse(`${n}/${e}/openai_ft`)).text()).trim().split(`
`).map(o=>JSON.parse(o))}async*listDatasets({limit:e=100,offset:r=0,datasetIds:n,datasetName:i,datasetNameContains:s,metadata:a}={}){let o="/datasets",l=new URLSearchParams({limit:e.toString(),offset:r.toString()});if(n!==void 0)for(let u of n)l.append("id",u);i!==void 0&&l.append("name",i),s!==void 0&&l.append("name_contains",s),a!==void 0&&l.append("metadata",JSON.stringify(a));for await(let u of this._getPaginated(o,l))yield*u}async updateDataset(e){let{datasetId:r,datasetName:n,...i}=e;if(!r&&!n)throw new Error("Must provide either datasetName or datasetId");let s=r!=null?r:(await this.readDataset({datasetName:n})).id;Me(s);let a=await this.caller.call(le(),`${this.apiUrl}/datasets/${s}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ae(a,"update dataset"),await a.json()}async deleteDataset({datasetId:e,datasetName:r}){let n="/datasets",i=e;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(r!==void 0&&(i=(await this.readDataset({datasetName:r})).id),i!==void 0)Me(i),n+=`/${i}`;else throw new Error("Must provide datasetName or datasetId");let s=await this.caller.call(le(),this.apiUrl+n,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ae(s,`delete ${n}`),await s.json()}async indexDataset({datasetId:e,datasetName:r,tag:n}){let i=e;if(!i&&!r)throw new Error("Must provide either datasetName or datasetId");if(i&&r)throw new Error("Must provide either datasetName or datasetId, not both");i||(i=(await this.readDataset({datasetName:r})).id),Me(i);let s={tag:n},a=await this.caller.call(le(),`${this.apiUrl}/datasets/${i}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ae(a,"index dataset"),await a.json()}async similarExamples(e,r,n,{filter:i}={}){let s={limit:n,inputs:e};i!==void 0&&(s.filter=i),Me(r);let a=await this.caller.call(le(),`${this.apiUrl}/datasets/${r}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ae(a,"fetch similar examples"),(await a.json()).examples}async createExample(e,r,{datasetId:n,datasetName:i,createdAt:s,exampleId:a,metadata:o,split:l,sourceRunId:u}){let c=n;if(c===void 0&&i===void 0)throw new Error("Must provide either datasetName or datasetId");if(c!==void 0&&i!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");c===void 0&&(c=(await this.readDataset({datasetName:i})).id);let h=s||new Date,p={dataset_id:c,inputs:e,outputs:r,created_at:h==null?void 0:h.toISOString(),id:a,metadata:o,split:l,source_run_id:u},_=await this.caller.call(le(),`${this.apiUrl}/examples`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(p),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ae(_,"create example"),await _.json()}async createExamples(e){let{inputs:r,outputs:n,metadata:i,sourceRunIds:s,exampleIds:a,datasetId:o,datasetName:l}=e,u=o;if(u===void 0&&l===void 0)throw new Error("Must provide either datasetName or datasetId");if(u!==void 0&&l!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");u===void 0&&(u=(await this.readDataset({datasetName:l})).id);let c=r.map((_,y)=>({dataset_id:u,inputs:_,outputs:n?n[y]:void 0,metadata:i?i[y]:void 0,split:e.splits?e.splits[y]:void 0,id:a?a[y]:void 0,source_run_id:s?s[y]:void 0})),h=await this.caller.call(le(),`${this.apiUrl}/examples/bulk`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ae(h,"create examples"),await h.json()}async createLLMExample(e,r,n){return this.createExample({input:e},{output:r},n)}async createChatExample(e,r,n){let i=e.map(a=>s0(a)?a0(a):a),s=s0(r)?a0(r):r;return this.createExample({input:i},{output:s},n)}async readExample(e){Me(e);let r=`/examples/${e}`;return await this._get(r)}async*listExamples({datasetId:e,datasetName:r,exampleIds:n,asOf:i,splits:s,inlineS3Urls:a,metadata:o,limit:l,offset:u,filter:c}={}){let h;if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");if(e!==void 0)h=e;else if(r!==void 0)h=(await this.readDataset({datasetName:r})).id;else throw new Error("Must provide a datasetName or datasetId");let p=new URLSearchParams({dataset:h}),_=i?typeof i=="string"?i:i==null?void 0:i.toISOString():void 0;_&&p.append("as_of",_);let y=a!=null?a:!0;if(p.append("inline_s3_urls",y.toString()),n!==void 0)for(let x of n)p.append("id",x);if(s!==void 0)for(let x of s)p.append("splits",x);if(o!==void 0){let x=JSON.stringify(o);p.append("metadata",x)}l!==void 0&&p.append("limit",l.toString()),u!==void 0&&p.append("offset",u.toString()),c!==void 0&&p.append("filter",c);let S=0;for await(let x of this._getPaginated("/examples",p)){for(let k of x)yield k,S++;if(l!==void 0&&S>=l)break}}async deleteExample(e){Me(e);let r=`/examples/${e}`,n=await this.caller.call(le(),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ae(n,`delete ${r}`),await n.json()}async updateExample(e,r){Me(e);let n=await this.caller.call(le(),`${this.apiUrl}/examples/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ae(n,"update example"),await n.json()}async updateExamples(e){let r=await this.caller.call(le(),`${this.apiUrl}/examples/bulk`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(e),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ae(r,"update examples"),await r.json()}async listDatasetSplits({datasetId:e,datasetName:r,asOf:n}){let i;if(e===void 0&&r===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?i=(await this.readDataset({datasetName:r})).id:i=e,Me(i);let s=new URLSearchParams,a=n?typeof n=="string"?n:n==null?void 0:n.toISOString():void 0;return a&&s.append("as_of",a),await this._get(`/datasets/${i}/splits`,s)}async updateDatasetSplits({datasetId:e,datasetName:r,splitName:n,exampleIds:i,remove:s=!1}){let a;if(e===void 0&&r===void 0)throw new Error("Must provide dataset name or ID");if(e!==void 0&&r!==void 0)throw new Error("Must provide either datasetName or datasetId, not both");e===void 0?a=(await this.readDataset({datasetName:r})).id:a=e,Me(a);let o={split_name:n,examples:i.map(u=>(Me(u),u)),remove:s},l=await this.caller.call(le(),`${this.apiUrl}/datasets/${a}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ae(l,"update dataset splits",!0)}async evaluateRun(e,r,{sourceInfo:n,loadChildRuns:i,referenceExample:s}={loadChildRuns:!1}){_m("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead.");let a;if(typeof e=="string")a=await this.readRun(e,{loadChildRuns:i});else if(typeof e=="object"&&"id"in e)a=e;else throw new Error(`Invalid run type: ${typeof e}`);a.reference_example_id!==null&&a.reference_example_id!==void 0&&(s=await this.readExample(a.reference_example_id));let o=await r.evaluateRun(a,s),[l,u]=await this._logEvaluationFeedback(o,a,n);return u[0]}async createFeedback(e,r,{score:n,value:i,correction:s,comment:a,sourceInfo:o,feedbackSourceType:l="api",sourceRunId:u,feedbackId:c,feedbackConfig:h,projectId:p,comparativeExperimentId:_}){var T;if(!e&&!p)throw new Error("One of runId or projectId must be provided");if(e&&p)throw new Error("Only one of runId or projectId can be provided");let y={type:l!=null?l:"api",metadata:o!=null?o:{}};u!==void 0&&(y==null?void 0:y.metadata)!==void 0&&!y.metadata.__run&&(y.metadata.__run={run_id:u}),(y==null?void 0:y.metadata)!==void 0&&((T=y.metadata.__run)==null?void 0:T.run_id)!==void 0&&Me(y.metadata.__run.run_id);let S={id:c!=null?c:Ot(),run_id:e,key:r,score:n,value:i,correction:s,comment:a,feedback_source:y,comparative_experiment_id:_,feedbackConfig:h,session_id:p},x=`${this.apiUrl}/feedback`,k=await this.caller.call(le(),x,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(S),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ae(k,"create feedback",!0),S}async updateFeedback(e,{score:r,value:n,correction:i,comment:s}){let a={};r!=null&&(a.score=r),n!=null&&(a.value=n),i!=null&&(a.correction=i),s!=null&&(a.comment=s),Me(e);let o=await this.caller.call(le(),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ae(o,"update feedback",!0)}async readFeedback(e){Me(e);let r=`/feedback/${e}`;return await this._get(r)}async deleteFeedback(e){Me(e);let r=`/feedback/${e}`,n=await this.caller.call(le(),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ae(n,`delete ${r}`),await n.json()}async*listFeedback({runIds:e,feedbackKeys:r,feedbackSourceTypes:n}={}){let i=new URLSearchParams;if(e&&i.append("run",e.join(",")),r)for(let s of r)i.append("key",s);if(n)for(let s of n)i.append("source",s);for await(let s of this._getPaginated("/feedback",i))yield*s}async createPresignedFeedbackToken(e,r,{expiration:n,feedbackConfig:i}={}){let s={run_id:e,feedback_key:r,feedback_config:i};return n?typeof n=="string"?s.expires_at=n:(n!=null&&n.hours||n!=null&&n.minutes||n!=null&&n.days)&&(s.expires_in=n):s.expires_in={hours:3},await(await this.caller.call(le(),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async createComparativeExperiment({name:e,experimentIds:r,referenceDatasetId:n,createdAt:i,description:s,metadata:a,id:o}){var c;if(r.length===0)throw new Error("At least one experiment is required");if(n||(n=(await this.readProject({projectId:r[0]})).reference_dataset_id),!n==null)throw new Error("A reference dataset is required");let l={id:o,name:e,experiment_ids:r,reference_dataset_id:n,description:s,created_at:(c=i!=null?i:new Date)==null?void 0:c.toISOString(),extra:{}};return a&&(l.extra.metadata=a),await(await this.caller.call(le(),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async*listPresignedFeedbackTokens(e){Me(e);let r=new URLSearchParams({run_id:e});for await(let n of this._getPaginated("/feedback/tokens",r))yield*n}_selectEvalResults(e){let r;return"results"in e?r=e.results:r=[e],r}async _logEvaluationFeedback(e,r,n){let i=this._selectEvalResults(e),s=[];for(let a of i){let o=n||{};a.evaluatorInfo&&(o={...a.evaluatorInfo,...o});let l=null;a.targetRunId?l=a.targetRunId:r&&(l=r.id),s.push(await this.createFeedback(l,a.key,{score:a.score,value:a.value,comment:a.comment,correction:a.correction,sourceInfo:o,sourceRunId:a.sourceRunId,feedbackConfig:a.feedbackConfig,feedbackSourceType:"model"}))}return[i,s]}async logEvaluationFeedback(e,r,n){let[i]=await this._logEvaluationFeedback(e,r,n);return i}async _currentTenantIsOwner(e){let r=await this._getSettings();return e=="-"||r.tenant_handle===e}async _ownerConflictError(e,r){let n=await this._getSettings();return new Error(`Cannot ${e} for another tenant.

      Current tenant: ${n.tenant_handle}

      Requested tenant: ${r}`)}async _getLatestCommitHash(e){let r=await this.caller.call(le(),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),n=await r.json();if(!r.ok){let i=typeof n.detail=="string"?n.detail:JSON.stringify(n.detail),s=new Error(`Error ${r.status}: ${r.statusText}
${i}`);throw s.statusCode=r.status,s}if(n.commits.length!==0)return n.commits[0].commit_hash}async _likeOrUnlikePrompt(e,r){let[n,i,s]=As(e),a=await this.caller.call(le(),`${this.apiUrl}/likes/${n}/${i}`,{method:"POST",body:JSON.stringify({like:r}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ae(a,`${r?"like":"unlike"} prompt`),await a.json()}async _getPromptUrl(e){let[r,n,i]=As(e);if(await this._currentTenantIsOwner(r)){let s=await this._getSettings();return i!=="latest"?`${this.getHostUrl()}/prompts/${n}/${i.substring(0,8)}?organizationId=${s.id}`:`${this.getHostUrl()}/prompts/${n}?organizationId=${s.id}`}else return i!=="latest"?`${this.getHostUrl()}/hub/${r}/${n}/${i.substring(0,8)}`:`${this.getHostUrl()}/hub/${r}/${n}`}async promptExists(e){return!!await this.getPrompt(e)}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(let r of this._getPaginated(`/commits/${e}/`,{},n=>n.commits))yield*r}async*listPrompts(e){var n;let r=new URLSearchParams;r.append("sort_field",(n=e==null?void 0:e.sortField)!=null?n:"updated_at"),r.append("sort_direction","desc"),r.append("is_archived",(!!(e!=null&&e.isArchived)).toString()),(e==null?void 0:e.isPublic)!==void 0&&r.append("is_public",e.isPublic.toString()),e!=null&&e.query&&r.append("query",e.query);for await(let i of this._getPaginated("/repos",r,s=>s.repos))yield*i}async getPrompt(e){let[r,n,i]=As(e),s=await this.caller.call(le(),`${this.apiUrl}/repos/${r}/${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(s.status===404)return null;await Ae(s,"get prompt");let a=await s.json();return a.repo?a.repo:null}async createPrompt(e,r){let n=await this._getSettings();if(r!=null&&r.isPublic&&!n.tenant_handle)throw new Error(`Cannot create a public prompt without first

        creating a LangChain Hub handle. 
        You can add a handle by creating a public prompt at:

        https://smith.langchain.com/prompts`);let[i,s,a]=As(e);if(!await this._currentTenantIsOwner(i))throw await this._ownerConflictError("create a prompt",i);let o={repo_handle:s,...(r==null?void 0:r.description)&&{description:r.description},...(r==null?void 0:r.readme)&&{readme:r.readme},...(r==null?void 0:r.tags)&&{tags:r.tags},is_public:!!(r!=null&&r.isPublic)},l=await this.caller.call(le(),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ae(l,"create prompt");let{repo:u}=await l.json();return u}async createCommit(e,r,n){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[i,s,a]=As(e),o=(n==null?void 0:n.parentCommitHash)==="latest"||!(n!=null&&n.parentCommitHash)?await this._getLatestCommitHash(`${i}/${s}`):n==null?void 0:n.parentCommitHash,l={manifest:JSON.parse(JSON.stringify(r)),parent_commit:o},u=await this.caller.call(le(),`${this.apiUrl}/commits/${i}/${s}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(l),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ae(u,"create commit");let c=await u.json();return this._getPromptUrl(`${i}/${s}${c.commit_hash?`:${c.commit_hash}`:""}`)}async updatePrompt(e,r){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[n,i]=As(e);if(!await this._currentTenantIsOwner(n))throw await this._ownerConflictError("update a prompt",n);let s={};if((r==null?void 0:r.description)!==void 0&&(s.description=r.description),(r==null?void 0:r.readme)!==void 0&&(s.readme=r.readme),(r==null?void 0:r.tags)!==void 0&&(s.tags=r.tags),(r==null?void 0:r.isPublic)!==void 0&&(s.is_public=r.isPublic),(r==null?void 0:r.isArchived)!==void 0&&(s.is_archived=r.isArchived),Object.keys(s).length===0)throw new Error("No valid update options provided");let a=await this.caller.call(le(),`${this.apiUrl}/repos/${n}/${i}`,{method:"PATCH",body:JSON.stringify(s),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await Ae(a,"update prompt"),a.json()}async deletePrompt(e){if(!await this.promptExists(e))throw new Error("Prompt does not exist, you must create it first.");let[r,n,i]=As(e);if(!await this._currentTenantIsOwner(r))throw await this._ownerConflictError("delete a prompt",r);return await(await this.caller.call(le(),`${this.apiUrl}/repos/${r}/${n}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions})).json()}async pullPromptCommit(e,r){let[n,i,s]=As(e),a=await this._getServerInfo(),o=fC(a.version,"0.5.23"),l=s;if(!o&&s==="latest"){let h=await this._getLatestCommitHash(`${n}/${i}`);if(h)l=h;else throw new Error("No commits found")}let u=await this.caller.call(le(),`${this.apiUrl}/commits/${n}/${i}/${l}${r!=null&&r.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await Ae(u,"pull prompt commit");let c=await u.json();return{owner:n,repo:i,commit_hash:c.commit_hash,manifest:c.manifest,examples:c.examples}}async _pullPrompt(e,r){let n=await this.pullPromptCommit(e,{includeModel:r==null?void 0:r.includeModel});return JSON.stringify(n.manifest)}async pushPrompt(e,r){return await this.promptExists(e)?r&&Object.keys(r).some(i=>i!=="object")&&await this.updatePrompt(e,{description:r==null?void 0:r.description,readme:r==null?void 0:r.readme,tags:r==null?void 0:r.tags,isPublic:r==null?void 0:r.isPublic}):await this.createPrompt(e,{description:r==null?void 0:r.description,readme:r==null?void 0:r.readme,tags:r==null?void 0:r.tags,isPublic:r==null?void 0:r.isPublic}),r!=null&&r.object?await this.createCommit(e,r==null?void 0:r.object,{parentCommitHash:r==null?void 0:r.parentCommitHash}):await this._getPromptUrl(e)}async clonePublicDataset(e,r={}){var p,_;let{sourceApiUrl:n=this.apiUrl,datasetName:i}=r,[s,a]=this.parseTokenOrUrl(e,n),o=new t({apiUrl:s,apiKey:"placeholder"}),l=await o.readSharedDataset(a),u=i||l.name;try{if(await this.hasDataset({datasetId:u})){console.log(`Dataset ${u} already exists in your tenant. Skipping.`);return}}catch(y){}let c=await o.listSharedExamples(a),h=await this.createDataset(u,{description:l.description,dataType:l.data_type||"kv",inputsSchema:(p=l.inputs_schema_definition)!=null?p:void 0,outputsSchema:(_=l.outputs_schema_definition)!=null?_:void 0});try{await this.createExamples({inputs:c.map(y=>y.inputs),outputs:c.flatMap(y=>y.outputs?[y.outputs]:[]),datasetId:h.id})}catch(y){throw console.error(`An error occurred while creating dataset ${u}. You should delete it manually.`),y}}parseTokenOrUrl(e,r,n=2,i="dataset"){try{return Me(e),[r,e]}catch(s){}try{let a=new URL(e).pathname.split("/").filter(o=>o!=="");if(a.length>=n){let o=a[a.length-n];return[r,o]}else throw new Error(`Invalid public ${i} URL: ${e}`)}catch(s){throw new Error(`Invalid public ${i} URL or token: ${e}`)}}};var mC=t=>t!==void 0?t:!!["TRACING_V2","TRACING"].find(r=>Ts(r)==="true");function fj(t){return t.replace(/[-:.]/g,"")}function hj(t,e,r=1){let n=r.toFixed(0).slice(0,3).padStart(3,"0");return fj(`${new Date(t).toISOString().slice(0,-1)}${n}Z`)+e}var Om=class t{constructor(e,r){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=r}static fromHeader(e){let r=e.split(","),n={},i=[];for(let s of r){let[a,o]=s.split("="),l=decodeURIComponent(o);a==="langsmith-metadata"?n=JSON.parse(l):a==="langsmith-tags"&&(i=l.split(","))}return new t(n,i)}toHeader(){let e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),e.join(",")}},Wo=class t{constructor(e){var o,l,u,c,h;Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let r=t.getDefaultConfig(),{metadata:n,...i}=e,s=(o=i.client)!=null?o:new Uo,a={...n,...(l=i==null?void 0:i.extra)==null?void 0:l.metadata};if(i.extra={...i.extra,metadata:a},Object.assign(this,{...r,...i,client:s}),this.trace_id||(this.parent_run?this.trace_id=(u=this.parent_run.trace_id)!=null?u:this.id:this.trace_id=this.id),(c=this.execution_order)!=null||(this.execution_order=1),(h=this.child_execution_order)!=null||(this.child_execution_order=1),!this.dotted_order){let p=hj(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+p:this.dotted_order=p}}static getDefaultConfig(){var e,r,n;return{id:Ot(),run_type:"chain",project_name:(r=(e=ka("LANGCHAIN_PROJECT"))!=null?e:ka("LANGCHAIN_SESSION"))!=null?r:"default",child_runs:[],api_url:(n=ka("LANGCHAIN_ENDPOINT"))!=null?n:"http://localhost:1984",api_key:ka("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}createChild(e){var l,u,c,h,p,_,y;let r=this.child_execution_order+1,n=new t({...e,parent_run:this,project_name:this.project_name,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:r,child_execution_order:r}),i=Symbol.for("lc:child_config"),s=(u=(l=e.extra)==null?void 0:l[i])!=null?u:this.extra[i];if(mj(s)){let S={...s},x=pj(S.callbacks)?(h=(c=S.callbacks).copy)==null?void 0:h.call(c):void 0;x&&(Object.assign(x,{_parentRunId:n.id}),(y=(_=(p=x.handlers)==null?void 0:p.find(_C))==null?void 0:_.updateFromRunTree)==null||y.call(_,n),S.callbacks=x),n.extra[i]=S}let a=new Set,o=this;for(;o!=null&&!a.has(o.id);)a.add(o.id),o.child_execution_order=Math.max(o.child_execution_order,r),o=o.parent_run;return this.child_runs.push(n),n}async end(e,r,n=Date.now()){var i,s,a;this.outputs=(i=this.outputs)!=null?i:e,this.error=(s=this.error)!=null?s:r,this.end_time=(a=this.end_time)!=null?a:n}_convertToCreate(e,r,n=!0){var l,u;let i=(l=e.extra)!=null?l:{};if(i.runtime||(i.runtime={}),r)for(let[c,h]of Object.entries(r))i.runtime[c]||(i.runtime[c]=h);let s,a;return n?(a=(u=e.parent_run)==null?void 0:u.id,s=[]):(s=e.child_runs.map(c=>this._convertToCreate(c,r,n)),a=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:i,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:s,parent_run_id:a,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags}}async postRun(e=!0){let r=await mm(),n=await this._convertToCreate(this,r,!0);if(await this.client.createRun(n),!e){_m("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(let i of this.child_runs)await i.postRun(!1)}}async patchRun(){var r;let e={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:(r=this.parent_run)==null?void 0:r.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags};await this.client.updateRun(this.id,e)}toJSON(){return this._convertToCreate(this,void 0,!1)}static fromRunnableConfig(e,r){var u,c,h,p,_,y,S;let n=e==null?void 0:e.callbacks,i,s,a,o=mC();if(n){let x=(c=(u=n==null?void 0:n.getParentRunId)==null?void 0:u.call(n))!=null?c:"",k=(h=n==null?void 0:n.handlers)==null?void 0:h.find(T=>(T==null?void 0:T.name)=="langchain_tracer");i=(p=k==null?void 0:k.getRun)==null?void 0:p.call(k,x),s=k==null?void 0:k.projectName,a=k==null?void 0:k.client,o=o||!!k}return i?new t({name:i.name,id:i.id,trace_id:i.trace_id,dotted_order:i.dotted_order,client:a,tracingEnabled:o,project_name:s,tags:[...new Set(((_=i==null?void 0:i.tags)!=null?_:[]).concat((y=e==null?void 0:e.tags)!=null?y:[]))],extra:{metadata:{...(S=i==null?void 0:i.extra)==null?void 0:S.metadata,...e==null?void 0:e.metadata}}}).createChild(r):new t({...r,client:a,tracingEnabled:o,project_name:s})}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,r){var u,c,h,p;let n="get"in e&&typeof e.get=="function"?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,i=n["langsmith-trace"];if(!i||typeof i!="string")return;let s=i.trim(),a=s.split(".").map(_=>{let[y,S]=_.split("Z");return{strTime:y,time:Date.parse(y+"Z"),uuid:S}}),o=a[0].uuid,l={...r,name:(u=r==null?void 0:r.name)!=null?u:"parent",run_type:(c=r==null?void 0:r.run_type)!=null?c:"chain",start_time:(h=r==null?void 0:r.start_time)!=null?h:Date.now(),id:(p=a.at(-1))==null?void 0:p.uuid,trace_id:o,dotted_order:s};if(n.baggage&&typeof n.baggage=="string"){let _=Om.fromHeader(n.baggage);l.metadata=_.metadata,l.tags=_.tags}return new t(l)}toHeaders(e){var n;let r={"langsmith-trace":this.dotted_order,baggage:new Om((n=this.extra)==null?void 0:n.metadata,this.tags).toHeader()};if(e)for(let[i,s]of Object.entries(r))e.set(i,s);return r}};function _C(t){return typeof t=="object"&&t!=null&&typeof t.name=="string"&&t.name==="langchain_tracer"}function gC(t){return Array.isArray(t)&&t.some(e=>_C(e))}function pj(t){return typeof t=="object"&&t!=null&&Array.isArray(t.handlers)}function mj(t){var e;return t!==void 0&&typeof t.callbacks=="object"&&(gC((e=t.callbacks)==null?void 0:e.handlers)||gC(t.callbacks))}var gm="0.1.56-rc.1";var M0=He(vC(),1);function fr(t,e){return`${t.open}${e}${t.close}`}function En(t,e){try{return JSON.stringify(t,null,2)}catch(r){return e}}function xC(t){return typeof t=="string"?t.trim():t==null?t:En(t,t.toString())}function Ea(t){if(!t.end_time)return"";let e=t.end_time-t.start_time;return e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`}var{color:Mr}=M0.default,Vd=class extends xn{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){let r=[],n=e;for(;n.parent_run_id;){let i=this.runMap.get(n.parent_run_id);if(i)r.push(i),n=i;else break}return r}getBreadcrumbs(e){let n=[...this.getParents(e).reverse(),e].map((i,s,a)=>{let o=`${i.execution_order}:${i.run_type}:${i.name}`;return s===a.length-1?fr(M0.default.bold,o):o}).join(" > ");return fr(Mr.grey,n)}onChainStart(e){let r=this.getBreadcrumbs(e);console.log(`${fr(Mr.green,"[chain/start]")} [${r}] Entering Chain run with input: ${En(e.inputs,"[inputs]")}`)}onChainEnd(e){let r=this.getBreadcrumbs(e);console.log(`${fr(Mr.cyan,"[chain/end]")} [${r}] [${Ea(e)}] Exiting Chain run with output: ${En(e.outputs,"[outputs]")}`)}onChainError(e){let r=this.getBreadcrumbs(e);console.log(`${fr(Mr.red,"[chain/error]")} [${r}] [${Ea(e)}] Chain run errored with error: ${En(e.error,"[error]")}`)}onLLMStart(e){let r=this.getBreadcrumbs(e),n="prompts"in e.inputs?{prompts:e.inputs.prompts.map(i=>i.trim())}:e.inputs;console.log(`${fr(Mr.green,"[llm/start]")} [${r}] Entering LLM run with input: ${En(n,"[inputs]")}`)}onLLMEnd(e){let r=this.getBreadcrumbs(e);console.log(`${fr(Mr.cyan,"[llm/end]")} [${r}] [${Ea(e)}] Exiting LLM run with output: ${En(e.outputs,"[response]")}`)}onLLMError(e){let r=this.getBreadcrumbs(e);console.log(`${fr(Mr.red,"[llm/error]")} [${r}] [${Ea(e)}] LLM run errored with error: ${En(e.error,"[error]")}`)}onToolStart(e){let r=this.getBreadcrumbs(e);console.log(`${fr(Mr.green,"[tool/start]")} [${r}] Entering Tool run with input: "${xC(e.inputs.input)}"`)}onToolEnd(e){var n;let r=this.getBreadcrumbs(e);console.log(`${fr(Mr.cyan,"[tool/end]")} [${r}] [${Ea(e)}] Exiting Tool run with output: "${xC((n=e.outputs)==null?void 0:n.output)}"`)}onToolError(e){let r=this.getBreadcrumbs(e);console.log(`${fr(Mr.red,"[tool/error]")} [${r}] [${Ea(e)}] Tool run errored with error: ${En(e.error,"[error]")}`)}onRetrieverStart(e){let r=this.getBreadcrumbs(e);console.log(`${fr(Mr.green,"[retriever/start]")} [${r}] Entering Retriever run with input: ${En(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){let r=this.getBreadcrumbs(e);console.log(`${fr(Mr.cyan,"[retriever/end]")} [${r}] [${Ea(e)}] Exiting Retriever run with output: ${En(e.outputs,"[outputs]")}`)}onRetrieverError(e){let r=this.getBreadcrumbs(e);console.log(`${fr(Mr.red,"[retriever/error]")} [${r}] [${Ea(e)}] Retriever run errored with error: ${En(e.error,"[error]")}`)}onAgentAction(e){let r=e,n=this.getBreadcrumbs(e);console.log(`${fr(Mr.blue,"[agent/action]")} [${n}] Agent selected action: ${En(r.actions[r.actions.length-1],"[action]")}`)}};var Nu=class t extends xn{constructor(e={}){var a;super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0});let{exampleId:r,projectName:n,client:i}=e;this.projectName=(a=n!=null?n:vn("LANGCHAIN_PROJECT"))!=null?a:vn("LANGCHAIN_SESSION"),this.exampleId=r,this.client=i!=null?i:new Uo({});let s=t.getTraceableRunTree();s&&this.updateFromRunTree(s)}async _convertToCreate(e,r=void 0){return{...e,extra:{...e.extra,runtime:await lE()},child_runs:void 0,session_name:this.projectName,reference_example_id:e.parent_run_id?void 0:r}}async persistRun(e){}async onRunCreate(e){let r=await this._convertToCreate(e,this.exampleId);await this.client.createRun(r)}async onRunUpdate(e){let r={end_time:e.end_time,error:e.error,outputs:e.outputs,events:e.events,inputs:e.inputs,trace_id:e.trace_id,dotted_order:e.dotted_order,parent_run_id:e.parent_run_id};await this.client.updateRun(e.id,r)}getRun(e){return this.runMap.get(e)}updateFromRunTree(e){var s,a,o;let r=e,n=new Set;for(;r.parent_run&&!(n.has(r.id)||(n.add(r.id),!r.parent_run));)r=r.parent_run;n.clear();let i=[r];for(;i.length>0;){let l=i.shift();!l||n.has(l.id)||(n.add(l.id),this.runMap.set(l.id,l),l.child_runs&&i.push(...l.child_runs))}this.client=(s=e.client)!=null?s:this.client,this.projectName=(a=e.project_name)!=null?a:this.projectName,this.exampleId=(o=e.reference_example_id)!=null?o:this.exampleId}convertToRunTree(e){let r={},n=[];for(let[i,s]of this.runMap){let a=new Wo({...s,child_runs:[],parent_run:void 0,client:this.client,project_name:this.projectName,reference_example_id:this.exampleId,tracingEnabled:!0});r[i]=a,n.push([i,s.dotted_order])}n.sort((i,s)=>!i[1]||!s[1]?0:i[1].localeCompare(s[1]));for(let[i]of n){let s=this.runMap.get(i),a=r[i];if(!(!s||!a)&&s.parent_run_id){let o=r[s.parent_run_id];o&&(o.child_runs.push(a),a.parent_run=o)}}return r[e]}static getTraceableRunTree(){try{return rE()}catch(e){return}}};var Rm=He(hm(),1),I0;function _j(){let t="default"in Rm.default?Rm.default.default:Rm.default;return new t({autoStart:!0,concurrency:1})}async function _t(t,e){e===!0?await t():(typeof I0=="undefined"&&(I0=_j()),I0.add(t))}var SC=t=>t!==void 0?t:!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(r=>vn(r)==="true");var L0=class{setHandler(e){return this.setHandlers([e])}},ju=class{constructor(e,r,n,i,s,a,o,l){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:l})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(r=>_t(async()=>{var n;try{await((n=r.handleText)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleText: ${i}`),r.raiseError)throw i}},r.awaitHandlers)))}async handleCustomEvent(e,r,n,i,s){await Promise.all(this.handlers.map(a=>_t(async()=>{var o;try{await((o=a.handleCustomEvent)==null?void 0:o.call(a,e,r,this.runId,this.tags,this.metadata))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleCustomEvent: ${l}`),a.raiseError)throw l}},a.awaitHandlers)))}},F0=class extends ju{getChild(e){let r=new Ir(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(r=>_t(async()=>{var n;if(!r.ignoreRetriever)try{await((n=r.handleRetrieverEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleRetriever`),r.raiseError)throw i}},r.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(r=>_t(async()=>{var n;if(!r.ignoreRetriever)try{await((n=r.handleRetrieverError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleRetrieverError: ${i}`),r.raiseError)throw e}},r.awaitHandlers)))}},Dm=class extends ju{async handleLLMNewToken(e,r,n,i,s,a){await Promise.all(this.handlers.map(o=>_t(async()=>{var l;if(!o.ignoreLLM)try{await((l=o.handleLLMNewToken)==null?void 0:l.call(o,e,r!=null?r:{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,a))}catch(u){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleLLMNewToken: ${u}`),o.raiseError)throw u}},o.awaitHandlers)))}async handleLLMError(e){await Promise.all(this.handlers.map(r=>_t(async()=>{var n;if(!r.ignoreLLM)try{await((n=r.handleLLMError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMError: ${i}`),r.raiseError)throw i}},r.awaitHandlers)))}async handleLLMEnd(e){await Promise.all(this.handlers.map(r=>_t(async()=>{var n;if(!r.ignoreLLM)try{await((n=r.handleLLMEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMEnd: ${i}`),r.raiseError)throw i}},r.awaitHandlers)))}},N0=class extends ju{getChild(e){let r=new Ir(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleChainError(e,r,n,i,s){await Promise.all(this.handlers.map(a=>_t(async()=>{var o;if(!a.ignoreChain)try{await((o=a.handleChainError)==null?void 0:o.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainError: ${l}`),a.raiseError)throw l}},a.awaitHandlers)))}async handleChainEnd(e,r,n,i,s){await Promise.all(this.handlers.map(a=>_t(async()=>{var o;if(!a.ignoreChain)try{await((o=a.handleChainEnd)==null?void 0:o.call(a,e,this.runId,this._parentRunId,this.tags,s))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleChainEnd: ${l}`),a.raiseError)throw l}},a.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(r=>_t(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleAgentAction)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleAgentAction: ${i}`),r.raiseError)throw i}},r.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(r=>_t(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleAgentEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleAgentEnd: ${i}`),r.raiseError)throw i}},r.awaitHandlers)))}},j0=class extends ju{getChild(e){let r=new Ir(this.runId);return r.setHandlers(this.inheritableHandlers),r.addTags(this.inheritableTags),r.addMetadata(this.inheritableMetadata),e&&r.addTags([e],!1),r}async handleToolError(e){await Promise.all(this.handlers.map(r=>_t(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleToolError)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleToolError: ${i}`),r.raiseError)throw i}},r.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(r=>_t(async()=>{var n;if(!r.ignoreAgent)try{await((n=r.handleToolEnd)==null?void 0:n.call(r,e,this.runId,this._parentRunId,this.tags))}catch(i){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleToolEnd: ${i}`),r.raiseError)throw i}},r.awaitHandlers)))}},Ir=class t extends L0{constructor(e,r){var n,i,s,a,o,l;super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=(n=r==null?void 0:r.handlers)!=null?n:this.handlers,this.inheritableHandlers=(i=r==null?void 0:r.inheritableHandlers)!=null?i:this.inheritableHandlers,this.tags=(s=r==null?void 0:r.tags)!=null?s:this.tags,this.inheritableTags=(a=r==null?void 0:r.inheritableTags)!=null?a:this.inheritableTags,this.metadata=(o=r==null?void 0:r.metadata)!=null?o:this.metadata,this.inheritableMetadata=(l=r==null?void 0:r.inheritableMetadata)!=null?l:this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,r,n=void 0,i=void 0,s=void 0,a=void 0,o=void 0,l=void 0){return Promise.all(r.map(async(u,c)=>{let h=c===0&&n?n:Ot();return await Promise.all(this.handlers.map(p=>{if(!p.ignoreLLM)return Du(p)&&p._createRunForLLMStart(e,[u],h,this._parentRunId,s,this.tags,this.metadata,l),_t(async()=>{var _;try{await((_=p.handleLLMStart)==null?void 0:_.call(p,e,[u],h,this._parentRunId,s,this.tags,this.metadata,l))}catch(y){if((p.raiseError?console.error:console.warn)(`Error in handler ${p.constructor.name}, handleLLMStart: ${y}`),p.raiseError)throw y}},p.awaitHandlers)})),new Dm(h,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,r,n=void 0,i=void 0,s=void 0,a=void 0,o=void 0,l=void 0){return Promise.all(r.map(async(u,c)=>{let h=c===0&&n?n:Ot();return await Promise.all(this.handlers.map(p=>{if(!p.ignoreLLM)return Du(p)&&p._createRunForChatModelStart(e,[u],h,this._parentRunId,s,this.tags,this.metadata,l),_t(async()=>{var _,y;try{if(p.handleChatModelStart)await((_=p.handleChatModelStart)==null?void 0:_.call(p,e,[u],h,this._parentRunId,s,this.tags,this.metadata,l));else if(p.handleLLMStart){let S=Ip(u);await((y=p.handleLLMStart)==null?void 0:y.call(p,e,[S],h,this._parentRunId,s,this.tags,this.metadata,l))}}catch(S){if((p.raiseError?console.error:console.warn)(`Error in handler ${p.constructor.name}, handleLLMStart: ${S}`),p.raiseError)throw S}},p.awaitHandlers)})),new Dm(h,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,r,n=Ot(),i=void 0,s=void 0,a=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>{if(!l.ignoreChain)return Du(l)&&l._createRunForChainStart(e,r,n,this._parentRunId,this.tags,this.metadata,i,o),_t(async()=>{var u;try{await((u=l.handleChainStart)==null?void 0:u.call(l,e,r,n,this._parentRunId,this.tags,this.metadata,i,o))}catch(c){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleChainStart: ${c}`),l.raiseError)throw c}},l.awaitHandlers)})),new N0(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,r,n=Ot(),i=void 0,s=void 0,a=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>{if(!l.ignoreAgent)return Du(l)&&l._createRunForToolStart(e,r,n,this._parentRunId,this.tags,this.metadata,o),_t(async()=>{var u;try{await((u=l.handleToolStart)==null?void 0:u.call(l,e,r,n,this._parentRunId,this.tags,this.metadata,o))}catch(c){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleToolStart: ${c}`),l.raiseError)throw c}},l.awaitHandlers)})),new j0(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,r,n=Ot(),i=void 0,s=void 0,a=void 0,o=void 0){return await Promise.all(this.handlers.map(l=>{if(!l.ignoreRetriever)return Du(l)&&l._createRunForRetrieverStart(e,r,n,this._parentRunId,this.tags,this.metadata,o),_t(async()=>{var u;try{await((u=l.handleRetrieverStart)==null?void 0:u.call(l,e,r,n,this._parentRunId,this.tags,this.metadata,o))}catch(c){if((l.raiseError?console.error:console.warn)(`Error in handler ${l.constructor.name}, handleRetrieverStart: ${c}`),l.raiseError)throw c}},l.awaitHandlers)})),new F0(n,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,r,n,i,s){await Promise.all(this.handlers.map(a=>_t(async()=>{var o;if(!a.ignoreCustomEvent)try{await((o=a.handleCustomEvent)==null?void 0:o.call(a,e,r,n,this.tags,this.metadata))}catch(l){if((a.raiseError?console.error:console.warn)(`Error in handler ${a.constructor.name}, handleCustomEvent: ${l}`),a.raiseError)throw l}},a.awaitHandlers)))}addHandler(e,r=!0){this.handlers.push(e),r&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(r=>r!==e),this.inheritableHandlers=this.inheritableHandlers.filter(r=>r!==e)}setHandlers(e,r=!0){this.handlers=[],this.inheritableHandlers=[];for(let n of e)this.addHandler(n,r)}addTags(e,r=!0){this.removeTags(e),this.tags.push(...e),r&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(r=>!e.includes(r)),this.inheritableTags=this.inheritableTags.filter(r=>!e.includes(r))}addMetadata(e,r=!0){this.metadata={...this.metadata,...e},r&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(let r of Object.keys(e))delete this.metadata[r],delete this.inheritableMetadata[r]}copy(e=[],r=!0){let n=new t(this._parentRunId);for(let i of this.handlers){let s=this.inheritableHandlers.includes(i);n.addHandler(i,s)}for(let i of this.tags){let s=this.inheritableTags.includes(i);n.addTags([i],s)}for(let i of Object.keys(this.metadata)){let s=Object.keys(this.inheritableMetadata).includes(i);n.addMetadata({[i]:this.metadata[i]},s)}for(let i of e)n.handlers.filter(s=>s.name==="console_callback_handler").some(s=>s.name===i.name)||n.addHandler(i,r);return n}static fromHandlers(e){class r extends $o{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:Ot()}),Object.assign(this,e)}}let n=new this;return n.addHandler(new r),n}static configure(e,r,n,i,s,a,o){return this._configureSync(e,r,n,i,s,a,o)}static _configureSync(e,r,n,i,s,a,o){var p,_,y,S,x;let l;(e||r)&&(Array.isArray(e)||!e?(l=new t,l.setHandlers((p=e==null?void 0:e.map(Yd))!=null?p:[],!0)):l=e,l=l.copy(Array.isArray(r)?r.map(Yd):r==null?void 0:r.handlers,!1));let u=vn("LANGCHAIN_VERBOSE")==="true"||(o==null?void 0:o.verbose),c=((_=Nu.getTraceableRunTree())==null?void 0:_.tracingEnabled)||SC(),h=c||((y=vn("LANGCHAIN_TRACING"))!=null?y:!1);if(u||h){if(l||(l=new t),u&&!l.handlers.some(k=>k.name===Vd.prototype.name)){let k=new Vd;l.addHandler(k,!0)}if(h&&!l.handlers.some(k=>k.name==="langchain_tracer")&&c){let k=new Nu;l.addHandler(k,!0),l._parentRunId=(x=(S=Nu.getTraceableRunTree())==null?void 0:S.id)!=null?x:l._parentRunId}}return(n||i)&&l&&(l.addTags(n!=null?n:[]),l.addTags(i!=null?i:[],!1)),(s||a)&&l&&(l.addMetadata(s!=null?s:{}),l.addMetadata(a!=null?a:{},!1)),l}};function Yd(t){return"name"in t?t:$o.fromMethods(t)}var $0=class{getStore(){}run(e,r){return r()}},bj=new $0,B0=Symbol.for("ls:tracing_async_local_storage"),kC=Symbol.for("lc:child_config"),z0=class{getInstance(){var e;return(e=globalThis[B0])!=null?e:bj}getRunnableConfig(){var r,n;return(n=(r=this.getInstance().getStore())==null?void 0:r.extra)==null?void 0:n[kC]}runWithConfig(e,r,n){var u;let i=Ir._configureSync(e==null?void 0:e.callbacks,void 0,e==null?void 0:e.tags,void 0,e==null?void 0:e.metadata),s=this.getInstance(),a=i==null?void 0:i.getParentRunId(),o=(u=i==null?void 0:i.handlers)==null?void 0:u.find(c=>(c==null?void 0:c.name)==="langchain_tracer"),l;return o&&a?l=o.convertToRunTree(a):n||(l=new Wo({name:"<runnable_lambda>",tracingEnabled:!1})),l&&(l.extra={...l.extra,[kC]:e}),s.run(l,r)}initializeGlobalInstance(e){globalThis[B0]===void 0&&(globalThis[B0]=e)}},ei=new z0;async function Pi(t,e){if(e===void 0)return t;let r;return Promise.race([t.catch(n=>{if(!(e!=null&&e.aborted))throw n}),new Promise((n,i)=>{r=()=>{i(new Error("Aborted"))},e.addEventListener("abort",r),e.aborted&&i(new Error("Aborted"))})]).finally(()=>e.removeEventListener("abort",r))}var Rt=class t extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{let e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){let e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){let r=this.reader.cancel();this.reader.releaseLock(),await r}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){let r=e.getReader();return new t({start(n){return i();function i(){return r.read().then(({done:s,value:a})=>{if(s){n.close();return}return n.enqueue(a),i()})}},cancel(){r.releaseLock()}})}static fromAsyncGenerator(e){return new t({async pull(r){let{value:n,done:i}=await e.next();i&&r.close(),r.enqueue(n)},async cancel(r){await e.return(r)}})}};function U0(t,e=2){let r=Array.from({length:e},()=>[]);return r.map(async function*(i){for(;;)if(i.length===0){let s=await t.next();for(let a of r)a.push(s)}else{if(i[0].done)return;yield i.shift().value}})}function Lr(t,e){if(Array.isArray(t)&&Array.isArray(e))return t.concat(e);if(typeof t=="string"&&typeof e=="string")return t+e;if(typeof t=="number"&&typeof e=="number")return t+e;if("concat"in t&&typeof t.concat=="function")return t.concat(e);if(typeof t=="object"&&typeof e=="object"){let r={...t};for(let[n,i]of Object.entries(e))n in r&&!Array.isArray(r[n])?r[n]=Lr(r[n],i):r[n]=i;return r}else throw new Error(`Cannot concat ${typeof t} and ${typeof e}`)}var Ps=class{constructor(e){var r,n;Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=(n=e.signal)!=null?n:(r=this.config)==null?void 0:r.signal,this.setup=new Promise((i,s)=>{ei.runWithConfig(e.config,async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(i,s):this.firstResult.then(a=>i(void 0),s)},!0)})}async next(...e){var r;return(r=this.signal)==null||r.throwIfAborted(),this.firstResultUsed?ei.runWithConfig(this.config,this.signal?async()=>Pi(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}};async function EC(t,e,r,n,...i){let s=new Ps({generator:e,startSetup:r,signal:n}),a=await s.setup;return{output:t(s,a,...i),setup:a}}var ti=class{constructor(e){var r;Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=(r=e.ops)!=null?r:[]}concat(e){let r=this.ops.concat(e.ops),n=Bo({},r);return new Gd({ops:r,state:n[n.length-1].newDocument})}},Gd=class t extends ti{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){let r=this.ops.concat(e.ops),n=Bo(this.state,e.ops);return new t({ops:r,state:n[n.length-1].newDocument})}static fromRunLogPatch(e){let r=Bo({},e.ops);return new t({ops:e.ops,state:r[r.length-1].newDocument})}},Mm=t=>t.name==="log_stream_tracer";async function TC(t,e){if(e==="original")throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");let{inputs:r}=t;if(["retriever","llm","prompt"].includes(t.run_type))return r;if(!(Object.keys(r).length===1&&(r==null?void 0:r.input)===""))return r.input}async function CC(t,e){let{outputs:r}=t;return e==="original"||["retriever","llm","prompt"].includes(t.run_type)?r:r!==void 0&&Object.keys(r).length===1&&(r==null?void 0:r.output)!==void 0?r.output:r}function yj(t){return t!==void 0&&t.message!==void 0}var Zd=class extends xn{constructor(e){var r,n;super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),this.autoClose=(r=e==null?void 0:e.autoClose)!=null?r:!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this._schemaFormat=(n=e==null?void 0:e._schemaFormat)!=null?n:this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Rt.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){var i;if(e.id===this.rootId)return!1;let r=(i=e.tags)!=null?i:[],n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.run_type)),this.includeTags!==void 0&&(n=n||r.find(s=>{var a;return(a=this.includeTags)==null?void 0:a.includes(s)})!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.run_type)),this.excludeTags!==void 0&&(n=n&&r.every(s=>{var a;return!((a=this.excludeTags)!=null&&a.includes(s))})),n}async*tapOutputIterable(e,r){for await(let n of r){if(e!==this.rootId){let i=this.keyMapByRunId[e];i&&await this.writer.write(new ti({ops:[{op:"add",path:`/logs/${i}/streamed_output/-`,value:n}]}))}yield n}}async onRunCreate(e){var i,s,a;if(this.rootId===void 0&&(this.rootId=e.id,await this.writer.write(new ti({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;this.counterMapByRunName[e.name]===void 0&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;let r=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=r===1?e.name:`${e.name}:${r}`;let n={id:e.id,name:e.name,type:e.run_type,tags:(i=e.tags)!=null?i:[],metadata:(a=(s=e.extra)==null?void 0:s.metadata)!=null?a:{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};this._schemaFormat==="streaming_events"&&(n.inputs=await TC(e,this._schemaFormat)),await this.writer.write(new ti({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:n}]}))}async onRunUpdate(e){try{let r=this.keyMapByRunId[e.id];if(r===void 0)return;let n=[];this._schemaFormat==="streaming_events"&&n.push({op:"replace",path:`/logs/${r}/inputs`,value:await TC(e,this._schemaFormat)}),n.push({op:"add",path:`/logs/${r}/final_output`,value:await CC(e,this._schemaFormat)}),e.end_time!==void 0&&n.push({op:"add",path:`/logs/${r}/end_time`,value:new Date(e.end_time).toISOString()});let i=new ti({ops:n});await this.writer.write(i)}finally{if(e.id===this.rootId){let r=new ti({ops:[{op:"replace",path:"/final_output",value:await CC(e,this._schemaFormat)}]});await this.writer.write(r),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,r,n){let i=this.keyMapByRunId[e.id];if(i===void 0)return;let s=e.inputs.messages!==void 0,a;s?yj(n==null?void 0:n.chunk)?a=n==null?void 0:n.chunk:a=new Ai({id:`run-${e.id}`,content:r}):a=r;let o=new ti({ops:[{op:"add",path:`/logs/${i}/streamed_output_str/-`,value:r},{op:"add",path:`/logs/${i}/streamed_output/-`,value:a}]});await this.writer.write(o)}};var W0="__run",Bu=class t{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new t({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}},Im=class t extends Bu{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new t({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}};function Lm({name:t,serialized:e}){return t!==void 0?t:(e==null?void 0:e.name)!==void 0?e.name:(e==null?void 0:e.id)!==void 0&&Array.isArray(e==null?void 0:e.id)?e.id[e.id.length-1]:"Unnamed"}var Nm=t=>t.name==="event_stream_tracer",Fm=class extends xn{constructor(e){var r;super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),this.autoClose=(r=e==null?void 0:e.autoClose)!=null?r:!0,this.includeNames=e==null?void 0:e.includeNames,this.includeTypes=e==null?void 0:e.includeTypes,this.includeTags=e==null?void 0:e.includeTags,this.excludeNames=e==null?void 0:e.excludeNames,this.excludeTypes=e==null?void 0:e.excludeTypes,this.excludeTags=e==null?void 0:e.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=Rt.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){var i;let r=(i=e.tags)!=null?i:[],n=this.includeNames===void 0&&this.includeTags===void 0&&this.includeTypes===void 0;return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(e.runType)),this.includeTags!==void 0&&(n=n||r.find(s=>{var a;return(a=this.includeTags)==null?void 0:a.includes(s)})!==void 0),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(e.runType)),this.excludeTags!==void 0&&(n=n&&r.every(s=>{var a;return!((a=this.excludeTags)!=null&&a.includes(s))})),n}async*tapOutputIterable(e,r){let n=await r.next();if(n.done)return;let i=this.runInfoMap.get(e);if(i===void 0){yield n.value;return}function s(o,l){return o==="llm"&&typeof l=="string"?new Bu({text:l}):l}let a=this.tappedPromises.get(e);if(a===void 0){let o;a=new Promise(l=>{o=l}),this.tappedPromises.set(e,a);try{let l={event:`on_${i.runType}_stream`,run_id:e,name:i.name,tags:i.tags,metadata:i.metadata,data:{}};await this.send({...l,data:{chunk:s(i.runType,n.value)}},i),yield n.value;for await(let u of r)i.runType!=="tool"&&i.runType!=="retriever"&&await this.send({...l,data:{chunk:s(i.runType,u)}},i),yield u}finally{o()}}else{yield n.value;for await(let o of r)yield o}}async send(e,r){this._includeRun(r)&&await this.writer.write(e)}async sendEndEvent(e,r){let n=this.tappedPromises.get(e.run_id);n!==void 0?n.then(()=>{this.send(e,r)}):await this.send(e,r)}async onLLMStart(e){var a,o,l,u,c,h;let r=Lm(e),n=e.inputs.messages!==void 0?"chat_model":"llm",i={tags:(a=e.tags)!=null?a:[],metadata:(l=(o=e.extra)==null?void 0:o.metadata)!=null?l:{},name:r,runType:n,inputs:e.inputs};this.runInfoMap.set(e.id,i);let s=`on_${n}_start`;await this.send({event:s,data:{input:e.inputs},name:r,tags:(u=e.tags)!=null?u:[],run_id:e.id,metadata:(h=(c=e.extra)==null?void 0:c.metadata)!=null?h:{}},i)}async onLLMNewToken(e,r,n){let i=this.runInfoMap.get(e.id),s,a;if(i===void 0)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(e.parent_run_id!==void 0){if(i.runType==="chat_model")a="on_chat_model_stream",(n==null?void 0:n.chunk)===void 0?s=new Ai({content:r,id:`run-${e.id}`}):s=n.chunk.message;else if(i.runType==="llm")a="on_llm_stream",(n==null?void 0:n.chunk)===void 0?s=new Bu({text:r}):s=n.chunk;else throw new Error(`Unexpected run type ${i.runType}`);await this.send({event:a,data:{chunk:s},run_id:e.id,name:i.name,tags:i.tags,metadata:i.metadata},i)}}async onLLMEnd(e){var a,o,l,u;let r=this.runInfoMap.get(e.id);this.runInfoMap.delete(e.id);let n;if(r===void 0)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);let i=(a=e.outputs)==null?void 0:a.generations,s;if(r.runType==="chat_model"){for(let c of i!=null?i:[]){if(s!==void 0)break;s=(o=c[0])==null?void 0:o.message}n="on_chat_model_end"}else if(r.runType==="llm")s={generations:i==null?void 0:i.map(c=>c.map(h=>({text:h.text,generationInfo:h.generationInfo}))),llmOutput:(u=(l=e.outputs)==null?void 0:l.llmOutput)!=null?u:{}},n="on_llm_end";else throw new Error(`onLLMEnd: Unexpected run type: ${r.runType}`);await this.sendEndEvent({event:n,data:{output:s,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async onChainStart(e){var a,o,l,u,c,h,p;let r=Lm(e),n=(a=e.run_type)!=null?a:"chain",i={tags:(o=e.tags)!=null?o:[],metadata:(u=(l=e.extra)==null?void 0:l.metadata)!=null?u:{},name:r,runType:e.run_type},s={};e.inputs.input===""&&Object.keys(e.inputs).length===1?(s={},i.inputs={}):e.inputs.input!==void 0?(s.input=e.inputs.input,i.inputs=e.inputs.input):(s.input=e.inputs,i.inputs=e.inputs),this.runInfoMap.set(e.id,i),await this.send({event:`on_${n}_start`,data:s,name:r,tags:(c=e.tags)!=null?c:[],run_id:e.id,metadata:(p=(h=e.extra)==null?void 0:h.metadata)!=null?p:{}},i)}async onChainEnd(e){var o,l,u,c,h;let r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);let n=`on_${e.run_type}_end`,i=(l=(o=e.inputs)!=null?o:r.inputs)!=null?l:{},a={output:(c=(u=e.outputs)==null?void 0:u.output)!=null?c:e.outputs,input:i};i.input&&Object.keys(i).length===1&&(a.input=i.input,r.inputs=i.input),await this.sendEndEvent({event:n,data:a,run_id:e.id,name:r.name,tags:r.tags,metadata:(h=r.metadata)!=null?h:{}},r)}async onToolStart(e){var i,s,a,o,l,u,c,h;let r=Lm(e),n={tags:(i=e.tags)!=null?i:[],metadata:(a=(s=e.extra)==null?void 0:s.metadata)!=null?a:{},name:r,runType:"tool",inputs:(o=e.inputs)!=null?o:{}};this.runInfoMap.set(e.id,n),await this.send({event:"on_tool_start",data:{input:(l=e.inputs)!=null?l:{}},name:r,run_id:e.id,tags:(u=e.tags)!=null?u:[],metadata:(h=(c=e.extra)==null?void 0:c.metadata)!=null?h:{}},n)}async onToolEnd(e){var i;let r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(r.inputs===void 0)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);let n=((i=e.outputs)==null?void 0:i.output)===void 0?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:n,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async onRetrieverStart(e){var s,a,o,l,u,c;let r=Lm(e),i={tags:(s=e.tags)!=null?s:[],metadata:(o=(a=e.extra)==null?void 0:a.metadata)!=null?o:{},name:r,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,i),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:r,tags:(l=e.tags)!=null?l:[],run_id:e.id,metadata:(c=(u=e.extra)==null?void 0:u.metadata)!=null?c:{}},i)}async onRetrieverEnd(e){var n,i;let r=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),r===void 0)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:(i=(n=e.outputs)==null?void 0:n.documents)!=null?i:e.outputs,input:r.inputs},run_id:e.id,name:r.name,tags:r.tags,metadata:r.metadata},r)}async handleCustomEvent(e,r,n){let i=this.runInfoMap.get(n);if(i===void 0)throw new Error(`handleCustomEvent: Run ID ${n} not found in run map.`);await this.send({event:"on_custom_event",run_id:n,name:e,tags:i.tags,metadata:i.metadata,data:r},i)}async finish(){let e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}};var jm=25;async function Tn(t){return Ir._configureSync(t==null?void 0:t.callbacks,void 0,t==null?void 0:t.tags,void 0,t==null?void 0:t.metadata)}function q0(...t){var r,n,i;let e={};for(let s of t.filter(a=>!!a))for(let a of Object.keys(s))if(a==="metadata")e[a]={...e[a],...s[a]};else if(a==="tags"){let o=(r=e[a])!=null?r:[];e[a]=[...new Set(o.concat((n=s[a])!=null?n:[]))]}else if(a==="configurable")e[a]={...e[a],...s[a]};else if(a==="timeout")e.timeout===void 0?e.timeout=s.timeout:s.timeout!==void 0&&(e.timeout=Math.min(e.timeout,s.timeout));else if(a==="signal")e.signal===void 0?e.signal=s.signal:s.signal!==void 0&&("any"in AbortSignal?e.signal=AbortSignal.any([e.signal,s.signal]):e.signal=s.signal);else if(a==="callbacks"){let o=e.callbacks,l=s.callbacks;if(Array.isArray(l))if(!o)e.callbacks=l;else if(Array.isArray(o))e.callbacks=o.concat(l);else{let u=o.copy();for(let c of l)u.addHandler(Yd(c),!0);e.callbacks=u}else if(l)if(!o)e.callbacks=l;else if(Array.isArray(o)){let u=l.copy();for(let c of o)u.addHandler(Yd(c),!0);e.callbacks=u}else e.callbacks=new Ir(l._parentRunId,{handlers:o.handlers.concat(l.handlers),inheritableHandlers:o.inheritableHandlers.concat(l.inheritableHandlers),tags:Array.from(new Set(o.tags.concat(l.tags))),inheritableTags:Array.from(new Set(o.inheritableTags.concat(l.inheritableTags))),metadata:{...o.metadata,...l.metadata}})}else{let o=a;e[o]=(i=s[o])!=null?i:e[o]}return e}var wj=new Set(["string","number","boolean"]);function Pe(t){var n;let e=ei.getRunnableConfig(),r={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(e){let{runId:i,runName:s,...a}=e;r=Object.entries(a).reduce((o,[l,u])=>(u!==void 0&&(o[l]=u),o),r)}if(t&&(r=Object.entries(t).reduce((i,[s,a])=>(a!==void 0&&(i[s]=a),i),r)),r!=null&&r.configurable)for(let i of Object.keys(r.configurable))wj.has(typeof r.configurable[i])&&!((n=r.metadata)!=null&&n[i])&&(r.metadata||(r.metadata={}),r.metadata[i]=r.configurable[i]);if(r.timeout!==void 0){if(r.timeout<=0)throw new Error("Timeout must be a positive number");let i=AbortSignal.timeout(r.timeout);r.signal!==void 0?"any"in AbortSignal&&(r.signal=AbortSignal.any([r.signal,i])):r.signal=i,delete r.timeout}return r}function $t(t={},{callbacks:e,maxConcurrency:r,recursionLimit:n,runName:i,configurable:s,runId:a}={}){let o=Pe(t);return e!==void 0&&(delete o.runName,o.callbacks=e),n!==void 0&&(o.recursionLimit=n),r!==void 0&&(o.maxConcurrency=r),i!==void 0&&(o.runName=i),s!==void 0&&(o.configurable={...o.configurable,...s}),a!==void 0&&delete o.runId,o}var AC=He(Np(),1),Bm=He(hm(),1),vj=[400,401,402,403,404,405,406,407,409],xj=t=>{var r,n,i;if(t.message.startsWith("Cancel")||t.message.startsWith("AbortError")||t.name==="AbortError"||(t==null?void 0:t.code)==="ECONNABORTED")throw t;let e=(n=(r=t==null?void 0:t.response)==null?void 0:r.status)!=null?n:t==null?void 0:t.status;if(e&&vj.includes(+e))throw t;if(((i=t==null?void 0:t.error)==null?void 0:i.code)==="insufficient_quota"){let s=new Error(t==null?void 0:t.message);throw s.name="InsufficientQuotaError",s}},Ta=class{constructor(e){var n,i,s;Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=(n=e.maxConcurrency)!=null?n:1/0,this.maxRetries=(i=e.maxRetries)!=null?i:6,this.onFailedAttempt=(s=e.onFailedAttempt)!=null?s:xj;let r="default"in Bm.default?Bm.default.default:Bm.default;this.queue=new r({concurrency:this.maxConcurrency})}call(e,...r){return this.queue.add(()=>(0,AC.default)(()=>e(...r).catch(n=>{throw n instanceof Error?n:new Error(n)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,r,...n){return e.signal?Promise.race([this.call(r,...n),new Promise((i,s)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{s(new Error("AbortError"))})})]):this.call(r,...n)}fetch(...e){return this.call(()=>fetch(...e).then(r=>r.ok?r:Promise.reject(r)))}};var Jd=class extends xn{constructor({config:e,onStart:r,onEnd:n,onError:i}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=r,this.argOnEnd=n,this.argOnError=i}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}};function Kd(t){return t?t.lc_runnable:!1}var $m=class{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,r){var s;let n=this.includeNames===void 0&&this.includeTypes===void 0&&this.includeTags===void 0,i=(s=e.tags)!=null?s:[];return this.includeNames!==void 0&&(n=n||this.includeNames.includes(e.name)),this.includeTypes!==void 0&&(n=n||this.includeTypes.includes(r)),this.includeTags!==void 0&&(n=n||i.some(a=>{var o;return(o=this.includeTags)==null?void 0:o.includes(a)})),this.excludeNames!==void 0&&(n=n&&!this.excludeNames.includes(e.name)),this.excludeTypes!==void 0&&(n=n&&!this.excludeTypes.includes(r)),this.excludeTags!==void 0&&(n=n&&i.every(a=>{var o;return!((o=this.excludeTags)!=null&&o.includes(a))})),n}};function H0(t){return t.replace(/[^a-zA-Z-_0-9]/g,"_")}function Sj(t,e){var i,s;let r=(i=e[t.source])!=null?i:t.source,n=(s=e[t.target])!=null?s:t.target;return[r,n]}function kj(t){let e="";for(let[r,n]of Object.entries(t))e+=`	classDef ${r}class fill:${n};
`;return e}function PC(t,e,r){var h;let{firstNodeLabel:n,lastNodeLabel:i,nodeColors:s,withStyles:a=!0,curveStyle:o="linear",wrapLabelNWords:l=9}=r!=null?r:{},u=a?`%%{init: {'flowchart': {'curve': '${o}'}}}%%
graph TD;
`:`graph TD;
`;if(a){let p="default",_={[p]:"{0}([{1}]):::otherclass"};n!==void 0&&(_[n]="{0}[{0}]:::startclass"),i!==void 0&&(_[i]="{0}[{0}]:::endclass");for(let y of Object.values(t)){let S=(h=_[y])!=null?h:_[p],x=H0(y),k=y.split(":"),T=k[k.length-1];u+=`	${S.replace(/\{0\}/g,x).replace(/\{1\}/g,T)};
`}}let c="";for(let p of e){let _=p.source.includes(":")?p.source.split(":")[0]:void 0,y=p.target.includes(":")?p.target.split(":")[0]:void 0;c!==""&&(c!==_||c!==y)&&(u+=`	end
`,c=""),c===""&&_!==void 0&&_===y&&(u=`	subgraph ${_}
`,c=_);let[S,x]=Sj(p,t),k="";if(p.data!==void 0){let T=p.data,P=T.split(" ");P.length>l&&(T=P.reduce((O,A,R)=>(R%l===0&&O.push(""),O[O.length-1]+=` ${A}`,O),[]).join("<br>")),p.conditional?k=` -. ${T} .-> `:k=` -- ${T} --> `}else p.conditional?k=" -.-> ":k=" --> ";u+=`	${H0(S)}${k}${H0(x)};
`}return c!==""&&(u+=`end
`),a&&s!==void 0&&(u+=kj(s)),u}async function OC(t,e){let{backgroundColor:r="white"}=e!=null?e:{},n=btoa(t);r!==void 0&&(/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(r)||(r=`!${r}`));let i=`https://mermaid.ink/img/${n}?bgColor=${r}`,s=await fetch(i);if(!s.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${s.status}`,`Status text: ${s.statusText}`].join(`
`));return await s.blob()}var RC=42;function V0(t){var e;if(Ou(t.id))if(Kd(t.data))try{let r=t.data.getName();return r=r.startsWith("Runnable")?r.slice(8):r,r.length>RC&&(r=`${r.substring(0,RC)}...`),r}catch(r){return t.data.getName()}else return(e=t.data.name)!=null?e:"UnknownSchema";else return t.id}function Ej(t){return Kd(t.data)?{type:"runnable",data:{id:t.data.lc_id,name:t.data.getName()}}:{type:"schema",data:{...Rd(t.data.schema),title:t.data.name}}}var Xd=class{constructor(){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]})}toJSON(){let e={};return Object.values(this.nodes).forEach((r,n)=>{e[r.id]=Ou(r.id)?n:r.id}),{nodes:Object.values(this.nodes).map(r=>({id:e[r.id],...Ej(r)})),edges:this.edges.map(r=>{let n={source:e[r.source],target:e[r.target]};return typeof r.data!="undefined"&&(n.data=r.data),typeof r.conditional!="undefined"&&(n.conditional=r.conditional),n})}}addNode(e,r){if(r!==void 0&&this.nodes[r]!==void 0)throw new Error(`Node with id ${r} already exists`);let n=r||Ot(),i={id:n,data:e};return this.nodes[n]=i,i}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(r=>r.source!==e.id&&r.target!==e.id)}addEdge(e,r,n,i){if(this.nodes[e.id]===void 0)throw new Error(`Source node ${e.id} not in graph`);if(this.nodes[r.id]===void 0)throw new Error(`Target node ${r.id} not in graph`);let s={source:e.id,target:r.id,data:n,conditional:i};return this.edges.push(s),s}firstNode(){let e=new Set(this.edges.map(n=>n.target)),r=[];return Object.values(this.nodes).forEach(n=>{e.has(n.id)||r.push(n)}),r[0]}lastNode(){let e=new Set(this.edges.map(n=>n.source)),r=[];return Object.values(this.nodes).forEach(n=>{e.has(n.id)||r.push(n)}),r[0]}extend(e,r=""){let n=r;Object.values(e.nodes).map(u=>u.id).every(Ou)&&(n="");let s=u=>n?`${n}:${u}`:u;Object.entries(e.nodes).forEach(([u,c])=>{this.nodes[s(u)]={...c,id:s(u)}});let a=e.edges.map(u=>({...u,source:s(u.source),target:s(u.target)}));this.edges=[...this.edges,...a];let o=e.firstNode(),l=e.lastNode();return[o?{id:s(o.id),data:o.data}:void 0,l?{id:s(l.id),data:l.data}:void 0]}trimFirstNode(){let e=this.firstNode();if(e){let r=this.edges.filter(n=>n.source===e.id);(Object.keys(this.nodes).length===1||r.length===1)&&this.removeNode(e)}}trimLastNode(){let e=this.lastNode();if(e){let r=this.edges.filter(n=>n.target===e.id);(Object.keys(this.nodes).length===1||r.length===1)&&this.removeNode(e)}}drawMermaid(e){let{withStyles:r,curveStyle:n,nodeColors:i={start:"#ffdfba",end:"#baffc9",other:"#fad7de"},wrapLabelNWords:s}=e!=null?e:{},a={};for(let h of Object.values(this.nodes))a[h.id]=V0(h);let o=this.firstNode(),l=o?V0(o):void 0,u=this.lastNode(),c=u?V0(u):void 0;return PC(a,this.edges,{firstNodeLabel:l,lastNodeLabel:c,withStyles:r,curveStyle:n,nodeColors:i,wrapLabelNWords:s})}async drawMermaidPng(e){let r=this.drawMermaid(e);return OC(r,{backgroundColor:e==null?void 0:e.backgroundColor})}};function DC(t){let e=new TextEncoder,r=new ReadableStream({async start(n){for await(let i of t)n.enqueue(e.encode(`event: data
data: ${JSON.stringify(i)}

`));n.enqueue(e.encode(`event: end

`)),n.close()}});return Rt.fromReadableStream(r)}function Y0(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.iterator]=="function"&&typeof t.next=="function"}var MC=t=>t!=null&&typeof t=="object"&&"next"in t&&typeof t.next=="function";function zm(t){return typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function"}function*G0(t,e){for(;;){let{value:r,done:n}=ei.runWithConfig(t,e.next.bind(e),!0);if(n)break;yield r}}async function*Z0(t,e){let r=e[Symbol.asyncIterator]();for(;;){let{value:n,done:i}=await ei.runWithConfig(t,r.next.bind(e),!0);if(i)break;yield n}}function Dt(t,e){return t&&!Array.isArray(t)&&!(t instanceof Date)&&typeof t=="object"?t:{[e]:t}}var bt=class extends Xn{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){var n,i;let r=(i=(n=this.name)!=null?n:this.constructor.lc_name())!=null?i:this.constructor.name;return e?`${r}${e}`:r}bind(e){return new Ho({bound:this,kwargs:e,config:{}})}map(){return new K0({bound:this})}withRetry(e){return new X0({bound:this,kwargs:{},config:{},maxAttemptNumber:e==null?void 0:e.stopAfterAttempt,...e})}withConfig(e){return new Ho({bound:this,config:e,kwargs:{}})}withFallbacks(e){let r=Array.isArray(e)?e:e.fallbacks;return new ew({runnable:this,fallbacks:r})}_getOptionsList(e,r=0){if(Array.isArray(e)&&e.length!==r)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${r} inputs`);if(Array.isArray(e))return e.map(Pe);if(r>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");let n=Object.fromEntries(Object.entries(e).filter(([i])=>i!=="runId"));return Array.from({length:r},(i,s)=>Pe(s===0?e:n))}return Array.from({length:r},()=>Pe(e))}async batch(e,r,n){var l,u;let i=this._getOptionsList(r!=null?r:{},e.length),s=(u=(l=i[0])==null?void 0:l.maxConcurrency)!=null?u:n==null?void 0:n.maxConcurrency,a=new Ta({maxConcurrency:s,onFailedAttempt:c=>{throw c}}),o=e.map((c,h)=>a.call(async()=>{try{return await this.invoke(c,i[h])}catch(p){if(n!=null&&n.returnExceptions)return p;throw p}}));return Promise.all(o)}async*_streamIterator(e,r){yield this.invoke(e,r)}async stream(e,r){let n=Pe(r),i=new Ps({generator:this._streamIterator(e,n),config:n});return await i.setup,Rt.fromAsyncGenerator(i)}_separateRunnableConfigFromCallOptions(e){let r;e===void 0?r=Pe(e):r=Pe({callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});let n={...e};return delete n.callbacks,delete n.tags,delete n.metadata,delete n.runName,delete n.configurable,delete n.recursionLimit,delete n.maxConcurrency,delete n.runId,delete n.timeout,delete n.signal,[r,n]}async _callWithConfig(e,r,n){var l;let i=Pe(n),s=await Tn(i),a=await(s==null?void 0:s.handleChainStart(this.toJSON(),Dt(r,"input"),i.runId,i==null?void 0:i.runType,void 0,void 0,(l=i==null?void 0:i.runName)!=null?l:this.getName()));delete i.runId;let o;try{let u=e.call(this,r,i,a);o=await Pi(u,n==null?void 0:n.signal)}catch(u){throw await(a==null?void 0:a.handleChainError(u)),u}return await(a==null?void 0:a.handleChainEnd(Dt(o,"output"))),o}async _batchWithConfig(e,r,n,i){var u;let s=this._getOptionsList(n!=null?n:{},r.length),a=await Promise.all(s.map(Tn)),o=await Promise.all(a.map(async(c,h)=>{var _;let p=await(c==null?void 0:c.handleChainStart(this.toJSON(),Dt(r[h],"input"),s[h].runId,s[h].runType,void 0,void 0,(_=s[h].runName)!=null?_:this.getName()));return delete s[h].runId,p})),l;try{let c=e.call(this,r,s,o,i);l=await Pi(c,(u=s==null?void 0:s[0])==null?void 0:u.signal)}catch(c){throw await Promise.all(o.map(h=>h==null?void 0:h.handleChainError(c))),c}return await Promise.all(o.map(c=>c==null?void 0:c.handleChainEnd(Dt(l,"output")))),l}async*_transformStreamWithConfig(e,r,n){let i,s=!0,a,o=!0,l=Pe(n),u=await Tn(l);async function*c(){for await(let p of e){if(s)if(i===void 0)i=p;else try{i=Lr(i,p)}catch(_){i=void 0,s=!1}yield p}}let h;try{let p=await EC(r.bind(this),c(),async()=>{var x;return u==null?void 0:u.handleChainStart(this.toJSON(),{input:""},l.runId,l.runType,void 0,void 0,(x=l.runName)!=null?x:this.getName())},n==null?void 0:n.signal,l);delete l.runId,h=p.setup;let _=h==null?void 0:h.handlers.find(Nm),y=p.output;_!==void 0&&h!==void 0&&(y=_.tapOutputIterable(h.runId,y));let S=h==null?void 0:h.handlers.find(Mm);S!==void 0&&h!==void 0&&(y=S.tapOutputIterable(h.runId,y));for await(let x of y)if(yield x,o)if(a===void 0)a=x;else try{a=Lr(a,x)}catch(k){a=void 0,o=!1}}catch(p){throw await(h==null?void 0:h.handleChainError(p,void 0,void 0,void 0,{inputs:Dt(i,"input")})),p}await(h==null?void 0:h.handleChainEnd(a!=null?a:{},void 0,void 0,void 0,{inputs:Dt(i,"input")}))}getGraph(e){let r=new Xd,n=r.addNode({name:`${this.getName()}Input`,schema:Cu.any()}),i=r.addNode(this),s=r.addNode({name:`${this.getName()}Output`,schema:Cu.any()});return r.addEdge(n,i),r.addEdge(i,s),r}pipe(e){return new $u({first:this,last:qo(e)})}pick(e){return this.pipe(new tw(e))}assign(e){return this.pipe(new Qd(new Vo({steps:e})))}async*transform(e,r){let n;for await(let i of e)n===void 0?n=i:n=Lr(n,i);yield*this._streamIterator(n,Pe(r))}async*streamLog(e,r,n){let i=new Zd({...n,autoClose:!1,_schemaFormat:"original"}),s=Pe(r);yield*this._streamLog(e,i,s)}async*_streamLog(e,r,n){let{callbacks:i}=n;if(i===void 0)n.callbacks=[r];else if(Array.isArray(i))n.callbacks=i.concat([r]);else{let l=i.copy();l.inheritableHandlers.push(r),n.callbacks=l}let s=this.stream(e,n);async function a(){try{let l=await s;for await(let u of l){let c=new ti({ops:[{op:"add",path:"/streamed_output/-",value:u}]});await r.writer.write(c)}}finally{await r.writer.close()}}let o=a();try{for await(let l of r)yield l}finally{await o}}streamEvents(e,r,n){let i;if(r.version==="v1")i=this._streamEventsV1(e,r,n);else if(r.version==="v2")i=this._streamEventsV2(e,r,n);else throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');return r.encoding==="text/event-stream"?DC(i):Rt.fromAsyncGenerator(i)}async*_streamEventsV2(e,r,n){var _,y;let i=new Fm({...n,autoClose:!1}),s=Pe(r),a=(_=s.runId)!=null?_:Ot();s.runId=a;let o=s.callbacks;if(o===void 0)s.callbacks=[i];else if(Array.isArray(o))s.callbacks=o.concat(i);else{let S=o.copy();S.inheritableHandlers.push(i),s.callbacks=S}let l=this;async function u(){try{let S=await l.stream(e,s),x=i.tapOutputIterable(a,S);for await(let k of x);}finally{await i.finish()}}let c=u(),h=!1,p;try{for await(let S of i){if(!h){S.data.input=e,h=!0,p=S.run_id,yield S;continue}S.run_id===p&&S.event.endsWith("_end")&&(y=S.data)!=null&&y.input&&delete S.data.input,yield S}}finally{await c}}async*_streamEventsV1(e,r,n){var y,S,x;let i,s=!1,a=Pe(r),o=(y=a.tags)!=null?y:[],l=(S=a.metadata)!=null?S:{},u=(x=a.runName)!=null?x:this.getName(),c=new Zd({...n,autoClose:!1,_schemaFormat:"streaming_events"}),h=new $m({...n}),p=this._streamLog(e,c,a);for await(let k of p){if(i?i=i.concat(k):i=Gd.fromRunLogPatch(k),i.state===void 0)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!s){s=!0;let A={...i.state},R={run_id:A.id,event:`on_${A.type}_start`,name:u,tags:o,metadata:l,data:{input:e}};h.includeEvent(R,A.type)&&(yield R)}let T=k.ops.filter(A=>A.path.startsWith("/logs/")).map(A=>A.path.split("/")[2]),P=[...new Set(T)];for(let A of P){let R,F={},I=i.state.logs[A];if(I.end_time===void 0?I.streamed_output.length>0?R="stream":R="start":R="end",R==="start")I.inputs!==void 0&&(F.input=I.inputs);else if(R==="end")I.inputs!==void 0&&(F.input=I.inputs),F.output=I.final_output;else if(R==="stream"){let U=I.streamed_output.length;if(U!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${U} instead. Encountered in: "${I.name}"`);F={chunk:I.streamed_output[0]},I.streamed_output=[]}yield{event:`on_${I.type}_${R}`,name:I.name,run_id:I.id,tags:I.tags,metadata:I.metadata,data:F}}let{state:O}=i;if(O.streamed_output.length>0){let A=O.streamed_output.length;if(A!==1)throw new Error(`Expected exactly one chunk of streamed output, got ${A} instead. Encountered in: "${O.name}"`);let R={chunk:O.streamed_output[0]};O.streamed_output=[];let F={event:`on_${O.type}_stream`,run_id:O.id,tags:o,metadata:l,name:u,data:R};h.includeEvent(F,O.type)&&(yield F)}}let _=i==null?void 0:i.state;if(_!==void 0){let k={event:`on_${_.type}_end`,name:u,run_id:_.id,tags:o,metadata:l,data:{output:_.final_output}};h.includeEvent(k,_.type)&&(yield k)}}static isRunnable(e){return Kd(e)}withListeners({onStart:e,onEnd:r,onError:n}){return new Ho({bound:this,config:{},configFactories:[i=>({callbacks:[new Jd({config:i,onStart:e,onEnd:r,onError:n})]})]})}asTool(e){return Cj(this,e)}},Ho=class t extends bt{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){let r=q0(this.config,...e);return q0(r,...this.configFactories?await Promise.all(this.configFactories.map(async n=>await n(r))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new this.constructor({bound:this.bound.withRetry(e),kwargs:this.kwargs,config:this.config})}async invoke(e,r){return this.bound.invoke(e,await this._mergeConfig(Pe(r),this.kwargs))}async batch(e,r,n){let i=Array.isArray(r)?await Promise.all(r.map(async s=>this._mergeConfig(Pe(s),this.kwargs))):await this._mergeConfig(Pe(r),this.kwargs);return this.bound.batch(e,i,n)}async*_streamIterator(e,r){yield*this.bound._streamIterator(e,await this._mergeConfig(Pe(r),this.kwargs))}async stream(e,r){return this.bound.stream(e,await this._mergeConfig(Pe(r),this.kwargs))}async*transform(e,r){yield*this.bound.transform(e,await this._mergeConfig(Pe(r),this.kwargs))}streamEvents(e,r,n){let i=this,s=async function*(){yield*i.bound.streamEvents(e,{...await i._mergeConfig(Pe(r),i.kwargs),version:r.version},n)};return Rt.fromAsyncGenerator(s())}static isRunnableBinding(e){return e.bound&&bt.isRunnable(e.bound)}withListeners({onStart:e,onEnd:r,onError:n}){return new t({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[i=>({callbacks:[new Jd({config:i,onStart:e,onEnd:r,onError:n})]})]})}},K0=class t extends bt{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new t({bound:this.bound.bind(e)})}async invoke(e,r){return this._callWithConfig(this._invoke.bind(this),e,r)}async _invoke(e,r,n){return this.bound.batch(e,$t(r,{callbacks:n==null?void 0:n.getChild()}))}withListeners({onStart:e,onEnd:r,onError:n}){return new t({bound:this.bound.withListeners({onStart:e,onEnd:r,onError:n})})}},X0=class extends Ho{static lc_name(){return"RunnableRetry"}constructor(e){var r,n;super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=(r=e.maxAttemptNumber)!=null?r:this.maxAttemptNumber,this.onFailedAttempt=(n=e.onFailedAttempt)!=null?n:this.onFailedAttempt}_patchConfigForRetry(e,r,n){let i=e>1?`retry:attempt:${e}`:void 0;return $t(r,{callbacks:n==null?void 0:n.getChild(i)})}async _invoke(e,r,n){return(0,J0.default)(i=>super.invoke(e,this._patchConfigForRetry(i,r,n)),{onFailedAttempt:i=>this.onFailedAttempt(i,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,r){return this._callWithConfig(this._invoke.bind(this),e,r)}async _batch(e,r,n,i){let s={};try{await(0,J0.default)(async a=>{let o=e.map((p,_)=>_).filter(p=>s[p.toString()]===void 0||s[p.toString()]instanceof Error),l=o.map(p=>e[p]),u=o.map(p=>this._patchConfigForRetry(a,r==null?void 0:r[p],n==null?void 0:n[p])),c=await super.batch(l,u,{...i,returnExceptions:!0}),h;for(let p=0;p<c.length;p+=1){let _=c[p],y=o[p];_ instanceof Error&&h===void 0&&(h=_,h.input=l[p]),s[y.toString()]=_}if(h)throw h;return c},{onFailedAttempt:a=>this.onFailedAttempt(a,a.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(a){if((i==null?void 0:i.returnExceptions)!==!0)throw a}return Object.keys(s).sort((a,o)=>parseInt(a,10)-parseInt(o,10)).map(a=>s[parseInt(a,10)])}async batch(e,r,n){return this._batchWithConfig(this._batch.bind(this),e,r,n)}},$u=class t extends bt{static lc_name(){return"RunnableSequence"}constructor(e){var r;super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=(r=e.middle)!=null?r:this.middle,this.last=e.last,this.name=e.name}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,r){var l;let n=Pe(r),i=await Tn(n),s=await(i==null?void 0:i.handleChainStart(this.toJSON(),Dt(e,"input"),n.runId,void 0,void 0,void 0,n==null?void 0:n.runName));delete n.runId;let a=e,o;try{let u=[this.first,...this.middle];for(let c=0;c<u.length;c+=1){let p=u[c].invoke(a,$t(n,{callbacks:s==null?void 0:s.getChild(`seq:step:${c+1}`)}));a=await Pi(p,r==null?void 0:r.signal)}if((l=r==null?void 0:r.signal)!=null&&l.aborted)throw new Error("Aborted");o=await this.last.invoke(a,$t(n,{callbacks:s==null?void 0:s.getChild(`seq:step:${this.steps.length}`)}))}catch(u){throw await(s==null?void 0:s.handleChainError(u)),u}return await(s==null?void 0:s.handleChainEnd(Dt(o,"output"))),o}async batch(e,r,n){var l;let i=this._getOptionsList(r!=null?r:{},e.length),s=await Promise.all(i.map(Tn)),a=await Promise.all(s.map(async(u,c)=>{let h=await(u==null?void 0:u.handleChainStart(this.toJSON(),Dt(e[c],"input"),i[c].runId,void 0,void 0,void 0,i[c].runName));return delete i[c].runId,h})),o=e;try{for(let u=0;u<this.steps.length;u+=1){let h=this.steps[u].batch(o,a.map((p,_)=>{let y=p==null?void 0:p.getChild(`seq:step:${u+1}`);return $t(i[_],{callbacks:y})}),n);o=await Pi(h,(l=i[0])==null?void 0:l.signal)}}catch(u){throw await Promise.all(a.map(c=>c==null?void 0:c.handleChainError(u))),u}return await Promise.all(a.map(u=>u==null?void 0:u.handleChainEnd(Dt(o,"output")))),o}async*_streamIterator(e,r){var h;let n=await Tn(r),{runId:i,...s}=r!=null?r:{},a=await(n==null?void 0:n.handleChainStart(this.toJSON(),Dt(e,"input"),i,void 0,void 0,void 0,s==null?void 0:s.runName)),o=[this.first,...this.middle,this.last],l=!0,u;async function*c(){yield e}try{let p=o[0].transform(c(),$t(s,{callbacks:a==null?void 0:a.getChild("seq:step:1")}));for(let _=1;_<o.length;_+=1)p=await o[_].transform(p,$t(s,{callbacks:a==null?void 0:a.getChild(`seq:step:${_+1}`)}));for await(let _ of p)if((h=r==null?void 0:r.signal)==null||h.throwIfAborted(),yield _,l)if(u===void 0)u=_;else try{u=Lr(u,_)}catch(y){u=void 0,l=!1}}catch(p){throw await(a==null?void 0:a.handleChainError(p)),p}await(a==null?void 0:a.handleChainEnd(Dt(u,"output")))}getGraph(e){let r=new Xd,n=null;return this.steps.forEach((i,s)=>{let a=i.getGraph(e);s!==0&&a.trimFirstNode(),s!==this.steps.length-1&&a.trimLastNode(),r.extend(a);let o=a.firstNode();if(!o)throw new Error(`Runnable ${i} has no first node`);n&&r.addEdge(n,o),n=a.lastNode()}),r}pipe(e){var r;return t.isRunnableSequence(e)?new t({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:(r=this.name)!=null?r:e.name}):new t({first:this.first,middle:[...this.middle,this.last],last:qo(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&bt.isRunnable(e)}static from([e,...r],n){return new t({first:qo(e),middle:r.slice(0,-1).map(qo),last:qo(r[r.length-1]),name:n})}},Vo=class t extends bt{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(let[r,n]of Object.entries(e.steps))this.steps[r]=qo(n)}static from(e){return new t({steps:e})}async invoke(e,r){let n=Pe(r),i=await Tn(n),s=await(i==null?void 0:i.handleChainStart(this.toJSON(),{input:e},n.runId,void 0,void 0,void 0,n==null?void 0:n.runName));delete n.runId;let a={};try{let o=Object.entries(this.steps).map(async([l,u])=>{a[l]=await u.invoke(e,$t(n,{callbacks:s==null?void 0:s.getChild(`map:key:${l}`)}))});await Pi(Promise.all(o),r==null?void 0:r.signal)}catch(o){throw await(s==null?void 0:s.handleChainError(o)),o}return await(s==null?void 0:s.handleChainEnd(a)),a}async*_transform(e,r,n){let i={...this.steps},s=U0(e,Object.keys(i).length),a=new Map(Object.entries(i).map(([o,l],u)=>{let c=l.transform(s[u],$t(n,{callbacks:r==null?void 0:r.getChild(`map:key:${o}`)}));return[o,c.next().then(h=>({key:o,gen:c,result:h}))]}));for(;a.size;){let o=Promise.race(a.values()),{key:l,result:u,gen:c}=await Pi(o,n==null?void 0:n.signal);a.delete(l),u.done||(yield{[l]:u.value},a.set(l,c.next().then(h=>({key:l,gen:c,result:h}))))}}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*n(){yield e}let i=Pe(r),s=new Ps({generator:this.transform(n(),i),config:i});return await s.setup,Rt.fromAsyncGenerator(s)}},Q0=class t extends bt{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!nm(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,r){let[n]=this._getOptionsList(r!=null?r:{},1),i=await Tn(n),s=this.func($t(n,{callbacks:i}),e);return Pi(s,n==null?void 0:n.signal)}async*_streamIterator(e,r){var s,a;let[n]=this._getOptionsList(r!=null?r:{},1),i=await this.invoke(e,r);if(zm(i)){for await(let o of i)(s=n==null?void 0:n.signal)==null||s.throwIfAborted(),yield o;return}if(MC(i)){for(;;){(a=n==null?void 0:n.signal)==null||a.throwIfAborted();let o=i.next();if(o.done)break;yield o.value}return}yield i}static from(e){return new t({func:e})}};function Tj(t){if(nm(t))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}var Yo=class t extends bt{static lc_name(){return"RunnableLambda"}constructor(e){if(nm(e.func))return Q0.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Tj(e.func),this.func=e.func}static from(e){return new t({func:e})}async _invoke(e,r,n){return new Promise((i,s)=>{var o;let a=$t(r,{callbacks:n==null?void 0:n.getChild(),recursionLimit:((o=r==null?void 0:r.recursionLimit)!=null?o:jm)-1});ei.runWithConfig(a,async()=>{var l,u,c;try{let h=await this.func(e,{...a,config:a});if(h&&bt.isRunnable(h)){if((r==null?void 0:r.recursionLimit)===0)throw new Error("Recursion limit reached.");h=await h.invoke(e,{...a,recursionLimit:((l=a.recursionLimit)!=null?l:jm)-1})}else if(zm(h)){let p;for await(let _ of Z0(a,h))if((u=r==null?void 0:r.signal)==null||u.throwIfAborted(),p===void 0)p=_;else try{p=Lr(p,_)}catch(y){p=_}h=p}else if(Y0(h)){let p;for(let _ of G0(a,h))if((c=r==null?void 0:r.signal)==null||c.throwIfAborted(),p===void 0)p=_;else try{p=Lr(p,_)}catch(y){p=_}h=p}i(h)}catch(h){s(h)}})})}async invoke(e,r){return this._callWithConfig(this._invoke.bind(this),e,r)}async*_transform(e,r,n){var o,l,u;let i;for await(let c of e)if(i===void 0)i=c;else try{i=Lr(i,c)}catch(h){i=c}let s=$t(n,{callbacks:r==null?void 0:r.getChild(),recursionLimit:((o=n==null?void 0:n.recursionLimit)!=null?o:jm)-1}),a=await new Promise((c,h)=>{ei.runWithConfig(s,async()=>{try{let p=await this.func(i,{...s,config:s});c(p)}catch(p){h(p)}})});if(a&&bt.isRunnable(a)){if((n==null?void 0:n.recursionLimit)===0)throw new Error("Recursion limit reached.");let c=await a.stream(i,s);for await(let h of c)yield h}else if(zm(a))for await(let c of Z0(s,a))(l=n==null?void 0:n.signal)==null||l.throwIfAborted(),yield c;else if(Y0(a))for(let c of G0(s,a))(u=n==null?void 0:n.signal)==null||u.throwIfAborted(),yield c;else yield a}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*n(){yield e}let i=Pe(r),s=new Ps({generator:this.transform(n(),i),config:i});return await s.setup,Rt.fromAsyncGenerator(s)}};var ew=class extends bt{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(let e of this.fallbacks)yield e}async invoke(e,r){var u;let n=Pe(r),i=await Tn(r),{runId:s,...a}=n,o=await(i==null?void 0:i.handleChainStart(this.toJSON(),Dt(e,"input"),s,void 0,void 0,void 0,a==null?void 0:a.runName)),l;for(let c of this.runnables()){(u=n==null?void 0:n.signal)==null||u.throwIfAborted();try{let h=await c.invoke(e,$t(a,{callbacks:o==null?void 0:o.getChild()}));return await(o==null?void 0:o.handleChainEnd(Dt(h,"output"))),h}catch(h){l===void 0&&(l=h)}}throw l===void 0?new Error("No error stored at end of fallback."):(await(o==null?void 0:o.handleChainError(l)),l)}async*_streamIterator(e,r){var h;let n=Pe(r),i=await Tn(r),{runId:s,...a}=n,o=await(i==null?void 0:i.handleChainStart(this.toJSON(),Dt(e,"input"),s,void 0,void 0,void 0,a==null?void 0:a.runName)),l,u;for(let p of this.runnables()){(h=n==null?void 0:n.signal)==null||h.throwIfAborted();let _=$t(a,{callbacks:o==null?void 0:o.getChild()});try{u=await p.stream(e,_);break}catch(y){l===void 0&&(l=y)}}if(u===void 0){let p=l!=null?l:new Error("No error stored at end of fallback.");throw await(o==null?void 0:o.handleChainError(p)),p}let c;try{for await(let p of u){yield p;try{c=c===void 0?c:Lr(c,p)}catch(_){c=void 0}}}catch(p){throw await(o==null?void 0:o.handleChainError(p)),p}await(o==null?void 0:o.handleChainEnd(Dt(c,"output")))}async batch(e,r,n){var l;if(n!=null&&n.returnExceptions)throw new Error("Not implemented.");let i=this._getOptionsList(r!=null?r:{},e.length),s=await Promise.all(i.map(u=>Tn(u))),a=await Promise.all(s.map(async(u,c)=>{let h=await(u==null?void 0:u.handleChainStart(this.toJSON(),Dt(e[c],"input"),i[c].runId,void 0,void 0,void 0,i[c].runName));return delete i[c].runId,h})),o;for(let u of this.runnables()){(l=i[0].signal)==null||l.throwIfAborted();try{let c=await u.batch(e,a.map((h,p)=>$t(i[p],{callbacks:h==null?void 0:h.getChild()})),n);return await Promise.all(a.map((h,p)=>h==null?void 0:h.handleChainEnd(Dt(c[p],"output")))),c}catch(c){o===void 0&&(o=c)}}throw o?(await Promise.all(a.map(u=>u==null?void 0:u.handleChainError(o))),o):new Error("No error stored at end of fallbacks.")}};function qo(t){if(typeof t=="function")return new Yo({func:t});if(bt.isRunnable(t))return t;if(!Array.isArray(t)&&typeof t=="object"){let e={};for(let[r,n]of Object.entries(t))e[r]=qo(n);return new Vo({steps:e})}else throw new Error(`Expected a Runnable, function or object.
Instead got an unsupported type.`)}var Qd=class extends bt{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof Vo&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,r){let n=await this.mapper.invoke(e,r);return{...e,...n}}async*_transform(e,r,n){let i=this.mapper.getStepsKeys(),[s,a]=U0(e),o=this.mapper.transform(a,$t(n,{callbacks:r==null?void 0:r.getChild()})),l=o.next();for await(let u of s){if(typeof u!="object"||Array.isArray(u))throw new Error(`RunnableAssign can only be used with objects as input, got ${typeof u}`);let c=Object.fromEntries(Object.entries(u).filter(([h])=>!i.includes(h)));Object.keys(c).length>0&&(yield c)}yield(await l).value;for await(let u of o)yield u}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*n(){yield e}let i=Pe(r),s=new Ps({generator:this.transform(n(),i),config:i});return await s.setup,Rt.fromAsyncGenerator(s)}},tw=class extends bt{static lc_name(){return"RunnablePick"}constructor(e){(typeof e=="string"||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if(typeof this.keys=="string")return e[this.keys];{let r=this.keys.map(n=>[n,e[n]]).filter(n=>n[1]!==void 0);return r.length===0?void 0:Object.fromEntries(r)}}async invoke(e,r){return this._callWithConfig(this._pick.bind(this),e,r)}async*_transform(e){for await(let r of e){let n=await this._pick(r);n!==void 0&&(yield n)}}transform(e,r){return this._transformStreamWithConfig(e,this._transform.bind(this),r)}async stream(e,r){async function*n(){yield e}let i=Pe(r),s=new Ps({generator:this.transform(n(),i),config:i});return await s.setup,Rt.fromAsyncGenerator(s)}},Um=class extends Ho{constructor(e){var n;let r=$u.from([Yo.from(async i=>{let s;if(Mp(i))try{s=await this.schema.parseAsync(i.args)}catch(a){throw new Dp("Received tool input did not match expected schema",JSON.stringify(i.args))}else s=i;return s}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name});super({bound:r,config:(n=e.config)!=null?n:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}};function Cj(t,e){var i,s,a;let r=(i=e.name)!=null?i:t.getName(),n=(a=e.description)!=null?a:(s=e.schema)==null?void 0:s.description;return e.schema.constructor===Cu.ZodString?new Um({name:r,description:n,schema:Cu.object({input:Cu.string()}).transform(o=>o.input),bound:t}):new Um({name:r,description:n,schema:e.schema,bound:t})}var Pj=typeof window=="object"?window:{},be="0123456789abcdef".split(""),Oj=[-2147483648,8388608,32768,128],ri=[24,16,8,0];var Mt=[];function ni(t){t?(Mt[0]=Mt[16]=Mt[1]=Mt[2]=Mt[3]=Mt[4]=Mt[5]=Mt[6]=Mt[7]=Mt[8]=Mt[9]=Mt[10]=Mt[11]=Mt[12]=Mt[13]=Mt[14]=Mt[15]=0,this.blocks=Mt):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}ni.prototype.update=function(t){if(!this.finalized){var e=typeof t!="string";e&&t.constructor===Pj.ArrayBuffer&&(t=new Uint8Array(t));for(var r,n=0,i,s=t.length||0,a=this.blocks;n<s;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),e)for(i=this.start;n<s&&i<64;++n)a[i>>2]|=t[n]<<ri[i++&3];else for(i=this.start;n<s&&i<64;++n)r=t.charCodeAt(n),r<128?a[i>>2]|=r<<ri[i++&3]:r<2048?(a[i>>2]|=(192|r>>6)<<ri[i++&3],a[i>>2]|=(128|r&63)<<ri[i++&3]):r<55296||r>=57344?(a[i>>2]|=(224|r>>12)<<ri[i++&3],a[i>>2]|=(128|r>>6&63)<<ri[i++&3],a[i>>2]|=(128|r&63)<<ri[i++&3]):(r=65536+((r&1023)<<10|t.charCodeAt(++n)&1023),a[i>>2]|=(240|r>>18)<<ri[i++&3],a[i>>2]|=(128|r>>12&63)<<ri[i++&3],a[i>>2]|=(128|r>>6&63)<<ri[i++&3],a[i>>2]|=(128|r&63)<<ri[i++&3]);this.lastByteIndex=i,this.bytes+=i-this.start,i>=64?(this.block=a[16],this.start=i-64,this.hash(),this.hashed=!0):this.start=i}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}};ni.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=Oj[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}};ni.prototype.hash=function(){var t=this.h0,e=this.h1,r=this.h2,n=this.h3,i=this.h4,s,a,o,l=this.blocks;for(a=16;a<80;++a)o=l[a-3]^l[a-8]^l[a-14]^l[a-16],l[a]=o<<1|o>>>31;for(a=0;a<20;a+=5)s=e&r|~e&n,o=t<<5|t>>>27,i=o+s+i+1518500249+l[a]<<0,e=e<<30|e>>>2,s=t&e|~t&r,o=i<<5|i>>>27,n=o+s+n+1518500249+l[a+1]<<0,t=t<<30|t>>>2,s=i&t|~i&e,o=n<<5|n>>>27,r=o+s+r+1518500249+l[a+2]<<0,i=i<<30|i>>>2,s=n&i|~n&t,o=r<<5|r>>>27,e=o+s+e+1518500249+l[a+3]<<0,n=n<<30|n>>>2,s=r&n|~r&i,o=e<<5|e>>>27,t=o+s+t+1518500249+l[a+4]<<0,r=r<<30|r>>>2;for(;a<40;a+=5)s=e^r^n,o=t<<5|t>>>27,i=o+s+i+1859775393+l[a]<<0,e=e<<30|e>>>2,s=t^e^r,o=i<<5|i>>>27,n=o+s+n+1859775393+l[a+1]<<0,t=t<<30|t>>>2,s=i^t^e,o=n<<5|n>>>27,r=o+s+r+1859775393+l[a+2]<<0,i=i<<30|i>>>2,s=n^i^t,o=r<<5|r>>>27,e=o+s+e+1859775393+l[a+3]<<0,n=n<<30|n>>>2,s=r^n^i,o=e<<5|e>>>27,t=o+s+t+1859775393+l[a+4]<<0,r=r<<30|r>>>2;for(;a<60;a+=5)s=e&r|e&n|r&n,o=t<<5|t>>>27,i=o+s+i-1894007588+l[a]<<0,e=e<<30|e>>>2,s=t&e|t&r|e&r,o=i<<5|i>>>27,n=o+s+n-1894007588+l[a+1]<<0,t=t<<30|t>>>2,s=i&t|i&e|t&e,o=n<<5|n>>>27,r=o+s+r-1894007588+l[a+2]<<0,i=i<<30|i>>>2,s=n&i|n&t|i&t,o=r<<5|r>>>27,e=o+s+e-1894007588+l[a+3]<<0,n=n<<30|n>>>2,s=r&n|r&i|n&i,o=e<<5|e>>>27,t=o+s+t-1894007588+l[a+4]<<0,r=r<<30|r>>>2;for(;a<80;a+=5)s=e^r^n,o=t<<5|t>>>27,i=o+s+i-899497514+l[a]<<0,e=e<<30|e>>>2,s=t^e^r,o=i<<5|i>>>27,n=o+s+n-899497514+l[a+1]<<0,t=t<<30|t>>>2,s=i^t^e,o=n<<5|n>>>27,r=o+s+r-899497514+l[a+2]<<0,i=i<<30|i>>>2,s=n^i^t,o=r<<5|r>>>27,e=o+s+e-899497514+l[a+3]<<0,n=n<<30|n>>>2,s=r^n^i,o=e<<5|e>>>27,t=o+s+t-899497514+l[a+4]<<0,r=r<<30|r>>>2;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+r<<0,this.h3=this.h3+n<<0,this.h4=this.h4+i<<0};ni.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,r=this.h2,n=this.h3,i=this.h4;return be[t>>28&15]+be[t>>24&15]+be[t>>20&15]+be[t>>16&15]+be[t>>12&15]+be[t>>8&15]+be[t>>4&15]+be[t&15]+be[e>>28&15]+be[e>>24&15]+be[e>>20&15]+be[e>>16&15]+be[e>>12&15]+be[e>>8&15]+be[e>>4&15]+be[e&15]+be[r>>28&15]+be[r>>24&15]+be[r>>20&15]+be[r>>16&15]+be[r>>12&15]+be[r>>8&15]+be[r>>4&15]+be[r&15]+be[n>>28&15]+be[n>>24&15]+be[n>>20&15]+be[n>>16&15]+be[n>>12&15]+be[n>>8&15]+be[n>>4&15]+be[n&15]+be[i>>28&15]+be[i>>24&15]+be[i>>20&15]+be[i>>16&15]+be[i>>12&15]+be[i>>8&15]+be[i>>4&15]+be[i&15]};ni.prototype.toString=ni.prototype.hex;ni.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,r=this.h2,n=this.h3,i=this.h4;return[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24&255,r>>16&255,r>>8&255,r&255,n>>24&255,n>>16&255,n>>8&255,n&255,i>>24&255,i>>16&255,i>>8&255,i&255]};ni.prototype.array=ni.prototype.digest;ni.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(20),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),t};var rw=t=>new ni(!0).update(t).hex();var IC=(...t)=>rw(t.join("_"));var nw=class{},Rj=new Map,Wm=class t extends nw{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e!=null?e:new Map}lookup(e,r){var n;return Promise.resolve((n=this.cache.get(IC(e,r)))!=null?n:null)}async update(e,r,n){this.cache.set(IC(e,r),n)}static global(){return new t(Rj)}};var qm=class extends Xn{},Hm=class extends qm{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new bn(this.value)]}},Vm=class extends qm{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return Ip(this.messages)}toChatMessages(){return this.messages}};var jC=He(NC(),1);var Bj=Object.defineProperty,$j=(t,e,r)=>e in t?Bj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,zj=(t,e,r)=>($j(t,typeof e!="symbol"?e+"":e,r),r);function Uj(t,e){let r=Array.from({length:t.length},(n,i)=>({start:i,end:i+1}));for(;r.length>1;){let n=null;for(let i=0;i<r.length-1;i++){let s=t.slice(r[i].start,r[i+1].end),a=e.get(s.join(","));a!=null&&(n==null||a<n[0])&&(n=[a,i])}if(n!=null){let i=n[1];r[i]={start:r[i].start,end:r[i+1].end},r.splice(i+1,1)}else break}return r}function Wj(t,e){return t.length===1?[e.get(t.join(","))]:Uj(t,e).map(r=>e.get(t.slice(r.start,r.end).join(","))).filter(r=>r!=null)}function qj(t){return t.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var sw=class{constructor(t,e){V(this,"specialTokens");V(this,"inverseSpecialTokens");V(this,"patStr");V(this,"textEncoder",new TextEncoder);V(this,"textDecoder",new TextDecoder("utf-8"));V(this,"rankMap",new Map);V(this,"textMap",new Map);this.patStr=t.pat_str;let r=t.bpe_ranks.split(`
`).filter(Boolean).reduce((n,i)=>{let[s,a,...o]=i.split(" "),l=Number.parseInt(a,10);return o.forEach((u,c)=>n[u]=l+c),n},{});for(let[n,i]of Object.entries(r)){let s=jC.default.toByteArray(n);this.rankMap.set(s.join(","),i),this.textMap.set(i,s)}this.specialTokens={...t.special_tokens,...e},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((n,[i,s])=>(n[s]=this.textEncoder.encode(i),n),{})}encode(t,e=[],r="all"){var u;let n=new RegExp(this.patStr,"ug"),i=sw.specialTokenRegex(Object.keys(this.specialTokens)),s=[],a=new Set(e==="all"?Object.keys(this.specialTokens):e),o=new Set(r==="all"?Object.keys(this.specialTokens).filter(c=>!a.has(c)):r);if(o.size>0){let c=sw.specialTokenRegex([...o]),h=t.match(c);if(h!=null)throw new Error(`The text contains a special token that is not allowed: ${h[0]}`)}let l=0;for(;;){let c=null,h=l;for(;i.lastIndex=h,c=i.exec(t),!(c==null||a.has(c[0]));)h=c.index+1;let p=(u=c==null?void 0:c.index)!=null?u:t.length;for(let y of t.substring(l,p).matchAll(n)){let S=this.textEncoder.encode(y[0]),x=this.rankMap.get(S.join(","));if(x!=null){s.push(x);continue}s.push(...Wj(S,this.rankMap))}if(c==null)break;let _=this.specialTokens[c[0]];s.push(_),l=c.index+c[0].length}return s}decode(t){var s;let e=[],r=0;for(let a=0;a<t.length;++a){let o=t[a],l=(s=this.textMap.get(o))!=null?s:this.inverseSpecialTokens[o];l!=null&&(e.push(l),r+=l.length)}let n=new Uint8Array(r),i=0;for(let a of e)n.set(a,i),i+=a.length;return this.textDecoder.decode(n)}},Gm=sw;zj(Gm,"specialTokenRegex",t=>new RegExp(t.map(e=>qj(e)).join("|"),"g"));function aw(t){switch(t){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":return"o200k_base";default:throw new Error("Unknown model")}}var Zm={},Hj=new Ta({});async function Vj(t){return t in Zm||(Zm[t]=Hj.fetch(`https://tiktoken.pages.dev/js/${t}.json`).then(e=>e.json()).then(e=>new Gm(e)).catch(e=>{throw delete Zm[t],e})),await Zm[t]}async function BC(t){return Vj(aw(t))}var Yj=t=>t.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":t.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":t.startsWith("gpt-4-32k")?"gpt-4-32k":t.startsWith("gpt-4-")?"gpt-4":t.startsWith("gpt-4o")?"gpt-4o":t;var Gj=()=>!1,ow=class extends bt{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){var r,n,i;super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=(r=e.verbose)!=null?r:Gj(),this.callbacks=e.callbacks,this.tags=(n=e.tags)!=null?n:[],this.metadata=(i=e.metadata)!=null?i:{}}},Jm=class extends ow{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:r,...n}){super({callbacks:e!=null?e:r,...n}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),typeof n.cache=="object"?this.cache=n.cache:n.cache?this.cache=Wm.global():this.cache=void 0,this.caller=new Ta(n!=null?n:{})}async getNumTokens(e){if(typeof e!="string")return 0;let r=Math.ceil(e.length/4);if(!this._encoding)try{this._encoding=await BC("modelName"in this?Yj(this.modelName):"gpt2")}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}if(this._encoding)try{r=this._encoding.encode(e).length}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}return r}static _convertInputToPromptValue(e){return typeof e=="string"?new Hm(e):Array.isArray(e)?new Vm(e.map(Io)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...r}){let n={...this._identifyingParams(),...r,_type:this._llmType(),_model:this._modelType()};return Object.entries(n).filter(([a,o])=>o!==void 0).map(([a,o])=>`${a}:${JSON.stringify(o)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}};var ef=class extends bt{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,r){let n=Pe(r);return this.func&&await this.func(e,n),this._callWithConfig(i=>Promise.resolve(i),e,n)}async*transform(e,r){let n=Pe(r),i,s=!0;for await(let a of this._transformStreamWithConfig(e,o=>o,n))if(yield a,s)if(i===void 0)i=a;else try{i=Lr(i,a)}catch(o){i=void 0,s=!1}this.func&&i!==void 0&&await this.func(i,n)}static assign(e){return new Qd(new Vo({steps:e}))}};function $C(t){return typeof(t==null?void 0:t.parse)=="function"}var Km=class t extends Jm{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]})}_separateRunnableConfigFromCallOptionsCompat(e){let[r,n]=super._separateRunnableConfigFromCallOptions(e);return n.signal=r.signal,[r,n]}async invoke(e,r){let n=t._convertInputToPromptValue(e);return(await this.generatePrompt([n],r,r==null?void 0:r.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,r,n){throw new Error("Not implemented.")}async*_streamIterator(e,r){var n;if(this._streamResponseChunks===t.prototype._streamResponseChunks)yield this.invoke(e,r);else{let s=t._convertInputToPromptValue(e).toChatMessages(),[a,o]=this._separateRunnableConfigFromCallOptionsCompat(r),l={...a.metadata,...this.getLsParams(o)},u=await Ir.configure(a.callbacks,this.callbacks,a.tags,this.tags,l,this.metadata,{verbose:this.verbose}),c={options:o,invocation_params:this==null?void 0:this.invocationParams(o),batch_size:1},h=await(u==null?void 0:u.handleChatModelStart(this.toJSON(),[s],a.runId,void 0,c,void 0,void 0,a.runName)),p;try{for await(let _ of this._streamResponseChunks(s,o,h==null?void 0:h[0])){if(_.message.id==null){let y=(n=h==null?void 0:h.at(0))==null?void 0:n.runId;y!=null&&_.message._updateId(`run-${y}`)}_.message.response_metadata={..._.generationInfo,..._.message.response_metadata},yield _.message,p?p=p.concat(_):p=_}}catch(_){throw await Promise.all((h!=null?h:[]).map(y=>y==null?void 0:y.handleLLMError(_))),_}await Promise.all((h!=null?h:[]).map(_=>_==null?void 0:_.handleLLMEnd({generations:[[p]]})))}}getLsParams(e){return{ls_model_type:"chat",ls_stop:e.stop}}async _generateUncached(e,r,n){var _,y;let i=e.map(S=>S.map(Io)),s={...n.metadata,...this.getLsParams(r)},a=await Ir.configure(n.callbacks,this.callbacks,n.tags,this.tags,s,this.metadata,{verbose:this.verbose}),o={options:r,invocation_params:this==null?void 0:this.invocationParams(r),batch_size:1},l=await(a==null?void 0:a.handleChatModelStart(this.toJSON(),i,n.runId,void 0,o,void 0,void 0,n.runName)),u=[],c=[];if(!!(l!=null&&l[0].handlers.find(S=>Nm(S)||Mm(S)))&&i.length===1&&this._streamResponseChunks!==t.prototype._streamResponseChunks)try{let S=await this._streamResponseChunks(i[0],r,l==null?void 0:l[0]),x;for await(let k of S){if(k.message.id==null){let T=(_=l==null?void 0:l.at(0))==null?void 0:_.runId;T!=null&&k.message._updateId(`run-${T}`)}x===void 0?x=k:x=Lr(x,k)}if(x===void 0)throw new Error("Received empty response from chat model call.");u.push([x]),await(l==null?void 0:l[0].handleLLMEnd({generations:u,llmOutput:{}}))}catch(S){throw await(l==null?void 0:l[0].handleLLMError(S)),S}else{let S=await Promise.allSettled(i.map((x,k)=>this._generate(x,{...r,promptIndex:k},l==null?void 0:l[k])));await Promise.all(S.map(async(x,k)=>{var T,P,O;if(x.status==="fulfilled"){let A=x.value;for(let R of A.generations){if(R.message.id==null){let F=(T=l==null?void 0:l.at(0))==null?void 0:T.runId;F!=null&&R.message._updateId(`run-${F}`)}R.message.response_metadata={...R.generationInfo,...R.message.response_metadata}}return A.generations.length===1&&(A.generations[0].message.response_metadata={...A.llmOutput,...A.generations[0].message.response_metadata}),u[k]=A.generations,c[k]=A.llmOutput,(P=l==null?void 0:l[k])==null?void 0:P.handleLLMEnd({generations:[A.generations],llmOutput:A.llmOutput})}else return await((O=l==null?void 0:l[k])==null?void 0:O.handleLLMError(x.reason)),Promise.reject(x.reason)}))}let p={generations:u,llmOutput:c.length?(y=this._combineLLMOutput)==null?void 0:y.call(this,...c):void 0};return Object.defineProperty(p,W0,{value:l?{runIds:l==null?void 0:l.map(S=>S.runId)}:void 0,configurable:!0}),p}async _generateCached({messages:e,cache:r,llmStringKey:n,parsedOptions:i,handledOptions:s}){let a=e.map(x=>x.map(Io)),o={...s.metadata,...this.getLsParams(i)},l=await Ir.configure(s.callbacks,this.callbacks,s.tags,this.tags,o,this.metadata,{verbose:this.verbose}),u={options:i,invocation_params:this==null?void 0:this.invocationParams(i),batch_size:1,cached:!0},c=await(l==null?void 0:l.handleChatModelStart(this.toJSON(),a,s.runId,void 0,u,void 0,void 0,s.runName)),h=[],_=(await Promise.allSettled(a.map(async(x,k)=>{let T=t._convertInputToPromptValue(x).toString(),P=await r.lookup(T,n);return P==null&&h.push(k),P}))).map((x,k)=>({result:x,runManager:c==null?void 0:c[k]})).filter(({result:x})=>x.status==="fulfilled"&&x.value!=null||x.status==="rejected"),y=[];await Promise.all(_.map(async({result:x,runManager:k},T)=>{if(x.status==="fulfilled"){let P=x.value;return y[T]=P,P.length&&await(k==null?void 0:k.handleLLMNewToken(P[0].text)),k==null?void 0:k.handleLLMEnd({generations:[P]})}else return await(k==null?void 0:k.handleLLMError(x.reason)),Promise.reject(x.reason)}));let S={generations:y,missingPromptIndices:h};return Object.defineProperty(S,W0,{value:c?{runIds:c==null?void 0:c.map(x=>x.runId)}:void 0,configurable:!0}),S}async generate(e,r,n){var _,y;let i;Array.isArray(r)?i={stop:r}:i=r;let s=e.map(S=>S.map(Io)),[a,o]=this._separateRunnableConfigFromCallOptionsCompat(i);if(a.callbacks=(_=a.callbacks)!=null?_:n,!this.cache)return this._generateUncached(s,o,a);let{cache:l}=this,u=this._getSerializedCacheKeyParametersForCall(o),{generations:c,missingPromptIndices:h}=await this._generateCached({messages:s,cache:l,llmStringKey:u,parsedOptions:o,handledOptions:a}),p={};if(h.length>0){let S=await this._generateUncached(h.map(x=>s[x]),o,a);await Promise.all(S.generations.map(async(x,k)=>{let T=h[k];c[T]=x;let P=t._convertInputToPromptValue(s[T]).toString();return l.update(P,u,x)})),p=(y=S.llmOutput)!=null?y:{}}return{generations:c,llmOutput:p}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,r,n){let i=e.map(s=>s.toChatMessages());return this.generate(i,r,n)}async call(e,r,n){return(await this.generate([e.map(Io)],r,n)).generations[0][0].message}async callPrompt(e,r,n){let i=e.toChatMessages();return this.call(i,r,n)}async predictMessages(e,r,n){return this.call(e,r,n)}async predict(e,r,n){let i=new bn(e),s=await this.call([i],r,n);if(typeof s.content!="string")throw new Error("Cannot use predict when output is not a string.");return s.content}withStructuredOutput(e,r){var S;if(typeof this.bindTools!="function")throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');let n=e,i=r==null?void 0:r.name,s=(S=n.description)!=null?S:"A function available to call.",a=r==null?void 0:r.method,o=r==null?void 0:r.includeRaw;if(a==="jsonMode")throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let l=i!=null?i:"extract",u;$C(n)?u=[{type:"function",function:{name:l,description:s,parameters:Rd(n)}}]:("name"in n&&(l=n.name),u=[{type:"function",function:{name:l,description:s,parameters:n}}]);let c=this.bindTools(u),h=Yo.from(x=>{if(!x.tool_calls||x.tool_calls.length===0)throw new Error("No tool calls found in the response.");let k=x.tool_calls.find(T=>T.name===l);if(!k)throw new Error(`No tool call found with name ${l}.`);return k.args});if(!o)return c.pipe(h).withConfig({runName:"StructuredOutput"});let p=ef.assign({parsed:(x,k)=>h.invoke(x.raw,k)}),_=ef.assign({parsed:()=>null}),y=p.withFallbacks({fallbacks:[_]});return $u.from([{raw:c},y]).withConfig({runName:"StructuredOutputRunnable"})}};function Zj(t){return["system","assistant","user"].includes(t.role)===!1&&console.warn(`Unknown message role: ${t.role}`),t.role}function zC(t){let e=t._getType();switch(e){case"ai":return"assistant";case"human":return"user";case"system":return"system";case"function":throw new Error("Function messages not supported");case"generic":{if(!Pu.isInstance(t))throw new Error("Invalid generic chat message");return Zj(t)}default:throw new Error(`Unknown message type: ${e}`)}}var Xm=class extends Km{static lc_name(){return"ChatAlibabaTongyi"}get callKeys(){return["stop","signal","options"]}get lc_secrets(){return{alibabaApiKey:"ALIBABA_API_KEY"}}get lc_aliases(){}constructor(e={}){var r,n,i,s,a;if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"alibabaApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"prefixMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topK",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"repetitionPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"seed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"enableSearch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.alibabaApiKey=(r=e==null?void 0:e.alibabaApiKey)!=null?r:vn("ALIBABA_API_KEY"),!this.alibabaApiKey)throw new Error("Ali API key not found");this.apiUrl="https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation",this.lc_serializable=!0,this.streaming=(n=e.streaming)!=null?n:!1,this.prefixMessages=(i=e.prefixMessages)!=null?i:[],this.temperature=e.temperature,this.topP=e.topP,this.topK=e.topK,this.seed=e.seed,this.maxTokens=e.maxTokens,this.repetitionPenalty=e.repetitionPenalty,this.enableSearch=e.enableSearch,this.modelName=(a=(s=e==null?void 0:e.model)!=null?s:e.modelName)!=null?a:"qwen-turbo",this.model=this.modelName}invocationParams(){let e={stream:this.streaming,temperature:this.temperature,top_p:this.topP,top_k:this.topK,seed:this.seed,max_tokens:this.maxTokens,result_format:"text",enable_search:this.enableSearch};return this.streaming?e.incremental_output=!0:e.repetition_penalty=this.repetitionPenalty,e}identifyingParams(){return{model:this.model,...this.invocationParams()}}async _generate(e,r,n){let i=this.invocationParams(),s=e.map(h=>({role:zC(h),content:h.content})),a=i.stream?await new Promise((h,p)=>{let _,y=!1,S=!1;this.completionWithRetry({model:this.model,parameters:i,input:{messages:s}},!0,r==null?void 0:r.signal,x=>{let k=JSON.parse(x.data);if(k!=null&&k.code){if(y)return;y=!0,p(new Error(k==null?void 0:k.message));return}let{text:T,finish_reason:P}=k.output;if(_?(_.output.text+=T,_.output.finish_reason=P,_.usage=k.usage):_=k,n==null||n.handleLLMNewToken(T!=null?T:""),P&&P!=="null"){if(S||y)return;S=!0,h(_)}}).catch(x=>{y||(y=!0,p(x))})}):await this.completionWithRetry({model:this.model,parameters:i,input:{messages:s}},!1,r==null?void 0:r.signal).then(h=>{if(h!=null&&h.code)throw new Error(h==null?void 0:h.message);return h}),{input_tokens:o=0,output_tokens:l=0,total_tokens:u=0}=a.usage,{text:c}=a.output;return{generations:[{text:c,message:new Ss(c)}],llmOutput:{tokenUsage:{promptTokens:o,completionTokens:l,totalTokens:u}}}}async completionWithRetry(e,r,n,i){let s=async()=>{var o;let a=await fetch(this.apiUrl,{method:"POST",headers:{...r?{Accept:"text/event-stream"}:{},Authorization:`Bearer ${this.alibabaApiKey}`,"Content-Type":"application/json"},body:JSON.stringify(e),signal:n});if(!r)return a.json();if(a.body){if(!((o=a.headers.get("content-type"))!=null&&o.startsWith("text/event-stream"))){i==null||i(new MessageEvent("message",{data:await a.text()}));return}let l=a.body.getReader(),u=new TextDecoder("utf-8"),c="",h=!0;for(;h;){let{done:p,value:_}=await l.read();if(p){h=!1;break}c+=u.decode(_);let y=!0;for(;y;){let S=c.indexOf(`
`);if(S===-1){y=!1;break}let x=c.slice(0,S);if(c=c.slice(S+1),x.startsWith("data:")){let k=new MessageEvent("message",{data:x.slice(5).trim()});i==null||i(k)}}}}};return this.caller.call(s)}async*_streamResponseChunks(e,r,n){let i={...this.invocationParams(),stream:!0,incremental_output:!0},s=e.map(o=>({role:zC(o),content:o.content})),a=await this.caller.call(async()=>this.createTongyiStream({model:this.model,parameters:i,input:{messages:s}},r==null?void 0:r.signal));for await(let o of a){let{text:l,finish_reason:u}=o.output;yield new Im({text:l,message:new Ai({content:l}),generationInfo:u==="stop"?{finish_reason:u,request_id:o.request_id,usage:o.usage}:void 0}),await(n==null?void 0:n.handleLLMNewToken(l))}}async*createTongyiStream(e,r){let n=await fetch(this.apiUrl,{method:"POST",headers:{Authorization:`Bearer ${this.alibabaApiKey}`,Accept:"text/event-stream","Content-Type":"application/json"},body:JSON.stringify(e),signal:r});if(!n.ok){let o,l=await n.text();try{let u=JSON.parse(l);o=new Error(`Tongyi call failed with status code ${n.status}: ${u.error}`)}catch(u){o=new Error(`Tongyi call failed with status code ${n.status}: ${l}`)}throw o.response=n,o}if(!n.body)throw new Error("Could not begin Tongyi stream. Please check the given URL and try again.");let i=Rt.fromReadableStream(n.body),s=new TextDecoder,a="";for await(let o of i){let u=(a+s.decode(o)).split(`
`);a=u.pop()||"";for(let c of u)if(c.startsWith("data:"))try{yield JSON.parse(c.slice(5).trim())}catch(h){console.warn(`Received a non-JSON parseable chunk: ${c}`)}}}_llmType(){return"alibaba_tongyi"}_combineLLMOutput(){return[]}};var Zv=require("obsidian"),KR=He(JR());var Wt={PluginAST:'<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 172 172" style=" fill:#000000;"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g fill="currentColor"><path d="M53.75,21.5c-8.27246,0 -14.86523,5.20703 -18.39257,12.09375c-8.39844,1.76368 -15.91504,6.84473 -19.31641,15.03321c-6.50879,15.5371 -16.04102,41.53027 -16.04102,64.24804c0,20.70215 16.92285,37.625 37.625,37.625c14.90723,0 27.75683,-8.86035 33.84571,-21.5h29.05859c6.08886,12.63965 18.93847,21.5 33.8457,21.5c20.70215,0 37.625,-16.92285 37.625,-37.625c0,-8.44043 -2.60351,-19.44239 -5.87891,-30.90625c-3.31739,-11.50585 -7.39062,-23.26367 -10.58203,-32.08203c-3.10742,-8.44043 -10.41406,-13.85742 -18.77051,-15.99902c-3.48534,-7.05469 -10.12011,-12.3877 -18.51855,-12.3877c-7.68457,0 -13.73145,4.61915 -17.51074,10.75h-29.47852c-3.77929,-6.13085 -9.82617,-10.75 -17.51074,-10.75zM53.75,32.25c4.70313,0 8.6084,3.02344 10.07813,7.18067l1.25977,3.56933h41.82422l1.25976,-3.56933c1.46973,-4.15723 5.375,-7.18067 10.07813,-7.18067c4.8291,0 8.77636,3.19141 10.16211,7.5166l1.00781,3.14942l3.27539,0.50391c5.87891,0.92382 10.70801,4.61914 12.76563,10.1621c2.81348,7.72656 6.21484,17.7627 9.19629,27.71484c-5.87891,-3.77929 -12.80761,-6.04687 -20.28223,-6.04687c-14.90723,0 -27.75683,8.86035 -33.8457,21.5h-29.05859c-6.08888,-12.63965 -18.93848,-21.5 -33.84571,-21.5c-8.18848,0 -15.74707,2.72949 -21.91992,7.22266c3.06543,-11.21192 7.01269,-21.87793 10.24609,-29.68848c2.22558,-5.375 7.22266,-8.86034 13.10156,-9.49023l3.44335,-0.37793l1.0918,-3.2754c1.42773,-4.2832 5.375,-7.39062 10.1621,-7.39062zM37.625,86c14.90723,0 26.875,11.96777 26.875,26.875c0,14.90723 -11.96777,26.875 -26.875,26.875c-14.90723,0 -26.875,-11.96777 -26.875,-26.875c0,-14.90723 11.96777,-26.875 26.875,-26.875zM134.375,86c14.90723,0 26.875,11.96777 26.875,26.875c0,14.90723 -11.96777,26.875 -26.875,26.875c-14.90723,0 -26.875,-11.96777 -26.875,-26.875c0,-14.90723 11.96777,-26.875 26.875,-26.875zM74.7041,107.5h22.59179c-0.25195,1.76368 -0.5459,3.52734 -0.5459,5.375c0,1.84766 0.29395,3.61133 0.5459,5.375h-22.59179c0.25195,-1.76367 0.5459,-3.52734 0.5459,-5.375c0,-1.84766 -0.29395,-3.61132 -0.5459,-5.375z"></path></g></g></svg>',PluginAST_STATUSBAR:'<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 172 172"><g fill="currentColor" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g id="svg-animate" fill="currentColor"><path d="M53.75,21.5c-8.27246,0 -14.86523,5.20703 -18.39257,12.09375c-8.39844,1.76368 -15.91504,6.84473 -19.31641,15.03321c-6.50879,15.5371 -16.04102,41.53027 -16.04102,64.24804c0,20.70215 16.92285,37.625 37.625,37.625c14.90723,0 27.75683,-8.86035 33.84571,-21.5h29.05859c6.08886,12.63965 18.93847,21.5 33.8457,21.5c20.70215,0 37.625,-16.92285 37.625,-37.625c0,-8.44043 -2.60351,-19.44239 -5.87891,-30.90625c-3.31739,-11.50585 -7.39062,-23.26367 -10.58203,-32.08203c-3.10742,-8.44043 -10.41406,-13.85742 -18.77051,-15.99902c-3.48534,-7.05469 -10.12011,-12.3877 -18.51855,-12.3877c-7.68457,0 -13.73145,4.61915 -17.51074,10.75h-29.47852c-3.77929,-6.13085 -9.82617,-10.75 -17.51074,-10.75zM53.75,32.25c4.70313,0 8.6084,3.02344 10.07813,7.18067l1.25977,3.56933h41.82422l1.25976,-3.56933c1.46973,-4.15723 5.375,-7.18067 10.07813,-7.18067c4.8291,0 8.77636,3.19141 10.16211,7.5166l1.00781,3.14942l3.27539,0.50391c5.87891,0.92382 10.70801,4.61914 12.76563,10.1621c2.81348,7.72656 6.21484,17.7627 9.19629,27.71484c-5.87891,-3.77929 -12.80761,-6.04687 -20.28223,-6.04687c-14.90723,0 -27.75683,8.86035 -33.8457,21.5h-29.05859c-6.08888,-12.63965 -18.93848,-21.5 -33.84571,-21.5c-8.18848,0 -15.74707,2.72949 -21.91992,7.22266c3.06543,-11.21192 7.01269,-21.87793 10.24609,-29.68848c2.22558,-5.375 7.22266,-8.86034 13.10156,-9.49023l3.44335,-0.37793l1.0918,-3.2754c1.42773,-4.2832 5.375,-7.39062 10.1621,-7.39062zM37.625,86c14.90723,0 26.875,11.96777 26.875,26.875c0,14.90723 -11.96777,26.875 -26.875,26.875c-14.90723,0 -26.875,-11.96777 -26.875,-26.875c0,-14.90723 11.96777,-26.875 26.875,-26.875zM134.375,86c14.90723,0 26.875,11.96777 26.875,26.875c0,14.90723 -11.96777,26.875 -26.875,26.875c-14.90723,0 -26.875,-11.96777 -26.875,-26.875c0,-14.90723 11.96777,-26.875 26.875,-26.875zM74.7041,107.5h22.59179c-0.25195,1.76368 -0.5459,3.52734 -0.5459,5.375c0,1.84766 0.29395,3.61133 0.5459,5.375h-22.59179c0.25195,-1.76367 0.5459,-3.52734 0.5459,-5.375c0,-1.84766 -0.29395,-3.61132 -0.5459,-5.375z"></path></g></g></svg>',PluginAST_PREVIEW:'<svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="100" height="100" viewBox="0 0 172 172"><g fill="blue" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="5,5" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><path d="M0,172v-172h172v172z" fill="none"></path><g id="svg-animate" fill="#2fcc70ee" fill-rule="nonzero"><path d="M53.75,21.5c-8.27246,0 -14.86523,5.20703 -18.39257,12.09375c-8.39844,1.76368 -15.91504,6.84473 -19.31641,15.03321c-6.50879,15.5371 -16.04102,41.53027 -16.04102,64.24804c0,20.70215 16.92285,37.625 37.625,37.625c14.90723,0 27.75683,-8.86035 33.84571,-21.5h29.05859c6.08886,12.63965 18.93847,21.5 33.8457,21.5c20.70215,0 37.625,-16.92285 37.625,-37.625c0,-8.44043 -2.60351,-19.44239 -5.87891,-30.90625c-3.31739,-11.50585 -7.39062,-23.26367 -10.58203,-32.08203c-3.10742,-8.44043 -10.41406,-13.85742 -18.77051,-15.99902c-3.48534,-7.05469 -10.12011,-12.3877 -18.51855,-12.3877c-7.68457,0 -13.73145,4.61915 -17.51074,10.75h-29.47852c-3.77929,-6.13085 -9.82617,-10.75 -17.51074,-10.75zM53.75,32.25c4.70313,0 8.6084,3.02344 10.07813,7.18067l1.25977,3.56933h41.82422l1.25976,-3.56933c1.46973,-4.15723 5.375,-7.18067 10.07813,-7.18067c4.8291,0 8.77636,3.19141 10.16211,7.5166l1.00781,3.14942l3.27539,0.50391c5.87891,0.92382 10.70801,4.61914 12.76563,10.1621c2.81348,7.72656 6.21484,17.7627 9.19629,27.71484c-5.87891,-3.77929 -12.80761,-6.04687 -20.28223,-6.04687c-14.90723,0 -27.75683,8.86035 -33.8457,21.5h-29.05859c-6.08888,-12.63965 -18.93848,-21.5 -33.84571,-21.5c-8.18848,0 -15.74707,2.72949 -21.91992,7.22266c3.06543,-11.21192 7.01269,-21.87793 10.24609,-29.68848c2.22558,-5.375 7.22266,-8.86034 13.10156,-9.49023l3.44335,-0.37793l1.0918,-3.2754c1.42773,-4.2832 5.375,-7.39062 10.1621,-7.39062zM37.625,86c14.90723,0 26.875,11.96777 26.875,26.875c0,14.90723 -11.96777,26.875 -26.875,26.875c-14.90723,0 -26.875,-11.96777 -26.875,-26.875c0,-14.90723 11.96777,-26.875 26.875,-26.875zM134.375,86c14.90723,0 26.875,11.96777 26.875,26.875c0,14.90723 -11.96777,26.875 -26.875,26.875c-14.90723,0 -26.875,-11.96777 -26.875,-26.875c0,-14.90723 11.96777,-26.875 26.875,-26.875zM74.7041,107.5h22.59179c-0.25195,1.76368 -0.5459,3.52734 -0.5459,5.375c0,1.84766 0.29395,3.61133 0.5459,5.375h-22.59179c0.25195,-1.76367 0.5459,-3.52734 0.5459,-5.375c0,-1.84766 -0.29395,-3.61132 -0.5459,-5.375z"></path></g></g></svg>',PluginAST_STAT:'<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bar-chart-3"><path d="M3 3v18h18"/><path stroke-width="3" stroke="green" d="M18 17V9"/><path stroke-width="3" stroke="red" d="M13 17V5"/><path stroke-width="3" stroke="goldenrod" d="M8 17v-3"/></svg>',SWITCH_ON_STATUS:'<svg width="99px" height="99px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill="green" fill-rule="nonzero"><path d="M18.25,3 C19.7687831,3 21,4.23121694 21,5.75 L21,18.25 C21,19.7687831 19.7687831,21 18.25,21 L5.75,21 C4.23121694,21 3,19.7687831 3,18.25 L3,5.75 C3,4.23121694 4.23121694,3 5.75,3 L18.25,3 Z M18.25,4.5 L5.75,4.5 C5.05964406,4.5 4.5,5.05964406 4.5,5.75 L4.5,18.25 C4.5,18.9403559 5.05964406,19.5 5.75,19.5 L18.25,19.5 C18.9403559,19.5 19.5,18.9403559 19.5,18.25 L19.5,5.75 C19.5,5.05964406 18.9403559,4.5 18.25,4.5 Z M10,14.4393398 L16.4696699,7.96966991 C16.7625631,7.6767767 17.2374369,7.6767767 17.5303301,7.96966991 C17.7965966,8.23593648 17.8208027,8.65260016 17.6029482,8.94621165 L17.5303301,9.03033009 L10.5303301,16.0303301 C10.2640635,16.2965966 9.84739984,16.3208027 9.55378835,16.1029482 L9.46966991,16.0303301 L6.46966991,13.0303301 C6.1767767,12.7374369 6.1767767,12.2625631 6.46966991,11.9696699 C6.73593648,11.7034034 7.15260016,11.6791973 7.44621165,11.8970518 L7.53033009,11.9696699 L10,14.4393398 L16.4696699,7.96966991 L10,14.4393398 Z"></path></g></g></svg>',SWITCH_OFF_STATUS:'<svg width="99px" height="99px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g fill="red" fill-rule="nonzero"><path d="M5.75,3 L18.25,3 C19.7687831,3 21,4.23121694 21,5.75 L21,18.25 C21,19.7687831 19.7687831,21 18.25,21 L5.75,21 C4.23121694,21 3,19.7687831 3,18.25 L3,5.75 C3,4.23121694 4.23121694,3 5.75,3 Z M5.75,4.5 C5.05964406,4.5 4.5,5.05964406 4.5,5.75 L4.5,18.25 C4.5,18.9403559 5.05964406,19.5 5.75,19.5 L18.25,19.5 C18.9403559,19.5 19.5,18.9403559 19.5,18.25 L19.5,5.75 C19.5,5.05964406 18.9403559,4.5 18.25,4.5 L5.75,4.5 Z"></path></g></g></svg>',PLUGIN_UPDATE_STATUS:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="48" height="48"><path fill='red' d="M2,7H0V3C0,1.35,1.35,0,3,0H7V2H3c-.55,0-1,.45-1,1V7Zm0,14v-4H0v4c0,1.65,1.35,3,3,3H7v-2H3c-.55,0-1-.45-1-1Zm20,0c0,.55-.45,1-1,1h-4v2h4c1.65,0,3-1.35,3-3v-4h-2v4Zm-4-10.08v-.92h-4.33l-1.18-4.5h-.97l-1.18,4.5H6v.92l3.32,1.85-1.3,4.08,.72,.54,3.27-2.53,3.26,2.52,.75-.52-1.33-4.03,3.3-1.91ZM17,0V8l7-4L17,0Z"/></svg>`,PLUGIN_UPDATED_STATUS:'<svg xmlns="http://www.w3.org/2000/svg" width="99px" height="99px" viewBox="0 -960 960 960" width="48"><path fill="green" d="M229.911-160Q201-160 180.5-180.589q-20.5-20.588-20.5-49.5Q160-259 180.589-279.5q20.588-20.5 49.5-20.5Q259-300 279.5-279.411q20.5 20.588 20.5 49.5Q300-201 279.411-180.5q-20.588 20.5-49.5 20.5Zm335 0Q536-160 515.5-180.589q-20.5-20.588-20.5-49.5Q495-259 515.589-279.5q20.588-20.5 49.5-20.5Q594-300 614.5-279.411q20.5 20.588 20.5 49.5Q635-201 614.411-180.5q-20.588 20.5-49.5 20.5Zm-170-165Q366-325 345.5-345.589q-20.5-20.588-20.5-49.5Q325-424 345.589-444.5q20.588-20.5 49.5-20.5Q424-465 444.5-444.411q20.5 20.588 20.5 49.5Q465-366 444.411-345.5q-20.588 20.5-49.5 20.5Zm335 0Q701-325 680.5-345.589q-20.5-20.588-20.5-49.5Q660-424 680.589-444.5q20.588-20.5 49.5-20.5Q759-465 779.5-444.411q20.5 20.588 20.5 49.5Q800-366 779.411-345.5q-20.588 20.5-49.5 20.5Zm-500-170Q201-495 180.5-515.589q-20.5-20.588-20.5-49.5Q160-594 180.589-614.5q20.588-20.5 49.5-20.5Q259-635 279.5-614.411q20.5 20.588 20.5 49.5Q300-536 279.411-515.5q-20.588 20.5-49.5 20.5Zm335 0Q536-495 515.5-515.589q-20.5-20.588-20.5-49.5Q495-594 515.589-614.5q20.588-20.5 49.5-20.5Q594-635 614.5-614.411q20.5 20.588 20.5 49.5Q635-536 614.411-515.5q-20.588 20.5-49.5 20.5Zm-170-165Q366-660 345.5-680.589q-20.5-20.588-20.5-49.5Q325-759 345.589-779.5q20.588-20.5 49.5-20.5Q424-800 444.5-779.411q20.5 20.588 20.5 49.5Q465-701 444.411-680.5q-20.588 20.5-49.5 20.5Zm335 0Q701-660 680.5-680.589q-20.5-20.588-20.5-49.5Q660-759 680.589-779.5q20.588-20.5 49.5-20.5Q759-800 779.5-779.411q20.5 20.588 20.5 49.5Q800-701 779.411-680.5q-20.588 20.5-49.5 20.5Z"/></svg>'},XR=()=>Math.floor(Math.random()*Date.now()).toString(6),QR=async t=>(await(0,Zv.requestUrl)({url:t})).arrayBuffer;var Jv=async(t,e)=>{let r=new KR.default;r=await r.loadAsync(t);let n=new RegExp(`.*${e}$`),i=r.file(n);return i?await i[0].async("string"):null},Yv=16,Gv=new TextEncoder,_9=new TextDecoder,b9=1e3,y9=Gv.encode("XHWnDAT6ehMVY2zD"),Hg="personal-assistant-plugin-api-token",e2="X-Api-Auth=36fb38ddc202fec",pc=class{async deriveKey(e){let r=Gv.encode(e),n=await crypto.subtle.importKey("raw",r,{name:"PBKDF2"},!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",hash:{name:"SHA-256"},iterations:b9,salt:y9},n,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async encryptToBytes(e,r){let n=await this.deriveKey(r),i=Gv.encode(e),s=crypto.getRandomValues(new Uint8Array(Yv)),a=new Uint8Array(await crypto.subtle.encrypt({name:"AES-GCM",iv:s},n,i)),o=new Uint8Array(s.byteLength+a.byteLength);return o.set(s,0),o.set(a,s.byteLength),o}convertToString(e){let r="";for(let n=0;n<e.length;n++)r+=String.fromCharCode(e[n]);return r}async encryptToBase64(e,r){let n=await this.encryptToBytes(e,r);return btoa(this.convertToString(n))}stringToArray(e){let r=[];for(let n=0;n<e.length;n++)r.push(e.charCodeAt(n));return new Uint8Array(r)}async decryptFromBytes(e,r){try{let n=e.slice(0,Yv),i=e.slice(Yv),s=await this.deriveKey(r),a=await crypto.subtle.decrypt({name:"AES-GCM",iv:n},s,i);return _9.decode(a)}catch(n){return null}}async decryptFromBase64(e,r){try{let n=this.stringToArray(atob(e));return await this.decryptFromBytes(n,r)}catch(n){return null}}};var Vg=class{constructor(e,r,n){this.query="";this.plugin=e,this.editor=r,this.query=this.editor.getValue(),this.view=n.editor.cm}async generate(){let e=document.createDocumentFragment(),r=e.createEl("div",{attr:{id:"ai-breahting-icon"}});r.addClass("personal-assistant-statusbar-breathing"),(0,ja.addIcon)("PluginAST_STATUSBAR",Wt.PluginAST_STATUSBAR),(0,ja.setIcon)(r,"PluginAST_STATUSBAR");let n=e.createEl("div",{attr:{id:"ai-breahting-icon"}});n.innerHTML='<span style="color: #fff;font-weight:bold;">AI is Thinking...</span>';let i=new ja.Notice(e,0),s=await this.qwenLLM(this.query);if(s.length<=0){i.hide(),new ja.Notice("AI is not available.");return}let{summary:a,keywords:o}=JSON.parse(s),l=`https://webhook.worker.edony.ink/unsplash?query=${encodeURI(o[0])}&${e2}`,c=await(await Sd(l)).text(),h=t2.StateEffect.define({map:(y,S)=>({from:S.mapPos(y.from),to:S.mapPos(y.to,1),id:y.id})}),p=yS(),_=this.view.state.doc.lineAt(0);this.view.dispatch({changes:[{from:_.from,insert:`

>[!personal-assistant]+ AI
> ![](${c})
> 
> ${a}

`}],effects:[h.of({from:_.to,to:_.to,id:p})]}),i.hide()}async qwenLLM(e){let r=this.plugin.settings.apiToken,i=await new pc().decryptFromBase64(r,Hg);if(!i)return new ja.Notice("Prepare LLM failed!",3e3),"";let s=new Xm({model:"qwen-max",temperature:.8,alibabaApiKey:i}),a=`\u4F60\u662F\u4E00\u4E2A\u4E13\u4E1A\u7F16\u8F91\uFF0C\u64C5\u957F\u6587\u5B57\u603B\u7ED3\u3001\u6982\u62EC\u7B49\u5DE5\u4F5C\u3002
**\u4F60\u7684\u4EFB\u52A1\u662F\uFF1A**
1. \u8DDF\u6839\u636E\u7ED9\u51FA\u7684\u6587\u5B57\u5185\u5BB9\u8FDB\u884C\u6982\u62EC\u603B\u7ED3
2. \u6839\u636E\u6587\u5B57\u5185\u5BB9\u63D0\u70BC\u6700\u80FD\u4F53\u73B0\u6587\u5B57\u5185\u5BB9\u7684\u5173\u952E\u8BCD

**\u8981\u6C42\uFF1A**
- \u6982\u62EC\u603B\u7ED3\u7684\u5B57\u6570\u8981\u6C42\u4E0D\u8D85\u8FC7120\u5B57
- \u63D0\u70BC\u7684\u5173\u952E\u8BCD\u6570\u76EE\u8981\u6C42\u662F2\u4E2A
- \u63D0\u70BC\u7684\u5173\u952E\u8BCD\u8981\u6C42\u662F\u82F1\u6587
- \u8F93\u51FA\u7ED3\u679C\u7684\u683C\u5F0F\u4E3A\uFF1A
{
  "summary": "...",
  "keywords": ["...", "..."]
}
`,o=new Mo(a),l=`**\u6587\u5B57\u5185\u5BB9\uFF1A**${e}`,u=new bn(l),c=[o,u],h=globalThis.fetch,p=globalThis.Headers,_=globalThis.Request,y=globalThis.Response;globalThis.fetch=Sd,globalThis.Headers=sr,globalThis.Request=bs,globalThis.Response=Pr;let S=await s.invoke(c);return globalThis.fetch=h,globalThis.Headers=p,globalThis.Request=_,globalThis.Response=y,this.plugin.log(S.content),S.content.toString()}};var rn=require("obsidian");var Lf=class extends rn.SuggestModal{constructor(r){super(r);this.enabledColor="green";this.disabledColor="red";this.obsidianPlugins=r.plugins}getSuggestions(r){"use strict";let n=[],i=[],s=[];for(let a of Object.keys(this.app.plugins.manifests)){let o={name:this.obsidianPlugins.manifests[a].name,id:this.obsidianPlugins.manifests[a].id,desc:this.obsidianPlugins.manifests[a].description,enbaled:!1};this.obsidianPlugins.enabledPlugins.has(this.obsidianPlugins.manifests[a].id)?(o.enbaled=!0,i.push(o)):(o.enbaled=!1,n.push(o)),s.push(o)}return s.filter(a=>a.name.toLowerCase().includes(r.toLowerCase()))}renderSuggestion(r,n){var a;let i=r.enbaled?this.enabledColor:this.disabledColor;(0,rn.addIcon)("SWITCH_ON_STATUS",Wt.SWITCH_ON_STATUS),(0,rn.addIcon)("SWITCH_OFF_STATUS",Wt.SWITCH_OFF_STATUS);let s=n.createEl("div",{attr:{style:`color: ${i}`}});r.enbaled?(0,rn.setIcon)(s,"SWITCH_ON_STATUS"):(0,rn.setIcon)(s,"SWITCH_OFF_STATUS"),(a=s.querySelector("svg"))==null||a.addClass("plugin-swith-on-off-svg"),s.createSpan({text:r.name,attr:{style:"color: var(--text-normal)"}}),n.createEl("small",{text:r.desc})}onChooseSuggestion(r,n){r.enbaled?this.obsidianPlugins.disablePluginAndSave(r.id)?new rn.Notice(`disable plugin[${r.name}] successfully`):new rn.Notice(`disable plugin[${r.name}] failed, try it again`):this.obsidianPlugins.enablePluginAndSave(r.id)?new rn.Notice(`enable plugin[${r.name}] successfully`):new rn.Notice(`enable plugin[${r.name}] failed, try it again`)}};var Re=require("obsidian");var ex=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},tx=function(){function t(e,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),Yg=function(){function t(e,r){var n=[],i=!0,s=!1,a=void 0;try{for(var o=e[Symbol.iterator](),l;!(i=(l=o.next()).done)&&(n.push(l.value),!(r&&n.length===r));i=!0);}catch(u){s=!0,a=u}finally{try{!i&&o.return&&o.return()}finally{if(s)throw a}}return n}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();String.prototype.startsWith=String.prototype.startsWith||function(t){return this.indexOf(t)===0};String.prototype.padStart=String.prototype.padStart||function(t,e){for(var r=this;r.length<t;)r=e+r;return r};var w9={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function r2(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=e>0?t.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):t.toString();return r||"0"}var v9=function(){function t(e,r,n,i){ex(this,t);var s=this;function a(l){if(l.startsWith("hsl")){var u=l.match(/([\-\d\.e]+)/g).map(Number),c=Yg(u,4),h=c[0],p=c[1],_=c[2],y=c[3];y===void 0&&(y=1),h/=360,p/=100,_/=100,s.hsla=[h,p,_,y]}else if(l.startsWith("rgb")){var S=l.match(/([\-\d\.e]+)/g).map(Number),x=Yg(S,4),k=x[0],T=x[1],P=x[2],O=x[3];O===void 0&&(O=1),s.rgba=[k,T,P,O]}else l.startsWith("#")?s.rgba=t.hexToRgb(l):s.rgba=t.nameToRgb(l)||t.hexToRgb(l)}if(e!==void 0)if(Array.isArray(e))this.rgba=e;else if(n===void 0){var o=e&&""+e;o&&a(o.toLowerCase())}else this.rgba=[e,r,n,i===void 0?1:i]}return tx(t,[{key:"printRGB",value:function(r){var n=r?this.rgba:this.rgba.slice(0,3),i=n.map(function(s,a){return r2(s,a===3?3:0)});return r?"rgba("+i+")":"rgb("+i+")"}},{key:"printHSL",value:function(r){var n=[360,100,100,1],i=["","%","%",""],s=r?this.hsla:this.hsla.slice(0,3),a=s.map(function(o,l){return r2(o*n[l],l===3?3:1)+i[l]});return r?"hsla("+a+")":"hsl("+a+")"}},{key:"printHex",value:function(r){var n=this.hex;return r?n:n.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=t.hslToRgb(this._hsla)},set:function(r){r.length===3&&(r[3]=1),this._rgba=r,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=t.rgbToHsl(this._rgba)},set:function(r){r.length===3&&(r[3]=1),this._hsla=r,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){var r=this.rgba,n=r.map(function(i,s){return s<3?i.toString(16):Math.round(i*255).toString(16)});return"#"+n.map(function(i){return i.padStart(2,"0")}).join("")},set:function(r){this.rgba=t.hexToRgb(r)}}],[{key:"hexToRgb",value:function(r){var n=(r.startsWith("#")?r.slice(1):r).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!n.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+r);var i=n.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map(function(s){return parseInt(s,16)});return i[3]=i[3]/255,i}},{key:"nameToRgb",value:function(r){var n=r.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),i=w9[n];return i===void 0?i:t.hexToRgb(i.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(r){var n=Yg(r,4),i=n[0],s=n[1],a=n[2],o=n[3];i/=255,s/=255,a/=255;var l=Math.max(i,s,a),u=Math.min(i,s,a),c=void 0,h=void 0,p=(l+u)/2;if(l===u)c=h=0;else{var _=l-u;switch(h=p>.5?_/(2-l-u):_/(l+u),l){case i:c=(s-a)/_+(s<a?6:0);break;case s:c=(a-i)/_+2;break;case a:c=(i-s)/_+4;break}c/=6}return[c,h,p,o]}},{key:"hslToRgb",value:function(r){var n=Yg(r,4),i=n[0],s=n[1],a=n[2],o=n[3],l=void 0,u=void 0,c=void 0;if(s===0)l=u=c=a;else{var h=function(x,k,T){return T<0&&(T+=1),T>1&&(T-=1),T<.16666666666666666?x+(k-x)*6*T:T<.5?k:T<.6666666666666666?x+(k-x)*(.6666666666666666-T)*6:x},p=a<.5?a*(1+s):a+s-a*s,_=2*a-p;l=h(_,p,i+1/3),u=h(_,p,i),c=h(_,p,i-1/3)}var y=[l*255,u*255,c*255].map(Math.round);return y[3]=o,y}}]),t}(),x9=function(){function t(){ex(this,t),this._events=[]}return tx(t,[{key:"add",value:function(r,n,i){r.addEventListener(n,i,!1),this._events.push({target:r,type:n,handler:i})}},{key:"remove",value:function(r,n,i){this._events=this._events.filter(function(s){var a=!0;return r&&r!==s.target&&(a=!1),n&&n!==s.type&&(a=!1),i&&i!==s.handler&&(a=!1),a&&t._doRemove(s.target,s.type,s.handler),!a})}},{key:"destroy",value:function(){this._events.forEach(function(r){return t._doRemove(r.target,r.type,r.handler)}),this._events=[]}}],[{key:"_doRemove",value:function(r,n,i){r.removeEventListener(n,i,!1)}}]),t}();function S9(t){var e=document.createElement("div");return e.innerHTML=t,e.firstElementChild}function Kv(t,e,r){var n=!1;function i(l,u,c){return Math.max(u,Math.min(l,c))}function s(l,u,c){if(c&&(n=!0),!!n){l.preventDefault();var h=e.getBoundingClientRect(),p=h.width,_=h.height,y=u.clientX,S=u.clientY,x=i(y-h.left,0,p),k=i(S-h.top,0,_);r(x/p,k/_)}}function a(l,u){var c=l.buttons===void 0?l.which:l.buttons;c===1?s(l,l,u):n=!1}function o(l,u){l.touches.length===1?s(l,l.touches[0],u):n=!1}t.add(e,"mousedown",function(l){a(l,!0)}),t.add(e,"touchstart",function(l){o(l,!0)}),t.add(window,"mousemove",a),t.add(e,"touchmove",o),t.add(window,"mouseup",function(l){n=!1}),t.add(e,"touchend",function(l){n=!1}),t.add(e,"touchcancel",function(l){n=!1})}var k9=`linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,
                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em`,E9=360,n2="keydown",Gg="mousedown",Xv="focusin";function ji(t,e){return(e||document).querySelector(t)}function i2(t){t.preventDefault(),t.stopPropagation()}function Qv(t,e,r,n,i){t.add(e,n2,function(s){r.indexOf(s.key)>=0&&(i&&i2(s),n(s))})}var rx=function(){function t(e){ex(this,t),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1,defaultColor:"#0cf"},this._events=new x9,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return tx(t,[{key:"setOptions",value:function(r){var n=this;if(!r)return;var i=this.settings;function s(u,c,h){for(var p in u)h&&h.indexOf(p)>=0||(c[p]=u[p])}if(r instanceof HTMLElement)i.parent=r;else{i.parent&&r.parent&&i.parent!==r.parent&&(this._events.remove(i.parent),this._popupInited=!1),s(r,i),r.onChange&&(this.onChange=r.onChange),r.onDone&&(this.onDone=r.onDone),r.onOpen&&(this.onOpen=r.onOpen),r.onClose&&(this.onClose=r.onClose);var a=r.color||r.colour;a&&this._setColor(a)}var o=i.parent;if(o&&i.popup&&!this._popupInited){var l=function(c){return n.openHandler(c)};this._events.add(o,"click",l),Qv(this._events,o,[" ","Spacebar","Enter"],l),this._popupInited=!0}else r.parent&&!i.popup&&this.show()}},{key:"openHandler",value:function(r){if(this.show()){r&&r.preventDefault(),this.settings.parent.style.pointerEvents="none";var n=r&&r.type===n2?this._domEdit:this.domElement;setTimeout(function(){return n.focus()},100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(r){var n=r&&r.type,i=!1;if(!r)i=!0;else if(n===Gg||n===Xv){var s=(this.__containedEvent||0)+100;r.timeStamp>s&&(i=!0)}else i2(r),i=!0;i&&this.hide()&&(this.settings.parent.style.pointerEvents="",n!==Gg&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(r,n){this.closeHandler(),this.setOptions(r),n&&this.openHandler()}},{key:"setColor",value:function(r,n){this._setColor(r,{silent:n})}},{key:"_setColor",value:function(r,n){if(typeof r=="string"&&(r=r.trim()),!!r){n=n||{};var i=void 0;try{i=new v9(r)}catch(a){if(n.failSilently)return;throw a}if(!this.settings.alpha){var s=i.hsla;s[3]=1,i.hsla=s}this.colour=this.color=i,this._setHSLA(null,null,null,null,n)}}},{key:"setColour",value:function(r,n){this.setColor(r,n)}},{key:"show",value:function(){var r=this.settings.parent;if(!r)return!1;if(this.domElement){var n=this._toggleDOM(!0);return this._setPosition(),n}var i=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',s=S9(i);return this.domElement=s,this._domH=ji(".picker_hue",s),this._domSL=ji(".picker_sl",s),this._domA=ji(".picker_alpha",s),this._domEdit=ji(".picker_editor input",s),this._domSample=ji(".picker_sample",s),this._domOkay=ji(".picker_done button",s),this._domCancel=ji(".picker_cancel button",s),s.classList.add("layout_"+this.settings.layout),this.settings.alpha||s.classList.add("no_alpha"),this.settings.editor||s.classList.add("no_editor"),this.settings.cancelButton||s.classList.add("no_cancel"),this._ifPopup(function(){return s.classList.add("popup")}),this._setPosition(),this.colour?this._updateUI():this._setColor(this.settings.defaultColor),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var r=this,n=this,i=this.domElement,s=this._events;function a(u,c,h){s.add(u,c,h)}a(i,"click",function(u){return u.preventDefault()}),Kv(s,this._domH,function(u,c){return n._setHSLA(u)}),Kv(s,this._domSL,function(u,c){return n._setHSLA(null,u,1-c)}),this.settings.alpha&&Kv(s,this._domA,function(u,c){return n._setHSLA(null,null,null,1-c)});var o=this._domEdit;a(o,"input",function(u){n._setColor(this.value,{fromEditor:!0,failSilently:!0})}),a(o,"focus",function(u){var c=this;c.selectionStart===c.selectionEnd&&c.select()}),this._ifPopup(function(){var u=function(p){return r.closeHandler(p)};a(window,Gg,u),a(window,Xv,u),Qv(s,i,["Esc","Escape"],u);var c=function(p){r.__containedEvent=p.timeStamp};a(i,Gg,c),a(i,Xv,c),a(r._domCancel,"click",u)});var l=function(c){r._ifPopup(function(){return r.closeHandler(c)}),r.onDone&&r.onDone(r.colour)};a(this._domOkay,"click",l),Qv(s,i,["Enter"],l)}},{key:"_setPosition",value:function(){var r=this.settings.parent,n=this.domElement;r!==n.parentNode&&r.appendChild(n),this._ifPopup(function(i){getComputedStyle(r).position==="static"&&(r.style.position="relative");var s=i===!0?"popup_right":"popup_"+i;["popup_top","popup_bottom","popup_left","popup_right"].forEach(function(a){a===s?n.classList.add(a):n.classList.remove(a)}),n.classList.add(s)})}},{key:"_setHSLA",value:function(r,n,i,s,a){a=a||{};var o=this.colour,l=o.hsla;[r,n,i,s].forEach(function(u,c){(u||u===0)&&(l[c]=u)}),o.hsla=l,this._updateUI(a),this.onChange&&!a.silent&&this.onChange(o)}},{key:"_updateUI",value:function(r){if(!this.domElement)return;r=r||{};var n=this.colour,i=n.hsla,s="hsl("+i[0]*E9+", 100%, 50%)",a=n.hslString,o=n.hslaString,l=this._domH,u=this._domSL,c=this._domA,h=ji(".picker_selector",l),p=ji(".picker_selector",u),_=ji(".picker_selector",c);function y(R,F,I){F.style.left=I*100+"%"}function S(R,F,I){F.style.top=I*100+"%"}y(l,h,i[0]),this._domSL.style.backgroundColor=this._domH.style.color=s,y(u,p,i[1]),S(u,p,1-i[2]),u.style.color=a,S(c,_,1-i[3]);var x=a,k=x.replace("hsl","hsla").replace(")",", 0)"),T="linear-gradient("+[x,k]+")";if(this._domA.style.background=T+", "+k9,!r.fromEditor){var P=this.settings.editorFormat,O=this.settings.alpha,A=void 0;switch(P){case"rgb":A=n.printRGB(O);break;case"hsl":A=n.printHSL(O);break;default:A=n.printHex(O)}this._domEdit.value=A}this._domSample.style.color=o}},{key:"_ifPopup",value:function(r,n){this.settings.parent&&this.settings.popup?r&&r(this.settings.popup):n&&n()}},{key:"_toggleDOM",value:function(r){var n=this.domElement;if(!n)return!1;var i=r?"":"none",s=n.style.display!==i;return s&&(n.style.display=i),s}}]),t}();Zg=document.createElement("style"),Zg.textContent='.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:"";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:"";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:"";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:"";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}',document.documentElement.firstElementChild.appendChild(Zg),rx.StyleElement=Zg;var Zg;var H_=require("obsidian");function ee(){}function mr(t,e){for(let r in e)t[r]=e[r];return t}function s2(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function nx(t){return t()}function Jg(){return Object.create(null)}function Bi(t){t.forEach(nx)}function Kg(t){return typeof t=="function"}function gr(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function a2(t){return Object.keys(t).length===0}function nn(t){let e={};for(let r in t)r[0]!=="$"&&(e[r]=t[r]);return e}var ix=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;var Xg=class t{constructor(e){V(this,"_listeners","WeakMap"in ix?new WeakMap:void 0);V(this,"_observer");V(this,"options");this.options=e}observe(e,r){return this._listeners.set(e,r),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){var e;return(e=this._observer)!=null?e:this._observer=new ResizeObserver(r=>{var n;for(let i of r)t.entries.set(i.target,i),(n=this._listeners.get(i.target))==null||n(i)})}};Xg.entries="WeakMap"in ix?new WeakMap:void 0;var o2=!1;function l2(){o2=!0}function u2(){o2=!1}function ul(t,e){t.appendChild(e)}function Qg(t,e,r){let n=c2(t);if(!n.getElementById(e)){let i=_r("style");i.id=e,i.textContent=r,A9(n,i)}}function c2(t){if(!t)return document;let e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function A9(t,e){return ul(t.head||t,e),e.sheet}function vt(t,e,r){t.insertBefore(e,r||null)}function ut(t){t.parentNode&&t.parentNode.removeChild(t)}function e_(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function _r(t){return document.createElement(t)}function d2(t){return document.createTextNode(t)}function cl(){return d2(" ")}function t_(){return d2("")}function sx(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function xt(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}var P9=["width","height"];function f2(t,e){let r=Object.getOwnPropertyDescriptors(t.__proto__);for(let n in e)e[n]==null?t.removeAttribute(n):n==="style"?t.style.cssText=e[n]:n==="__value"?t.value=t[n]=e[n]:r[n]&&r[n].set&&P9.indexOf(n)===-1?t[n]=e[n]:xt(t,n,e[n])}function h2(t){return Array.from(t.childNodes)}function r_(t,e,r,n){r==null?t.style.removeProperty(e):t.style.setProperty(e,r,n?"important":"")}function p2(t){let e={};return t.childNodes.forEach(r=>{e[r.slot||"default"]=!0}),e}var $i;function sn(t){$i=t}function Ff(){if(!$i)throw new Error("Function called outside component initialization");return $i}function Nf(t){Ff().$$.on_mount.push(t)}function ax(t){Ff().$$.after_update.push(t)}function jf(t){Ff().$$.on_destroy.push(t)}function g2(t,e){let r=t.$$.callbacks[e.type];r&&r.slice().forEach(n=>n.call(this,e))}var dl=[];var Nr=[],gc=[],lx=[],_2=Promise.resolve(),ux=!1;function cx(){ux||(ux=!0,_2.then($f))}function dx(){return cx(),_2}function Bf(t){gc.push(t)}function $s(t){lx.push(t)}var ox=new Set,mc=0;function $f(){if(mc!==0)return;let t=$i;do{try{for(;mc<dl.length;){let e=dl[mc];mc++,sn(e),L9(e.$$)}}catch(e){throw dl.length=0,mc=0,e}for(sn(null),dl.length=0,mc=0;Nr.length;)Nr.pop()();for(let e=0;e<gc.length;e+=1){let r=gc[e];ox.has(r)||(ox.add(r),r())}gc.length=0}while(dl.length);for(;lx.length;)lx.pop()();ux=!1,ox.clear(),sn(t)}function L9(t){if(t.fragment!==null){t.update(),Bi(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Bf)}}function b2(t){let e=[],r=[];gc.forEach(n=>t.indexOf(n)===-1?e.push(n):r.push(n)),r.forEach(n=>n()),gc=e}var n_=new Set,fl;function y2(){fl={r:0,c:[],p:fl}}function w2(){fl.r||Bi(fl.c),fl=fl.p}function It(t,e){t&&t.i&&(n_.delete(t),t.i(e))}function tr(t,e,r,n){if(t&&t.o){if(n_.has(t))return;n_.add(t),fl.c.push(()=>{n_.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}function ui(t,e){let r=e.token={};function n(i,s,a,o){if(e.token!==r)return;e.resolved=o;let l=e.ctx;a!==void 0&&(l=l.slice(),l[a]=o);let u=i&&(e.current=i)(l),c=!1;e.block&&(e.blocks?e.blocks.forEach((h,p)=>{p!==s&&h&&(y2(),tr(h,1,1,()=>{e.blocks[p]===h&&(e.blocks[p]=null)}),w2())}):e.block.d(1),u.c(),It(u,1),u.m(e.mount(),e.anchor),c=!0),e.block=u,e.blocks&&(e.blocks[s]=u),c&&$f()}if(s2(t)){let i=Ff();if(t.then(s=>{sn(i),n(e.then,1,e.value,s),sn(null)},s=>{if(sn(i),n(e.catch,2,e.error,s),sn(null),!e.hasCatch)throw s}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function fx(t,e,r){let n=e.slice(),{resolved:i}=t;t.current===t.then&&(n[t.value]=i),t.current===t.catch&&(n[t.error]=i),t.block.p(n,r)}function zs(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Us(t,e){let r={},n={},i={$$scope:1},s=t.length;for(;s--;){let a=t[s],o=e[s];if(o){for(let l in a)l in o||(n[l]=1);for(let l in o)i[l]||(r[l]=o[l],i[l]=1);t[s]=o}else for(let l in a)i[l]=1}for(let a in n)a in r||(r[a]=void 0);return r}function Ws(t){return typeof t=="object"&&t!==null?t:{}}var F9=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],N9=new Set([...F9]);function qs(t,e,r){let n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=r,r(t.$$.ctx[n]))}function Dn(t){t&&t.c()}function an(t,e,r){let{fragment:n,after_update:i}=t.$$;n&&n.m(e,r),Bf(()=>{let s=t.$$.on_mount.map(nx).filter(Kg);t.$$.on_destroy?t.$$.on_destroy.push(...s):Bi(s),t.$$.on_mount=[]}),i.forEach(Bf)}function on(t,e){let r=t.$$;r.fragment!==null&&(b2(r.after_update),Bi(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function B9(t,e){t.$$.dirty[0]===-1&&(dl.push(t),cx(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function br(t,e,r,n,i,s,a=null,o=[-1]){let l=$i;sn(t);let u=t.$$={fragment:null,ctx:[],props:s,update:ee,not_equal:i,bound:Jg(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Jg(),dirty:o,skip_bound:!1,root:e.target||l.$$.root};a&&a(u.root);let c=!1;if(u.ctx=r?r(t,e.props||{},(h,p,..._)=>{let y=_.length?_[0]:p;return u.ctx&&i(u.ctx[h],u.ctx[h]=y)&&(!u.skip_bound&&u.bound[h]&&u.bound[h](y),c&&B9(t,h)),p}):[],u.update(),c=!0,Bi(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){l2();let h=h2(e.target);u.fragment&&u.fragment.l(h),h.forEach(ut)}else u.fragment&&u.fragment.c();e.intro&&It(t.$$.fragment),an(t,e.target,e.anchor),u2(),$f()}sn(l)}var $9;typeof HTMLElement=="function"&&($9=class extends HTMLElement{constructor(e,r,n){super();V(this,"$$ctor");V(this,"$$s");V(this,"$$c");V(this,"$$cn",!1);V(this,"$$d",{});V(this,"$$r",!1);V(this,"$$p_d",{});V(this,"$$l",{});V(this,"$$l_u",new Map);this.$$ctor=e,this.$$s=r,n&&this.attachShadow({mode:"open"})}addEventListener(e,r,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(r),this.$$c){let i=this.$$c.$on(e,r);this.$$l_u.set(r,i)}super.addEventListener(e,r,n)}removeEventListener(e,r,n){if(super.removeEventListener(e,r,n),this.$$c){let i=this.$$l_u.get(r);i&&(i(),this.$$l_u.delete(r))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(s){return()=>{let a;return{c:function(){a=_r("slot"),s!=="default"&&xt(a,"name",s)},m:function(u,c){vt(u,a,c)},d:function(u){u&&ut(a)}}}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let r={},n=p2(this);for(let s of this.$$s)s in n&&(r[s]=[e(s)]);for(let s of this.attributes){let a=this.$$g_p(s.name);a in this.$$d||(this.$$d[a]=hx(a,s.value,this.$$p_d,"toProp"))}for(let s in this.$$p_d)!(s in this.$$d)&&this[s]!==void 0&&(this.$$d[s]=this[s],delete this[s]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:r,$$scope:{ctx:[]}}});let i=()=>{this.$$r=!0;for(let s in this.$$p_d)if(this.$$d[s]=this.$$c.$$.ctx[this.$$c.$$.props[s]],this.$$p_d[s].reflect){let a=hx(s,this.$$d[s],this.$$p_d,"toAttribute");a==null?this.removeAttribute(this.$$p_d[s].attribute||s):this.setAttribute(this.$$p_d[s].attribute||s,a)}this.$$r=!1};this.$$c.$$.after_update.push(i),i();for(let s in this.$$l)for(let a of this.$$l[s]){let o=this.$$c.$on(s,a);this.$$l_u.set(a,o)}this.$$l={}}}attributeChangedCallback(e,r,n){var i;this.$$r||(e=this.$$g_p(e),this.$$d[e]=hx(e,n,this.$$p_d,"toProp"),(i=this.$$c)==null||i.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(r=>this.$$p_d[r].attribute===e||!this.$$p_d[r].attribute&&r.toLowerCase()===e)||e}});function hx(t,e,r,n){var s;let i=(s=r[t])==null?void 0:s.type;if(e=i==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!r[t])return e;if(n==="toAttribute")switch(i){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e==null?null:e;default:return e}else switch(i){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}var Lt=class{constructor(){V(this,"$$");V(this,"$$set")}$destroy(){on(this,1),this.$destroy=ee}$on(e,r){if(!Kg(r))return ee;let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!a2(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var v2="4";typeof window!="undefined"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(v2);function Wf(t){return t+.5|0}var Ba=(t,e,r)=>Math.max(Math.min(t,r),e);function zf(t){return Ba(Wf(t*2.55),0,255)}function $a(t){return Ba(Wf(t*255),0,255)}function Hs(t){return Ba(Wf(t/2.55)/100,0,1)}function x2(t){return Ba(Wf(t*100),0,100)}var Mn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},mx=[..."0123456789ABCDEF"],z9=t=>mx[t&15],U9=t=>mx[(t&240)>>4]+mx[t&15],i_=t=>(t&240)>>4===(t&15),W9=t=>i_(t.r)&&i_(t.g)&&i_(t.b)&&i_(t.a);function q9(t){var e=t.length,r;return t[0]==="#"&&(e===4||e===5?r={r:255&Mn[t[1]]*17,g:255&Mn[t[2]]*17,b:255&Mn[t[3]]*17,a:e===5?Mn[t[4]]*17:255}:(e===7||e===9)&&(r={r:Mn[t[1]]<<4|Mn[t[2]],g:Mn[t[3]]<<4|Mn[t[4]],b:Mn[t[5]]<<4|Mn[t[6]],a:e===9?Mn[t[7]]<<4|Mn[t[8]]:255})),r}var H9=(t,e)=>t<255?e(t):"";function V9(t){var e=W9(t)?z9:U9;return t?"#"+e(t.r)+e(t.g)+e(t.b)+H9(t.a,e):void 0}var Y9=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function T2(t,e,r){let n=e*Math.min(r,1-r),i=(s,a=(s+t/30)%12)=>r-n*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function G9(t,e,r){let n=(i,s=(i+t/60)%6)=>r-r*e*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function Z9(t,e,r){let n=T2(t,1,.5),i;for(e+r>1&&(i=1/(e+r),e*=i,r*=i),i=0;i<3;i++)n[i]*=1-e-r,n[i]+=e;return n}function J9(t,e,r,n,i){return t===i?(e-r)/n+(e<r?6:0):e===i?(r-t)/n+2:(t-e)/n+4}function gx(t){let r=t.r/255,n=t.g/255,i=t.b/255,s=Math.max(r,n,i),a=Math.min(r,n,i),o=(s+a)/2,l,u,c;return s!==a&&(c=s-a,u=o>.5?c/(2-s-a):c/(s+a),l=J9(r,n,i,c,s),l=l*60+.5),[l|0,u||0,o]}function _x(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map($a)}function bx(t,e,r){return _x(T2,t,e,r)}function K9(t,e,r){return _x(Z9,t,e,r)}function X9(t,e,r){return _x(G9,t,e,r)}function C2(t){return(t%360+360)%360}function Q9(t){let e=Y9.exec(t),r=255,n;if(!e)return;e[5]!==n&&(r=e[6]?zf(+e[5]):$a(+e[5]));let i=C2(+e[2]),s=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?n=K9(i,s,a):e[1]==="hsv"?n=X9(i,s,a):n=bx(i,s,a),{r:n[0],g:n[1],b:n[2],a:r}}function ez(t,e){var r=gx(t);r[0]=C2(r[0]+e),r=bx(r),t.r=r[0],t.g=r[1],t.b=r[2]}function tz(t){if(!t)return;let e=gx(t),r=e[0],n=x2(e[1]),i=x2(e[2]);return t.a<255?`hsla(${r}, ${n}%, ${i}%, ${Hs(t.a)})`:`hsl(${r}, ${n}%, ${i}%)`}var S2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},k2={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function rz(){let t={},e=Object.keys(k2),r=Object.keys(S2),n,i,s,a,o;for(n=0;n<e.length;n++){for(a=o=e[n],i=0;i<r.length;i++)s=r[i],o=o.replace(s,S2[s]);s=parseInt(k2[a],16),t[o]=[s>>16&255,s>>8&255,s&255]}return t}var s_;function nz(t){s_||(s_=rz(),s_.transparent=[0,0,0,0]);let e=s_[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var iz=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function sz(t){let e=iz.exec(t),r=255,n,i,s;if(e){if(e[7]!==n){let a=+e[7];r=e[8]?zf(a):Ba(a*255,0,255)}return n=+e[1],i=+e[3],s=+e[5],n=255&(e[2]?zf(n):Ba(n,0,255)),i=255&(e[4]?zf(i):Ba(i,0,255)),s=255&(e[6]?zf(s):Ba(s,0,255)),{r:n,g:i,b:s,a:r}}}function az(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Hs(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}var px=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,_c=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function oz(t,e,r){let n=_c(Hs(t.r)),i=_c(Hs(t.g)),s=_c(Hs(t.b));return{r:$a(px(n+r*(_c(Hs(e.r))-n))),g:$a(px(i+r*(_c(Hs(e.g))-i))),b:$a(px(s+r*(_c(Hs(e.b))-s))),a:t.a+r*(e.a-t.a)}}function a_(t,e,r){if(t){let n=gx(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,e===0?360:1)),n=bx(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function A2(t,e){return t&&Object.assign(e||{},t)}function E2(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=$a(t[3]))):(e=A2(t,{r:0,g:0,b:0,a:1}),e.a=$a(e.a)),e}function lz(t){return t.charAt(0)==="r"?sz(t):Q9(t)}var Uf=class t{constructor(e){if(e instanceof t)return e;let r=typeof e,n;r==="object"?n=E2(e):r==="string"&&(n=q9(e)||nz(e)||lz(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=A2(this._rgb);return e&&(e.a=Hs(e.a)),e}set rgb(e){this._rgb=E2(e)}rgbString(){return this._valid?az(this._rgb):void 0}hexString(){return this._valid?V9(this._rgb):void 0}hslString(){return this._valid?tz(this._rgb):void 0}mix(e,r){if(e){let n=this.rgb,i=e.rgb,s,a=r===s?.5:r,o=2*a-1,l=n.a-i.a,u=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;s=1-u,n.r=255&u*n.r+s*i.r+.5,n.g=255&u*n.g+s*i.g+.5,n.b=255&u*n.b+s*i.b+.5,n.a=a*n.a+(1-a)*i.a,this.rgb=n}return this}interpolate(e,r){return e&&(this._rgb=oz(this._rgb,e._rgb,r)),this}clone(){return new t(this.rgb)}alpha(e){return this._rgb.a=$a(e),this}clearer(e){let r=this._rgb;return r.a*=1-e,this}greyscale(){let e=this._rgb,r=Wf(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=r,this}opaquer(e){let r=this._rgb;return r.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return a_(this._rgb,2,e),this}darken(e){return a_(this._rgb,2,-e),this}saturate(e){return a_(this._rgb,1,e),this}desaturate(e){return a_(this._rgb,1,-e),this}rotate(e){return ez(this._rgb,e),this}};function Ui(){}var B2=(()=>{let t=0;return()=>t++})();function Ge(t){return t===null||typeof t=="undefined"}function Ke(t){if(Array.isArray&&Array.isArray(t))return!0;let e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ee(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function it(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function zr(t,e){return it(t)?t:e}function we(t,e){return typeof t=="undefined"?e:t}var $2=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function qe(t,e,r){if(t&&typeof t.call=="function")return t.apply(r,e)}function je(t,e,r,n){let i,s,a;if(Ke(t))if(s=t.length,n)for(i=s-1;i>=0;i--)e.call(r,t[i],i);else for(i=0;i<s;i++)e.call(r,t[i],i);else if(Ee(t))for(a=Object.keys(t),s=a.length,i=0;i<s;i++)e.call(r,t[a[i]],a[i])}function Vf(t,e){let r,n,i,s;if(!t||!e||t.length!==e.length)return!1;for(r=0,n=t.length;r<n;++r)if(i=t[r],s=e[r],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function c_(t){if(Ke(t))return t.map(c_);if(Ee(t)){let e=Object.create(null),r=Object.keys(t),n=r.length,i=0;for(;i<n;++i)e[r[i]]=c_(t[r[i]]);return e}return t}function z2(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function uz(t,e,r,n){if(!z2(t))return;let i=e[t],s=r[t];Ee(i)&&Ee(s)?yc(i,s,n):e[t]=c_(s)}function yc(t,e,r){let n=Ke(e)?e:[e],i=n.length;if(!Ee(t))return t;r=r||{};let s=r.merger||uz,a;for(let o=0;o<i;++o){if(a=n[o],!Ee(a))continue;let l=Object.keys(a);for(let u=0,c=l.length;u<c;++u)s(l[u],t,a,r)}return t}function vc(t,e){return yc(t,e,{merger:cz})}function cz(t,e,r){if(!z2(t))return;let n=e[t],i=r[t];Ee(n)&&Ee(i)?vc(n,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=c_(i))}var P2={"":t=>t,x:t=>t.x,y:t=>t.y};function dz(t){let e=t.split("."),r=[],n="";for(let i of e)n+=i,n.endsWith("\\")?n=n.slice(0,-1)+".":(r.push(n),n="");return r}function fz(t){let e=dz(t);return r=>{for(let n of e){if(n==="")break;r=r&&r[n]}return r}}function Yf(t,e){return(P2[e]||(P2[e]=fz(e)))(t)}function p_(t){return t.charAt(0).toUpperCase()+t.slice(1)}var Gf=t=>typeof t!="undefined",Vs=t=>typeof t=="function",xx=(t,e)=>{if(t.size!==e.size)return!1;for(let r of t)if(!e.has(r))return!1;return!0};function U2(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}var ht=Math.PI,$r=2*ht,hz=$r+ht,d_=Number.POSITIVE_INFINITY,pz=ht/180,Br=ht/2,hl=ht/4,O2=ht*2/3,Ys=Math.log10,ml=Math.sign;function xc(t,e,r){return Math.abs(t-e)<r}function Sx(t){let e=Math.round(t);t=xc(t,e,t/1e3)?e:t;let r=Math.pow(10,Math.floor(Ys(t))),n=t/r;return(n<=1?1:n<=2?2:n<=5?5:10)*r}function W2(t){let e=[],r=Math.sqrt(t),n;for(n=1;n<r;n++)t%n===0&&(e.push(n),e.push(t/n));return r===(r|0)&&e.push(r),e.sort((i,s)=>i-s).pop(),e}function Sc(t){return!isNaN(parseFloat(t))&&isFinite(t)}function q2(t,e){let r=Math.round(t);return r-e<=t&&r+e>=t}function kx(t,e,r){let n,i,s;for(n=0,i=t.length;n<i;n++)s=t[n][r],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Gs(t){return t*(ht/180)}function m_(t){return t*(180/ht)}function Ex(t){if(!it(t))return;let e=1,r=0;for(;Math.round(t*e)/e!==t;)e*=10,r++;return r}function H2(t,e){let r=e.x-t.x,n=e.y-t.y,i=Math.sqrt(r*r+n*n),s=Math.atan2(n,r);return s<-.5*ht&&(s+=$r),{angle:s,distance:i}}function f_(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function mz(t,e){return(t-e+hz)%$r-ht}function jr(t){return(t%$r+$r)%$r}function Tx(t,e,r,n){let i=jr(t),s=jr(e),a=jr(r),o=jr(s-i),l=jr(a-i),u=jr(i-s),c=jr(i-a);return i===s||i===a||n&&s===a||o>l&&u<c}function ln(t,e,r){return Math.max(e,Math.min(r,t))}function V2(t){return ln(t,-32768,32767)}function _l(t,e,r,n=1e-6){return t>=Math.min(e,r)-n&&t<=Math.max(e,r)+n}function g_(t,e,r){r=r||(a=>t[a]<e);let n=t.length-1,i=0,s;for(;n-i>1;)s=i+n>>1,r(s)?i=s:n=s;return{lo:i,hi:n}}var Ua=(t,e,r,n)=>g_(t,r,n?i=>{let s=t[i][e];return s<r||s===r&&t[i+1][e]===r}:i=>t[i][e]<r),Y2=(t,e,r)=>g_(t,r,n=>t[n][e]>=r);function G2(t,e,r){let n=0,i=t.length;for(;n<i&&t[n]<e;)n++;for(;i>n&&t[i-1]>r;)i--;return n>0||i<t.length?t.slice(n,i):t}var Z2=["push","pop","shift","splice","unshift"];function J2(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Z2.forEach(r=>{let n="_onData"+p_(r),i=t[r];Object.defineProperty(t,r,{configurable:!0,enumerable:!1,value(...s){let a=i.apply(this,s);return t._chartjs.listeners.forEach(o=>{typeof o[n]=="function"&&o[n](...s)}),a}})})}function Cx(t,e){let r=t._chartjs;if(!r)return;let n=r.listeners,i=n.indexOf(e);i!==-1&&n.splice(i,1),!(n.length>0)&&(Z2.forEach(s=>{delete t[s]}),delete t._chartjs)}function K2(t){let e=new Set(t);return e.size===t.length?t:Array.from(e)}var Ax=function(){return typeof window=="undefined"?function(t){return t()}:window.requestAnimationFrame}();function Px(t,e){let r=[],n=!1;return function(...i){r=i,n||(n=!0,Ax.call(window,()=>{n=!1,t.apply(e,r)}))}}function X2(t,e){let r;return function(...n){return e?(clearTimeout(r),r=setTimeout(t,e,n)):t.apply(this,n),e}}var __=t=>t==="start"?"left":t==="end"?"right":"center",qt=(t,e,r)=>t==="start"?e:t==="end"?r:(e+r)/2,Q2=(t,e,r,n)=>t===(n?"left":"right")?r:t==="center"?(e+r)/2:e;function eD(t,e,r){let n=e.length,i=0,s=n;if(t._sorted){let{iScale:a,_parsed:o}=t,l=a.axis,{min:u,max:c,minDefined:h,maxDefined:p}=a.getUserBounds();h&&(i=ln(Math.min(Ua(o,l,u).lo,r?n:Ua(e,l,a.getPixelForValue(u)).lo),0,n-1)),p?s=ln(Math.max(Ua(o,a.axis,c,!0).hi+1,r?0:Ua(e,l,a.getPixelForValue(c),!0).hi+1),i,n)-i:s=n-i}return{start:i,count:s}}function tD(t){let{xScale:e,yScale:r,_scaleRanges:n}=t,i={xmin:e.min,xmax:e.max,ymin:r.min,ymax:r.max};if(!n)return t._scaleRanges=i,!0;let s=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==r.min||n.ymax!==r.max;return Object.assign(n,i),s}var o_=t=>t===0||t===1,R2=(t,e,r)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*$r/r)),D2=(t,e,r)=>Math.pow(2,-10*t)*Math.sin((t-e)*$r/r)+1,bc={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Br)+1,easeOutSine:t=>Math.sin(t*Br),easeInOutSine:t=>-.5*(Math.cos(ht*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>o_(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>o_(t)?t:R2(t,.075,.3),easeOutElastic:t=>o_(t)?t:D2(t,.075,.3),easeInOutElastic(t){return o_(t)?t:t<.5?.5*R2(t*2,.1125,.45):.5+.5*D2(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-bc.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?bc.easeInBounce(t*2)*.5:bc.easeOutBounce(t*2-1)*.5+.5};function Ox(t){if(t&&typeof t=="object"){let e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Rx(t){return Ox(t)?t:new Uf(t)}function yx(t){return Ox(t)?t:new Uf(t).saturate(.5).darken(.1).hexString()}var gz=["x","y","borderWidth","radius","tension"],_z=["color","borderColor","backgroundColor"];function bz(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:_z},numbers:{type:"number",properties:gz}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function yz(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var M2=new Map;function wz(t,e){e=e||{};let r=t+JSON.stringify(e),n=M2.get(r);return n||(n=new Intl.NumberFormat(t,e),M2.set(r,n)),n}function b_(t,e,r){return wz(e,r).format(t)}var rD={values(t){return Ke(t)?t:""+t},numeric(t,e,r){if(t===0)return"0";let n=this.chart.options.locale,i,s=t;if(r.length>1){let u=Math.max(Math.abs(r[0].value),Math.abs(r[r.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),s=vz(t,r)}let a=Ys(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),b_(t,n,l)},logarithmic(t,e,r){if(t===0)return"0";let n=r[e].significand||t/Math.pow(10,Math.floor(Ys(t)));return[1,2,3,5,10,15].includes(n)||e>.8*r.length?rD.numeric.call(this,t,e,r):""}};function vz(t,e){let r=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(r)>=1&&t!==Math.floor(t)&&(r=t-Math.floor(t)),r}var Zf={formatters:rD};function xz(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,r)=>r.lineWidth,tickColor:(e,r)=>r.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Zf.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var Wa=Object.create(null),y_=Object.create(null);function qf(t,e){if(!e)return t;let r=e.split(".");for(let n=0,i=r.length;n<i;++n){let s=r[n];t=t[s]||(t[s]=Object.create(null))}return t}function wx(t,e,r){return typeof e=="string"?yc(qf(t,e),r):yc(qf(t,""),e)}var vx=class{constructor(e,r){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>yx(i.backgroundColor),this.hoverBorderColor=(n,i)=>yx(i.borderColor),this.hoverColor=(n,i)=>yx(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(r)}set(e,r){return wx(this,e,r)}get(e){return qf(this,e)}describe(e,r){return wx(y_,e,r)}override(e,r){return wx(Wa,e,r)}route(e,r,n,i){let s=qf(this,e),a=qf(this,n),o="_"+r;Object.defineProperties(s,{[o]:{value:s[r],writable:!0},[r]:{enumerable:!0,get(){let l=this[o],u=a[i];return Ee(l)?Object.assign({},u,l):we(l,u)},set(l){this[o]=l}}})}apply(e){e.forEach(r=>r(this))}},st=new vx({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[bz,yz,xz]);function Sz(t){return!t||Ge(t.size)||Ge(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Hf(t,e,r,n,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,r.push(i)),s>n&&(n=s),n}function nD(t,e,r,n){n=n||{};let i=n.data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(i=n.data={},s=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let a=0,o=r.length,l,u,c,h,p;for(l=0;l<o;l++)if(h=r[l],h!=null&&!Ke(h))a=Hf(t,i,s,a,h);else if(Ke(h))for(u=0,c=h.length;u<c;u++)p=h[u],p!=null&&!Ke(p)&&(a=Hf(t,i,s,a,p));t.restore();let _=s.length/2;if(_>r.length){for(l=0;l<_;l++)delete i[s[l]];s.splice(0,_)}return a}function qa(t,e,r){let n=t.currentDevicePixelRatio,i=r!==0?Math.max(r/2,.5):0;return Math.round((e-i)*n)/n+i}function Dx(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function w_(t,e,r,n){Mx(t,e,r,n,null)}function Mx(t,e,r,n,i){let s,a,o,l,u,c,h,p,_=e.pointStyle,y=e.rotation,S=e.radius,x=(y||0)*pz;if(_&&typeof _=="object"&&(s=_.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(r,n),t.rotate(x),t.drawImage(_,-_.width/2,-_.height/2,_.width,_.height),t.restore();return}if(!(isNaN(S)||S<=0)){switch(t.beginPath(),_){default:i?t.ellipse(r,n,i/2,S,0,0,$r):t.arc(r,n,S,0,$r),t.closePath();break;case"triangle":c=i?i/2:S,t.moveTo(r+Math.sin(x)*c,n-Math.cos(x)*S),x+=O2,t.lineTo(r+Math.sin(x)*c,n-Math.cos(x)*S),x+=O2,t.lineTo(r+Math.sin(x)*c,n-Math.cos(x)*S),t.closePath();break;case"rectRounded":u=S*.516,l=S-u,a=Math.cos(x+hl)*l,h=Math.cos(x+hl)*(i?i/2-u:l),o=Math.sin(x+hl)*l,p=Math.sin(x+hl)*(i?i/2-u:l),t.arc(r-h,n-o,u,x-ht,x-Br),t.arc(r+p,n-a,u,x-Br,x),t.arc(r+h,n+o,u,x,x+Br),t.arc(r-p,n+a,u,x+Br,x+ht),t.closePath();break;case"rect":if(!y){l=Math.SQRT1_2*S,c=i?i/2:l,t.rect(r-c,n-l,2*c,2*l);break}x+=hl;case"rectRot":h=Math.cos(x)*(i?i/2:S),a=Math.cos(x)*S,o=Math.sin(x)*S,p=Math.sin(x)*(i?i/2:S),t.moveTo(r-h,n-o),t.lineTo(r+p,n-a),t.lineTo(r+h,n+o),t.lineTo(r-p,n+a),t.closePath();break;case"crossRot":x+=hl;case"cross":h=Math.cos(x)*(i?i/2:S),a=Math.cos(x)*S,o=Math.sin(x)*S,p=Math.sin(x)*(i?i/2:S),t.moveTo(r-h,n-o),t.lineTo(r+h,n+o),t.moveTo(r+p,n-a),t.lineTo(r-p,n+a);break;case"star":h=Math.cos(x)*(i?i/2:S),a=Math.cos(x)*S,o=Math.sin(x)*S,p=Math.sin(x)*(i?i/2:S),t.moveTo(r-h,n-o),t.lineTo(r+h,n+o),t.moveTo(r+p,n-a),t.lineTo(r-p,n+a),x+=hl,h=Math.cos(x)*(i?i/2:S),a=Math.cos(x)*S,o=Math.sin(x)*S,p=Math.sin(x)*(i?i/2:S),t.moveTo(r-h,n-o),t.lineTo(r+h,n+o),t.moveTo(r+p,n-a),t.lineTo(r-p,n+a);break;case"line":a=i?i/2:Math.cos(x)*S,o=Math.sin(x)*S,t.moveTo(r-a,n-o),t.lineTo(r+a,n+o);break;case"dash":t.moveTo(r,n),t.lineTo(r+Math.cos(x)*(i?i/2:S),n+Math.sin(x)*S);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function zi(t,e,r){return r=r||.5,!e||t&&t.x>e.left-r&&t.x<e.right+r&&t.y>e.top-r&&t.y<e.bottom+r}function Jf(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Kf(t){t.restore()}function iD(t,e,r,n,i){if(!e)return t.lineTo(r.x,r.y);if(i==="middle"){let s=(e.x+r.x)/2;t.lineTo(s,e.y),t.lineTo(s,r.y)}else i==="after"!=!!n?t.lineTo(e.x,r.y):t.lineTo(r.x,e.y);t.lineTo(r.x,r.y)}function sD(t,e,r,n){if(!e)return t.lineTo(r.x,r.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?r.cp2x:r.cp1x,n?r.cp2y:r.cp1y,r.x,r.y)}function kz(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ge(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Ez(t,e,r,n,i){if(i.strikethrough||i.underline){let s=t.measureText(n),a=e-s.actualBoundingBoxLeft,o=e+s.actualBoundingBoxRight,l=r-s.actualBoundingBoxAscent,u=r+s.actualBoundingBoxDescent,c=i.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(a,c),t.lineTo(o,c),t.stroke()}}function Tz(t,e){let r=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=r}function Ha(t,e,r,n,i,s={}){let a=Ke(e)?e:[e],o=s.strokeWidth>0&&s.strokeColor!=="",l,u;for(t.save(),t.font=i.string,kz(t,s),l=0;l<a.length;++l)u=a[l],s.backdrop&&Tz(t,s.backdrop),o&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Ge(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(u,r,n,s.maxWidth)),t.fillText(u,r,n,s.maxWidth),Ez(t,r,n,u,s),n+=Number(i.lineHeight);t.restore()}function Xf(t,e){let{x:r,y:n,w:i,h:s,radius:a}=e;t.arc(r+a.topLeft,n+a.topLeft,a.topLeft,1.5*ht,ht,!0),t.lineTo(r,n+s-a.bottomLeft),t.arc(r+a.bottomLeft,n+s-a.bottomLeft,a.bottomLeft,ht,Br,!0),t.lineTo(r+i-a.bottomRight,n+s),t.arc(r+i-a.bottomRight,n+s-a.bottomRight,a.bottomRight,Br,0,!0),t.lineTo(r+i,n+a.topRight),t.arc(r+i-a.topRight,n+a.topRight,a.topRight,0,-Br,!0),t.lineTo(r+a.topLeft,n)}var Cz=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Az=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Pz(t,e){let r=(""+t).match(Cz);if(!r||r[1]==="normal")return e*1.2;switch(t=+r[2],r[3]){case"px":return t;case"%":t/=100;break}return e*t}var Oz=t=>+t||0;function Ix(t,e){let r={},n=Ee(e),i=n?Object.keys(e):e,s=Ee(t)?n?a=>we(t[a],t[e[a]]):a=>t[a]:()=>t;for(let a of i)r[a]=Oz(s(a));return r}function aD(t){return Ix(t,{top:"y",right:"x",bottom:"y",left:"x"})}function bl(t){return Ix(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ht(t){let e=aD(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function St(t,e){t=t||{},e=e||st.font;let r=we(t.size,e.size);typeof r=="string"&&(r=parseInt(r,10));let n=we(t.style,e.style);n&&!(""+n).match(Az)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);let i={family:we(t.family,e.family),lineHeight:Pz(we(t.lineHeight,e.lineHeight),r),size:r,style:n,weight:we(t.weight,e.weight),string:""};return i.string=Sz(i),i}function Qf(t,e,r,n){let i=!0,s,a,o;for(s=0,a=t.length;s<a;++s)if(o=t[s],o!==void 0&&(e!==void 0&&typeof o=="function"&&(o=o(e),i=!1),r!==void 0&&Ke(o)&&(o=o[r%o.length],i=!1),o!==void 0))return n&&!i&&(n.cacheable=!1),o}function oD(t,e,r){let{min:n,max:i}=t,s=$2(e,(i-n)/2),a=(o,l)=>r&&o===0?0:o+l;return{min:a(n,-Math.abs(s)),max:a(i,s)}}function Zs(t,e){return Object.assign(Object.create(t),e)}function v_(t,e=[""],r,n,i=()=>t[0]){let s=r||t;typeof n=="undefined"&&(n=cD("_fallback",t));let a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:n,_getTarget:i,override:o=>v_([o,...t],e,s,n)};return new Proxy(a,{deleteProperty(o,l){return delete o[l],delete o._keys,delete t[0][l],!0},get(o,l){return lD(o,l,()=>jz(l,e,t,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(o,l){return L2(o).includes(l)},ownKeys(o){return L2(o)},set(o,l,u){let c=o._storage||(o._storage=i());return o[l]=c[l]=u,delete o._keys,!0}})}function gl(t,e,r,n){let i={_cacheable:!1,_proxy:t,_context:e,_subProxy:r,_stack:new Set,_descriptors:Lx(t,n),setContext:s=>gl(t,s,r,n),override:s=>gl(t.override(s),e,r,n)};return new Proxy(i,{deleteProperty(s,a){return delete s[a],delete t[a],!0},get(s,a,o){return lD(s,a,()=>Dz(s,a,o))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(t,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,a)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,a){return Reflect.has(t,a)},ownKeys(){return Reflect.ownKeys(t)},set(s,a,o){return t[a]=o,delete s[a],!0}})}function Lx(t,e={scriptable:!0,indexable:!0}){let{_scriptable:r=e.scriptable,_indexable:n=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:r,indexable:n,isScriptable:Vs(r)?r:()=>r,isIndexable:Vs(n)?n:()=>n}}var Rz=(t,e)=>t?t+p_(e):e,Fx=(t,e)=>Ee(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function lD(t,e,r){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];let n=r();return t[e]=n,n}function Dz(t,e,r){let{_proxy:n,_context:i,_subProxy:s,_descriptors:a}=t,o=n[e];return Vs(o)&&a.isScriptable(e)&&(o=Mz(e,o,t,r)),Ke(o)&&o.length&&(o=Iz(e,o,t,a.isIndexable)),Fx(e,o)&&(o=gl(o,i,s&&s[e],a)),o}function Mz(t,e,r,n){let{_proxy:i,_context:s,_subProxy:a,_stack:o}=r;if(o.has(t))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+t);o.add(t);let l=e(s,a||n);return o.delete(t),Fx(t,l)&&(l=Nx(i._scopes,i,t,l)),l}function Iz(t,e,r,n){let{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=r;if(typeof s.index!="undefined"&&n(t))return e[s.index%e.length];if(Ee(e[0])){let l=e,u=i._scopes.filter(c=>c!==l);e=[];for(let c of l){let h=Nx(u,i,t,c);e.push(gl(h,s,a&&a[t],o))}}return e}function uD(t,e,r){return Vs(t)?t(e,r):t}var Lz=(t,e)=>t===!0?e:typeof t=="string"?Yf(e,t):void 0;function Fz(t,e,r,n,i){for(let s of e){let a=Lz(r,s);if(a){t.add(a);let o=uD(a._fallback,r,i);if(typeof o!="undefined"&&o!==r&&o!==n)return o}else if(a===!1&&typeof n!="undefined"&&r!==n)return null}return!1}function Nx(t,e,r,n){let i=e._rootScopes,s=uD(e._fallback,r,n),a=[...t,...i],o=new Set;o.add(n);let l=I2(o,a,r,s||r,n);return l===null||typeof s!="undefined"&&s!==r&&(l=I2(o,a,s,l,n),l===null)?!1:v_(Array.from(o),[""],i,s,()=>Nz(e,r,n))}function I2(t,e,r,n,i){for(;r;)r=Fz(t,e,r,n,i);return r}function Nz(t,e,r){let n=t._getTarget();e in n||(n[e]={});let i=n[e];return Ke(i)&&Ee(r)?r:i||{}}function jz(t,e,r,n){let i;for(let s of e)if(i=cD(Rz(s,t),r),typeof i!="undefined")return Fx(t,i)?Nx(r,n,t,i):i}function cD(t,e){for(let r of e){if(!r)continue;let n=r[t];if(typeof n!="undefined")return n}}function L2(t){let e=t._keys;return e||(e=t._keys=Bz(t._scopes)),e}function Bz(t){let e=new Set;for(let r of t)for(let n of Object.keys(r).filter(i=>!i.startsWith("_")))e.add(n);return Array.from(e)}var $z=Number.EPSILON||1e-14,wc=(t,e)=>e<t.length&&!t[e].skip&&t[e],dD=t=>t==="x"?"y":"x";function zz(t,e,r,n){let i=t.skip?e:t,s=e,a=r.skip?e:r,o=f_(s,i),l=f_(a,s),u=o/(o+l),c=l/(o+l);u=isNaN(u)?0:u,c=isNaN(c)?0:c;let h=n*u,p=n*c;return{previous:{x:s.x-h*(a.x-i.x),y:s.y-h*(a.y-i.y)},next:{x:s.x+p*(a.x-i.x),y:s.y+p*(a.y-i.y)}}}function Uz(t,e,r){let n=t.length,i,s,a,o,l,u=wc(t,0);for(let c=0;c<n-1;++c)if(l=u,u=wc(t,c+1),!(!l||!u)){if(xc(e[c],0,$z)){r[c]=r[c+1]=0;continue}i=r[c]/e[c],s=r[c+1]/e[c],o=Math.pow(i,2)+Math.pow(s,2),!(o<=9)&&(a=3/Math.sqrt(o),r[c]=i*a*e[c],r[c+1]=s*a*e[c])}}function Wz(t,e,r="x"){let n=dD(r),i=t.length,s,a,o,l=wc(t,0);for(let u=0;u<i;++u){if(a=o,o=l,l=wc(t,u+1),!o)continue;let c=o[r],h=o[n];a&&(s=(c-a[r])/3,o[`cp1${r}`]=c-s,o[`cp1${n}`]=h-s*e[u]),l&&(s=(l[r]-c)/3,o[`cp2${r}`]=c+s,o[`cp2${n}`]=h+s*e[u])}}function qz(t,e="x"){let r=dD(e),n=t.length,i=Array(n).fill(0),s=Array(n),a,o,l,u=wc(t,0);for(a=0;a<n;++a)if(o=l,l=u,u=wc(t,a+1),!!l){if(u){let c=u[e]-l[e];i[a]=c!==0?(u[r]-l[r])/c:0}s[a]=o?u?ml(i[a-1])!==ml(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}Uz(t,i,s),Wz(t,s,e)}function l_(t,e,r){return Math.max(Math.min(t,r),e)}function Hz(t,e){let r,n,i,s,a,o=zi(t[0],e);for(r=0,n=t.length;r<n;++r)a=s,s=o,o=r<n-1&&zi(t[r+1],e),s&&(i=t[r],a&&(i.cp1x=l_(i.cp1x,e.left,e.right),i.cp1y=l_(i.cp1y,e.top,e.bottom)),o&&(i.cp2x=l_(i.cp2x,e.left,e.right),i.cp2y=l_(i.cp2y,e.top,e.bottom)))}function fD(t,e,r,n,i){let s,a,o,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")qz(t,i);else{let u=n?t[t.length-1]:t[0];for(s=0,a=t.length;s<a;++s)o=t[s],l=zz(u,o,t[Math.min(s+1,a-(n?0:1))%a],e.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,u=o}e.capBezierPoints&&Hz(t,r)}function x_(){return typeof window!="undefined"&&typeof document!="undefined"}function S_(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function h_(t,e,r){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[r])):n=t,n}var k_=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Vz(t,e){return k_(t).getPropertyValue(e)}var Yz=["top","right","bottom","left"];function pl(t,e,r){let n={};r=r?"-"+r:"";for(let i=0;i<4;i++){let s=Yz[i];n[s]=parseFloat(t[e+"-"+s+r])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}var Gz=(t,e,r)=>(t>0||e>0)&&(!r||!r.shadowRoot);function Zz(t,e){let r=t.touches,n=r&&r.length?r[0]:t,{offsetX:i,offsetY:s}=n,a=!1,o,l;if(Gz(i,s,t.target))o=i,l=s;else{let u=e.getBoundingClientRect();o=n.clientX-u.left,l=n.clientY-u.top,a=!0}return{x:o,y:l,box:a}}function Va(t,e){if("native"in t)return t;let{canvas:r,currentDevicePixelRatio:n}=e,i=k_(r),s=i.boxSizing==="border-box",a=pl(i,"padding"),o=pl(i,"border","width"),{x:l,y:u,box:c}=Zz(t,r),h=a.left+(c&&o.left),p=a.top+(c&&o.top),{width:_,height:y}=e;return s&&(_-=a.width+o.width,y-=a.height+o.height),{x:Math.round((l-h)/_*r.width/n),y:Math.round((u-p)/y*r.height/n)}}function Jz(t,e,r){let n,i;if(e===void 0||r===void 0){let s=t&&S_(t);if(!s)e=t.clientWidth,r=t.clientHeight;else{let a=s.getBoundingClientRect(),o=k_(s),l=pl(o,"border","width"),u=pl(o,"padding");e=a.width-u.width-l.width,r=a.height-u.height-l.height,n=h_(o.maxWidth,s,"clientWidth"),i=h_(o.maxHeight,s,"clientHeight")}}return{width:e,height:r,maxWidth:n||d_,maxHeight:i||d_}}var u_=t=>Math.round(t*10)/10;function hD(t,e,r,n){let i=k_(t),s=pl(i,"margin"),a=h_(i.maxWidth,t,"clientWidth")||d_,o=h_(i.maxHeight,t,"clientHeight")||d_,l=Jz(t,e,r),{width:u,height:c}=l;if(i.boxSizing==="content-box"){let p=pl(i,"border","width"),_=pl(i,"padding");u-=_.width+p.width,c-=_.height+p.height}return u=Math.max(0,u-s.width),c=Math.max(0,n?u/n:c-s.height),u=u_(Math.min(u,a,l.maxWidth)),c=u_(Math.min(c,o,l.maxHeight)),u&&!c&&(c=u_(u/2)),(e!==void 0||r!==void 0)&&n&&l.height&&c>l.height&&(c=l.height,u=u_(Math.floor(c*n))),{width:u,height:c}}function jx(t,e,r){let n=e||1,i=Math.floor(t.height*n),s=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);let a=t.canvas;return a.style&&(r||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||a.height!==i||a.width!==s?(t.currentDevicePixelRatio=n,a.height=i,a.width=s,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}var pD=function(){let t=!1;try{let e={get passive(){return t=!0,!1}};x_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(e){}return t}();function Bx(t,e){let r=Vz(t,e),n=r&&r.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function za(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}}function mD(t,e,r,n){return{x:t.x+r*(e.x-t.x),y:n==="middle"?r<.5?t.y:e.y:n==="after"?r<1?t.y:e.y:r>0?e.y:t.y}}function gD(t,e,r,n){let i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},a=za(t,i,r),o=za(i,s,r),l=za(s,e,r),u=za(a,o,r),c=za(o,l,r);return za(u,c,r)}var Kz=function(t,e){return{x(r){return t+t+e-r},setWidth(r){e=r},textAlign(r){return r==="center"?r:r==="right"?"left":"right"},xPlus(r,n){return r-n},leftForLtr(r,n){return r-n}}},Xz=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function yl(t,e,r){return t?Kz(e,r):Xz()}function $x(t,e){let r,n;(e==="ltr"||e==="rtl")&&(r=t.canvas.style,n=[r.getPropertyValue("direction"),r.getPropertyPriority("direction")],r.setProperty("direction",e,"important"),t.prevTextDirection=n)}function zx(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function _D(t){return t==="angle"?{between:Tx,compare:mz,normalize:jr}:{between:_l,compare:(e,r)=>e-r,normalize:e=>e}}function F2({start:t,end:e,count:r,loop:n,style:i}){return{start:t%r,end:e%r,loop:n&&(e-t+1)%r===0,style:i}}function Qz(t,e,r){let{property:n,start:i,end:s}=r,{between:a,normalize:o}=_D(n),l=e.length,{start:u,end:c,loop:h}=t,p,_;if(h){for(u+=l,c+=l,p=0,_=l;p<_&&a(o(e[u%l][n]),i,s);++p)u--,c--;u%=l,c%=l}return c<u&&(c+=l),{start:u,end:c,loop:h,style:t.style}}function Ux(t,e,r){if(!r)return[t];let{property:n,start:i,end:s}=r,a=e.length,{compare:o,between:l,normalize:u}=_D(n),{start:c,end:h,loop:p,style:_}=Qz(t,e,r),y=[],S=!1,x=null,k,T,P,O=()=>l(i,P,k)&&o(i,P)!==0,A=()=>o(s,k)===0||l(s,P,k),R=()=>S||O(),F=()=>!S||A();for(let I=c,U=c;I<=h;++I)T=e[I%a],!T.skip&&(k=u(T[n]),k!==P&&(S=l(k,i,s),x===null&&R()&&(x=o(k,i)===0?I:U),x!==null&&F()&&(y.push(F2({start:x,end:I,loop:p,count:a,style:_})),x=null),U=I,P=k));return x!==null&&y.push(F2({start:x,end:h,loop:p,count:a,style:_})),y}function Wx(t,e){let r=[],n=t.segments;for(let i=0;i<n.length;i++){let s=Ux(n[i],t.points,e);s.length&&r.push(...s)}return r}function eU(t,e,r,n){let i=0,s=e-1;if(r&&!n)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,r&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function tU(t,e,r,n){let i=t.length,s=[],a=e,o=t[e],l;for(l=e+1;l<=r;++l){let u=t[l%i];u.skip||u.stop?o.skip||(n=!1,s.push({start:e%i,end:(l-1)%i,loop:n}),e=a=u.stop?l:null):(a=l,o.skip&&(e=l)),o=u}return a!==null&&s.push({start:e%i,end:a%i,loop:n}),s}function bD(t,e){let r=t.points,n=t.options.spanGaps,i=r.length;if(!i)return[];let s=!!t._loop,{start:a,end:o}=eU(r,i,s,n);if(n===!0)return N2(t,[{start:a,end:o,loop:s}],r,e);let l=o<a?o+i:o,u=!!t._fullLoop&&a===0&&o===i-1;return N2(t,tU(r,a,l,u),r,e)}function N2(t,e,r,n){return!n||!n.setContext||!r?e:rU(t,e,r,n)}function rU(t,e,r,n){let i=t._chart.getContext(),s=j2(t.options),{_datasetIndex:a,options:{spanGaps:o}}=t,l=r.length,u=[],c=s,h=e[0].start,p=h;function _(y,S,x,k){let T=o?-1:1;if(y!==S){for(y+=l;r[y%l].skip;)y-=T;for(;r[S%l].skip;)S+=T;y%l!==S%l&&(u.push({start:y%l,end:S%l,loop:x,style:k}),c=k,h=S%l)}}for(let y of e){h=o?h:y.start;let S=r[h%l],x;for(p=h+1;p<=y.end;p++){let k=r[p%l];x=j2(n.setContext(Zs(i,{type:"segment",p0:S,p1:k,p0DataIndex:(p-1)%l,p1DataIndex:p%l,datasetIndex:a}))),nU(x,c)&&_(h,p-1,y.loop,c),S=k,c=x}h<p-1&&_(h,p-1,y.loop,c)}return u}function j2(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function nU(t,e){if(!e)return!1;let r=[],n=function(i,s){return Ox(s)?(r.includes(s)||r.push(s),r.indexOf(s)):s};return JSON.stringify(t,n)!==JSON.stringify(e,n)}var Jx=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,r,n,i){let s=r.listeners[i],a=r.duration;s.forEach(o=>o({chart:e,initial:r.initial,numSteps:a,currentStep:Math.min(n-r.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=Ax.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let r=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;let s=n.items,a=s.length-1,o=!1,l;for(;a>=0;--a)l=s[a],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(e),o=!0):(s[a]=s[s.length-1],s.pop());o&&(i.draw(),this._notify(i,n,e,"progress")),s.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),r+=s.length}),this._lastDate=e,r===0&&(this._running=!1)}_getAnims(e){let r=this._charts,n=r.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},r.set(e,n)),n}listen(e,r,n){this._getAnims(e).listeners[r].push(n)}add(e,r){!r||!r.length||this._getAnims(e).items.push(...r)}has(e){return this._getAnims(e).items.length>0}start(e){let r=this._charts.get(e);r&&(r.running=!0,r.start=Date.now(),r.duration=r.items.reduce((n,i)=>Math.max(n,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;let r=this._charts.get(e);return!(!r||!r.running||!r.items.length)}stop(e){let r=this._charts.get(e);if(!r||!r.items.length)return;let n=r.items,i=n.length-1;for(;i>=0;--i)n[i].cancel();r.items=[],this._notify(e,r,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},Js=new Jx,yD="transparent",iU={boolean(t,e,r){return r>.5?e:t},color(t,e,r){let n=Rx(t||yD),i=n.valid&&Rx(e||yD);return i&&i.valid?i.mix(n,r).hexString():e},number(t,e,r){return t+(e-t)*r}},Kx=class{constructor(e,r,n,i){let s=r[n];i=Qf([e.to,i,s,e.from]);let a=Qf([e.from,s,i]);this._active=!0,this._fn=e.fn||iU[e.type||typeof a],this._easing=bc[e.easing]||bc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=r,this._prop=n,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(e,r,n){if(this._active){this._notify(!1);let i=this._target[this._prop],s=n-this._start,a=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Qf([e.to,r,i,e.from]),this._from=Qf([e.from,i,r])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let r=e-this._start,n=this._duration,i=this._prop,s=this._from,a=this._loop,o=this._to,l;if(this._active=s!==o&&(a||r<n),!this._active){this._target[i]=o,this._notify(!0);return}if(r<0){this._target[i]=s;return}l=r/n%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,o,l)}wait(){let e=this._promises||(this._promises=[]);return new Promise((r,n)=>{e.push({res:r,rej:n})})}_notify(e){let r=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][r]()}},L_=class{constructor(e,r){this._chart=e,this._properties=new Map,this.configure(r)}configure(e){if(!Ee(e))return;let r=Object.keys(st.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{let s=e[i];if(!Ee(s))return;let a={};for(let o of r)a[o]=s[o];(Ke(s.properties)&&s.properties||[i]).forEach(o=>{(o===i||!n.has(o))&&n.set(o,a)})})}_animateOptions(e,r){let n=r.options,i=aU(e,n);if(!i)return[];let s=this._createAnimations(i,n);return n.$shared&&sU(e.options.$animations,n).then(()=>{e.options=n},()=>{}),s}_createAnimations(e,r){let n=this._properties,i=[],s=e.$animations||(e.$animations={}),a=Object.keys(r),o=Date.now(),l;for(l=a.length-1;l>=0;--l){let u=a[l];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(e,r));continue}let c=r[u],h=s[u],p=n.get(u);if(h)if(p&&h.active()){h.update(p,c,o);continue}else h.cancel();if(!p||!p.duration){e[u]=c;continue}s[u]=h=new Kx(p,e,u,c),i.push(h)}return i}update(e,r){if(this._properties.size===0){Object.assign(e,r);return}let n=this._createAnimations(e,r);if(n.length)return Js.add(this._chart,n),!0}};function sU(t,e){let r=[],n=Object.keys(e);for(let i=0;i<n.length;i++){let s=t[n[i]];s&&s.active()&&r.push(s.wait())}return Promise.all(r)}function aU(t,e){if(!e)return;let r=t.options;if(!r){t.options=e;return}return r.$shared&&(t.options=r=Object.assign({},r,{$shared:!1,$animations:{}})),r}function wD(t,e){let r=t&&t.options||{},n=r.reverse,i=r.min===void 0?e:0,s=r.max===void 0?e:0;return{start:n?s:i,end:n?i:s}}function oU(t,e,r){if(r===!1)return!1;let n=wD(t,r),i=wD(e,r);return{top:i.end,right:n.end,bottom:i.start,left:n.start}}function lU(t){let e,r,n,i;return Ee(t)?(e=t.top,r=t.right,n=t.bottom,i=t.left):e=r=n=i=t,{top:e,right:r,bottom:n,left:i,disabled:t===!1}}function hM(t,e){let r=[],n=t._getSortedDatasetMetas(e),i,s;for(i=0,s=n.length;i<s;++i)r.push(n[i].index);return r}function vD(t,e,r,n={}){let i=t.keys,s=n.mode==="single",a,o,l,u;if(e!==null){for(a=0,o=i.length;a<o;++a){if(l=+i[a],l===r){if(n.all)continue;break}u=t.values[l],it(u)&&(s||e===0||ml(e)===ml(u))&&(e+=u)}return e}}function uU(t,e){let{iScale:r,vScale:n}=e,i=r.axis==="x"?"x":"y",s=n.axis==="x"?"x":"y",a=Object.keys(t),o=new Array(a.length),l,u,c;for(l=0,u=a.length;l<u;++l)c=a[l],o[l]={[i]:c,[s]:t[c]};return o}function xD(t,e){let r=t&&t.options.stacked;return r||r===void 0&&e.stack!==void 0}function cU(t,e,r){return`${t.id}.${e.id}.${r.stack||r.type}`}function dU(t){let{min:e,max:r,minDefined:n,maxDefined:i}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:i?r:Number.POSITIVE_INFINITY}}function fU(t,e,r){let n=t[e]||(t[e]={});return n[r]||(n[r]={})}function SD(t,e,r,n){for(let i of e.getMatchingVisibleMetas(n).reverse()){let s=t[i.index];if(r&&s>0||!r&&s<0)return i.index}return null}function kD(t,e){let{chart:r,_cachedMeta:n}=t,i=r._stacks||(r._stacks={}),{iScale:s,vScale:a,index:o}=n,l=s.axis,u=a.axis,c=cU(s,a,n),h=e.length,p;for(let _=0;_<h;++_){let y=e[_],{[l]:S,[u]:x}=y,k=y._stacks||(y._stacks={});p=k[u]=fU(i,c,S),p[o]=x,p._top=SD(p,a,!0,n.type),p._bottom=SD(p,a,!1,n.type);let T=p._visualValues||(p._visualValues={});T[o]=x}}function qx(t,e){let r=t.scales;return Object.keys(r).filter(n=>r[n].axis===e).shift()}function hU(t,e){return Zs(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function pU(t,e,r){return Zs(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:r,index:e,mode:"default",type:"data"})}function eh(t,e){let r=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(let i of e){let s=i._stacks;if(!s||s[n]===void 0||s[n][r]===void 0)return;delete s[n][r],s[n]._visualValues!==void 0&&s[n]._visualValues[r]!==void 0&&delete s[n]._visualValues[r]}}}var Hx=t=>t==="reset"||t==="none",ED=(t,e)=>e?t:Object.assign({},t),mU=(t,e,r)=>t&&!e.hidden&&e._stacked&&{keys:hM(r,!0),values:null},xl=class{constructor(e,r){this.chart=e,this._ctx=e.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=xD(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&eh(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,r=this._cachedMeta,n=this.getDataset(),i=(h,p,_,y)=>h==="x"?p:h==="r"?y:_,s=r.xAxisID=we(n.xAxisID,qx(e,"x")),a=r.yAxisID=we(n.yAxisID,qx(e,"y")),o=r.rAxisID=we(n.rAxisID,qx(e,"r")),l=r.indexAxis,u=r.iAxisID=i(l,s,a,o),c=r.vAxisID=i(l,a,s,o);r.xScale=this.getScaleForId(s),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(o),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let r=this._cachedMeta;return e===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&Cx(this._data,this),e._stacked&&eh(e)}_dataCheck(){let e=this.getDataset(),r=e.data||(e.data=[]),n=this._data;if(Ee(r)){let i=this._cachedMeta;this._data=uU(r,i)}else if(n!==r){if(n){Cx(n,this);let i=this._cachedMeta;eh(i),i._parsed=[]}r&&Object.isExtensible(r)&&J2(r,this),this._syncList=[],this._data=r}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let r=this._cachedMeta,n=this.getDataset(),i=!1;this._dataCheck();let s=r._stacked;r._stacked=xD(r.vScale,r),r.stack!==n.stack&&(i=!0,eh(r),r.stack=n.stack),this._resyncElements(e),(i||s!==r._stacked)&&kD(this,r._parsed)}configure(){let e=this.chart.config,r=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),r,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,r){let{_cachedMeta:n,_data:i}=this,{iScale:s,_stacked:a}=n,o=s.axis,l=e===0&&r===i.length?!0:n._sorted,u=e>0&&n._parsed[e-1],c,h,p;if(this._parsing===!1)n._parsed=i,n._sorted=!0,p=i;else{Ke(i[e])?p=this.parseArrayData(n,i,e,r):Ee(i[e])?p=this.parseObjectData(n,i,e,r):p=this.parsePrimitiveData(n,i,e,r);let _=()=>h[o]===null||u&&h[o]<u[o];for(c=0;c<r;++c)n._parsed[c+e]=h=p[c],l&&(_()&&(l=!1),u=h);n._sorted=l}a&&kD(this,p)}parsePrimitiveData(e,r,n,i){let{iScale:s,vScale:a}=e,o=s.axis,l=a.axis,u=s.getLabels(),c=s===a,h=new Array(i),p,_,y;for(p=0,_=i;p<_;++p)y=p+n,h[p]={[o]:c||s.parse(u[y],y),[l]:a.parse(r[y],y)};return h}parseArrayData(e,r,n,i){let{xScale:s,yScale:a}=e,o=new Array(i),l,u,c,h;for(l=0,u=i;l<u;++l)c=l+n,h=r[c],o[l]={x:s.parse(h[0],c),y:a.parse(h[1],c)};return o}parseObjectData(e,r,n,i){let{xScale:s,yScale:a}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,u=new Array(i),c,h,p,_;for(c=0,h=i;c<h;++c)p=c+n,_=r[p],u[c]={x:s.parse(Yf(_,o),p),y:a.parse(Yf(_,l),p)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,r,n){let i=this.chart,s=this._cachedMeta,a=r[e.axis],o={keys:hM(i,!0),values:r._stacks[e.axis]._visualValues};return vD(o,a,s.index,{mode:n})}updateRangeFromParsed(e,r,n,i){let s=n[r.axis],a=s===null?NaN:s,o=i&&n._stacks[r.axis];i&&o&&(i.values=o,a=vD(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,r){let n=this._cachedMeta,i=n._parsed,s=n._sorted&&e===n.iScale,a=i.length,o=this._getOtherScale(e),l=mU(r,n,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:h}=dU(o),p,_;function y(){_=i[p];let S=_[o.axis];return!it(_[e.axis])||c>S||h<S}for(p=0;p<a&&!(!y()&&(this.updateRangeFromParsed(u,e,_,l),s));++p);if(s){for(p=a-1;p>=0;--p)if(!y()){this.updateRangeFromParsed(u,e,_,l);break}}return u}getAllParsedValues(e){let r=this._cachedMeta._parsed,n=[],i,s,a;for(i=0,s=r.length;i<s;++i)a=r[i][e.axis],it(a)&&n.push(a);return n}getMaxOverflow(){return!1}getLabelAndValue(e){let r=this._cachedMeta,n=r.iScale,i=r.vScale,s=this.getParsed(e);return{label:n?""+n.getLabelForValue(s[n.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){let r=this._cachedMeta;this.update(e||"default"),r._clip=lU(we(this.options.clip,oU(r.xScale,r.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,r=this.chart,n=this._cachedMeta,i=n.data||[],s=r.chartArea,a=[],o=this._drawStart||0,l=this._drawCount||i.length-o,u=this.options.drawActiveElementsOnTop,c;for(n.dataset&&n.dataset.draw(e,s,o,l),c=o;c<o+l;++c){let h=i[c];h.hidden||(h.active&&u?a.push(h):h.draw(e,s))}for(c=0;c<a.length;++c)a[c].draw(e,s)}getStyle(e,r){let n=r?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,r,n){let i=this.getDataset(),s;if(e>=0&&e<this._cachedMeta.data.length){let a=this._cachedMeta.data[e];s=a.$context||(a.$context=pU(this.getContext(),e,a)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=hU(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!r,s.mode=n,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,r){return this._resolveElementOptions(this.dataElementType.id,r,e)}_resolveElementOptions(e,r="default",n){let i=r==="active",s=this._cachedDataOpts,a=e+"-"+r,o=s[a],l=this.enableOptionSharing&&Gf(n);if(o)return ED(o,l);let u=this.chart.config,c=u.datasetElementScopeKeys(this._type,e),h=i?[`${e}Hover`,"hover",e,""]:[e,""],p=u.getOptionScopes(this.getDataset(),c),_=Object.keys(st.elements[e]),y=()=>this.getContext(n,i,r),S=u.resolveNamedOptions(p,_,y,h);return S.$shared&&(S.$shared=l,s[a]=Object.freeze(ED(S,l))),S}_resolveAnimations(e,r,n){let i=this.chart,s=this._cachedDataOpts,a=`animation-${r}`,o=s[a];if(o)return o;let l;if(i.options.animation!==!1){let c=this.chart.config,h=c.datasetAnimationScopeKeys(this._type,r),p=c.getOptionScopes(this.getDataset(),h);l=c.createResolver(p,this.getContext(e,n,r))}let u=new L_(i,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,r){return!r||Hx(e)||this.chart._animationsDisabled}_getSharedOptions(e,r){let n=this.resolveDataElementOptions(e,r),i=this._sharedOptions,s=this.getSharedOptions(n),a=this.includeOptions(r,s)||s!==i;return this.updateSharedOptions(s,r,n),{sharedOptions:s,includeOptions:a}}updateElement(e,r,n,i){Hx(i)?Object.assign(e,n):this._resolveAnimations(r,i).update(e,n)}updateSharedOptions(e,r,n){e&&!Hx(r)&&this._resolveAnimations(void 0,r).update(e,n)}_setStyle(e,r,n,i){e.active=i;let s=this.getStyle(r,i);this._resolveAnimations(r,n,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,r,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,r,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let r=this._data,n=this._cachedMeta.data;for(let[o,l,u]of this._syncList)this[o](l,u);this._syncList=[];let i=n.length,s=r.length,a=Math.min(s,i);a&&this.parse(0,a),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,r,n=!0){let i=this._cachedMeta,s=i.data,a=e+r,o,l=u=>{for(u.length+=r,o=u.length-1;o>=a;o--)u[o]=u[o-r]};for(l(s),o=e;o<a;++o)s[o]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,r),n&&this.updateElements(s,e,r,"reset")}updateElements(e,r,n,i){}_removeElements(e,r){let n=this._cachedMeta;if(this._parsing){let i=n._parsed.splice(e,r);n._stacked&&eh(n,i)}n.data.splice(e,r)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[r,n,i]=e;this[r](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,r){r&&this._sync(["_removeElements",e,r]);let n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}};V(xl,"defaults",{}),V(xl,"datasetElementType",null),V(xl,"dataElementType",null);var Sl=class extends xl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let r=this._cachedMeta,{dataset:n,data:i=[],_dataset:s}=r,a=this.chart._animationsDisabled,{start:o,count:l}=eD(r,i,a);this._drawStart=o,this._drawCount=l,tD(r)&&(o=0,l=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!s._decimated,n.points=i;let u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(n,void 0,{animated:!a,options:u},e),this.updateElements(i,o,l,e)}updateElements(e,r,n,i){let s=i==="reset",{iScale:a,vScale:o,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:c,includeOptions:h}=this._getSharedOptions(r,i),p=a.axis,_=o.axis,{spanGaps:y,segment:S}=this.options,x=Sc(y)?y:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||s||i==="none",T=r+n,P=e.length,O=r>0&&this.getParsed(r-1);for(let A=0;A<P;++A){let R=e[A],F=k?R:{};if(A<r||A>=T){F.skip=!0;continue}let I=this.getParsed(A),U=Ge(I[_]),X=F[p]=a.getPixelForValue(I[p],A),z=F[_]=s||U?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,I,l):I[_],A);F.skip=isNaN(X)||isNaN(z)||U,F.stop=A>0&&Math.abs(I[p]-O[p])>x,S&&(F.parsed=I,F.raw=u.data[A]),h&&(F.options=c||this.resolveDataElementOptions(A,R.active?"active":i)),k||this.updateElement(R,A,F,i),O=I}}getMaxOverflow(){let e=this._cachedMeta,r=e.dataset,n=r.options&&r.options.borderWidth||0,i=e.data||[];if(!i.length)return n;let s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,s,a)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}};V(Sl,"id","line"),V(Sl,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),V(Sl,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function wl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Xx=class t{constructor(e){V(this,"options");this.options=e||{}}static override(e){Object.assign(t.prototype,e)}init(){}formats(){return wl()}parse(){return wl()}format(){return wl()}add(){return wl()}diff(){return wl()}startOf(){return wl()}endOf(){return wl()}},gU={_date:Xx};function _U(t,e,r,n){let{controller:i,data:s,_sorted:a}=t,o=i._cachedMeta.iScale;if(o&&e===o.axis&&e!=="r"&&a&&s.length){let l=o._reversePixels?Y2:Ua;if(n){if(i._sharedOptions){let u=s[0],c=typeof u.getRange=="function"&&u.getRange(e);if(c){let h=l(s,e,r-c),p=l(s,e,r+c);return{lo:h.lo,hi:p.hi}}}}else return l(s,e,r)}return{lo:0,hi:s.length-1}}function ch(t,e,r,n,i){let s=t.getSortedVisibleDatasetMetas(),a=r[e];for(let o=0,l=s.length;o<l;++o){let{index:u,data:c}=s[o],{lo:h,hi:p}=_U(s[o],e,a,i);for(let _=h;_<=p;++_){let y=c[_];y.skip||n(y,u,_)}}}function bU(t){let e=t.indexOf("x")!==-1,r=t.indexOf("y")!==-1;return function(n,i){let s=e?Math.abs(n.x-i.x):0,a=r?Math.abs(n.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function Vx(t,e,r,n,i){let s=[];return!i&&!t.isPointInArea(e)||ch(t,r,e,function(o,l,u){!i&&!zi(o,t.chartArea,0)||o.inRange(e.x,e.y,n)&&s.push({element:o,datasetIndex:l,index:u})},!0),s}function yU(t,e,r,n){let i=[];function s(a,o,l){let{startAngle:u,endAngle:c}=a.getProps(["startAngle","endAngle"],n),{angle:h}=H2(a,{x:e.x,y:e.y});Tx(h,u,c)&&i.push({element:a,datasetIndex:o,index:l})}return ch(t,r,e,s),i}function wU(t,e,r,n,i,s){let a=[],o=bU(r),l=Number.POSITIVE_INFINITY;function u(c,h,p){let _=c.inRange(e.x,e.y,i);if(n&&!_)return;let y=c.getCenterPoint(i);if(!(!!s||t.isPointInArea(y))&&!_)return;let x=o(e,y);x<l?(a=[{element:c,datasetIndex:h,index:p}],l=x):x===l&&a.push({element:c,datasetIndex:h,index:p})}return ch(t,r,e,u),a}function Yx(t,e,r,n,i,s){return!s&&!t.isPointInArea(e)?[]:r==="r"&&!n?yU(t,e,r,i):wU(t,e,r,n,i,s)}function TD(t,e,r,n,i){let s=[],a=r==="x"?"inXRange":"inYRange",o=!1;return ch(t,r,e,(l,u,c)=>{l[a]&&l[a](e[r],i)&&(s.push({element:l,datasetIndex:u,index:c}),o=o||l.inRange(e.x,e.y,i))}),n&&!o?[]:s}var vU={evaluateInteractionItems:ch,modes:{index(t,e,r,n){let i=Va(e,t),s=r.axis||"x",a=r.includeInvisible||!1,o=r.intersect?Vx(t,i,s,n,a):Yx(t,i,s,!1,n,a),l=[];return o.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{let c=o[0].index,h=u.data[c];h&&!h.skip&&l.push({element:h,datasetIndex:u.index,index:c})}),l):[]},dataset(t,e,r,n){let i=Va(e,t),s=r.axis||"xy",a=r.includeInvisible||!1,o=r.intersect?Vx(t,i,s,n,a):Yx(t,i,s,!1,n,a);if(o.length>0){let l=o[0].datasetIndex,u=t.getDatasetMeta(l).data;o=[];for(let c=0;c<u.length;++c)o.push({element:u[c],datasetIndex:l,index:c})}return o},point(t,e,r,n){let i=Va(e,t),s=r.axis||"xy",a=r.includeInvisible||!1;return Vx(t,i,s,n,a)},nearest(t,e,r,n){let i=Va(e,t),s=r.axis||"xy",a=r.includeInvisible||!1;return Yx(t,i,s,r.intersect,n,a)},x(t,e,r,n){let i=Va(e,t);return TD(t,i,"x",r.intersect,n)},y(t,e,r,n){let i=Va(e,t);return TD(t,i,"y",r.intersect,n)}}},pM=["left","top","right","bottom"];function th(t,e){return t.filter(r=>r.pos===e)}function CD(t,e){return t.filter(r=>pM.indexOf(r.pos)===-1&&r.box.axis===e)}function rh(t,e){return t.sort((r,n)=>{let i=e?n:r,s=e?r:n;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function xU(t){let e=[],r,n,i,s,a,o;for(r=0,n=(t||[]).length;r<n;++r)i=t[r],{position:s,options:{stack:a,stackWeight:o=1}}=i,e.push({index:r,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return e}function SU(t){let e={};for(let r of t){let{stack:n,pos:i,stackWeight:s}=r;if(!n||!pM.includes(i))continue;let a=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return e}function kU(t,e){let r=SU(t),{vBoxMaxWidth:n,hBoxMaxHeight:i}=e,s,a,o;for(s=0,a=t.length;s<a;++s){o=t[s];let{fullSize:l}=o.box,u=r[o.stack],c=u&&o.stackWeight/u.weight;o.horizontal?(o.width=c?c*n:l&&e.availableWidth,o.height=i):(o.width=n,o.height=c?c*i:l&&e.availableHeight)}return r}function EU(t){let e=xU(t),r=rh(e.filter(u=>u.box.fullSize),!0),n=rh(th(e,"left"),!0),i=rh(th(e,"right")),s=rh(th(e,"top"),!0),a=rh(th(e,"bottom")),o=CD(e,"x"),l=CD(e,"y");return{fullSize:r,leftAndTop:n.concat(s),rightAndBottom:i.concat(l).concat(a).concat(o),chartArea:th(e,"chartArea"),vertical:n.concat(i).concat(l),horizontal:s.concat(a).concat(o)}}function AD(t,e,r,n){return Math.max(t[r],e[r])+Math.max(t[n],e[n])}function mM(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function TU(t,e,r,n){let{pos:i,box:s}=r,a=t.maxPadding;if(!Ee(i)){r.size&&(t[i]-=r.size);let h=n[r.stack]||{size:0,count:1};h.size=Math.max(h.size,r.horizontal?s.height:s.width),r.size=h.size/h.count,t[i]+=r.size}s.getPadding&&mM(a,s.getPadding());let o=Math.max(0,e.outerWidth-AD(a,t,"left","right")),l=Math.max(0,e.outerHeight-AD(a,t,"top","bottom")),u=o!==t.w,c=l!==t.h;return t.w=o,t.h=l,r.horizontal?{same:u,other:c}:{same:c,other:u}}function CU(t){let e=t.maxPadding;function r(n){let i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=r("top"),t.x+=r("left"),r("right"),r("bottom")}function AU(t,e){let r=e.maxPadding;function n(i){let s={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{s[a]=Math.max(e[a],r[a])}),s}return n(t?["left","right"]:["top","bottom"])}function sh(t,e,r,n){let i=[],s,a,o,l,u,c;for(s=0,a=t.length,u=0;s<a;++s){o=t[s],l=o.box,l.update(o.width||e.w,o.height||e.h,AU(o.horizontal,e));let{same:h,other:p}=TU(e,r,o,n);u|=h&&i.length,c=c||p,l.fullSize||i.push(o)}return u&&sh(i,e,r,n)||c}function E_(t,e,r,n,i){t.top=r,t.left=e,t.right=e+n,t.bottom=r+i,t.width=n,t.height=i}function PD(t,e,r,n){let i=r.padding,{x:s,y:a}=e;for(let o of t){let l=o.box,u=n[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/u.weight||1;if(o.horizontal){let h=e.w*c,p=u.size||l.height;Gf(u.start)&&(a=u.start),l.fullSize?E_(l,i.left,a,r.outerWidth-i.right-i.left,p):E_(l,e.left+u.placed,a,h,p),u.start=a,u.placed+=h,a=l.bottom}else{let h=e.h*c,p=u.size||l.width;Gf(u.start)&&(s=u.start),l.fullSize?E_(l,s,i.top,p,r.outerHeight-i.bottom-i.top):E_(l,s,e.top+u.placed,p,h),u.start=s,u.placed+=h,s=l.right}}e.x=s,e.y=a}var In={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(r){e.draw(r)}}]},t.boxes.push(e)},removeBox(t,e){let r=t.boxes?t.boxes.indexOf(e):-1;r!==-1&&t.boxes.splice(r,1)},configure(t,e,r){e.fullSize=r.fullSize,e.position=r.position,e.weight=r.weight},update(t,e,r,n){if(!t)return;let i=Ht(t.options.layout.padding),s=Math.max(e-i.width,0),a=Math.max(r-i.height,0),o=EU(t.boxes),l=o.vertical,u=o.horizontal;je(t.boxes,S=>{typeof S.beforeLayout=="function"&&S.beforeLayout()});let c=l.reduce((S,x)=>x.box.options&&x.box.options.display===!1?S:S+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:r,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/c,hBoxMaxHeight:a/2}),p=Object.assign({},i);mM(p,Ht(n));let _=Object.assign({maxPadding:p,w:s,h:a,x:i.left,y:i.top},i),y=kU(l.concat(u),h);sh(o.fullSize,_,h,y),sh(l,_,h,y),sh(u,_,h,y)&&sh(l,_,h,y),CU(_),PD(o.leftAndTop,_,h,y),_.x+=_.w,_.y+=_.h,PD(o.rightAndBottom,_,h,y),t.chartArea={left:_.left,top:_.top,right:_.left+_.w,bottom:_.top+_.h,height:_.h,width:_.w},je(o.chartArea,S=>{let x=S.box;Object.assign(x,t.chartArea),x.update(_.w,_.h,{left:0,top:0,right:0,bottom:0})})}},F_=class{acquireContext(e,r){}releaseContext(e){return!1}addEventListener(e,r,n){}removeEventListener(e,r,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,r,n,i){return r=Math.max(0,r||e.width),n=n||e.height,{width:r,height:Math.max(0,i?Math.floor(r/i):n)}}isAttached(e){return!0}updateConfig(e){}},Qx=class extends F_{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},M_="$chartjs",PU={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},OD=t=>t===null||t==="";function OU(t,e){let r=t.style,n=t.getAttribute("height"),i=t.getAttribute("width");if(t[M_]={initial:{height:n,width:i,style:{display:r.display,height:r.height,width:r.width}}},r.display=r.display||"block",r.boxSizing=r.boxSizing||"border-box",OD(i)){let s=Bx(t,"width");s!==void 0&&(t.width=s)}if(OD(n))if(t.style.height==="")t.height=t.width/(e||2);else{let s=Bx(t,"height");s!==void 0&&(t.height=s)}return t}var gM=pD?{passive:!0}:!1;function RU(t,e,r){t&&t.addEventListener(e,r,gM)}function DU(t,e,r){t&&t.canvas&&t.canvas.removeEventListener(e,r,gM)}function MU(t,e){let r=PU[t.type]||t.type,{x:n,y:i}=Va(t,e);return{type:r,chart:e,native:t,x:n!==void 0?n:null,y:i!==void 0?i:null}}function N_(t,e){for(let r of t)if(r===e||r.contains(e))return!0}function IU(t,e,r){let n=t.canvas,i=new MutationObserver(s=>{let a=!1;for(let o of s)a=a||N_(o.addedNodes,n),a=a&&!N_(o.removedNodes,n);a&&r()});return i.observe(document,{childList:!0,subtree:!0}),i}function LU(t,e,r){let n=t.canvas,i=new MutationObserver(s=>{let a=!1;for(let o of s)a=a||N_(o.removedNodes,n),a=a&&!N_(o.addedNodes,n);a&&r()});return i.observe(document,{childList:!0,subtree:!0}),i}var lh=new Map,RD=0;function _M(){let t=window.devicePixelRatio;t!==RD&&(RD=t,lh.forEach((e,r)=>{r.currentDevicePixelRatio!==t&&e()}))}function FU(t,e){lh.size||window.addEventListener("resize",_M),lh.set(t,e)}function NU(t){lh.delete(t),lh.size||window.removeEventListener("resize",_M)}function jU(t,e,r){let n=t.canvas,i=n&&S_(n);if(!i)return;let s=Px((o,l)=>{let u=i.clientWidth;r(o,l),u<i.clientWidth&&r()},window),a=new ResizeObserver(o=>{let l=o[0],u=l.contentRect.width,c=l.contentRect.height;u===0&&c===0||s(u,c)});return a.observe(i),FU(t,s),a}function Gx(t,e,r){r&&r.disconnect(),e==="resize"&&NU(t)}function BU(t,e,r){let n=t.canvas,i=Px(s=>{t.ctx!==null&&r(MU(s,t))},t);return RU(n,e,i),i}var e1=class extends F_{acquireContext(e,r){let n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(OU(e,r),n):null}releaseContext(e){let r=e.canvas;if(!r[M_])return!1;let n=r[M_].initial;["height","width"].forEach(s=>{let a=n[s];Ge(a)?r.removeAttribute(s):r.setAttribute(s,a)});let i=n.style||{};return Object.keys(i).forEach(s=>{r.style[s]=i[s]}),r.width=r.width,delete r[M_],!0}addEventListener(e,r,n){this.removeEventListener(e,r);let i=e.$proxies||(e.$proxies={}),a={attach:IU,detach:LU,resize:jU}[r]||BU;i[r]=a(e,r,n)}removeEventListener(e,r){let n=e.$proxies||(e.$proxies={}),i=n[r];if(!i)return;({attach:Gx,detach:Gx,resize:Gx}[r]||DU)(e,r,i),n[r]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,r,n,i){return hD(e,r,n,i)}isAttached(e){let r=e&&S_(e);return!!(r&&r.isConnected)}};function $U(t){return!x_()||typeof OffscreenCanvas!="undefined"&&t instanceof OffscreenCanvas?Qx:e1}var di=class{constructor(){V(this,"x");V(this,"y");V(this,"active",!1);V(this,"options");V(this,"$animations")}tooltipPosition(e){let{x:r,y:n}=this.getProps(["x","y"],e);return{x:r,y:n}}hasValue(){return Sc(this.x)&&Sc(this.y)}getProps(e,r){let n=this.$animations;if(!r||!n)return this;let i={};return e.forEach(s=>{i[s]=n[s]&&n[s].active()?n[s]._to:this[s]}),i}};V(di,"defaults",{}),V(di,"defaultRoutes");function zU(t,e){let r=t.options.ticks,n=UU(t),i=Math.min(r.maxTicksLimit||n,n),s=r.major.enabled?qU(e):[],a=s.length,o=s[0],l=s[a-1],u=[];if(a>i)return HU(e,u,s,a/i),u;let c=WU(s,e,i);if(a>0){let h,p,_=a>1?Math.round((l-o)/(a-1)):null;for(T_(e,u,c,Ge(_)?0:o-_,o),h=0,p=a-1;h<p;h++)T_(e,u,c,s[h],s[h+1]);return T_(e,u,c,l,Ge(_)?e.length:l+_),u}return T_(e,u,c),u}function UU(t){let e=t.options.offset,r=t._tickSize(),n=t._length/r+(e?0:1),i=t._maxLength/r;return Math.floor(Math.min(n,i))}function WU(t,e,r){let n=VU(t),i=e.length/r;if(!n)return Math.max(i,1);let s=W2(n);for(let a=0,o=s.length-1;a<o;a++){let l=s[a];if(l>i)return l}return Math.max(i,1)}function qU(t){let e=[],r,n;for(r=0,n=t.length;r<n;r++)t[r].major&&e.push(r);return e}function HU(t,e,r,n){let i=0,s=r[0],a;for(n=Math.ceil(n),a=0;a<t.length;a++)a===s&&(e.push(t[a]),i++,s=r[i*n])}function T_(t,e,r,n,i){let s=we(n,0),a=Math.min(we(i,t.length),t.length),o=0,l,u,c;for(r=Math.ceil(r),i&&(l=i-n,r=l/Math.floor(l/r)),c=s;c<0;)o++,c=Math.round(s+o*r);for(u=Math.max(s,0);u<a;u++)u===c&&(e.push(t[u]),o++,c=Math.round(s+o*r))}function VU(t){let e=t.length,r,n;if(e<2)return!1;for(n=t[0],r=1;r<e;++r)if(t[r]-t[r-1]!==n)return!1;return n}var YU=t=>t==="left"?"right":t==="right"?"left":t,DD=(t,e,r)=>e==="top"||e==="left"?t[e]+r:t[e]-r,MD=(t,e)=>Math.min(e||t,t);function ID(t,e){let r=[],n=t.length/e,i=t.length,s=0;for(;s<i;s+=n)r.push(t[Math.floor(s)]);return r}function GU(t,e,r){let n=t.ticks.length,i=Math.min(e,n-1),s=t._startPixel,a=t._endPixel,o=1e-6,l=t.getPixelForTick(i),u;if(!(r&&(n===1?u=Math.max(l-s,a-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(i-1))/2,l+=i<e?u:-u,l<s-o||l>a+o)))return l}function ZU(t,e){je(t,r=>{let n=r.gc,i=n.length/2,s;if(i>e){for(s=0;s<i;++s)delete r.data[n[s]];n.splice(0,i)}})}function nh(t){return t.drawTicks?t.tickLength:0}function LD(t,e){if(!t.display)return 0;let r=St(t.font,e),n=Ht(t.padding);return(Ke(t.text)?t.text.length:1)*r.lineHeight+n.height}function JU(t,e){return Zs(t,{scale:e,type:"scale"})}function KU(t,e,r){return Zs(t,{tick:r,index:e,type:"tick"})}function XU(t,e,r){let n=__(t);return(r&&e!=="right"||!r&&e==="right")&&(n=YU(n)),n}function QU(t,e,r,n){let{top:i,left:s,bottom:a,right:o,chart:l}=t,{chartArea:u,scales:c}=l,h=0,p,_,y,S=a-i,x=o-s;if(t.isHorizontal()){if(_=qt(n,s,o),Ee(r)){let k=Object.keys(r)[0],T=r[k];y=c[k].getPixelForValue(T)+S-e}else r==="center"?y=(u.bottom+u.top)/2+S-e:y=DD(t,r,e);p=o-s}else{if(Ee(r)){let k=Object.keys(r)[0],T=r[k];_=c[k].getPixelForValue(T)-x+e}else r==="center"?_=(u.left+u.right)/2-x+e:_=DD(t,r,e);y=qt(n,a,i),h=r==="left"?-Br:Br}return{titleX:_,titleY:y,maxWidth:p,rotation:h}}var El=class t extends di{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,r){return e}getUserBounds(){let{_userMin:e,_userMax:r,_suggestedMin:n,_suggestedMax:i}=this;return e=zr(e,Number.POSITIVE_INFINITY),r=zr(r,Number.NEGATIVE_INFINITY),n=zr(n,Number.POSITIVE_INFINITY),i=zr(i,Number.NEGATIVE_INFINITY),{min:zr(e,n),max:zr(r,i),minDefined:it(e),maxDefined:it(r)}}getMinMax(e){let{min:r,max:n,minDefined:i,maxDefined:s}=this.getUserBounds(),a;if(i&&s)return{min:r,max:n};let o=this.getMatchingVisibleMetas();for(let l=0,u=o.length;l<u;++l)a=o[l].controller.getMinMax(this,e),i||(r=Math.min(r,a.min)),s||(n=Math.max(n,a.max));return r=s&&r>n?n:r,n=i&&r>n?r:n,{min:zr(r,zr(n,r)),max:zr(n,zr(r,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){qe(this.options.beforeUpdate,[this])}update(e,r,n){let{beginAtZero:i,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=r,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=oD(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=o<this.ticks.length;this._convertTicksToLabels(l?ID(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=zU(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,r,n;this.isHorizontal()?(r=this.left,n=this.right):(r=this.top,n=this.bottom,e=!e),this._startPixel=r,this._endPixel=n,this._reversePixels=e,this._length=n-r,this._alignToPixels=this.options.alignToPixels}afterUpdate(){qe(this.options.afterUpdate,[this])}beforeSetDimensions(){qe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){qe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),qe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){qe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let r=this.options.ticks,n,i,s;for(n=0,i=e.length;n<i;n++)s=e[n],s.label=qe(r.callback,[s.value,n,e],this)}afterTickToLabelConversion(){qe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){qe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,r=e.ticks,n=MD(this.ticks.length,e.ticks.maxTicksLimit),i=r.minRotation||0,s=r.maxRotation,a=i,o,l,u;if(!this._isVisible()||!r.display||i>=s||n<=1||!this.isHorizontal()){this.labelRotation=i;return}let c=this._getLabelSizes(),h=c.widest.width,p=c.highest.height,_=ln(this.chart.width-h,0,this.maxWidth);o=e.offset?this.maxWidth/n:_/(n-1),h+6>o&&(o=_/(n-(e.offset?.5:1)),l=this.maxHeight-nh(e.grid)-r.padding-LD(e.title,this.chart.options.font),u=Math.sqrt(h*h+p*p),a=m_(Math.min(Math.asin(ln((c.highest.height+6)/o,-1,1)),Math.asin(ln(l/u,-1,1))-Math.asin(ln(p/u,-1,1)))),a=Math.max(i,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){qe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){qe(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:r,options:{ticks:n,title:i,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){let l=LD(i,r.options.font);if(o?(e.width=this.maxWidth,e.height=nh(s)+l):(e.height=this.maxHeight,e.width=nh(s)+l),n.display&&this.ticks.length){let{first:u,last:c,widest:h,highest:p}=this._getLabelSizes(),_=n.padding*2,y=Gs(this.labelRotation),S=Math.cos(y),x=Math.sin(y);if(o){let k=n.mirror?0:x*h.width+S*p.height;e.height=Math.min(this.maxHeight,e.height+k+_)}else{let k=n.mirror?0:S*h.width+x*p.height;e.width=Math.min(this.maxWidth,e.width+k+_)}this._calculatePadding(u,c,x,S)}}this._handleMargins(),o?(this.width=this._length=r.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=r.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,r,n,i){let{ticks:{align:s,padding:a},position:o}=this.options,l=this.labelRotation!==0,u=o!=="top"&&this.axis==="x";if(this.isHorizontal()){let c=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),p=0,_=0;l?u?(p=i*e.width,_=n*r.height):(p=n*e.height,_=i*r.width):s==="start"?_=r.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,_=r.width/2),this.paddingLeft=Math.max((p-c+a)*this.width/(this.width-c),0),this.paddingRight=Math.max((_-h+a)*this.width/(this.width-h),0)}else{let c=r.height/2,h=e.height/2;s==="start"?(c=0,h=e.height):s==="end"&&(c=r.height,h=0),this.paddingTop=c+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){qe(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:r}=this.options;return r==="top"||r==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let r,n;for(r=0,n=e.length;r<n;r++)Ge(e[r].label)&&(e.splice(r,1),n--,r--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let r=this.options.ticks.sampleSize,n=this.ticks;r<n.length&&(n=ID(n,r)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,r,n){let{ctx:i,_longestTextCache:s}=this,a=[],o=[],l=Math.floor(r/MD(r,n)),u=0,c=0,h,p,_,y,S,x,k,T,P,O,A;for(h=0;h<r;h+=l){if(y=e[h].label,S=this._resolveTickFontOptions(h),i.font=x=S.string,k=s[x]=s[x]||{data:{},gc:[]},T=S.lineHeight,P=O=0,!Ge(y)&&!Ke(y))P=Hf(i,k.data,k.gc,P,y),O=T;else if(Ke(y))for(p=0,_=y.length;p<_;++p)A=y[p],!Ge(A)&&!Ke(A)&&(P=Hf(i,k.data,k.gc,P,A),O+=T);a.push(P),o.push(O),u=Math.max(P,u),c=Math.max(O,c)}ZU(s,r);let R=a.indexOf(u),F=o.indexOf(c),I=U=>({width:a[U]||0,height:o[U]||0});return{first:I(0),last:I(r-1),widest:I(R),highest:I(F),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,r){return NaN}getValueForPixel(e){}getPixelForTick(e){let r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let r=this._startPixel+e*this._length;return V2(this._alignToPixels?qa(this.chart,r,0):r)}getDecimalForPixel(e){let r=(e-this._startPixel)/this._length;return this._reversePixels?1-r:r}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:r}=this;return e<0&&r<0?r:e>0&&r>0?e:0}getContext(e){let r=this.ticks||[];if(e>=0&&e<r.length){let n=r[e];return n.$context||(n.$context=KU(this.getContext(),e,n))}return this.$context||(this.$context=JU(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,r=Gs(this.labelRotation),n=Math.abs(Math.cos(r)),i=Math.abs(Math.sin(r)),s=this._getLabelSizes(),a=e.autoSkipPadding||0,o=s?s.widest.width+a:0,l=s?s.highest.height+a:0;return this.isHorizontal()?l*n>o*i?o/n:l/i:l*i<o*n?l/n:o/i}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let r=this.axis,n=this.chart,i=this.options,{grid:s,position:a,border:o}=i,l=s.offset,u=this.isHorizontal(),h=this.ticks.length+(l?1:0),p=nh(s),_=[],y=o.setContext(this.getContext()),S=y.display?y.width:0,x=S/2,k=function(Le){return qa(n,Le,S)},T,P,O,A,R,F,I,U,X,z,ne,ge;if(a==="top")T=k(this.bottom),F=this.bottom-p,U=T-x,z=k(e.top)+x,ge=e.bottom;else if(a==="bottom")T=k(this.top),z=e.top,ge=k(e.bottom)-x,F=T+x,U=this.top+p;else if(a==="left")T=k(this.right),R=this.right-p,I=T-x,X=k(e.left)+x,ne=e.right;else if(a==="right")T=k(this.left),X=e.left,ne=k(e.right)-x,R=T+x,I=this.left+p;else if(r==="x"){if(a==="center")T=k((e.top+e.bottom)/2+.5);else if(Ee(a)){let Le=Object.keys(a)[0],Xe=a[Le];T=k(this.chart.scales[Le].getPixelForValue(Xe))}z=e.top,ge=e.bottom,F=T+x,U=F+p}else if(r==="y"){if(a==="center")T=k((e.left+e.right)/2);else if(Ee(a)){let Le=Object.keys(a)[0],Xe=a[Le];T=k(this.chart.scales[Le].getPixelForValue(Xe))}R=T-x,I=R-p,X=e.left,ne=e.right}let $e=we(i.ticks.maxTicksLimit,h),ve=Math.max(1,Math.ceil(h/$e));for(P=0;P<h;P+=ve){let Le=this.getContext(P),Xe=s.setContext(Le),De=o.setContext(Le),wr=Xe.lineWidth,Ft=Xe.color,vr=De.dash||[],at=De.dashOffset,Q=Xe.tickWidth,mt=Xe.tickColor,gt=Xe.tickBorderDash||[],xr=Xe.tickBorderDashOffset;O=GU(this,P,l),O!==void 0&&(A=qa(n,O,wr),u?R=I=X=ne=A:F=U=z=ge=A,_.push({tx1:R,ty1:F,tx2:I,ty2:U,x1:X,y1:z,x2:ne,y2:ge,width:wr,color:Ft,borderDash:vr,borderDashOffset:at,tickWidth:Q,tickColor:mt,tickBorderDash:gt,tickBorderDashOffset:xr}))}return this._ticksLength=h,this._borderValue=T,_}_computeLabelItems(e){let r=this.axis,n=this.options,{position:i,ticks:s}=n,a=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:u,padding:c,mirror:h}=s,p=nh(n.grid),_=p+c,y=h?-c:_,S=-Gs(this.labelRotation),x=[],k,T,P,O,A,R,F,I,U,X,z,ne,ge="middle";if(i==="top")R=this.bottom-y,F=this._getXAxisLabelAlignment();else if(i==="bottom")R=this.top+y,F=this._getXAxisLabelAlignment();else if(i==="left"){let ve=this._getYAxisLabelAlignment(p);F=ve.textAlign,A=ve.x}else if(i==="right"){let ve=this._getYAxisLabelAlignment(p);F=ve.textAlign,A=ve.x}else if(r==="x"){if(i==="center")R=(e.top+e.bottom)/2+_;else if(Ee(i)){let ve=Object.keys(i)[0],Le=i[ve];R=this.chart.scales[ve].getPixelForValue(Le)+_}F=this._getXAxisLabelAlignment()}else if(r==="y"){if(i==="center")A=(e.left+e.right)/2-_;else if(Ee(i)){let ve=Object.keys(i)[0],Le=i[ve];A=this.chart.scales[ve].getPixelForValue(Le)}F=this._getYAxisLabelAlignment(p).textAlign}r==="y"&&(l==="start"?ge="top":l==="end"&&(ge="bottom"));let $e=this._getLabelSizes();for(k=0,T=o.length;k<T;++k){P=o[k],O=P.label;let ve=s.setContext(this.getContext(k));I=this.getPixelForTick(k)+s.labelOffset,U=this._resolveTickFontOptions(k),X=U.lineHeight,z=Ke(O)?O.length:1;let Le=z/2,Xe=ve.color,De=ve.textStrokeColor,wr=ve.textStrokeWidth,Ft=F;a?(A=I,F==="inner"&&(k===T-1?Ft=this.options.reverse?"left":"right":k===0?Ft=this.options.reverse?"right":"left":Ft="center"),i==="top"?u==="near"||S!==0?ne=-z*X+X/2:u==="center"?ne=-$e.highest.height/2-Le*X+X:ne=-$e.highest.height+X/2:u==="near"||S!==0?ne=X/2:u==="center"?ne=$e.highest.height/2-Le*X:ne=$e.highest.height-z*X,h&&(ne*=-1),S!==0&&!ve.showLabelBackdrop&&(A+=X/2*Math.sin(S))):(R=I,ne=(1-z)*X/2);let vr;if(ve.showLabelBackdrop){let at=Ht(ve.backdropPadding),Q=$e.heights[k],mt=$e.widths[k],gt=ne-at.top,xr=0-at.left;switch(ge){case"middle":gt-=Q/2;break;case"bottom":gt-=Q;break}switch(F){case"center":xr-=mt/2;break;case"right":xr-=mt;break;case"inner":k===T-1?xr-=mt:k>0&&(xr-=mt/2);break}vr={left:xr,top:gt,width:mt+at.width,height:Q+at.height,color:ve.backdropColor}}x.push({label:O,font:U,textOffset:ne,options:{rotation:S,color:Xe,strokeColor:De,strokeWidth:wr,textAlign:Ft,textBaseline:ge,translation:[A,R],backdrop:vr}})}return x}_getXAxisLabelAlignment(){let{position:e,ticks:r}=this.options;if(-Gs(this.labelRotation))return e==="top"?"left":"right";let i="center";return r.align==="start"?i="left":r.align==="end"?i="right":r.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){let{position:r,ticks:{crossAlign:n,mirror:i,padding:s}}=this.options,a=this._getLabelSizes(),o=e+s,l=a.widest.width,u,c;return r==="left"?i?(c=this.right+s,n==="near"?u="left":n==="center"?(u="center",c+=l/2):(u="right",c+=l)):(c=this.right-o,n==="near"?u="right":n==="center"?(u="center",c-=l/2):(u="left",c=this.left)):r==="right"?i?(c=this.left+s,n==="near"?u="right":n==="center"?(u="center",c-=l/2):(u="left",c-=l)):(c=this.left+o,n==="near"?u="left":n==="center"?(u="center",c+=l/2):(u="right",c=this.right)):u="right",{textAlign:u,x:c}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,r=this.options.position;if(r==="left"||r==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(r==="top"||r==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:r},left:n,top:i,width:s,height:a}=this;r&&(e.save(),e.fillStyle=r,e.fillRect(n,i,s,a),e.restore())}getLineWidthForValue(e){let r=this.options.grid;if(!this._isVisible()||!r.display)return 0;let i=this.ticks.findIndex(s=>s.value===e);return i>=0?r.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let r=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,a,o=(l,u,c)=>{!c.width||!c.color||(n.save(),n.lineWidth=c.width,n.strokeStyle=c.color,n.setLineDash(c.borderDash||[]),n.lineDashOffset=c.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(u.x,u.y),n.stroke(),n.restore())};if(r.display)for(s=0,a=i.length;s<a;++s){let l=i[s];r.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),r.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:r,options:{border:n,grid:i}}=this,s=n.setContext(this.getContext()),a=n.display?s.width:0;if(!a)return;let o=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue,u,c,h,p;this.isHorizontal()?(u=qa(e,this.left,a)-a/2,c=qa(e,this.right,o)+o/2,h=p=l):(h=qa(e,this.top,a)-a/2,p=qa(e,this.bottom,o)+o/2,u=c=l),r.save(),r.lineWidth=s.width,r.strokeStyle=s.color,r.beginPath(),r.moveTo(u,h),r.lineTo(c,p),r.stroke(),r.restore()}drawLabels(e){if(!this.options.ticks.display)return;let n=this.ctx,i=this._computeLabelArea();i&&Jf(n,i);let s=this.getLabelItems(e);for(let a of s){let o=a.options,l=a.font,u=a.label,c=a.textOffset;Ha(n,u,0,c,l,o)}i&&Kf(n)}drawTitle(){let{ctx:e,options:{position:r,title:n,reverse:i}}=this;if(!n.display)return;let s=St(n.font),a=Ht(n.padding),o=n.align,l=s.lineHeight/2;r==="bottom"||r==="center"||Ee(r)?(l+=a.bottom,Ke(n.text)&&(l+=s.lineHeight*(n.text.length-1))):l+=a.top;let{titleX:u,titleY:c,maxWidth:h,rotation:p}=QU(this,l,r,o);Ha(e,n.text,0,0,s,{color:n.color,maxWidth:h,rotation:p,textAlign:XU(o,r,i),textBaseline:"middle",translation:[u,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,r=e.ticks&&e.ticks.z||0,n=we(e.grid&&e.grid.z,-1),i=we(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==t.prototype.draw?[{z:r,draw:s=>{this.draw(s)}}]:[{z:n,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:r,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let r=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[],s,a;for(s=0,a=r.length;s<a;++s){let o=r[s];o[n]===this.id&&(!e||o.type===e)&&i.push(o)}return i}_resolveTickFontOptions(e){let r=this.options.ticks.setContext(this.getContext(e));return St(r.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Ec=class{constructor(e,r,n){this.type=e,this.scope=r,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let r=Object.getPrototypeOf(e),n;rW(r)&&(n=this.register(r));let i=this.items,s=e.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,eW(e,a,n),this.override&&st.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){let r=this.items,n=e.id,i=this.scope;n in r&&delete r[n],i&&n in st[i]&&(delete st[i][n],this.override&&delete Wa[n])}};function eW(t,e,r){let n=yc(Object.create(null),[r?st.get(r):{},st.get(e),t.defaults]);st.set(e,n),t.defaultRoutes&&tW(e,t.defaultRoutes),t.descriptors&&st.describe(e,t.descriptors)}function tW(t,e){Object.keys(e).forEach(r=>{let n=r.split("."),i=n.pop(),s=[t].concat(n).join("."),a=e[r].split("."),o=a.pop(),l=a.join(".");st.route(s,i,l,o)})}function rW(t){return"id"in t&&"defaults"in t}var t1=class{constructor(){this.controllers=new Ec(xl,"datasets",!0),this.elements=new Ec(di,"elements"),this.plugins=new Ec(Object,"plugins"),this.scales=new Ec(El,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,r,n){[...r].forEach(i=>{let s=n||this._getRegistryForType(i);n||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):je(i,a=>{let o=n||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,r,n){let i=p_(e);qe(n["before"+i],[],n),r[e](n),qe(n["after"+i],[],n)}_getRegistryForType(e){for(let r=0;r<this._typedRegistries.length;r++){let n=this._typedRegistries[r];if(n.isForType(e))return n}return this.plugins}_get(e,r,n){let i=r.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return i}},qi=new t1,r1=class{constructor(){this._init=[]}notify(e,r,n,i){r==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let s=i?this._descriptors(e).filter(i):this._descriptors(e),a=this._notify(s,e,r,n);return r==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),a}_notify(e,r,n,i){i=i||{};for(let s of e){let a=s.plugin,o=a[n],l=[r,i,s.options];if(qe(o,l,a)===!1&&i.cancelable)return!1}return!0}invalidate(){Ge(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let r=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),r}_createDescriptors(e,r){let n=e&&e.config,i=we(n.options&&n.options.plugins,{}),s=nW(n);return i===!1&&!r?[]:sW(e,s,i,r)}_notifyStateChanges(e){let r=this._oldCache||[],n=this._cache,i=(s,a)=>s.filter(o=>!a.some(l=>o.plugin.id===l.plugin.id));this._notify(i(r,n),e,"stop"),this._notify(i(n,r),e,"start")}};function nW(t){let e={},r=[],n=Object.keys(qi.plugins.items);for(let s=0;s<n.length;s++)r.push(qi.getPlugin(n[s]));let i=t.plugins||[];for(let s=0;s<i.length;s++){let a=i[s];r.indexOf(a)===-1&&(r.push(a),e[a.id]=!0)}return{plugins:r,localIds:e}}function iW(t,e){return!e&&t===!1?null:t===!0?{}:t}function sW(t,{plugins:e,localIds:r},n,i){let s=[],a=t.getContext();for(let o of e){let l=o.id,u=iW(n[l],i);u!==null&&s.push({plugin:o,options:aW(t.config,{plugin:o,local:r[l]},u,a)})}return s}function aW(t,{plugin:e,local:r},n,i){let s=t.pluginScopeKeys(e),a=t.getOptionScopes(n,s);return r&&e.defaults&&a.push(e.defaults),t.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function n1(t,e){let r=st.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||r.indexAxis||"x"}function oW(t,e){let r=t;return t==="_index_"?r=e:t==="_value_"&&(r=e==="x"?"y":"x"),r}function lW(t,e){return t===e?"_index_":"_value_"}function FD(t){if(t==="x"||t==="y"||t==="r")return t}function uW(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function i1(t,...e){if(FD(t))return t;for(let r of e){let n=r.axis||uW(r.position)||t.length>1&&FD(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function ND(t,e,r){if(r[e+"AxisID"]===t)return{axis:e}}function cW(t,e){if(e.data&&e.data.datasets){let r=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(r.length)return ND(t,"x",r[0])||ND(t,"y",r[0])}return{}}function dW(t,e){let r=Wa[t.type]||{scales:{}},n=e.scales||{},i=n1(t.type,e),s=Object.create(null);return Object.keys(n).forEach(a=>{let o=n[a];if(!Ee(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);let l=i1(a,o,cW(a,t),st.scales[o.type]),u=lW(l,i),c=r.scales||{};s[a]=vc(Object.create(null),[{axis:l},o,c[l],c[u]])}),t.data.datasets.forEach(a=>{let o=a.type||t.type,l=a.indexAxis||n1(o,e),c=(Wa[o]||{}).scales||{};Object.keys(c).forEach(h=>{let p=oW(h,l),_=a[p+"AxisID"]||p;s[_]=s[_]||Object.create(null),vc(s[_],[{axis:p},n[_],c[h]])})}),Object.keys(s).forEach(a=>{let o=s[a];vc(o,[st.scales[o.type],st.scale])}),s}function bM(t){let e=t.options||(t.options={});e.plugins=we(e.plugins,{}),e.scales=dW(t,e)}function yM(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function fW(t){return t=t||{},t.data=yM(t.data),bM(t),t}var jD=new Map,wM=new Set;function C_(t,e){let r=jD.get(t);return r||(r=e(),jD.set(t,r),wM.add(r)),r}var ih=(t,e,r)=>{let n=Yf(e,r);n!==void 0&&t.add(n)},s1=class{constructor(e){this._config=fW(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=yM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),bM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return C_(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,r){return C_(`${e}.transition.${r}`,()=>[[`datasets.${e}.transitions.${r}`,`transitions.${r}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,r){return C_(`${e}-${r}`,()=>[[`datasets.${e}.elements.${r}`,`datasets.${e}`,`elements.${r}`,""]])}pluginScopeKeys(e){let r=e.id,n=this.type;return C_(`${n}-plugin-${r}`,()=>[[`plugins.${r}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,r){let n=this._scopeCache,i=n.get(e);return(!i||r)&&(i=new Map,n.set(e,i)),i}getOptionScopes(e,r,n){let{options:i,type:s}=this,a=this._cachedScopes(e,n),o=a.get(r);if(o)return o;let l=new Set;r.forEach(c=>{e&&(l.add(e),c.forEach(h=>ih(l,e,h))),c.forEach(h=>ih(l,i,h)),c.forEach(h=>ih(l,Wa[s]||{},h)),c.forEach(h=>ih(l,st,h)),c.forEach(h=>ih(l,y_,h))});let u=Array.from(l);return u.length===0&&u.push(Object.create(null)),wM.has(r)&&a.set(r,u),u}chartOptionScopes(){let{options:e,type:r}=this;return[e,Wa[r]||{},st.datasets[r]||{},{type:r},st,y_]}resolveNamedOptions(e,r,n,i=[""]){let s={$shared:!0},{resolver:a,subPrefixes:o}=BD(this._resolverCache,e,i),l=a;if(pW(a,r)){s.$shared=!1,n=Vs(n)?n():n;let u=this.createResolver(e,n,o);l=gl(a,n,u)}for(let u of r)s[u]=l[u];return s}createResolver(e,r,n=[""],i){let{resolver:s}=BD(this._resolverCache,e,n);return Ee(r)?gl(s,r,void 0,i):s}};function BD(t,e,r){let n=t.get(e);n||(n=new Map,t.set(e,n));let i=r.join(),s=n.get(i);return s||(s={resolver:v_(e,r),subPrefixes:r.filter(o=>!o.toLowerCase().includes("hover"))},n.set(i,s)),s}var hW=t=>Ee(t)&&Object.getOwnPropertyNames(t).some(e=>Vs(t[e]));function pW(t,e){let{isScriptable:r,isIndexable:n}=Lx(t);for(let i of e){let s=r(i),a=n(i),o=(a||s)&&t[i];if(s&&(Vs(o)||hW(o))||a&&Ke(o))return!0}return!1}var mW="4.4.4",gW=["top","bottom","left","right","chartArea"];function $D(t,e){return t==="top"||t==="bottom"||gW.indexOf(t)===-1&&e==="x"}function zD(t,e){return function(r,n){return r[t]===n[t]?r[e]-n[e]:r[t]-n[t]}}function UD(t){let e=t.chart,r=e.options.animation;e.notifyPlugins("afterRender"),qe(r&&r.onComplete,[t],e)}function _W(t){let e=t.chart,r=e.options.animation;qe(r&&r.onProgress,[t],e)}function vM(t){return x_()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}var I_={},WD=t=>{let e=vM(t);return Object.values(I_).filter(r=>r.canvas===e).pop()};function bW(t,e,r){let n=Object.keys(t);for(let i of n){let s=+i;if(s>=e){let a=t[i];delete t[i],(r>0||s>e)&&(t[s+r]=a)}}}function yW(t,e,r,n){return!r||t.type==="mouseout"?null:n?e:t}function A_(t,e,r){return t.options.clip?t[r]:e[r]}function wW(t,e){let{xScale:r,yScale:n}=t;return r&&n?{left:A_(r,e,"left"),right:A_(r,e,"right"),top:A_(n,e,"top"),bottom:A_(n,e,"bottom")}:e}var yr=class{static register(...e){qi.add(...e),qD()}static unregister(...e){qi.remove(...e),qD()}constructor(e,r){let n=this.config=new s1(r),i=vM(e),s=WD(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");let a=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||$U(i)),this.platform.updateConfig(n);let o=this.platform.acquireContext(i,a.aspectRatio),l=o&&o.canvas,u=l&&l.height,c=l&&l.width;if(this.id=B2(),this.ctx=o,this.canvas=l,this.width=c,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new r1,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=X2(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],I_[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Js.listen(this,"complete",UD),Js.listen(this,"progress",_W),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:r},width:n,height:i,_aspectRatio:s}=this;return Ge(e)?r&&s?s:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return qi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():jx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Dx(this.canvas,this.ctx),this}stop(){return Js.stop(this),this}resize(e,r){Js.running(this)?this._resizeBeforeDraw={width:e,height:r}:this._resize(e,r)}_resize(e,r){let n=this.options,i=this.canvas,s=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,e,r,s),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,jx(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),qe(n.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let r=this.options.scales||{};je(r,(n,i)=>{n.id=i})}buildOrUpdateScales(){let e=this.options,r=e.scales,n=this.scales,i=Object.keys(n).reduce((a,o)=>(a[o]=!1,a),{}),s=[];r&&(s=s.concat(Object.keys(r).map(a=>{let o=r[a],l=i1(a,o),u=l==="r",c=l==="x";return{options:o,dposition:u?"chartArea":c?"bottom":"left",dtype:u?"radialLinear":c?"category":"linear"}}))),je(s,a=>{let o=a.options,l=o.id,u=i1(l,o),c=we(o.type,a.dtype);(o.position===void 0||$D(o.position,u)!==$D(a.dposition))&&(o.position=a.dposition),i[l]=!0;let h=null;if(l in n&&n[l].type===c)h=n[l];else{let p=qi.getScale(c);h=new p({id:l,type:c,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(o,e)}),je(i,(a,o)=>{a||delete n[o]}),je(n,a=>{In.configure(this,a,a.options),In.addBox(this,a)})}_updateMetasets(){let e=this._metasets,r=this.data.datasets.length,n=e.length;if(e.sort((i,s)=>i.index-s.index),n>r){for(let i=r;i<n;++i)this._destroyDatasetMeta(i);e.splice(r,n-r)}this._sortedMetasets=e.slice(0).sort(zD("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:r}}=this;e.length>r.length&&delete this._stacks,e.forEach((n,i)=>{r.filter(s=>s===n._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){let e=[],r=this.data.datasets,n,i;for(this._removeUnreferencedMetasets(),n=0,i=r.length;n<i;n++){let s=r[n],a=this.getDatasetMeta(n),o=s.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(n),a=this.getDatasetMeta(n)),a.type=o,a.indexAxis=s.indexAxis||n1(o,this.options),a.order=s.order||0,a.index=n,a.label=""+s.label,a.visible=this.isDatasetVisible(n),a.controller)a.controller.updateIndex(n),a.controller.linkScales();else{let l=qi.getController(o),{datasetElementType:u,dataElementType:c}=st.datasets[o];Object.assign(l,{dataElementType:qi.getElement(c),datasetElementType:u&&qi.getElement(u)}),a.controller=new l(this,n),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){je(this.data.datasets,(e,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let r=this.config;r.update();let n=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,c=this.data.datasets.length;u<c;u++){let{controller:h}=this.getDatasetMeta(u),p=!i&&s.indexOf(h)===-1;h.buildOrUpdateElements(p),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),i||je(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(zD("z","_idx"));let{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){je(this.scales,e=>{In.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,r=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!xx(r,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,r=this._getUniformDataChanges()||[];for(let{method:n,start:i,count:s}of r){let a=n==="_removeElements"?-s:s;bW(e,i,a)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let r=this.data.datasets.length,n=s=>new Set(e.filter(a=>a[0]===s).map((a,o)=>o+","+a.splice(1).join(","))),i=n(0);for(let s=1;s<r;s++)if(!xx(i,n(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;In.update(this,this.width,this.height,e);let r=this.chartArea,n=r.width<=0||r.height<=0;this._layers=[],je(this.boxes,i=>{n&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let r=0,n=this.data.datasets.length;r<n;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,n=this.data.datasets.length;r<n;++r)this._updateDataset(r,Vs(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,r){let n=this.getDatasetMeta(e),i={meta:n,index:e,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(n.controller._update(r),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Js.has(this)?this.attached&&!Js.running(this)&&Js.start(this):(this.draw(),UD({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:n,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let r=this._layers;for(e=0;e<r.length&&r[e].z<=0;++e)r[e].draw(this.chartArea);for(this._drawDatasets();e<r.length;++e)r[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let r=this._sortedMetasets,n=[],i,s;for(i=0,s=r.length;i<s;++i){let a=r[i];(!e||a.visible)&&n.push(a)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let r=e.length-1;r>=0;--r)this._drawDataset(e[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let r=this.ctx,n=e._clip,i=!n.disabled,s=wW(e,this.chartArea),a={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(i&&Jf(r,{left:n.left===!1?0:s.left-n.left,right:n.right===!1?this.width:s.right+n.right,top:n.top===!1?0:s.top-n.top,bottom:n.bottom===!1?this.height:s.bottom+n.bottom}),e.controller.draw(),i&&Kf(r),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(e){return zi(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,r,n,i){let s=vU.modes[r];return typeof s=="function"?s(this,e,n,i):[]}getDatasetMeta(e){let r=this.data.datasets[e],n=this._metasets,i=n.filter(s=>s&&s._dataset===r).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:e,_dataset:r,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Zs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let r=this.data.datasets[e];if(!r)return!1;let n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!r.hidden}setDatasetVisibility(e,r){let n=this.getDatasetMeta(e);n.hidden=!r}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,r,n){let i=n?"show":"hide",s=this.getDatasetMeta(e),a=s.controller._resolveAnimations(void 0,i);Gf(r)?(s.data[r].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(s,{visible:n}),this.update(o=>o.datasetIndex===e?i:void 0))}hide(e,r){this._updateVisibility(e,r,!1)}show(e,r){this._updateVisibility(e,r,!0)}_destroyDatasetMeta(e){let r=this._metasets[e];r&&r.controller&&r.controller._destroy(),delete this._metasets[e]}_stop(){let e,r;for(this.stop(),Js.remove(this),e=0,r=this.data.datasets.length;e<r;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:r}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Dx(e,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete I_[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,r=this.platform,n=(s,a)=>{r.addEventListener(this,s,a),e[s]=a},i=(s,a,o)=>{s.offsetX=a,s.offsetY=o,this._eventHandler(s)};je(this.options.events,s=>n(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,r=this.platform,n=(l,u)=>{r.addEventListener(this,l,u),e[l]=u},i=(l,u)=>{e[l]&&(r.removeEventListener(this,l,u),delete e[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)},a,o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",s),n("detach",a)};a=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),n("attach",o)},r.isAttached(this.canvas)?o():a()}unbindEvents(){je(this._listeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._listeners={},je(this._responsiveListeners,(e,r)=>{this.platform.removeEventListener(this,r,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,r,n){let i=n?"set":"remove",s,a,o,l;for(r==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),o=0,l=e.length;o<l;++o){a=e[o];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let r=this._active||[],n=e.map(({datasetIndex:s,index:a})=>{let o=this.getDatasetMeta(s);if(!o)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:o.data[a],index:a}});!Vf(n,r)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,r))}notifyPlugins(e,r,n){return this._plugins.notify(this,e,r,n)}isPluginEnabled(e){return this._plugins._cache.filter(r=>r.plugin.id===e).length===1}_updateHoverStyles(e,r,n){let i=this.options.hover,s=(l,u)=>l.filter(c=>!u.some(h=>c.datasetIndex===h.datasetIndex&&c.index===h.index)),a=s(r,e),o=n?e:s(e,r);a.length&&this.updateHoverStyle(a,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,r){let n={event:e,replay:r,cancelable:!0,inChartArea:this.isPointInArea(e)},i=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,i)===!1)return;let s=this._handleEvent(e,r,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(s||n.changed)&&this.render(),this}_handleEvent(e,r,n){let{_active:i=[],options:s}=this,a=r,o=this._getActiveElements(e,i,n,a),l=U2(e),u=yW(e,this._lastEvent,n,l);n&&(this._lastEvent=null,qe(s.onHover,[e,o,this],this),l&&qe(s.onClick,[e,o,this],this));let c=!Vf(o,i);return(c||r)&&(this._active=o,this._updateHoverStyles(o,i,r)),this._lastEvent=u,c}_getActiveElements(e,r,n,i){if(e.type==="mouseout")return[];if(!n)return r;let s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}};V(yr,"defaults",st),V(yr,"instances",I_),V(yr,"overrides",Wa),V(yr,"registry",qi),V(yr,"version",mW),V(yr,"getChart",WD);function qD(){return je(yr.instances,t=>t._plugins.invalidate())}function xM(t,e,r=e){t.lineCap=we(r.borderCapStyle,e.borderCapStyle),t.setLineDash(we(r.borderDash,e.borderDash)),t.lineDashOffset=we(r.borderDashOffset,e.borderDashOffset),t.lineJoin=we(r.borderJoinStyle,e.borderJoinStyle),t.lineWidth=we(r.borderWidth,e.borderWidth),t.strokeStyle=we(r.borderColor,e.borderColor)}function vW(t,e,r){t.lineTo(r.x,r.y)}function xW(t){return t.stepped?iD:t.tension||t.cubicInterpolationMode==="monotone"?sD:vW}function SM(t,e,r={}){let n=t.length,{start:i=0,end:s=n-1}=r,{start:a,end:o}=e,l=Math.max(i,a),u=Math.min(s,o),c=i<a&&s<a||i>o&&s>o;return{count:n,start:l,loop:e.loop,ilen:u<l&&!c?n+u-l:u-l}}function SW(t,e,r,n){let{points:i,options:s}=e,{count:a,start:o,loop:l,ilen:u}=SM(i,r,n),c=xW(s),{move:h=!0,reverse:p}=n||{},_,y,S;for(_=0;_<=u;++_)y=i[(o+(p?u-_:_))%a],!y.skip&&(h?(t.moveTo(y.x,y.y),h=!1):c(t,S,y,p,s.stepped),S=y);return l&&(y=i[(o+(p?u:0))%a],c(t,S,y,p,s.stepped)),!!l}function kW(t,e,r,n){let i=e.points,{count:s,start:a,ilen:o}=SM(i,r,n),{move:l=!0,reverse:u}=n||{},c=0,h=0,p,_,y,S,x,k,T=O=>(a+(u?o-O:O))%s,P=()=>{S!==x&&(t.lineTo(c,x),t.lineTo(c,S),t.lineTo(c,k))};for(l&&(_=i[T(0)],t.moveTo(_.x,_.y)),p=0;p<=o;++p){if(_=i[T(p)],_.skip)continue;let O=_.x,A=_.y,R=O|0;R===y?(A<S?S=A:A>x&&(x=A),c=(h*c+O)/++h):(P(),t.lineTo(O,A),y=R,h=0,S=x=A),k=A}P()}function a1(t){let e=t.options,r=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!r?kW:SW}function EW(t){return t.stepped?mD:t.tension||t.cubicInterpolationMode==="monotone"?gD:za}function TW(t,e,r,n){let i=e._path;i||(i=e._path=new Path2D,e.path(i,r,n)&&i.closePath()),xM(t,e.options),t.stroke(i)}function CW(t,e,r,n){let{segments:i,options:s}=e,a=a1(e);for(let o of i)xM(t,s,o.style),t.beginPath(),a(t,e,o,{start:r,end:r+n-1})&&t.closePath(),t.stroke()}var AW=typeof Path2D=="function";function PW(t,e,r,n){AW&&!e.options.segment?TW(t,e,r,n):CW(t,e,r,n)}var ci=class extends di{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,r){let n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){let i=n.spanGaps?this._loop:this._fullLoop;fD(this._points,n,e,i,r),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=bD(this,this.options.segment))}first(){let e=this.segments,r=this.points;return e.length&&r[e[0].start]}last(){let e=this.segments,r=this.points,n=e.length;return n&&r[e[n-1].end]}interpolate(e,r){let n=this.options,i=e[r],s=this.points,a=Wx(this,{property:r,start:i,end:i});if(!a.length)return;let o=[],l=EW(n),u,c;for(u=0,c=a.length;u<c;++u){let{start:h,end:p}=a[u],_=s[h],y=s[p];if(_===y){o.push(_);continue}let S=Math.abs((i-_[r])/(y[r]-_[r])),x=l(_,y,S,n.stepped);x[r]=e[r],o.push(x)}return o.length===1?o[0]:o}pathSegment(e,r,n){return a1(this)(e,this,r,n)}path(e,r,n){let i=this.segments,s=a1(this),a=this._loop;r=r||0,n=n||this.points.length-r;for(let o of i)a&=s(e,this,o,{start:r,end:r+n-1});return!!a}draw(e,r,n,i){let s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),PW(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}};V(ci,"id","line"),V(ci,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),V(ci,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),V(ci,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function HD(t,e,r,n){let i=t.options,{[r]:s}=t.getProps([r],n);return Math.abs(e-s)<i.radius+i.hitRadius}var kl=class extends di{constructor(r){super();V(this,"parsed");V(this,"skip");V(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,r&&Object.assign(this,r)}inRange(r,n,i){let s=this.options,{x:a,y:o}=this.getProps(["x","y"],i);return Math.pow(r-a,2)+Math.pow(n-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(r,n){return HD(this,r,"x",n)}inYRange(r,n){return HD(this,r,"y",n)}getCenterPoint(r){let{x:n,y:i}=this.getProps(["x","y"],r);return{x:n,y:i}}size(r){r=r||this.options||{};let n=r.radius||0;n=Math.max(n,n&&r.hoverRadius||0);let i=n&&r.borderWidth||0;return(n+i)*2}draw(r,n){let i=this.options;this.skip||i.radius<.1||!zi(this,n,this.size(i)/2)||(r.strokeStyle=i.borderColor,r.lineWidth=i.borderWidth,r.fillStyle=i.backgroundColor,w_(r,i,this.x,this.y))}getRange(){let r=this.options||{};return r.radius+r.hitRadius}};V(kl,"id","point"),V(kl,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),V(kl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function OW(t,e,r){let n=t.segments,i=t.points,s=e.points,a=[];for(let o of n){let{start:l,end:u}=o;u=u1(l,u,i);let c=o1(r,i[l],i[u],o.loop);if(!e.segments){a.push({source:o,target:c,start:i[l],end:i[u]});continue}let h=Wx(e,c);for(let p of h){let _=o1(r,s[p.start],s[p.end],p.loop),y=Ux(o,i,_);for(let S of y)a.push({source:S,target:p,start:{[r]:VD(c,_,"start",Math.max)},end:{[r]:VD(c,_,"end",Math.min)}})}}return a}function o1(t,e,r,n){if(n)return;let i=e[t],s=r[t];return t==="angle"&&(i=jr(i),s=jr(s)),{property:t,start:i,end:s}}function RW(t,e){let{x:r=null,y:n=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:a,end:o})=>{o=u1(a,o,i);let l=i[a],u=i[o];n!==null?(s.push({x:l.x,y:n}),s.push({x:u.x,y:n})):r!==null&&(s.push({x:r,y:l.y}),s.push({x:r,y:u.y}))}),s}function u1(t,e,r){for(;e>t;e--){let n=r[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function VD(t,e,r,n){return t&&e?n(t[r],e[r]):t?t[r]:e?e[r]:0}function kM(t,e){let r=[],n=!1;return Ke(t)?(n=!0,r=t):r=RW(t,e),r.length?new ci({points:r,options:{tension:0},_loop:n,_fullLoop:n}):null}function YD(t){return t&&t.fill!==!1}function DW(t,e,r){let i=t[e].fill,s=[e],a;if(!r)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!it(i))return i;if(a=t[i],!a)return!1;if(a.visible)return i;s.push(i),i=a.fill}return!1}function MW(t,e,r){let n=NW(t);if(Ee(n))return isNaN(n.value)?!1:n;let i=parseFloat(n);return it(i)&&Math.floor(i)===i?IW(n[0],e,i,r):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function IW(t,e,r,n){return(t==="-"||t==="+")&&(r=e+r),r===e||r<0||r>=n?!1:r}function LW(t,e){let r=null;return t==="start"?r=e.bottom:t==="end"?r=e.top:Ee(t)?r=e.getPixelForValue(t.value):e.getBasePixel&&(r=e.getBasePixel()),r}function FW(t,e,r){let n;return t==="start"?n=r:t==="end"?n=e.options.reverse?e.min:e.max:Ee(t)?n=t.value:n=e.getBaseValue(),n}function NW(t){let e=t.options,r=e.fill,n=we(r&&r.target,r);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function jW(t){let{scale:e,index:r,line:n}=t,i=[],s=n.segments,a=n.points,o=BW(e,r);o.push(kM({x:null,y:e.bottom},n));for(let l=0;l<s.length;l++){let u=s[l];for(let c=u.start;c<=u.end;c++)$W(i,a[c],o)}return new ci({points:i,options:{}})}function BW(t,e){let r=[],n=t.getMatchingVisibleMetas("line");for(let i=0;i<n.length;i++){let s=n[i];if(s.index===e)break;s.hidden||r.unshift(s.dataset)}return r}function $W(t,e,r){let n=[];for(let i=0;i<r.length;i++){let s=r[i],{first:a,last:o,point:l}=zW(s,e,"x");if(!(!l||a&&o)){if(a)n.unshift(l);else if(t.push(l),!o)break}}t.push(...n)}function zW(t,e,r){let n=t.interpolate(e,r);if(!n)return{};let i=n[r],s=t.segments,a=t.points,o=!1,l=!1;for(let u=0;u<s.length;u++){let c=s[u],h=a[c.start][r],p=a[c.end][r];if(_l(i,h,p)){o=i===h,l=i===p;break}}return{first:o,last:l,point:n}}var j_=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,r,n){let{x:i,y:s,radius:a}=this;return r=r||{start:0,end:$r},e.arc(i,s,a,r.end,r.start,!0),!n.bounds}interpolate(e){let{x:r,y:n,radius:i}=this,s=e.angle;return{x:r+Math.cos(s)*i,y:n+Math.sin(s)*i,angle:s}}};function UW(t){let{chart:e,fill:r,line:n}=t;if(it(r))return WW(e,r);if(r==="stack")return jW(t);if(r==="shape")return!0;let i=qW(t);return i instanceof j_?i:kM(i,n)}function WW(t,e){let r=t.getDatasetMeta(e);return r&&t.isDatasetVisible(e)?r.dataset:null}function qW(t){return(t.scale||{}).getPointPositionForValue?VW(t):HW(t)}function HW(t){let{scale:e={},fill:r}=t,n=LW(r,e);if(it(n)){let i=e.isHorizontal();return{x:i?n:null,y:i?null:n}}return null}function VW(t){let{scale:e,fill:r}=t,n=e.options,i=e.getLabels().length,s=n.reverse?e.max:e.min,a=FW(r,e,s),o=[];if(n.grid.circular){let l=e.getPointPositionForValue(0,s);return new j_({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(a)})}for(let l=0;l<i;++l)o.push(e.getPointPositionForValue(l,a));return o}function Zx(t,e,r){let n=UW(e),{line:i,scale:s,axis:a}=e,o=i.options,l=o.fill,u=o.backgroundColor,{above:c=u,below:h=u}=l||{};n&&i.points.length&&(Jf(t,r),YW(t,{line:i,target:n,above:c,below:h,area:r,scale:s,axis:a}),Kf(t))}function YW(t,e){let{line:r,target:n,above:i,below:s,area:a,scale:o}=e,l=r._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(GD(t,n,a.top),ZD(t,{line:r,target:n,color:i,scale:o,property:l}),t.restore(),t.save(),GD(t,n,a.bottom)),ZD(t,{line:r,target:n,color:s,scale:o,property:l}),t.restore()}function GD(t,e,r){let{segments:n,points:i}=e,s=!0,a=!1;t.beginPath();for(let o of n){let{start:l,end:u}=o,c=i[l],h=i[u1(l,u,i)];s?(t.moveTo(c.x,c.y),s=!1):(t.lineTo(c.x,r),t.lineTo(c.x,c.y)),a=!!e.pathSegment(t,o,{move:a}),a?t.closePath():t.lineTo(h.x,r)}t.lineTo(e.first().x,r),t.closePath(),t.clip()}function ZD(t,e){let{line:r,target:n,property:i,color:s,scale:a}=e,o=OW(r,n,i);for(let{source:l,target:u,start:c,end:h}of o){let{style:{backgroundColor:p=s}={}}=l,_=n!==!0;t.save(),t.fillStyle=p,GW(t,a,_&&o1(i,c,h)),t.beginPath();let y=!!r.pathSegment(t,l),S;if(_){y?t.closePath():JD(t,n,h,i);let x=!!n.pathSegment(t,u,{move:y,reverse:!0});S=y&&x,S||JD(t,n,c,i)}t.closePath(),t.fill(S?"evenodd":"nonzero"),t.restore()}}function GW(t,e,r){let{top:n,bottom:i}=e.chart.chartArea,{property:s,start:a,end:o}=r||{};s==="x"&&(t.beginPath(),t.rect(a,n,o-a,i-n),t.clip())}function JD(t,e,r,n){let i=e.interpolate(r,n);i&&t.lineTo(i.x,i.y)}var EM={id:"filler",afterDatasetsUpdate(t,e,r){let n=(t.data.datasets||[]).length,i=[],s,a,o,l;for(a=0;a<n;++a)s=t.getDatasetMeta(a),o=s.dataset,l=null,o&&o.options&&o instanceof ci&&(l={visible:t.isDatasetVisible(a),index:a,fill:MW(o,a,n),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=l,i.push(l);for(a=0;a<n;++a)l=i[a],!(!l||l.fill===!1)&&(l.fill=DW(i,a,r.propagate))},beforeDraw(t,e,r){let n=r.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let a=i.length-1;a>=0;--a){let o=i[a].$filler;o&&(o.line.updateControlPoints(s,o.axis),n&&o.fill&&Zx(t.ctx,o,s))}},beforeDatasetsDraw(t,e,r){if(r.drawTime!=="beforeDatasetsDraw")return;let n=t.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i){let s=n[i].$filler;YD(s)&&Zx(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,r){let n=e.meta.$filler;!YD(n)||r.drawTime!=="beforeDatasetDraw"||Zx(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},KD=(t,e)=>{let{boxHeight:r=e,boxWidth:n=e}=t;return t.usePointStyle&&(r=Math.min(r,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:r,itemHeight:Math.max(e,r)}},ZW=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index,B_=class extends di{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r,n){this.maxWidth=e,this.maxHeight=r,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},r=qe(e.generateLabels,[this.chart],this)||[];e.filter&&(r=r.filter(n=>e.filter(n,this.chart.data))),e.sort&&(r=r.sort((n,i)=>e.sort(n,i,this.chart.data))),this.options.reverse&&r.reverse(),this.legendItems=r}fit(){let{options:e,ctx:r}=this;if(!e.display){this.width=this.height=0;return}let n=e.labels,i=St(n.font),s=i.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=KD(n,s),u,c;r.font=i.string,this.isHorizontal()?(u=this.maxWidth,c=this._fitRows(a,s,o,l)+10):(c=this.maxHeight,u=this._fitCols(a,i,o,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,r,n,i){let{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],c=i+o,h=e;s.textAlign="left",s.textBaseline="middle";let p=-1,_=-c;return this.legendItems.forEach((y,S)=>{let x=n+r/2+s.measureText(y.text).width;(S===0||u[u.length-1]+x+2*o>a)&&(h+=c,u[u.length-(S>0?0:1)]=0,_+=c,p++),l[S]={left:0,top:_,row:p,width:x,height:i},u[u.length-1]+=x+o}),h}_fitCols(e,r,n,i){let{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],c=a-e,h=o,p=0,_=0,y=0,S=0;return this.legendItems.forEach((x,k)=>{let{itemWidth:T,itemHeight:P}=JW(n,r,s,x,i);k>0&&_+P+2*o>c&&(h+=p+o,u.push({width:p,height:_}),y+=p+o,S++,p=_=0),l[k]={left:y,top:_,col:S,width:T,height:P},p=Math.max(p,T),_+=P+o}),h+=p,u.push({width:p,height:_}),h}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:r,options:{align:n,labels:{padding:i},rtl:s}}=this,a=yl(s,this.left,this.width);if(this.isHorizontal()){let o=0,l=qt(n,this.left+i,this.right-this.lineWidths[o]);for(let u of r)o!==u.row&&(o=u.row,l=qt(n,this.left+i,this.right-this.lineWidths[o])),u.top+=this.top+e+i,u.left=a.leftForLtr(a.x(l),u.width),l+=u.width+i}else{let o=0,l=qt(n,this.top+e+i,this.bottom-this.columnSizes[o].height);for(let u of r)u.col!==o&&(o=u.col,l=qt(n,this.top+e+i,this.bottom-this.columnSizes[o].height)),u.top=l,u.left+=this.left+i,u.left=a.leftForLtr(a.x(u.left),u.width),l+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;Jf(e,this),this._draw(),Kf(e)}}_draw(){let{options:e,columnSizes:r,lineWidths:n,ctx:i}=this,{align:s,labels:a}=e,o=st.color,l=yl(e.rtl,this.left,this.width),u=St(a.font),{padding:c}=a,h=u.size,p=h/2,_;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;let{boxWidth:y,boxHeight:S,itemHeight:x}=KD(a,h),k=function(R,F,I){if(isNaN(y)||y<=0||isNaN(S)||S<0)return;i.save();let U=we(I.lineWidth,1);if(i.fillStyle=we(I.fillStyle,o),i.lineCap=we(I.lineCap,"butt"),i.lineDashOffset=we(I.lineDashOffset,0),i.lineJoin=we(I.lineJoin,"miter"),i.lineWidth=U,i.strokeStyle=we(I.strokeStyle,o),i.setLineDash(we(I.lineDash,[])),a.usePointStyle){let X={radius:S*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:U},z=l.xPlus(R,y/2),ne=F+p;Mx(i,X,z,ne,a.pointStyleWidth&&y)}else{let X=F+Math.max((h-S)/2,0),z=l.leftForLtr(R,y),ne=bl(I.borderRadius);i.beginPath(),Object.values(ne).some(ge=>ge!==0)?Xf(i,{x:z,y:X,w:y,h:S,radius:ne}):i.rect(z,X,y,S),i.fill(),U!==0&&i.stroke()}i.restore()},T=function(R,F,I){Ha(i,I.text,R,F+x/2,u,{strikethrough:I.hidden,textAlign:l.textAlign(I.textAlign)})},P=this.isHorizontal(),O=this._computeTitleHeight();P?_={x:qt(s,this.left+c,this.right-n[0]),y:this.top+c+O,line:0}:_={x:this.left+c,y:qt(s,this.top+O+c,this.bottom-r[0].height),line:0},$x(this.ctx,e.textDirection);let A=x+c;this.legendItems.forEach((R,F)=>{i.strokeStyle=R.fontColor,i.fillStyle=R.fontColor;let I=i.measureText(R.text).width,U=l.textAlign(R.textAlign||(R.textAlign=a.textAlign)),X=y+p+I,z=_.x,ne=_.y;l.setWidth(this.width),P?F>0&&z+X+c>this.right&&(ne=_.y+=A,_.line++,z=_.x=qt(s,this.left+c,this.right-n[_.line])):F>0&&ne+A>this.bottom&&(z=_.x=z+r[_.line].width+c,_.line++,ne=_.y=qt(s,this.top+O+c,this.bottom-r[_.line].height));let ge=l.x(z);if(k(ge,ne,R),z=Q2(U,z+y+p,P?z+X:this.right,e.rtl),T(l.x(z),ne,R),P)_.x+=X+c;else if(typeof R.text!="string"){let $e=u.lineHeight;_.y+=TM(R,$e)+c}else _.y+=A}),zx(this.ctx,e.textDirection)}drawTitle(){let e=this.options,r=e.title,n=St(r.font),i=Ht(r.padding);if(!r.display)return;let s=yl(e.rtl,this.left,this.width),a=this.ctx,o=r.position,l=n.size/2,u=i.top+l,c,h=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),c=this.top+u,h=qt(e.align,h,this.right-p);else{let y=this.columnSizes.reduce((S,x)=>Math.max(S,x.height),0);c=u+qt(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}let _=qt(o,h,h+p);a.textAlign=s.textAlign(__(o)),a.textBaseline="middle",a.strokeStyle=r.color,a.fillStyle=r.color,a.font=n.string,Ha(a,r.text,_,c,n)}_computeTitleHeight(){let e=this.options.title,r=St(e.font),n=Ht(e.padding);return e.display?r.lineHeight+n.height:0}_getLegendItemAt(e,r){let n,i,s;if(_l(e,this.left,this.right)&&_l(r,this.top,this.bottom)){for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(i=s[n],_l(e,i.left,i.left+i.width)&&_l(r,i.top,i.top+i.height))return this.legendItems[n]}return null}handleEvent(e){let r=this.options;if(!QW(e.type,r))return;let n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let i=this._hoveredItem,s=ZW(i,n);i&&!s&&qe(r.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!s&&qe(r.onHover,[e,n,this],this)}else n&&qe(r.onClick,[e,n,this],this)}};function JW(t,e,r,n,i){let s=KW(n,t,e,r),a=XW(i,n,e.lineHeight);return{itemWidth:s,itemHeight:a}}function KW(t,e,r,n){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,a)=>s.length>a.length?s:a)),e+r.size/2+n.measureText(i).width}function XW(t,e,r){let n=t;return typeof e.text!="string"&&(n=TM(e,r)),n}function TM(t,e){let r=t.text?t.text.length:0;return e*r}function QW(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var CM={id:"legend",_element:B_,start(t,e,r){let n=t.legend=new B_({ctx:t.ctx,options:r,chart:t});In.configure(t,n,r),In.addBox(t,n)},stop(t){In.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,r){let n=t.legend;In.configure(t,n,r),n.options=r},afterUpdate(t){let e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,r){let n=e.datasetIndex,i=r.chart;i.isDatasetVisible(n)?(i.hide(n),e.hidden=!0):(i.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){let e=t.data.datasets,{labels:{usePointStyle:r,pointStyle:n,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{let u=l.controller.getStyle(r?0:void 0),c=Ht(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:u.borderColor,pointStyle:n||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:a&&(o||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}},$_=class extends di{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,r){let n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=r;let i=Ke(n.text)?n.text.length:1;this._padding=Ht(n.padding);let s=i*St(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:r,left:n,bottom:i,right:s,options:a}=this,o=a.align,l=0,u,c,h;return this.isHorizontal()?(c=qt(o,n,s),h=r+e,u=s-n):(a.position==="left"?(c=n+e,h=qt(o,i,r),l=ht*-.5):(c=s-e,h=qt(o,r,i),l=ht*.5),u=i-r),{titleX:c,titleY:h,maxWidth:u,rotation:l}}draw(){let e=this.ctx,r=this.options;if(!r.display)return;let n=St(r.font),s=n.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:l,rotation:u}=this._drawArgs(s);Ha(e,r.text,0,0,n,{color:r.color,maxWidth:l,rotation:u,textAlign:__(r.align),textBaseline:"middle",translation:[a,o]})}};function eq(t,e){let r=new $_({ctx:t.ctx,options:e,chart:t});In.configure(t,r,e),In.addBox(t,r),t.titleBlock=r}var AM={id:"title",_element:$_,start(t,e,r){eq(t,r)},stop(t){let e=t.titleBlock;In.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,r){let n=t.titleBlock;In.configure(t,n,r),n.options=r},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};var ah={average(t){if(!t.length)return!1;let e,r,n=new Set,i=0,s=0;for(e=0,r=t.length;e<r;++e){let o=t[e].element;if(o&&o.hasValue()){let l=o.tooltipPosition();n.add(l.x),i+=l.y,++s}}return s===0||n.size===0?!1:{x:[...n].reduce((o,l)=>o+l)/n.size,y:i/s}},nearest(t,e){if(!t.length)return!1;let r=e.x,n=e.y,i=Number.POSITIVE_INFINITY,s,a,o;for(s=0,a=t.length;s<a;++s){let l=t[s].element;if(l&&l.hasValue()){let u=l.getCenterPoint(),c=f_(e,u);c<i&&(i=c,o=l)}}if(o){let l=o.tooltipPosition();r=l.x,n=l.y}return{x:r,y:n}}};function Wi(t,e){return e&&(Ke(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ks(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function tq(t,e){let{element:r,datasetIndex:n,index:i}=e,s=t.getDatasetMeta(n).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:t,label:a,parsed:s.getParsed(i),raw:t.data.datasets[n].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:n,element:r}}function XD(t,e){let r=t.chart.ctx,{body:n,footer:i,title:s}=t,{boxWidth:a,boxHeight:o}=e,l=St(e.bodyFont),u=St(e.titleFont),c=St(e.footerFont),h=s.length,p=i.length,_=n.length,y=Ht(e.padding),S=y.height,x=0,k=n.reduce((O,A)=>O+A.before.length+A.lines.length+A.after.length,0);if(k+=t.beforeBody.length+t.afterBody.length,h&&(S+=h*u.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),k){let O=e.displayColors?Math.max(o,l.lineHeight):l.lineHeight;S+=_*O+(k-_)*l.lineHeight+(k-1)*e.bodySpacing}p&&(S+=e.footerMarginTop+p*c.lineHeight+(p-1)*e.footerSpacing);let T=0,P=function(O){x=Math.max(x,r.measureText(O).width+T)};return r.save(),r.font=u.string,je(t.title,P),r.font=l.string,je(t.beforeBody.concat(t.afterBody),P),T=e.displayColors?a+2+e.boxPadding:0,je(n,O=>{je(O.before,P),je(O.lines,P),je(O.after,P)}),T=0,r.font=c.string,je(t.footer,P),r.restore(),x+=y.width,{width:x,height:S}}function rq(t,e){let{y:r,height:n}=e;return r<n/2?"top":r>t.height-n/2?"bottom":"center"}function nq(t,e,r,n){let{x:i,width:s}=n,a=r.caretSize+r.caretPadding;if(t==="left"&&i+s+a>e.width||t==="right"&&i-s-a<0)return!0}function iq(t,e,r,n){let{x:i,width:s}=r,{width:a,chartArea:{left:o,right:l}}=t,u="center";return n==="center"?u=i<=(o+l)/2?"left":"right":i<=s/2?u="left":i>=a-s/2&&(u="right"),nq(u,t,e,r)&&(u="center"),u}function QD(t,e,r){let n=r.yAlign||e.yAlign||rq(t,r);return{xAlign:r.xAlign||e.xAlign||iq(t,e,r,n),yAlign:n}}function sq(t,e){let{x:r,width:n}=t;return e==="right"?r-=n:e==="center"&&(r-=n/2),r}function aq(t,e,r){let{y:n,height:i}=t;return e==="top"?n+=r:e==="bottom"?n-=i+r:n-=i/2,n}function eM(t,e,r,n){let{caretSize:i,caretPadding:s,cornerRadius:a}=t,{xAlign:o,yAlign:l}=r,u=i+s,{topLeft:c,topRight:h,bottomLeft:p,bottomRight:_}=bl(a),y=sq(e,o),S=aq(e,l,u);return l==="center"?o==="left"?y+=u:o==="right"&&(y-=u):o==="left"?y-=Math.max(c,p)+i:o==="right"&&(y+=Math.max(h,_)+i),{x:ln(y,0,n.width-e.width),y:ln(S,0,n.height-e.height)}}function P_(t,e,r){let n=Ht(r.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function tM(t){return Wi([],Ks(t))}function oq(t,e,r){return Zs(t,{tooltip:e,tooltipItems:r,type:"tooltip"})}function rM(t,e){let r=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return r?t.override(r):t}var PM={beforeTitle:Ui,title(t){if(t.length>0){let e=t[0],r=e.chart.data.labels,n=r?r.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return r[e.dataIndex]}return""},afterTitle:Ui,beforeBody:Ui,beforeLabel:Ui,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");let r=t.formattedValue;return Ge(r)||(e+=r),e},labelColor(t){let r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:r.borderColor,backgroundColor:r.backgroundColor,borderWidth:r.borderWidth,borderDash:r.borderDash,borderDashOffset:r.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){let r=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:r.pointStyle,rotation:r.rotation}},afterLabel:Ui,afterBody:Ui,beforeFooter:Ui,footer:Ui,afterFooter:Ui};function Ur(t,e,r,n){let i=t[e].call(r,n);return typeof i=="undefined"?PM[e].call(r,n):i}var oh=class extends di{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let r=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&r.options.animation&&n.animations,s=new L_(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=oq(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,r){let{callbacks:n}=r,i=Ur(n,"beforeTitle",this,e),s=Ur(n,"title",this,e),a=Ur(n,"afterTitle",this,e),o=[];return o=Wi(o,Ks(i)),o=Wi(o,Ks(s)),o=Wi(o,Ks(a)),o}getBeforeBody(e,r){return tM(Ur(r.callbacks,"beforeBody",this,e))}getBody(e,r){let{callbacks:n}=r,i=[];return je(e,s=>{let a={before:[],lines:[],after:[]},o=rM(n,s);Wi(a.before,Ks(Ur(o,"beforeLabel",this,s))),Wi(a.lines,Ur(o,"label",this,s)),Wi(a.after,Ks(Ur(o,"afterLabel",this,s))),i.push(a)}),i}getAfterBody(e,r){return tM(Ur(r.callbacks,"afterBody",this,e))}getFooter(e,r){let{callbacks:n}=r,i=Ur(n,"beforeFooter",this,e),s=Ur(n,"footer",this,e),a=Ur(n,"afterFooter",this,e),o=[];return o=Wi(o,Ks(i)),o=Wi(o,Ks(s)),o=Wi(o,Ks(a)),o}_createItems(e){let r=this._active,n=this.chart.data,i=[],s=[],a=[],o=[],l,u;for(l=0,u=r.length;l<u;++l)o.push(tq(this.chart,r[l]));return e.filter&&(o=o.filter((c,h,p)=>e.filter(c,h,p,n))),e.itemSort&&(o=o.sort((c,h)=>e.itemSort(c,h,n))),je(o,c=>{let h=rM(e.callbacks,c);i.push(Ur(h,"labelColor",this,c)),s.push(Ur(h,"labelPointStyle",this,c)),a.push(Ur(h,"labelTextColor",this,c))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=o,o}update(e,r){let n=this.options.setContext(this.getContext()),i=this._active,s,a=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{let o=ah[n.position].call(this,i,this._eventPosition);a=this._createItems(n),this.title=this.getTitle(a,n),this.beforeBody=this.getBeforeBody(a,n),this.body=this.getBody(a,n),this.afterBody=this.getAfterBody(a,n),this.footer=this.getFooter(a,n);let l=this._size=XD(this,n),u=Object.assign({},o,l),c=QD(this.chart,n,u),h=eM(n,u,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(e,r,n,i){let s=this.getCaretPosition(e,n,i);r.lineTo(s.x1,s.y1),r.lineTo(s.x2,s.y2),r.lineTo(s.x3,s.y3)}getCaretPosition(e,r,n){let{xAlign:i,yAlign:s}=this,{caretSize:a,cornerRadius:o}=n,{topLeft:l,topRight:u,bottomLeft:c,bottomRight:h}=bl(o),{x:p,y:_}=e,{width:y,height:S}=r,x,k,T,P,O,A;return s==="center"?(O=_+S/2,i==="left"?(x=p,k=x-a,P=O+a,A=O-a):(x=p+y,k=x+a,P=O-a,A=O+a),T=x):(i==="left"?k=p+Math.max(l,c)+a:i==="right"?k=p+y-Math.max(u,h)-a:k=this.caretX,s==="top"?(P=_,O=P-a,x=k-a,T=k+a):(P=_+S,O=P+a,x=k+a,T=k-a),A=P),{x1:x,x2:k,x3:T,y1:P,y2:O,y3:A}}drawTitle(e,r,n){let i=this.title,s=i.length,a,o,l;if(s){let u=yl(n.rtl,this.x,this.width);for(e.x=P_(this,n.titleAlign,n),r.textAlign=u.textAlign(n.titleAlign),r.textBaseline="middle",a=St(n.titleFont),o=n.titleSpacing,r.fillStyle=n.titleColor,r.font=a.string,l=0;l<s;++l)r.fillText(i[l],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,l+1===s&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,r,n,i,s){let a=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:l,boxWidth:u}=s,c=St(s.bodyFont),h=P_(this,"left",s),p=i.x(h),_=l<c.lineHeight?(c.lineHeight-l)/2:0,y=r.y+_;if(s.usePointStyle){let S={radius:Math.min(u,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},x=i.leftForLtr(p,u)+u/2,k=y+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,w_(e,S,x,k),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,w_(e,S,x,k)}else{e.lineWidth=Ee(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;let S=i.leftForLtr(p,u),x=i.leftForLtr(i.xPlus(p,1),u-2),k=bl(a.borderRadius);Object.values(k).some(T=>T!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Xf(e,{x:S,y,w:u,h:l,radius:k}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Xf(e,{x,y:y+1,w:u-2,h:l-2,radius:k}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(S,y,u,l),e.strokeRect(S,y,u,l),e.fillStyle=a.backgroundColor,e.fillRect(x,y+1,u-2,l-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,r,n){let{body:i}=this,{bodySpacing:s,bodyAlign:a,displayColors:o,boxHeight:l,boxWidth:u,boxPadding:c}=n,h=St(n.bodyFont),p=h.lineHeight,_=0,y=yl(n.rtl,this.x,this.width),S=function(I){r.fillText(I,y.x(e.x+_),e.y+p/2),e.y+=p+s},x=y.textAlign(a),k,T,P,O,A,R,F;for(r.textAlign=a,r.textBaseline="middle",r.font=h.string,e.x=P_(this,x,n),r.fillStyle=n.bodyColor,je(this.beforeBody,S),_=o&&x!=="right"?a==="center"?u/2+c:u+2+c:0,O=0,R=i.length;O<R;++O){for(k=i[O],T=this.labelTextColors[O],r.fillStyle=T,je(k.before,S),P=k.lines,o&&P.length&&(this._drawColorBox(r,e,O,y,n),p=Math.max(h.lineHeight,l)),A=0,F=P.length;A<F;++A)S(P[A]),p=h.lineHeight;je(k.after,S)}_=0,p=h.lineHeight,je(this.afterBody,S),e.y-=s}drawFooter(e,r,n){let i=this.footer,s=i.length,a,o;if(s){let l=yl(n.rtl,this.x,this.width);for(e.x=P_(this,n.footerAlign,n),e.y+=n.footerMarginTop,r.textAlign=l.textAlign(n.footerAlign),r.textBaseline="middle",a=St(n.footerFont),r.fillStyle=n.footerColor,r.font=a.string,o=0;o<s;++o)r.fillText(i[o],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+n.footerSpacing}}drawBackground(e,r,n,i){let{xAlign:s,yAlign:a}=this,{x:o,y:l}=e,{width:u,height:c}=n,{topLeft:h,topRight:p,bottomLeft:_,bottomRight:y}=bl(i.cornerRadius);r.fillStyle=i.backgroundColor,r.strokeStyle=i.borderColor,r.lineWidth=i.borderWidth,r.beginPath(),r.moveTo(o+h,l),a==="top"&&this.drawCaret(e,r,n,i),r.lineTo(o+u-p,l),r.quadraticCurveTo(o+u,l,o+u,l+p),a==="center"&&s==="right"&&this.drawCaret(e,r,n,i),r.lineTo(o+u,l+c-y),r.quadraticCurveTo(o+u,l+c,o+u-y,l+c),a==="bottom"&&this.drawCaret(e,r,n,i),r.lineTo(o+_,l+c),r.quadraticCurveTo(o,l+c,o,l+c-_),a==="center"&&s==="left"&&this.drawCaret(e,r,n,i),r.lineTo(o,l+h),r.quadraticCurveTo(o,l,o+h,l),r.closePath(),r.fill(),i.borderWidth>0&&r.stroke()}_updateAnimationTarget(e){let r=this.chart,n=this.$animations,i=n&&n.x,s=n&&n.y;if(i||s){let a=ah[e.position].call(this,this._active,this._eventPosition);if(!a)return;let o=this._size=XD(this,e),l=Object.assign({},a,this._size),u=QD(r,e,l),c=eM(e,l,u,r);(i._to!==c.x||s._to!==c.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,c))}}_willRender(){return!!this.opacity}draw(e){let r=this.options.setContext(this.getContext()),n=this.opacity;if(!n)return;this._updateAnimationTarget(r);let i={width:this.width,height:this.height},s={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;let a=Ht(r.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(s,e,i,r),$x(e,r.textDirection),s.y+=a.top,this.drawTitle(s,e,r),this.drawBody(s,e,r),this.drawFooter(s,e,r),zx(e,r.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,r){let n=this._active,i=e.map(({datasetIndex:o,index:l})=>{let u=this.chart.getDatasetMeta(o);if(!u)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:u.data[l],index:l}}),s=!Vf(n,i),a=this._positionChanged(i,r);(s||a)&&(this._active=i,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,r,n=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let i=this.options,s=this._active||[],a=this._getActiveElements(e,s,r,n),o=this._positionChanged(a,e),l=r||!Vf(a,s)||o;return l&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,r))),l}_getActiveElements(e,r,n,i){let s=this.options;if(e.type==="mouseout")return[];if(!i)return r.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);let a=this.chart.getElementsAtEventForMode(e,s.mode,s,n);return s.reverse&&a.reverse(),a}_positionChanged(e,r){let{caretX:n,caretY:i,options:s}=this,a=ah[s.position].call(this,e,r);return a!==!1&&(n!==a.x||i!==a.y)}};V(oh,"positioners",ah);var OM={id:"tooltip",_element:oh,positioners:ah,afterInit(t,e,r){r&&(t.tooltip=new oh({chart:t,options:r}))},beforeUpdate(t,e,r){t.tooltip&&t.tooltip.initialize(r)},reset(t,e,r){t.tooltip&&t.tooltip.initialize(r)},afterDraw(t){let e=t.tooltip;if(e&&e._willRender()){let r={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...r,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",r)}},afterEvent(t,e){if(t.tooltip){let r=e.replay;t.tooltip.handleEvent(e.event,r,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:PM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};var lq=(t,e,r,n)=>(typeof e=="string"?(r=t.push(e)-1,n.unshift({index:r,label:e})):isNaN(e)&&(r=null),r);function uq(t,e,r,n){let i=t.indexOf(e);if(i===-1)return lq(t,e,r,n);let s=t.lastIndexOf(e);return i!==s?r:i}var cq=(t,e)=>t===null?null:ln(Math.round(t),0,e);function nM(t){let e=this.getLabels();return t>=0&&t<e.length?e[t]:t}var Tc=class extends El{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let r=this._addedLabels;if(r.length){let n=this.getLabels();for(let{index:i,label:s}of r)n[i]===s&&n.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,r){if(Ge(e))return null;let n=this.getLabels();return r=isFinite(r)&&n[r]===e?r:uq(n,e,we(r,e),this._addedLabels),cq(r,n.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:r}=this.getUserBounds(),{min:n,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),r||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){let e=this.min,r=this.max,n=this.options.offset,i=[],s=this.getLabels();s=e===0&&r===s.length-1?s:s.slice(e,r+1),this._valueRange=Math.max(s.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let a=e;a<=r;a++)i.push({value:a});return i}getLabelForValue(e){return nM.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let r=this.ticks;return e<0||e>r.length-1?null:this.getPixelForValue(r[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}};V(Tc,"id","category"),V(Tc,"defaults",{ticks:{callback:nM}});function dq(t,e){let r=[],{bounds:i,step:s,min:a,max:o,precision:l,count:u,maxTicks:c,maxDigits:h,includeBounds:p}=t,_=s||1,y=c-1,{min:S,max:x}=e,k=!Ge(a),T=!Ge(o),P=!Ge(u),O=(x-S)/(h+1),A=Sx((x-S)/y/_)*_,R,F,I,U;if(A<1e-14&&!k&&!T)return[{value:S},{value:x}];U=Math.ceil(x/A)-Math.floor(S/A),U>y&&(A=Sx(U*A/y/_)*_),Ge(l)||(R=Math.pow(10,l),A=Math.ceil(A*R)/R),i==="ticks"?(F=Math.floor(S/A)*A,I=Math.ceil(x/A)*A):(F=S,I=x),k&&T&&s&&q2((o-a)/s,A/1e3)?(U=Math.round(Math.min((o-a)/A,c)),A=(o-a)/U,F=a,I=o):P?(F=k?a:F,I=T?o:I,U=u-1,A=(I-F)/U):(U=(I-F)/A,xc(U,Math.round(U),A/1e3)?U=Math.round(U):U=Math.ceil(U));let X=Math.max(Ex(A),Ex(F));R=Math.pow(10,Ge(l)?X:l),F=Math.round(F*R)/R,I=Math.round(I*R)/R;let z=0;for(k&&(p&&F!==a?(r.push({value:a}),F<a&&z++,xc(Math.round((F+z*A)*R)/R,a,iM(a,O,t))&&z++):F<a&&z++);z<U;++z){let ne=Math.round((F+z*A)*R)/R;if(T&&ne>o)break;r.push({value:ne})}return T&&p&&I!==o?r.length&&xc(r[r.length-1].value,o,iM(o,O,t))?r[r.length-1].value=o:r.push({value:o}):(!T||I===o)&&r.push({value:I}),r}function iM(t,e,{horizontal:r,minRotation:n}){let i=Gs(n),s=(r?Math.sin(i):Math.cos(i))||.001,a=.75*e*(""+t).length;return Math.min(e/s,a)}var Pc=class extends El{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,r){return Ge(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:r,maxDefined:n}=this.getUserBounds(),{min:i,max:s}=this,a=l=>i=r?i:l,o=l=>s=n?s:l;if(e){let l=ml(i),u=ml(s);l<0&&u<0?o(0):l>0&&u>0&&a(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);o(s+l),e||a(i-l)}this.min=i,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:r,stepSize:n}=e,i;return n?(i=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),r=r||11),r&&(i=Math.min(r,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,r=e.ticks,n=this.getTickLimit();n=Math.max(2,n);let i={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:r.precision,step:r.stepSize,count:r.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:r.minRotation||0,includeBounds:r.includeBounds!==!1},s=this._range||this,a=dq(i,s);return e.bounds==="ticks"&&kx(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){let e=this.ticks,r=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){let i=(n-r)/Math.max(e.length-1,1)/2;r-=i,n+=i}this._startValue=r,this._endValue=n,this._valueRange=n-r}getLabelForValue(e){return b_(e,this.chart.options.locale,this.options.ticks.format)}},Cc=class extends Pc{determineDataLimits(){let{min:e,max:r}=this.getMinMax(!0);this.min=it(e)?e:0,this.max=it(r)?r:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),r=e?this.width:this.height,n=Gs(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(r/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}};V(Cc,"id","linear"),V(Cc,"defaults",{ticks:{callback:Zf.formatters.numeric}});var uh=t=>Math.floor(Ys(t)),vl=(t,e)=>Math.pow(10,uh(t)+e);function sM(t){return t/Math.pow(10,uh(t))===1}function aM(t,e,r){let n=Math.pow(10,r),i=Math.floor(t/n);return Math.ceil(e/n)-i}function fq(t,e){let r=e-t,n=uh(r);for(;aM(t,e,n)>10;)n++;for(;aM(t,e,n)<10;)n--;return Math.min(n,uh(t))}function hq(t,{min:e,max:r}){e=zr(t.min,e);let n=[],i=uh(e),s=fq(e,r),a=s<0?Math.pow(10,Math.abs(s)):1,o=Math.pow(10,s),l=i>s?Math.pow(10,i):0,u=Math.round((e-l)*a)/a,c=Math.floor((e-l)/o/10)*o*10,h=Math.floor((u-c)/Math.pow(10,s)),p=zr(t.min,Math.round((l+c+h*Math.pow(10,s))*a)/a);for(;p<r;)n.push({value:p,major:sM(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,a=s>=0?1:a),p=Math.round((l+c+h*Math.pow(10,s))*a)/a;let _=zr(t.max,p);return n.push({value:_,major:sM(_),significand:h}),n}var O_=class extends El{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,r){let n=Pc.prototype.parse.apply(this,[e,r]);if(n===0){this._zero=!0;return}return it(n)&&n>0?n:null}determineDataLimits(){let{min:e,max:r}=this.getMinMax(!0);this.min=it(e)?Math.max(0,e):null,this.max=it(r)?Math.max(0,r):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!it(this._userMin)&&(this.min=e===vl(this.min,0)?vl(this.min,-1):vl(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:r}=this.getUserBounds(),n=this.min,i=this.max,s=o=>n=e?n:o,a=o=>i=r?i:o;n===i&&(n<=0?(s(1),a(10)):(s(vl(n,-1)),a(vl(i,1)))),n<=0&&s(vl(i,-1)),i<=0&&a(vl(n,1)),this.min=n,this.max=i}buildTicks(){let e=this.options,r={min:this._userMin,max:this._userMax},n=hq(r,this);return e.bounds==="ticks"&&kx(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":b_(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Ys(e),this._valueRange=Ys(this.max)-Ys(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ys(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let r=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+r*this._valueRange)}};V(O_,"id","logarithmic"),V(O_,"defaults",{ticks:{callback:Zf.formatters.logarithmic,major:{enabled:!0}}});function l1(t){let e=t.ticks;if(e.display&&t.display){let r=Ht(e.backdropPadding);return we(e.font&&e.font.size,st.font.size)+r.height}return 0}function pq(t,e,r){return r=Ke(r)?r:[r],{w:nD(t,e.string,r),h:r.length*e.lineHeight}}function oM(t,e,r,n,i){return t===n||t===i?{start:e-r/2,end:e+r/2}:t<n||t>i?{start:e-r,end:e}:{start:e,end:e+r}}function mq(t){let e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},r=Object.assign({},e),n=[],i=[],s=t._pointLabels.length,a=t.options.pointLabels,o=a.centerPointLabels?ht/s:0;for(let l=0;l<s;l++){let u=a.setContext(t.getPointLabelContext(l));i[l]=u.padding;let c=t.getPointPosition(l,t.drawingArea+i[l],o),h=St(u.font),p=pq(t.ctx,h,t._pointLabels[l]);n[l]=p;let _=jr(t.getIndexAngle(l)+o),y=Math.round(m_(_)),S=oM(y,c.x,p.w,0,180),x=oM(y,c.y,p.h,90,270);gq(r,e,_,S,x)}t.setCenterPoint(e.l-r.l,r.r-e.r,e.t-r.t,r.b-e.b),t._pointLabelItems=yq(t,n,i)}function gq(t,e,r,n,i){let s=Math.abs(Math.sin(r)),a=Math.abs(Math.cos(r)),o=0,l=0;n.start<e.l?(o=(e.l-n.start)/s,t.l=Math.min(t.l,e.l-o)):n.end>e.r&&(o=(n.end-e.r)/s,t.r=Math.max(t.r,e.r+o)),i.start<e.t?(l=(e.t-i.start)/a,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/a,t.b=Math.max(t.b,e.b+l))}function _q(t,e,r){let n=t.drawingArea,{extra:i,additionalAngle:s,padding:a,size:o}=r,l=t.getPointPosition(e,n+i+a,s),u=Math.round(m_(jr(l.angle+Br))),c=xq(l.y,o.h,u),h=wq(u),p=vq(l.x,o.w,h);return{visible:!0,x:l.x,y:c,textAlign:h,left:p,top:c,right:p+o.w,bottom:c+o.h}}function bq(t,e){if(!e)return!0;let{left:r,top:n,right:i,bottom:s}=t;return!(zi({x:r,y:n},e)||zi({x:r,y:s},e)||zi({x:i,y:n},e)||zi({x:i,y:s},e))}function yq(t,e,r){let n=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:a,display:o}=s.pointLabels,l={extra:l1(s)/2,additionalAngle:a?ht/i:0},u;for(let c=0;c<i;c++){l.padding=r[c],l.size=e[c];let h=_q(t,c,l);n.push(h),o==="auto"&&(h.visible=bq(h,u),h.visible&&(u=h))}return n}function wq(t){return t===0||t===180?"center":t<180?"left":"right"}function vq(t,e,r){return r==="right"?t-=e:r==="center"&&(t-=e/2),t}function xq(t,e,r){return r===90||r===270?t-=e/2:(r>270||r<90)&&(t-=e),t}function Sq(t,e,r){let{left:n,top:i,right:s,bottom:a}=r,{backdropColor:o}=e;if(!Ge(o)){let l=bl(e.borderRadius),u=Ht(e.backdropPadding);t.fillStyle=o;let c=n-u.left,h=i-u.top,p=s-n+u.width,_=a-i+u.height;Object.values(l).some(y=>y!==0)?(t.beginPath(),Xf(t,{x:c,y:h,w:p,h:_,radius:l}),t.fill()):t.fillRect(c,h,p,_)}}function kq(t,e){let{ctx:r,options:{pointLabels:n}}=t;for(let i=e-1;i>=0;i--){let s=t._pointLabelItems[i];if(!s.visible)continue;let a=n.setContext(t.getPointLabelContext(i));Sq(r,a,s);let o=St(a.font),{x:l,y:u,textAlign:c}=s;Ha(r,t._pointLabels[i],l,u+o.lineHeight/2,o,{color:a.color,textAlign:c,textBaseline:"middle"})}}function RM(t,e,r,n){let{ctx:i}=t;if(r)i.arc(t.xCenter,t.yCenter,e,0,$r);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let a=1;a<n;a++)s=t.getPointPosition(a,e),i.lineTo(s.x,s.y)}}function Eq(t,e,r,n,i){let s=t.ctx,a=e.circular,{color:o,lineWidth:l}=e;!a&&!n||!o||!l||r<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),RM(t,r,a,n),s.closePath(),s.stroke(),s.restore())}function Tq(t,e,r){return Zs(t,{label:r,index:e,type:"pointLabel"})}var kc=class extends Pc{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=Ht(l1(this.options)/2),r=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+r/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(r,n)/2)}determineDataLimits(){let{min:e,max:r}=this.getMinMax(!1);this.min=it(e)&&!isNaN(e)?e:0,this.max=it(r)&&!isNaN(r)?r:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/l1(this.options))}generateTickLabels(e){Pc.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((r,n)=>{let i=qe(this.options.pointLabels.callback,[r,n],this);return i||i===0?i:""}).filter((r,n)=>this.chart.getDataVisibility(n))}fit(){let e=this.options;e.display&&e.pointLabels.display?mq(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,r,n,i){this.xCenter+=Math.floor((e-r)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,r,n,i))}getIndexAngle(e){let r=$r/(this._pointLabels.length||1),n=this.options.startAngle||0;return jr(e*r+Gs(n))}getDistanceFromCenterForValue(e){if(Ge(e))return NaN;let r=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*r:(e-this.min)*r}getValueForDistanceFromCenter(e){if(Ge(e))return NaN;let r=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-r:this.min+r}getPointLabelContext(e){let r=this._pointLabels||[];if(e>=0&&e<r.length){let n=r[e];return Tq(this.getContext(),e,n)}}getPointPosition(e,r,n=0){let i=this.getIndexAngle(e)-Br+n;return{x:Math.cos(i)*r+this.xCenter,y:Math.sin(i)*r+this.yCenter,angle:i}}getPointPositionForValue(e,r){return this.getPointPosition(e,this.getDistanceFromCenterForValue(r))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:r,top:n,right:i,bottom:s}=this._pointLabelItems[e];return{left:r,top:n,right:i,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:r}}=this.options;if(e){let n=this.ctx;n.save(),n.beginPath(),RM(this,this.getDistanceFromCenterForValue(this._endValue),r,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){let e=this.ctx,r=this.options,{angleLines:n,grid:i,border:s}=r,a=this._pointLabels.length,o,l,u;if(r.pointLabels.display&&kq(this,a),i.display&&this.ticks.forEach((c,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(c.value);let p=this.getContext(h),_=i.setContext(p),y=s.setContext(p);Eq(this,_,l,a,y)}}),n.display){for(e.save(),o=a-1;o>=0;o--){let c=n.setContext(this.getPointLabelContext(o)),{color:h,lineWidth:p}=c;!p||!h||(e.lineWidth=p,e.strokeStyle=h,e.setLineDash(c.borderDash),e.lineDashOffset=c.borderDashOffset,l=this.getDistanceFromCenterForValue(r.reverse?this.min:this.max),u=this.getPointPosition(o,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,r=this.options,n=r.ticks;if(!n.display)return;let i=this.getIndexAngle(0),s,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,l)=>{if(l===0&&this.min>=0&&!r.reverse)return;let u=n.setContext(this.getContext(l)),c=St(u.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),u.showLabelBackdrop){e.font=c.string,a=e.measureText(o.label).width,e.fillStyle=u.backdropColor;let h=Ht(u.backdropPadding);e.fillRect(-a/2-h.left,-s-c.size/2-h.top,a+h.width,c.size+h.height)}Ha(e,o.label,0,-s,c,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}};V(kc,"id","radialLinear"),V(kc,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Zf.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),V(kc,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),V(kc,"descriptors",{angleLines:{_fallback:"grid"}});var z_={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Wr=Object.keys(z_);function lM(t,e){return t-e}function uM(t,e){if(Ge(e))return null;let r=t._adapter,{parser:n,round:i,isoWeekday:s}=t._parseOpts,a=e;return typeof n=="function"&&(a=n(a)),it(a)||(a=typeof n=="string"?r.parse(a,n):r.parse(a)),a===null?null:(i&&(a=i==="week"&&(Sc(s)||s===!0)?r.startOf(a,"isoWeek",s):r.startOf(a,i)),+a)}function cM(t,e,r,n){let i=Wr.length;for(let s=Wr.indexOf(t);s<i-1;++s){let a=z_[Wr[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((r-e)/(o*a.size))<=n)return Wr[s]}return Wr[i-1]}function Cq(t,e,r,n,i){for(let s=Wr.length-1;s>=Wr.indexOf(r);s--){let a=Wr[s];if(z_[a].common&&t._adapter.diff(i,n,a)>=e-1)return a}return Wr[r?Wr.indexOf(r):0]}function Aq(t){for(let e=Wr.indexOf(t)+1,r=Wr.length;e<r;++e)if(z_[Wr[e]].common)return Wr[e]}function dM(t,e,r){if(!r)t[e]=!0;else if(r.length){let{lo:n,hi:i}=g_(r,e),s=r[n]>=e?r[n]:r[i];t[s]=!0}}function Pq(t,e,r,n){let i=t._adapter,s=+i.startOf(e[0].value,n),a=e[e.length-1].value,o,l;for(o=s;o<=a;o=+i.add(o,1,n))l=r[o],l>=0&&(e[l].major=!0);return e}function fM(t,e,r){let n=[],i={},s=e.length,a,o;for(a=0;a<s;++a)o=e[a],i[o]=a,n.push({value:o,major:!1});return s===0||!r?n:Pq(t,n,i,r)}var Ac=class extends El{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,r={}){let n=e.time||(e.time={}),i=this._adapter=new gU._date(e.adapters.date);i.init(r),vc(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=r.normalized}parse(e,r){return e===void 0?null:uM(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,r=this._adapter,n=e.time.unit||"day",{min:i,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!o&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!a||!o)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=it(i)&&!isNaN(i)?i:+r.startOf(Date.now(),n),s=it(s)&&!isNaN(s)?s:+r.endOf(Date.now(),n)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){let e=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(r=e[0],n=e[e.length-1]),{min:r,max:n}}buildTicks(){let e=this.options,r=e.time,n=e.ticks,i=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);let s=this.min,a=this.max,o=G2(i,s,a);return this._unit=r.unit||(n.autoSkip?cM(r.minUnit,this.min,this.max,this._getLabelCapacity(s)):Cq(this,o.length,r.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:Aq(this._unit),this.initOffsets(i),e.reverse&&o.reverse(),fM(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let r=0,n=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?r=1-i:r=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?n=s:n=(s-this.getDecimalForValue(e[e.length-2]))/2);let a=e.length<3?.5:.25;r=ln(r,0,a),n=ln(n,0,a),this._offsets={start:r,end:n,factor:1/(r+1+n)}}_generate(){let e=this._adapter,r=this.min,n=this.max,i=this.options,s=i.time,a=s.unit||cM(s.minUnit,r,n,this._getLabelCapacity(r)),o=we(i.ticks.stepSize,1),l=a==="week"?s.isoWeekday:!1,u=Sc(l)||l===!0,c={},h=r,p,_;if(u&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,u?"day":a),e.diff(n,r,a)>1e5*o)throw new Error(r+" and "+n+" are too far apart with stepSize of "+o+" "+a);let y=i.ticks.source==="data"&&this.getDataTimestamps();for(p=h,_=0;p<n;p=+e.add(p,o,a),_++)dM(c,p,y);return(p===n||i.bounds==="ticks"||_===1)&&dM(c,p,y),Object.keys(c).sort(lM).map(S=>+S)}getLabelForValue(e){let r=this._adapter,n=this.options.time;return n.tooltipFormat?r.format(e,n.tooltipFormat):r.format(e,n.displayFormats.datetime)}format(e,r){let i=this.options.time.displayFormats,s=this._unit,a=r||i[s];return this._adapter.format(e,a)}_tickFormatFunction(e,r,n,i){let s=this.options,a=s.ticks.callback;if(a)return qe(a,[e,r,n],this);let o=s.time.displayFormats,l=this._unit,u=this._majorUnit,c=l&&o[l],h=u&&o[u],p=n[r],_=u&&h&&p&&p.major;return this._adapter.format(e,i||(_?h:c))}generateTickLabels(e){let r,n,i;for(r=0,n=e.length;r<n;++r)i=e[r],i.label=this._tickFormatFunction(i.value,r,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let r=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((r.start+n)*r.factor)}getValueForPixel(e){let r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){let r=this.options.ticks,n=this.ctx.measureText(e).width,i=Gs(this.isHorizontal()?r.maxRotation:r.minRotation),s=Math.cos(i),a=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*s+o*a,h:n*a+o*s}}_getLabelCapacity(e){let r=this.options.time,n=r.displayFormats,i=n[r.unit]||n.millisecond,s=this._tickFormatFunction(e,0,fM(this,[e],this._majorUnit),i),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],r,n;if(e.length)return e;let i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(r=0,n=i.length;r<n;++r)e=e.concat(i[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],r,n;if(e.length)return e;let i=this.getLabels();for(r=0,n=i.length;r<n;++r)e.push(uM(this,i[r]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return K2(e.sort(lM))}};V(Ac,"id","time"),V(Ac,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function R_(t,e,r){let n=0,i=t.length-1,s,a,o,l;r?(e>=t[n].pos&&e<=t[i].pos&&({lo:n,hi:i}=Ua(t,"pos",e)),{pos:s,time:o}=t[n],{pos:a,time:l}=t[i]):(e>=t[n].time&&e<=t[i].time&&({lo:n,hi:i}=Ua(t,"time",e)),{time:s,pos:o}=t[n],{time:a,pos:l}=t[i]);let u=a-s;return u?o+(l-o)*(e-s)/u:o}var D_=class extends Ac{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),r=this._table=this.buildLookupTable(e);this._minPos=R_(r,this.min),this._tableRange=R_(r,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:r,max:n}=this,i=[],s=[],a,o,l,u,c;for(a=0,o=e.length;a<o;++a)u=e[a],u>=r&&u<=n&&i.push(u);if(i.length<2)return[{time:r,pos:0},{time:n,pos:1}];for(a=0,o=i.length;a<o;++a)c=i[a+1],l=i[a-1],u=i[a],Math.round((c+l)/2)!==u&&s.push({time:u,pos:a/(o-1)});return s}_generate(){let e=this.min,r=this.max,n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(r)||n.length===1)&&n.push(r),n.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let r=this.getDataTimestamps(),n=this.getLabelTimestamps();return r.length&&n.length?e=this.normalize(r.concat(n)):e=r.length?r:n,e=this._cache.all=e,e}getDecimalForValue(e){return(R_(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let r=this._offsets,n=this.getDecimalForPixel(e)/r.factor-r.end;return R_(this._table,n*this._tableRange+this._minPos,!0)}};V(D_,"id","timeseries"),V(D_,"defaults",Ac.defaults);var DM=/^on/,MM=[];Object.keys(globalThis).forEach(t=>{DM.test(t)&&MM.push(t.replace(DM,""))});function fi(t){let e=$i,r=[];function n(i){g2(e,i)}Nf(()=>{let i=t();MM.forEach(i instanceof Element?s=>r.push(sx(i,s,n)):s=>r.push(i.$on(s,n)))}),jf(()=>{for(;r.length;)r.pop()()})}function Oq(t){let e,r=[t[1]],n={};for(let i=0;i<r.length;i+=1)n=mr(n,r[i]);return{c(){e=_r("canvas"),f2(e,n)},m(i,s){vt(i,e,s),t[8](e)},p:ee,i:ee,o:ee,d(i){i&&ut(e),t[8](null)}}}function Rq(t){let{data:e,type:r,options:n,plugins:i,children:s,$$scope:a,$$slots:o,...l}=t;return l}function Dq(t,e,r){let{type:n}=e,{data:i={datasets:[]}}=e,{options:s={}}=e,{plugins:a=[]}=e,{updateMode:o=void 0}=e,{chart:l=null}=e,u,c=Rq(e);Nf(()=>{r(2,l=new yr(u,{type:n,data:i,options:s,plugins:a}))}),ax(()=>{l&&(r(2,l.data=i,l),Object.assign(l.options,s),l.update(o))}),jf(()=>{l&&l.destroy(),r(2,l=null)}),fi(()=>u);function h(p){Nr[p?"unshift":"push"](()=>{u=p,r(0,u)})}return t.$$set=p=>{r(9,e=mr(mr({},e),nn(p))),"type"in p&&r(3,n=p.type),"data"in p&&r(4,i=p.data),"options"in p&&r(5,s=p.options),"plugins"in p&&r(6,a=p.plugins),"updateMode"in p&&r(7,o=p.updateMode),"chart"in p&&r(2,l=p.chart)},e=nn(e),[u,c,l,n,i,s,a,o,h]}var c1=class extends Lt{constructor(e){super(),br(this,e,Dq,Oq,gr,{type:3,data:4,options:5,plugins:6,updateMode:7,chart:2})}},Hi=c1;function Mq(t){let e,r,n,i=[{type:"line"},t[1]];function s(o){t[4](o)}let a={};for(let o=0;o<i.length;o+=1)a=mr(a,i[o]);return t[0]!==void 0&&(a.chart=t[0]),e=new Hi({props:a}),t[3](e),Nr.push(()=>qs(e,"chart",s)),{c(){Dn(e.$$.fragment)},m(o,l){an(e,o,l),n=!0},p(o,[l]){let u=l&2?Us(i,[i[0],Ws(o[1])]):{};!r&&l&1&&(r=!0,u.chart=o[0],$s(()=>r=!1)),e.$set(u)},i(o){n||(It(e.$$.fragment,o),n=!0)},o(o){tr(e.$$.fragment,o),n=!1},d(o){t[3](null),on(e,o)}}}function Iq(t,e,r){yr.register(Sl);let{chart:n=null}=e,i,s;fi(()=>s);function a(l){Nr[l?"unshift":"push"](()=>{s=l,r(2,s)})}function o(l){n=l,r(0,n)}return t.$$set=l=>{r(5,e=mr(mr({},e),nn(l))),"chart"in l&&r(0,n=l.chart)},t.$$.update=()=>{r(1,i=e)},e=nn(e),[n,i,s,a,o]}var d1=class extends Lt{constructor(e){super(),br(this,e,Iq,Mq,gr,{chart:0})}},U_=d1;function Lq(t){Qg(t,"svelte-169aap0","#statistics-line-chart.svelte-169aap0{--backgroundColor:rgba(225, 204,230, .4);--backgroundColor-1:rgba(255, 99, 132, 0.2);--borderColor-1:rgb(205, 130, 158);--point-border-color:rgb(205, 130,1 58);--pointBackgroundColor:rgb(255, 255, 255);--pointHoverBackgroundColor:rgb(0, 0, 0);--pointHoverBorderColor:rgba(220, 220, 220,1);--pageDataColor:rgb(255, 136, 0);position:relative;height:100%;width:100%;background-color:rgba(255, 255, 255, 0.9)}")}function Fq(t){let e,r;return e=new U_({props:{data:t[0],options:t[2]}}),{c(){Dn(e.$$.fragment)},m(n,i){an(e,n,i),r=!0},p:ee,i(n){r||(It(e.$$.fragment,n),r=!0)},o(n){tr(e.$$.fragment,n),r=!1},d(n){on(e,n)}}}function Nq(t){let e,r;return e=new U_({props:{data:t[1],options:t[3]}}),{c(){Dn(e.$$.fragment)},m(n,i){an(e,n,i),r=!0},p:ee,i(n){r||(It(e.$$.fragment,n),r=!0)},o(n){tr(e.$$.fragment,n),r=!1},d(n){on(e,n)}}}function jq(t){let e,r,n,i,s,a=[Nq,Fq],o=[];function l(u,c){return u[4]()?0:1}return n=l(t,-1),i=o[n]=a[n](t),{c(){e=_r("div"),i.c(),xt(e,"id","statistics-line-chart"),xt(e,"class","svelte-169aap0")},m(u,c){vt(u,e,c),o[n].m(e,null),s=!0},p(u,[c]){i.p(u,c)},i(u){s||(It(i),s=!0)},o(u){tr(i),s=!1},d(u){u&&ut(e),o[n].d()}}}var Bq=1e4;function $q(t,e,r){let{app:n}=e,{plugin:i}=e,{staticsFileData:s}=e,a=JSON.parse(s),o=[],l=[],u=[],c=[],h=Object.keys(a.history);for(let R of h)o.push({key:R,value:a.history[R].words}),l.push({key:R,value:-a.history[R].pages}),u.push({key:R,value:Number(a.history[R].files)}),c.push({key:R,value:Number(a.history[R].totalPages)});let p=Bq/h.length,y={x:{type:"number",easing:"linear",duration:p,from:NaN,delay(R){return R.type!=="data"||R.xStarted?0:(R.xStarted=!0,R.index*p)}},y:{type:"number",easing:"linear",duration:p,from:R=>R.index===0?R.chart.scales.y.getPixelForValue(100):R.chart.getDatasetMeta(R.datasetIndex).data[R.index-1].getProps(["y"],!0).y,delay(R){return R.type!=="data"||R.yStarted?0:(R.yStarted=!0,R.index*p)}}},S={tension:{duration:1e3,easing:"linear",from:1,to:0,loop:!0}},x;i.settings.animation?x=y:x=S;let k={datasets:[{label:"Daily Words",fill:!0,data:o,backgroundColor:["rgba(255, 99, 132, 0.2)"],borderColor:["rgba(255, 99, 132, 1)"],borderWidth:1,yAxisID:"y",parsing:{xAxisKey:"key",yAxisKey:"value"},cubicInterpolationMode:"monotone",pointStyle:"rectRounded"},{label:"Daily Pages",fill:!0,data:l,backgroundColor:["rgba(238, 130, 238, 0.2)"],borderColor:["rgba(238, 130, 238, 1)"],borderWidth:1,yAxisID:"y1",parsing:{xAxisKey:"key",yAxisKey:"value"},cubicInterpolationMode:"monotone",pointStyle:"rectRounded"}]},T={datasets:[{label:"Total Files",fill:!0,data:u,backgroundColor:["rgba(153, 102, 255, 0.2)"],borderColor:["rgba(153, 102, 255, 1)"],borderWidth:1,yAxisID:"y",parsing:{xAxisKey:"key",yAxisKey:"value"},cubicInterpolationMode:"monotone",pointStyle:"rectRounded"},{label:"Total Pages",fill:!0,data:c,backgroundColor:["rgba(255, 205, 86, 0.2)"],borderColor:["rgba(255, 205, 86, 1)"],borderWidth:1,yAxisID:"y1",parsing:{xAxisKey:"key",yAxisKey:"value"},cubicInterpolationMode:"monotone",pointStyle:"rectRounded"}]},P={responsive:!0,interaction:{intersect:!0,mode:"index"},plugins:{title:{display:!0,text:"Statistics of Obsidian Vault",font:{weight:"bold",size:16,family:"Barlow"},color:"rgba(48,48,48,1)"},subtitle:{display:!0,text:"words of vault named as Anthelion",font:{size:14,style:"italic",family:"sans-serif",weight:"bold"},color:"rgba(48,48,48,0.8)"},legend:{labels:{color:"rgba(0,0,0,1)",usePointStyle:!0,pointStyle:"rectRounded"}},tooltip:{usePointStyle:!0}},animations:x,scales:{y:{border:{display:!0,width:.8},grid:{display:!0,drawOnChartArea:!0,drawTicks:!0,color:"rgba(59, 59, 59, 0.2)"},title:{display:!0,text:"+words",font:{size:15,style:"italic",weight:"bold"},color:"rgba(255, 99, 132, 1)"},ticks:{color:"rgba(255, 99, 132, 1)",showLabelBackdrop:!1}},y1:{position:"right",border:{display:!0,width:.8},grid:{display:!0,drawOnChartArea:!0,drawTicks:!0,color:"rgba(59, 59, 59, 0.2)"},title:{display:!0,text:"-pages",font:{size:15,style:"italic",weight:"bold"},color:"rgba(238, 130, 238, 1)"},ticks:{color:"rgba(238, 130, 238, 1)",showLabelBackdrop:!1}},x:{border:{display:!1,width:.8},grid:{color:"rgba(59, 59, 59, 0.2)"},ticks:{}}}},O={interaction:{mode:"index",axis:"y"},plugins:{title:{display:!0,text:"Statistics of Obsidian Vault",font:{weight:"bold",size:16,family:"Barlow"}},subtitle:{display:!0,text:"total files/pages of vault named as "+n.vault.getName(),font:{size:14,style:"italic",family:"sans-serif"}},legend:{labels:{color:"rgba(0,0,0,1)",usePointStyle:!0,pointStyle:"rectRounded"}},tooltip:{usePointStyle:!0}},animations:x,scales:{y:{border:{display:!0,width:.8},grid:{display:!0,drawOnChartArea:!0,drawTicks:!0,color:"rgba(59, 59, 59, 0.2)"},title:{display:!0,text:"total-files",font:{size:15,style:"italic",weight:"bold",family:"Courier New"},color:"rgba(153, 102, 255, 1)"},ticks:{color:"rgba(153, 102, 255, 0.5)",showLabelBackdrop:!1},suggestedMin:1373},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},title:{display:!0,text:"total-pages",font:{size:15,style:"italic",weight:"bold",family:"Courier New"},color:"rgba(255, 205, 86, 1)"},ticks:{color:"rgba(255, 205, 86, 1)",showLabelBackdrop:!1},suggestedMin:4045},x:{border:{display:!1,width:.8},grid:{color:"rgba(59, 59, 59, 0.2)"}}}},A=()=>i.settings.statisticsType==="total";return yr.register(AM,OM,CM,ci,Cc,kl,Tc,EM),t.$$set=R=>{"app"in R&&r(5,n=R.app),"plugin"in R&&r(6,i=R.plugin),"staticsFileData"in R&&r(7,s=R.staticsFileData)},[k,T,P,O,A,n,i,s]}var f1=class extends Lt{constructor(e){super(),br(this,e,$q,jq,gr,{app:5,plugin:6,staticsFileData:7},Lq)}},h1=f1;var W_="PluginAST_STAT",p1=new RegExp("%%[\\s\\S]*?(?!%%)[\\s\\S]+?%%","g"),m1=new RegExp("<!--[\\s\\S]*?(?:-->)?<!---+>?|<!(?![dD][oO][cC][tT][yY][pP][eE]|\\[CDATA\\[)[^>]*>?|<[?][^>]*>?","g"),IM="stats.json";var Tl="vault-statistics-preview",q_=class extends H_.ItemView{constructor(e,r,n){super(n),this.app=e,this.plugin=r,this.staticsFileData="",(0,H_.addIcon)(W_,Wt[W_])}getViewType(){return Tl}getDisplayText(){return"Vault Statistics Preview"}getIcon(){return W_}async onOpen(){let e=this.app.vault.configDir+"/"+IM;this.staticsFileData=await this.app.vault.adapter.read(e);let r=this.containerEl.getElementsByClassName("view-content");this.component=new h1({target:r[0],props:{app:this.app,plugin:this.plugin,staticsFileData:this.staticsFileData}}),this.containerEl.getElementsByTagName("canvas")[0].setAttribute("style","position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);")}async onClose(){this.component.$destroy()}onResize(){this.component.$destroy();let e=this.containerEl.getElementsByClassName("view-content");this.component=new h1({target:e[0],props:{app:this.app,plugin:this.plugin,staticsFileData:this.staticsFileData}}),this.containerEl.getElementsByTagName("canvas")[0].setAttribute("style","position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);")}};var FM={debug:!1,targetPath:".",fileFormat:"YYYY-MM-DD",previewLimits:5,previewTags:[],localGraph:{notice:"show current note grah view",type:"popover",depth:2,showTags:!0,showAttach:!0,showNeighbor:!0,collapse:!1,autoColors:!1,resizeStyle:{width:550,height:500}},memos:{resizeStyle:{width:550,height:500}},enableGraphColors:!1,colorGroups:[{query:"path:/",color:{a:1,rgb:6617700}}],enableMetadataUpdating:!1,metadatas:[{key:"modify",value:"YYYY-MM-DD HH:mm:ss",t:"moment"}],metadataExcludePath:[],isEnabledMetadataUpdating:!1,cachePluginRepo:{"personal-assistant":"edonyzpc/personal-assistant"},cacheThemeRepo:{Minimal:"kepano/obsidian-minimal"},statisticsType:"none",statsPath:".obsidian/stats.json",displaySectionCounts:!1,countComments:!1,animation:!1,modelName:"qwen-plus",apiToken:"sk-xxx"},LM={query:"path:/",color:{a:1,rgb:6617700}},V_=class extends Re.PluginSettingTab{constructor(e,r){super(e,r),this.plugin=r,this.log=(...n)=>r.log(...n)}display(){let e=this.plugin,{containerEl:r}=this;r.empty(),r.createEl("h1",{text:"Settings for Obsidian Assistant"});let n=document.createElement("a");n.setText("Open GitHub repository"),n.href="https://github.com/edonyzpc/personal-assistant",n.setAttr("style","font-style: italic;"),r.createEl("p",{text:"Obsidian Assistant by Shadow Walker, "}).appendChild(n),new Re.Setting(r).setName("Debug").addToggle(p=>p.setValue(this.plugin.settings.debug).onChange(_=>{this.plugin.settings.debug=_,this.plugin.saveSettings()})),r.createEl("h2",{text:"Settings for Record"}),r.createEl("p",{text:"Obsidian Management for Recording in Specific Path"}).setAttr("style","font-size:14px"),new Re.Setting(r).setName("Target Path").setDesc("Target directory to do recording").addText(p=>p.setPlaceholder(".").setValue(this.plugin.settings.targetPath).onChange(async _=>{this.log("target path: "+_),e.settings.targetPath=_,await this.plugin.saveSettings()}));let i=document.createDocumentFragment();i.createEl("p",void 0,p=>{p.innerText=`File format which is like Diary setting.
For more syntax details, `,p.createEl("a",void 0,_=>{_.innerText="please check moment format.",_.href="https://momentjs.com/docs/#/displaying/format/"})}),new Re.Setting(r).setName("File Format").setDesc(i).addText(p=>p.setPlaceholder("YYYY-MM-DD").setValue(this.plugin.settings.fileFormat).onChange(async _=>{this.log("format setting: "+_),e.settings.fileFormat=_,await this.plugin.saveSettings()})),new Re.Setting(r).setName("Preview Number").setDesc("File numbers to preview").addText(p=>{p.setPlaceholder("5").setValue(this.plugin.settings.previewLimits.toString()).onChange(async _=>{e.settings.previewLimits=parseInt(_),await this.plugin.saveSettings()})}),r.createEl("h2",{text:"Settings for Hover Local Graph"}),r.createEl("p",{text:"Obsidian Management for Hover Local Graph"}).setAttr("style","font-size:14px"),new Re.Setting(r).setName("Type").setDesc("Type of hover").addText(p=>{p.setPlaceholder("popover").setValue(this.plugin.settings.localGraph.type).onChange(async _=>{e.settings.localGraph.type=_,await this.plugin.saveSettings()})}),new Re.Setting(r).setName("Depth").setDesc("Depth of link jumps").addText(p=>{p.setPlaceholder("2").setValue(this.plugin.settings.localGraph.depth.toString()).onChange(async _=>{e.settings.localGraph.depth=parseInt(_),await this.plugin.saveSettings()})}),new Re.Setting(r).setName("Show Tags").setDesc("Show tags in local graph view").addToggle(p=>{p.setValue(this.plugin.settings.localGraph.showTags).onChange(async _=>{e.settings.localGraph.showTags=_,await this.plugin.saveSettings()})}),new Re.Setting(r).setName("Show Attachment").setDesc("Show attachments in local graph view").addToggle(p=>{p.setValue(this.plugin.settings.localGraph.showAttach).onChange(async _=>{e.settings.localGraph.showAttach=_,await this.plugin.saveSettings()})}),new Re.Setting(r).setName("Show Neighbor").setDesc("Show neighbors in local graph view").addToggle(p=>{p.setValue(this.plugin.settings.localGraph.showNeighbor).onChange(async _=>{e.settings.localGraph.showNeighbor=_,await this.plugin.saveSettings()})}),new Re.Setting(r).setName("Collapse").setDesc("Collapse local graph view setting").addToggle(p=>{p.setValue(this.plugin.settings.localGraph.collapse).onChange(async _=>{e.settings.localGraph.collapse=_,await this.plugin.saveSettings()})}),new Re.Setting(r).setName("Auto Local Graph Colors").setDesc("Automatically set colors of local graph view.").addToggle(p=>{p.setValue(e.settings.localGraph.autoColors).onChange(async _=>{e.settings.localGraph.autoColors=_,await e.saveSettings()})}),r.createEl("p",{text:"Graph Resize"}).setAttr("style","font-size:15px");let s=document.createDocumentFragment();s.createEl("span",void 0,p=>{p.innerText="height",p.setAttr("style","margin:18px")});let a=document.createDocumentFragment();a.createEl("span",void 0,p=>{p.innerText="width",p.setAttr("style","margin:18px")}),document.createDocumentFragment().createEl("span",void 0,p=>{p.innerText="top",p.setAttr("style","margin:18px")}),document.createDocumentFragment().createEl("span",void 0,p=>{p.innerText="left",p.setAttr("style","margin:18px")}),new Re.Setting(r).setName(s).addText(p=>{p.setPlaceholder("height").setValue(this.plugin.settings.localGraph.resizeStyle.height.toString()).onChange(async _=>{e.settings.localGraph.resizeStyle.height=parseInt(_),await this.plugin.saveSettings()})}),new Re.Setting(r).setName(a).addText(p=>{p.setPlaceholder("width").setValue(this.plugin.settings.localGraph.resizeStyle.width.toString()).onChange(async _=>{e.settings.localGraph.resizeStyle.width=parseInt(_),await this.plugin.saveSettings()})}),r.createEl("h2",{text:"Settings for Memos"}),r.createEl("p",{text:"Memos Resize"}).setAttr("style","font-size:15px");let u=document.createDocumentFragment();u.createEl("span",void 0,p=>{p.innerText="height",p.setAttr("style","margin:18px")});let c=document.createDocumentFragment();c.createEl("span",void 0,p=>{p.innerText="width",p.setAttr("style","margin:18px")}),new Re.Setting(r).setName(u).addText(p=>{p.setPlaceholder("height").setValue(this.plugin.settings.memos.resizeStyle.height.toString()).onChange(async _=>{e.settings.memos.resizeStyle.height=parseInt(_),await this.plugin.saveSettings()})}),new Re.Setting(r).setName(c).addText(p=>{p.setPlaceholder("width").setValue(this.plugin.settings.memos.resizeStyle.width.toString()).onChange(async _=>{e.settings.memos.resizeStyle.width=parseInt(_),await this.plugin.saveSettings()})}),r.createEl("h2",{text:"Graph Colors"}),new Re.Setting(r).setName("Enable Graph Colors").setDesc("Use personal assistant set colors of graph view.").addToggle(p=>{p.setValue(e.settings.enableGraphColors).onChange(async _=>{e.settings.enableGraphColors=_,await e.saveSettings(),this.display()})}),e.settings.enableGraphColors&&(JSON.parse(JSON.stringify(e.settings.colorGroups)).forEach(_=>{let y=this.findGraphColor(_),S=`#${_.color.rgb.toString(16)}`,k=(P=>{let O=parseInt(P.slice(1,3),16),A=parseInt(P.slice(3,5),16),R=parseInt(P.slice(5,7),16);return"rgb("+O+", "+A+", "+R+")"})(S),T=document.createDocumentFragment();T.createSpan({text:"\u25CF",attr:{style:`color: ${S}`}}),T.appendText(` Color for #${_.query}`),new Re.Setting(r).setName(T).setDesc("This will be the Color used in the graph view.").addText(P=>{P.setValue(e.settings.colorGroups[y].query).onChange(async O=>{y>-1&&(e.settings.colorGroups[y].query=O,await this.plugin.saveSettings())})}).addButton(P=>{P.setButtonText("Change Color"),new rx({parent:P.buttonEl,onDone:async O=>{let A=O.hex.split("#")[1];this.log(`origin hex color = ${A}`),A.length===8&&(A=A.substring(0,6)),this.log(`hexColor without alpha ${A}`),y>-1&&(this.plugin.settings.colorGroups[y].color.rgb=parseInt(A,16),await this.plugin.saveSettings(),this.display())},popup:"left",color:k,alpha:!1})}).addExtraButton(P=>{P.setIcon("trash").setTooltip("Remove").onClick(async()=>{y>-1&&(this.log(`removing  ${this.plugin.settings.colorGroups[y]}`),this.plugin.settings.colorGroups.splice(y,1)),await this.plugin.saveSettings(),this.display()})}).addExtraButton(P=>{P.setIcon("reset").setTooltip("Reset to default").onClick(async()=>{y>-1&&(this.log(`resetting ${this.plugin.settings.colorGroups[y]}`),this.plugin.settings.colorGroups[y]=JSON.parse(JSON.stringify(LM))),await this.plugin.saveSettings(),this.display()})})}),new Re.Setting(r).addButton(_=>{_.setButtonText("Add Color").onClick(async()=>{this.log("adding new color"),this.plugin.settings.colorGroups.push(JSON.parse(JSON.stringify(LM))),await this.plugin.saveSettings(),this.display()})})),r.createEl("h2",{text:"Metadata Management"});let h=document.createDocumentFragment();if(h.createEl("p",void 0,p=>{p.innerText="Auto updating metadata in frontmatter when file is modified.\nTimestamp format follows `moment.js` and syntax details, ",p.createEl("a",void 0,_=>{_.innerText="please check moment format.",_.href="https://momentjs.com/docs/#/displaying/format/"})}),new Re.Setting(r).setName("Enable Updating Metadata").setDesc(h).addToggle(p=>{p.setValue(e.settings.enableMetadataUpdating).onChange(async _=>{e.settings.enableMetadataUpdating=_,await e.saveSettings(),this.display()})}),e.settings.enableMetadataUpdating){let p=JSON.parse(JSON.stringify(e.settings.metadatas)),_=document.createDocumentFragment();_.createSpan({text:"---"}),new Re.Setting(r).setName(_);for(let T=0;T<p.length;T++){let P=this.findMetadata(p[T].key),O=document.createDocumentFragment();O.appendText(`${p[T].key}: `),new Re.Setting(r).setName(O).addText(A=>{A.setValue(e.settings.metadatas[P].value).onChange(async R=>{P>-1&&(e.settings.metadatas[P].value=R,await this.plugin.saveSettings())})}).addExtraButton(A=>{A.setIcon("trash").setTooltip("Remove").onClick(async()=>{P>-1&&(this.log(`removing  ${this.plugin.settings.metadatas[P]}`),this.plugin.settings.metadatas.splice(P,1)),await this.plugin.saveSettings(),this.display()})})}let y=document.createDocumentFragment();y.createSpan({text:"---"}),new Re.Setting(r).setName(y);let S,x,k;new Re.Setting(r).setName("Add Key:Value in frontmatter").setDesc("Value now only upport formatted timestamp and regular string.").addText(T=>{T.setPlaceholder("key").setValue(S).onChange(async P=>{S=P})}).addText(T=>{T.setPlaceholder("value").setValue(x).onChange(async P=>{x=P})}).addDropdown(T=>{T.addOption("string","1 Regular String"),T.addOption("moment","2 Timestamp"),T.onChange(async P=>{k=P})}).addButton(T=>{T.setButtonText("Add").onClick(async()=>{this.log("adding new frontmatter"),this.plugin.settings.metadatas.push({key:S,value:x,t:k}),await this.plugin.saveSettings(),this.display()})}),new Re.Setting(r).setName("Meta Updating Exclude Path").setDesc("Exclude files in the directory to update metadata").addText(T=>{T.setPlaceholder("path strings with comma as separator, e.g. `tmp/,notes/templates`").setValue(this.plugin.settings.metadataExcludePath.join(",")).onChange(async P=>{e.settings.metadataExcludePath=P.split(","),await this.plugin.saveSettings()})})}r.createEl("h2",{text:"Vault Statistics"}),new Re.Setting(r).setName("Show Statistics").setDesc("Show statistics in the status bar").addDropdown(p=>{this.log(this.plugin.settings.statisticsType);let _=p.addOption("daily","Daily Statistcs"),y=p.addOption("total","Total Statistics");this.plugin.settings.statisticsType==="daily"?(_.setDisabled(!1),p.setValue("daily")):(y.setDisabled(!1),p.setValue("total")),p.onChange(async S=>{console.log("changing statistics type",S),this.plugin.settings.statisticsType=S,await this.plugin.saveSettings();let x=this.app.workspace.getLeaf("window");await x.setViewState({type:Tl,active:!1}),this.app.workspace.revealLeaf(x)})}),new Re.Setting(r).setName("Vault Stats File Path").setDesc("Reload required for change to take effect. The location of the vault statistics file, relative to the vault root.").addText(p=>{p.setPlaceholder(".obsidian/stats.json"),p.setValue(this.plugin.settings.statsPath.toString()),p.onChange(async _=>{this.plugin.settings.statsPath=_,await this.plugin.saveSettings()})}),new Re.Setting(r).setName("Animation").addToggle(p=>p.setValue(this.plugin.settings.animation).onChange(_=>{this.plugin.settings.animation=_,this.plugin.saveSettings()})),r.createEl("h2",{text:"AI Assistant"}),r.createEl("p",{text:"AI Helper Only Support \u901A\u4E49\u5343\u95EE LLM"}).setAttr("style","font-size:15px"),new Re.Setting(r).setName("Set Model Name").setDesc("Select the model name for AI Helper, only support qwen-max, qwen-turbo, qwen-plus").addDropdown(p=>{let _=p.addOption("qwen-max","qwen max"),y=p.addOption("qwen-turbo","qwen turbo"),S=p.addOption("qwen-plus","qwen plus");this.plugin.settings.modelName==="qwen-max"?(_.setDisabled(!1),p.setValue("qwen-max")):this.plugin.settings.modelName==="qwen-turbo"?(y.setDisabled(!1),p.setValue("qwen-turbo")):(S.setDisabled(!1),p.setValue("qwen-plus")),p.onChange(async x=>{console.log("changing modle provider",x),this.plugin.settings.modelName=x,await this.plugin.saveSettings()})}),new Re.Setting(r).setName("API Token").setDesc("LLM Model related API Token. NOTE: your input token is protected by AES-GCM encryption.").addText(p=>{p.setPlaceholder("llm api token"),p.setValue(this.plugin.settings.apiToken),p.onChange(async _=>{let S=await new pc().encryptToBase64(_,Hg);this.plugin.settings.apiToken=S,await this.plugin.saveSettings()})})}findGraphColor(e){return this.plugin.settings.colorGroups.findIndex(r=>e.query===r.query&&e.color.a===r.color.a&&e.color.rgb===r.color.rgb)}findMetadata(e){return this.plugin.settings.metadatas.findIndex(r=>r.key===e)}};var Ya=require("obsidian");var Oc=class{constructor(e,r){this.viewDataType={memos:"memos_view",localGraph:"localgraph"};this.resized=!1,this.log=(...n)=>e.log(...n),this.plugin=e,this.viewType=r}async resize(){if(this.resized)return;let{localGraph:e,memos:r}=this.plugin.settings,n,i,s,a,o,l=window.innerWidth,u=window.innerHeight;switch(this.viewType){case 0:n=r.resizeStyle.width,i=r.resizeStyle.height,a=u/2-i/2,s=l/2-n/2,a=a+(10+Math.random()*100),s=s+(10+Math.random()*100),o=this.viewDataType.memos;break;case 1:n=e.resizeStyle.width,i=e.resizeStyle.height,a=u/2-i/2,s=l/2-n/2,a=a+(10+Math.random()*100),s=s+(10+Math.random()*100),o=this.viewDataType.localGraph;break}document.querySelectorAll("body .popover.hover-editor").forEach(h=>{this.log("iterating hovers..."),h.querySelector(`[data-type="${o}"]`)&&(this.log("setting hover editor attribute..."),h.setAttribute("style",`height: ${i}px; width: ${n}px; top: ${a}px; left: ${s}px; cursor: move;`),document.body.style.setProperty("--resize-popover-width",`${n} !important`),h.addClass("resize-popover-width"),this.resized=!0)})}};var Y_=class extends Oc{constructor(e,r){super(r,1),this.app=e}async startup(){this.resized=!1;let e=this.app.workspace,r=e.getActiveFile();if(r&&(await e.getLeaf(!0).setViewState({type:"localgraph",active:!0,state:{file:r.path}}),await this.syncGlobalToLocal()),Ya.Platform.isDesktop&&this.plugin.settings.localGraph.type==="popover"){if(!await this.app.commands.executeCommandById("obsidian-hover-editor:convert-active-pane-to-popover")){new Ya.Notice("hover local graph failed");return}new Ya.Notice(this.plugin.settings.localGraph.notice)}this.plugin.settings.localGraph.autoColors&&this.plugin.settings.enableGraphColors&&await this.updateGraphColors()}async syncGlobalToLocal(){let e=this.app.vault.configDir;this.log(e);let r=(0,Ya.normalizePath)(e+"/graph.json"),n=await this.app.vault.adapter.read(r),s=JSON.parse(n).colorGroups;this.getLocalGraphLeaves().forEach(a=>{this.setColorGroups(a,s)})}getLocalGraphLeaves(){return this.app.workspace.getLeavesOfType("localgraph")}async setColorGroups(e,r){var i,s,a,o,l,u,c,h;let n=e.getViewState();this.log("view state",n.state),((i=n.state)==null?void 0:i.options).colorGroups=r,((s=n.state)==null?void 0:s.options).localJumps=this.plugin.settings.localGraph.depth,((a=n.state)==null?void 0:a.options).showTags=this.plugin.settings.localGraph.showTags,((o=n.state)==null?void 0:o.options).showAttachments=this.plugin.settings.localGraph.showAttach,((l=n.state)==null?void 0:l.options).localInterlinks=this.plugin.settings.localGraph.showNeighbor,((u=n.state)==null?void 0:u.options).showArrow=!0,((c=n.state)==null?void 0:c.options).close=this.plugin.settings.localGraph.collapse,((h=n.state)==null?void 0:h.options).scale=1,await e.setViewState(n)}async updateGraphColors(){let e=this.app.vault.configDir,r=(0,Ya.normalizePath)(e+"/graph.json"),n=await this.app.vault.adapter.read(r),i=JSON.parse(n),s=this.plugin.settings.colorGroups;s.forEach(a=>i.colorGroups.push(a)),this.app.workspace.getLeavesOfType("localgraph").forEach(async a=>{var l,u;this.plugin.log("setting colors");let o=a.getViewState();this.plugin.log((l=o.state)==null?void 0:l.options),((u=o.state)==null?void 0:u.options).colorGroups=s,await a.setViewState(o)})}};var Z_=require("obsidian");var G_=class extends Oc{constructor(e,r){super(r,0),this.app=e}async startup(){this.resized=!1;let e=this.isEnabledPlugin("obsidian-memos"),r=this.isEnabledPlugin("obsidian-hover-editor");if(e&&r)Z_.Platform.isDesktop?await this.app.commands.executeCommandById("obsidian-memos:show-memos-in-popover"):await this.app.commands.executeCommandById("obsidian-memos:open-memos");else{let n=e===r?"Memos and Hover are":e?"Hover is":"Memos is";new Z_.Notice(`Can't work correctly! Plugin ${n} missing`)}}isEnabledPlugin(e){return!!this.app.plugins.enabledPlugins.has(e)}};var Dc=require("obsidian"),K_=He(Am());var Vi=require("obsidian");var Rc=class{constructor(e,r,n){this.log=(...o)=>e.log(...o),this.idNumber=XR(),this.gridID=`div-${r}-progress-bar-grid-${this.idNumber}`,this.gridDivID=`div-${r}-progress-bar-${this.idNumber}`,this.gridDivSpanID=`span-${r}-progress-bar-${this.idNumber}`,this.gridTextID=`div-${r}-progress-bar-text-${this.idNumber}`,this.totalSteps=n,this.steps=0,this.noticeEl=document.createDocumentFragment();let i=this.noticeEl.createEl("div",{attr:{id:this.gridID}});i.addClass("progress-bar-grid");let s=i.createEl("div",{attr:{id:this.gridDivID}});s.addClass("meter"),s.createEl("span",{attr:{style:"width: 0%",id:this.gridDivSpanID}});let a=i.createEl("div",{attr:{id:this.gridTextID}});a.addClass("progress-bar-number"),a.setText("0%"),(0,Vi.addIcon)("PLUGIN_UPDATE_STATUS",Wt.PLUGIN_UPDATE_STATUS),(0,Vi.addIcon)("PLUGIN_UPDATED_STATUS",Wt.PLUGIN_UPDATED_STATUS),(0,Vi.addIcon)("SWITCH_ON_STATUS",Wt.SWITCH_ON_STATUS),(0,Vi.addIcon)("SWITCH_OFF_STATUS",Wt.SWITCH_OFF_STATUS)}addDiv(e,r){var i,s;let n=document.getElementById(this.gridID);if(n){let a=(i=n.parentElement)==null?void 0:i.createEl("div",{attr:{style:"color: red",id:`div-${e}-${this.idNumber}`}});a?(a.addClass("progress-bar-items-grid"),(0,Vi.setIcon)(a,"SWITCH_OFF_STATUS"),a.createSpan({text:r,attr:{class:"progress-bar-items-text"}}),(s=a.querySelector("svg"))==null||s.addClass("plugin-update-svg")):this.log("fail to find notice DocumentFragment")}else this.log("fail to find plugin updating notice HTML Element")}show(){var r,n;if(this.notice)return;this.notice=new Vi.Notice(this.noticeEl,0);let e=document.getElementById(this.gridID);(r=e==null?void 0:e.parentElement)==null||r.setAttribute("id",`progress-bar-${this.idNumber}`),(n=e==null?void 0:e.parentElement)==null||n.addClass("progress-bar-notice")}hide(){this.notice.hide()}stepin(e,r,n){var u;let i=this.totalSteps;n&&(i=n),this.steps++;let s=this.steps>=i?i:this.steps,a=document.getElementById(this.gridDivSpanID);a==null||a.setAttr("style",`width:${(100*(s/i)).toFixed(1)}%`);let o=document.getElementById(this.gridTextID);o==null||o.setText(`${(100*(s/i)).toFixed(1)}%`);let l=document.getElementById(`div-${e}-${this.idNumber}`);if(l){let c=l.getElementsByTagName("span").item(0);c&&l.removeChild(c);let h=l.getElementsByTagName("svg").item(0);h&&l.removeChild(h),(0,Vi.setIcon)(l,"SWITCH_ON_STATUS"),l.createSpan({text:r,attr:{class:"progress-bar-items-text"}}),(u=l.querySelector("svg"))==null||u.addClass("plugin-update-svg")}}updateProgress(e){let r=document.getElementById(this.gridDivSpanID);r==null||r.setAttr("style",`width:${e}%`);let n=document.getElementById(this.gridTextID);n==null||n.setText(`${e}%`)}};var J_=class{constructor(e,r){this.TagName="tag_name";this.app=e,this.commandPlugin=r,this.log=(...n)=>r.log(...n),this.URLCDN="https://cdn.jsdelivr.net/gh/obsidianmd/obsidian-releases@master/community-plugins.json",this.items=[];for(let n of Object.values(e.plugins.manifests)){let i={id:n.id,version:n.version};this.items.push(i)}this.totalPlugins=0,this.checkedPlugins=0,this.progressBar=new Rc(r,"plugin-updating",this.totalPlugins)}async getCommunityPluginsJson(){try{let e=await(0,Dc.request)({url:this.URLCDN});return e==="404: Not Found"?null:e}catch(e){return this.log("error in getCommunityPlugins",e),null}}async getRepo(e){if(this.commandPlugin.settings.cachePluginRepo[e])return this.log(`found ${e} which cached in data.json`),this.commandPlugin.settings.cachePluginRepo[e];if(!this.communityPlugins){let r=await this.getCommunityPluginsJson();if(r)this.communityPlugins=JSON.parse(r);else return this.log("fail to get commnity plugin json file from jsdelivr"),null}for(let r=0;r<this.communityPlugins.length;r++){let{id:n,repo:i}=this.communityPlugins[r];if(n===e)return this.commandPlugin.settings.cachePluginRepo[e]=i,await this.commandPlugin.saveSettings(),i}return this.log("fail to find plugin in community-plugins.json"),null}async getLatestRelease(e){if(!e)return this.log("repo is null"),null;let r=`https://api.github.com/repos/${e}/releases/latest`;try{let n=await(0,Dc.request)({url:r});return n==="404: Not Found"?null:await JSON.parse(n)}catch(n){return n!="Error: Request failed, status 404"&&this.log(`error in getLatestRelease for ${r}`,n),null}}getLatestTag(e){if(!e)return this.log("the input JSON for getLatestTag is null"),null;for(let r=0;r<Object.getOwnPropertyNames(e).length;r++)if(this.TagName===Object.getOwnPropertyNames(e)[r])return Object(e)[this.TagName];return this.log(`getLatestTag cannot find the object named ${this.TagName}`),null}async isNeedToUpdate(e,r){if(e){let n=this.getLatestTag(e);if(n){n.startsWith("v")&&(n=n.split("v")[1]),this.log("latest tag: "+n,"current tag: "+r);let i=(0,K_.prerelease)(n);if(i&&i.length>0)return{needUpdate:!1,targetVersion:r};if((0,K_.gt)(n,r))return{needUpdate:!0,targetVersion:n}}}return{needUpdate:!1,targetVersion:r}}async update(){let e=async(i,s,a)=>{let o=`https://github.com/${i}/releases/download/${s}/${a}`;try{let l=await(0,Dc.request)({url:o});return l==="Not Found"||l==='{"error":"Not Found"}'?null:l}catch(l){return this.log("error in grabReleaseFileFromRepository",o,l),null}},r=async(i,s)=>{let a=(0,Dc.normalizePath)(this.app.vault.configDir+"/plugins/"+i)+"/",o=this.app.vault.adapter;if(!s.mainJs||!s.manifest){this.log("downloaded files are empty");return}(await o.exists(a)===!1||!await o.exists(a+"manifest.json"))&&await o.mkdir(a),await o.write(a+"main.js",s.mainJs),await o.write(a+"manifest.json",s.manifest),s.styles&&await o.write(a+"styles.css",s.styles),this.log(`updated plugin[${i}]`)};this.progressBar.show();for(let i=0;i<this.items.length;i++){let s=this.items[i],a=await this.getRepo(s.id),o=await this.getLatestRelease(a);this.log(`checking updating status for ${s.id}`);let l=await this.isNeedToUpdate(o,s.version);a&&o&&l.needUpdate&&(this.totalPlugins++,this.items[i].toUpdate={needUpdate:l.needUpdate,repo:a,targetVersion:l.targetVersion,isZipFile:!1},this.progressBar.addDiv(s.id,`update ${s.id} to ${l.targetVersion}`))}let n=this.items.map(async i=>{var s;if((s=i.toUpdate)!=null&&s.needUpdate){this.log("updating plugin "+i.id);let a={mainJs:null,manifest:null,styles:null},o=i.toUpdate.repo,l=i.toUpdate.targetVersion;a.mainJs=await e(o,l,"main.js"),a.manifest=await e(o,l,"manifest.json"),a.styles=await e(o,l,"styles.css"),await r(i.id,a),this.app.plugins.enablePluginAndSave(i.id),this.progressBar.stepin(i.id,`update ${i.id} to ${l}`,this.totalPlugins),this.checkedPlugins++}});await Promise.all(n),this.log("All async plugin updating completed"),this.progressBar.updateProgress(100),setInterval(()=>{this.progressBar.hide()},2e3)}};var Xs=require("obsidian"),Q_=He(Am());var X_=class t{constructor(e,r){this.TagName="tag_name";this.app=e,this.URLCDN="https://cdn.jsdelivr.net/gh/obsidianmd/obsidian-releases@master/community-css-themes.json",this.commandPlugin=r,this.log=(...n)=>r.log(...n),this.totalThemes=0,this.checkedThemes=0,this.items=[],this.progressBar=new Rc(r,"theme-updating",this.totalThemes)}static async init(e,r){let n=new t(e,r);n.items=await n.listThemes(n.app);let i=await n.getCommunityThemesJson();return i?n.communityThemes=JSON.parse(i):new Xs.Notice("got some network issue when accessing github.com",500),n}async listThemes(e){let r=[];return(await e.vault.adapter.list(e.vault.configDir+"/themes")).folders.forEach(async i=>{let s=(0,Xs.normalizePath)(i+"/manifest.json"),a=await e.vault.adapter.read(s),o=JSON.parse(a);r.push({id:o.name,version:o.version})}),r}async getCommunityThemesJson(){try{let e=await(0,Xs.request)({url:this.URLCDN});return e==="404: Not Found"?null:e}catch(e){return this.log("error in getCommunityThemes",e),null}}async getRepo(e){if(this.commandPlugin.settings.cacheThemeRepo[e])return this.log(`found ${e} which cached in data.json`),this.commandPlugin.settings.cacheThemeRepo[e];if(!this.communityThemes){let r=await this.getCommunityThemesJson();if(r)this.communityThemes=JSON.parse(r);else return this.log("fail to get commnity theme json file"),null}for(let r=0;r<this.communityThemes.length;r++){let{name:n,repo:i}=this.communityThemes[r];if(n===e)return this.commandPlugin.settings.cacheThemeRepo[e]=i,await this.commandPlugin.saveSettings(),i}return this.log("fail to find plugin from community-themes.json"),null}async getLatestRelease(e){if(!e)return this.log("repo is null"),null;let r=`https://api.github.com/repos/${e}/releases/latest`;try{let n=await(0,Xs.request)({url:r});return n==="404: Not Found"?null:await JSON.parse(n)}catch(n){return n!="Error: Request failed, status 404"&&this.log(`error in getLatestRelease for ${r}`,n),null}}getLatestTag(e){if(!e)return this.log("the input JSON for getLatestTag is null"),null;for(let r=0;r<Object.getOwnPropertyNames(e).length;r++)if(this.TagName===Object.getOwnPropertyNames(e)[r])return Object(e)[this.TagName];return this.log(`getLatestTag cannot find the object named ${this.TagName}`),null}async isNeedToUpdate(e,r){if(e){let n=this.getLatestTag(e),i="";if(n){i=n,n.startsWith("v")&&(i=n.split("v")[1]),this.log("latest tag: "+i,"current tag: "+r);let s=(0,Q_.prerelease)(i);if(s&&s.length>0)return{needUpdate:!1,targetVersion:r};if((0,Q_.gt)(i,r))return{needUpdate:!0,targetVersion:n}}}return{needUpdate:!1,targetVersion:r}}async onlyHaveZipFile(e){let r=await this.getRepo(e.id);if(r){this.log("checking need to only has zip file for "+r);let n=await this.getLatestRelease(r);if(n){for(let i=0;i<Object.getOwnPropertyNames(n).length;i++)if(Object.getOwnPropertyNames(n)[i]==="assets"&&Object(n).assets.length>0)return!1;return!0}}return!1}async update(){let e=async(s,a,o)=>{let l=`https://github.com/${s}/releases/download/${a}/${o}`;try{let u=await(0,Xs.request)({url:l});return u==="Not Found"||u==='{"error":"Not Found"}'?null:u}catch(u){return this.log("error in grabReleaseFileFromRepository",l,u),null}},r=async(s,a)=>{let o=`https://github.com/${s}/archive/refs/tags/${a}.zip`;try{return await QR(o)}catch(l){return this.log("error in grabReleaseFileFromRepository",o,l),null}},n=async(s,a)=>{let o=(0,Xs.normalizePath)(this.app.vault.configDir+"/themes/"+s)+"/",l=this.app.vault.adapter;if(!a.theme||!a.manifest){this.log("downloaded files are empty");return}(await l.exists(o)===!1||!await l.exists(o+"manifest.json"))&&await l.mkdir(o),await l.write(o+"theme.css",a.theme),await l.write(o+"manifest.json",a.manifest),this.log(`updated theme[${s}]`)};this.progressBar.show();for(let s=0;s<this.items.length;s++){let a=this.items[s],o=await this.getRepo(a.id),l=await this.getLatestRelease(o),u=await this.isNeedToUpdate(l,a.version);if(o&&l&&u.needUpdate){this.totalThemes++;let c=await this.onlyHaveZipFile(this.items[s]);this.items[s].toUpdate={needUpdate:u.needUpdate,repo:o,targetVersion:u.targetVersion,isZipFile:c},this.progressBar.addDiv(a.id,`update ${a.id} to ${u.targetVersion}`)}}let i=this.items.map(async s=>{var a;if((a=s.toUpdate)!=null&&a.needUpdate){this.log("updating theme "+s.id);let o={manifest:null,theme:null},l=s.toUpdate.repo,u=s.toUpdate.targetVersion;if(s.toUpdate.isZipFile){let c=await r(l,u);c&&(o.theme=await Jv(c,"theme.css"),o.manifest=await Jv(c,"manifest.json"))}else o.theme=await e(l,u,"theme.css"),o.manifest=await e(l,u,"manifest.json");await n(s.id,o),this.progressBar.stepin(s.id,`update ${s.id} to ${u}`,this.totalThemes),this.checkedThemes++}});await Promise.all(i),this.log("All async theme updating completed"),this.progressBar.updateProgress(100),setInterval(()=>{this.progressBar.hide()},2e3)}};var NM=require("obsidian");function jM(t){if(!NM.Platform.isMobile)return;let e=`${t.manifest.dir}/logs.txt`,r=[],n=i=>(...s)=>{r.push(`
[${i}]`);for(let a of s)r.push(String(a));t.app.vault.adapter.write(e,r.join(" "))};console.debug=n("debug"),console.error=n("error"),console.info=n("info"),console.log=n("log"),console.warn=n("warn")}var hi=require("obsidian");var Uq=/^\s*rgba?\(\s*([\d.]+%?)\s*[, ]\s*([\d.]+%?)\s*[, ]\s*([\d.]+%?\s*)\)\s*$/i;function BM(t){let e=Uq.exec(t);if(e===null)return null;let r=e.slice(1).map(i=>i.trim()),n=Wq(r);return n===null||n.find(i=>isNaN(i)||i<0||i>255)!==void 0?null:{r:n[0],g:n[1],b:n[2]}}function Wq(t){return t[0].endsWith("%")?t.slice(1,3).find(e=>!e.endsWith("%"))!==void 0?null:t.map(e=>parseFloat(e.substring(0,e.length-1))).map(e=>Math.floor(e*255/100)):t.slice(1,3).find(e=>e.endsWith("%"))!==void 0?null:t.map(e=>parseInt(e,10))}var eb=class extends hi.SuggestModal{constructor(e,r){super(e),this.plugin=r}getSuggestions(e){var n;let r=(n=this.plugin.calloutManager)==null?void 0:n.getCallouts();return r?r.concat().filter(i=>i.id.toLowerCase().includes(e.toLowerCase())):[{id:"quote",icon:"quote-glyph",color:"158, 158, 158",sources:[{type:"builtin"},{type:"snippet",snippet:"callout"}]}]}renderSuggestion(e,r){let n=r.createEl("div");n.classList.add("calloutmanager-preview-container"),n.setAttribute("data-callout-manager-callout",e.id);let{icon:i,id:s}=e,a=Hq(e);new g1(n,{id:s,icon:i,title:$M(e),color:a!=null?a:void 0})}async onChooseSuggestion(e,r){let n=$M(e),i=`
> [!${e.id}] ${n}
> Contents

`;await navigator.clipboard.writeText(i);let s=this.app.workspace.getActiveViewOfType(hi.MarkdownView);if(s){if(s.getMode()==="preview"){new hi.Notice("Tips: please switch to edit mode to insert",5e3);return}let o=s.editor.getCursor();s.editor.replaceRange(i,o),o.line=o.line+4,s.editor.setCursor(o)}else new hi.Notice("Error: not a editable markdown file",5e3)}},qq=Symbol(),g1=class t extends hi.Component{constructor(e,r){super();let{color:n,icon:i,id:s,title:a,content:o}=r,l=document.createDocumentFragment(),u=this.calloutEl=l.createDiv({cls:["callout","calloutmanager-preview"]}),c=u.createDiv({cls:"callout-title"});this.iconEl=c.createDiv({cls:"callout-icon"});let h=this.titleEl=c.createDiv({cls:"callout-title-inner"}),p=this.contentEl=o===void 0?void 0:u.createDiv({cls:"callout-content"});this.setIcon(i),this.setColor(n),this.setCalloutID(s),a==null?h.textContent=s:typeof a=="function"?a(h):typeof a=="string"?h.textContent=a:h.appendChild(a),p!=null&&(typeof o=="function"?o(p):typeof o=="string"?p.textContent=o:p.appendChild(o)),e!=qq&&t.prototype.attachTo.call(this,e)}setCalloutID(e){let{calloutEl:r}=this;return r.setAttribute("data-callout",e),this}setIcon(e){let{iconEl:r,calloutEl:n}=this;n.style.setProperty("--callout-icon",e),r.empty();let i=(0,hi.getIcon)(e);return i!=null&&this.iconEl.appendChild(i),this}setColor(e){let{calloutEl:r}=this;return e==null?(r.style.removeProperty("--callout-color"),this):(r.style.setProperty("--callout-color",`${e.r}, ${e.g}, ${e.b}`),this)}attachTo(e){return e.appendChild(this.calloutEl),this}resetStylePropertyOverrides(){let{calloutEl:e}=this;e.style.removeProperty("--callout-color"),e.style.removeProperty("--callout-icon")}};function $M(t){let e=/^(.)(.*)/u.exec(t.id);if(e==null)return t.id;let r=e[1].toLocaleUpperCase(),n=e[2].toLocaleLowerCase().replace(/-+/g," ");return`${r}${n}`}function Hq(t){return BM(`rgb(${t.color})`)}var Cl=require("obsidian");var mI=He(pI(),1),{__extends:qoe,__assign:Hoe,__rest:Voe,__decorate:Yoe,__param:Goe,__esDecorate:Zoe,__runInitializers:Joe,__propKey:Koe,__setFunctionName:Xoe,__metadata:Qoe,__awaiter:ib,__generator:ele,__exportStar:tle,__createBinding:rle,__values:nle,__read:ile,__spread:sle,__spreadArrays:ale,__spreadArray:ole,__await:lle,__asyncGenerator:ule,__asyncDelegator:cle,__asyncValues:dle,__makeTemplateObject:fle,__importStar:hle,__importDefault:ple,__classPrivateFieldGet:mle,__classPrivateFieldSet:gle,__classPrivateFieldIn:_le,__addDisposableResource:ble,__disposeResources:yle}=mI.default;var Yi=require("obsidian");function Vq(t){Qg(t,"svelte-1njcwce",".recordlist-wrapper.svelte-1njcwce{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;flex-grow:1;width:100%;overflow-y:scroll;gap:8px;scrollbar-width:none}.record-wrapper.svelte-1njcwce{display:flex;flex-direction:column;width:60%;padding:12px 18px;background-color:var(--pa-record-background-color);color:var(--pa-record-font-color);border-radius:8px;border:0.2px solid #f1f1f1}.record-wrapper-mobile.svelte-1njcwce{display:flex;flex-direction:column;width:90%;padding:12px 18px;background-color:var(--pa-record-background-color);color:var(--pa-record-font-color);border-radius:8px;border:0.2px solid #f1f1f1}")}function gI(t,e,r){let n=t.slice();return n[16]=e[r],n[18]=r,n}function _I(t,e,r){let n=t.slice();return n[16]=e[r],n[18]=r,n}function bI(t,e,r){let n=t.slice();return n[16]=e[r],n[18]=r,n}function Yq(t){let e,r=zs(t[0]),n=[];for(let i=0;i<r.length;i+=1)n[i]=yI(_I(t,r,i));return{c(){e=_r("div");for(let i=0;i<n.length;i+=1)n[i].c();xt(e,"class","recordlist-wrapper svelte-1njcwce"),xt(e,"id","persoanl-assistant-record-list")},m(i,s){vt(i,e,s);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(i,s){if(s&47){r=zs(i[0]);let a;for(a=0;a<r.length;a+=1){let o=_I(i,r,a);n[a]?n[a].p(o,s):(n[a]=yI(o),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=r.length}},d(i){i&&ut(e),e_(n,i)}}}function Gq(t){let e,r=zs(t[0]),n=[];for(let i=0;i<r.length;i+=1)n[i]=wI(bI(t,r,i));return{c(){e=_r("div");for(let i=0;i<n.length;i+=1)n[i].c();xt(e,"class","recordlist-wrapper svelte-1njcwce"),xt(e,"id","persoanl-assistant-record-list")},m(i,s){vt(i,e,s);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null)},p(i,s){if(s&47){r=zs(i[0]);let a;for(a=0;a<r.length;a+=1){let o=bI(i,r,a);n[a]?n[a].p(o,s):(n[a]=wI(o),n[a].c(),n[a].m(e,null))}for(;a<n.length;a+=1)n[a].d(1);n.length=r.length}},d(i){i&&ut(e),e_(n,i)}}}function Zq(t){return{c:ee,m:ee,p:ee,d:ee}}function Jq(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!1,pending:Qq,then:Xq,catch:Kq};return ui(e=t[5](t[20],t[3](`record-wrapper-sub-${t[18]}`),t[16],t[1]),n),{c(){n.block.c(),r=cl()},m(i,s){n.block.m(i,n.anchor=s),n.mount=()=>r.parentNode,n.anchor=r,vt(i,r,s)},p(i,s){t=i,n.ctx=t,s&3&&e!==(e=t[5](t[20],t[3](`record-wrapper-sub-${t[18]}`),t[16],t[1]))&&ui(e,n)},d(i){i&&ut(r),n.block.d(i),n.token=null,n=null}}}function Kq(t){return{c:ee,m:ee,d:ee}}function Xq(t){return{c:ee,m:ee,d:ee}}function Qq(t){return{c:ee,m:ee,d:ee}}function eH(t){return{c:ee,m:ee,p:ee,d:ee}}function yI(t){let e,r,n,i,s,a={ctx:t,current:null,token:null,hasCatch:!1,pending:eH,then:Jq,catch:Zq,value:20};return ui(s=t[2](t[16]),a),{c(){e=_r("div"),n=cl(),i=t_(),a.block.c(),xt(e,"class","record-wrapper svelte-1njcwce"),xt(e,"id",r="record-wrapper-sub-"+t[18])},m(o,l){vt(o,e,l),vt(o,n,l),vt(o,i,l),a.block.m(o,a.anchor=l),a.mount=()=>i.parentNode,a.anchor=i},p(o,l){t=o,a.ctx=t,l&1&&s!==(s=t[2](t[16]))&&ui(s,a)||fx(a,t,l)},d(o){o&&(ut(e),ut(n),ut(i)),a.block.d(o),a.token=null,a=null}}}function tH(t){return{c:ee,m:ee,p:ee,d:ee}}function rH(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!1,pending:sH,then:iH,catch:nH};return ui(e=t[5](t[20],t[3](`record-wrapper-sub-${t[18]}`),t[16],t[1]),n),{c(){n.block.c(),r=cl()},m(i,s){n.block.m(i,n.anchor=s),n.mount=()=>r.parentNode,n.anchor=r,vt(i,r,s)},p(i,s){t=i,n.ctx=t,s&3&&e!==(e=t[5](t[20],t[3](`record-wrapper-sub-${t[18]}`),t[16],t[1]))&&ui(e,n)},d(i){i&&ut(r),n.block.d(i),n.token=null,n=null}}}function nH(t){return{c:ee,m:ee,d:ee}}function iH(t){return{c:ee,m:ee,d:ee}}function sH(t){return{c:ee,m:ee,d:ee}}function aH(t){return{c:ee,m:ee,p:ee,d:ee}}function wI(t){let e,r,n,i,s,a={ctx:t,current:null,token:null,hasCatch:!1,pending:aH,then:rH,catch:tH,value:20};return ui(s=t[2](t[16]),a),{c(){e=_r("div"),n=cl(),i=t_(),a.block.c(),xt(e,"class","record-wrapper-mobile svelte-1njcwce"),xt(e,"id",r="record-wrapper-sub-"+t[18])},m(o,l){vt(o,e,l),vt(o,n,l),vt(o,i,l),a.block.m(o,a.anchor=l),a.mount=()=>i.parentNode,a.anchor=i},p(o,l){t=o,a.ctx=t,l&1&&s!==(s=t[2](t[16]))&&ui(s,a)||fx(a,t,l)},d(o){o&&(ut(e),ut(n),ut(i)),a.block.d(o),a.token=null,a=null}}}function oH(t){return{c:ee,m:ee,d:ee}}function lH(t){return{c:ee,m:ee,d:ee}}function uH(t){return{c:ee,m:ee,d:ee}}function vI(t){let e,r,n={ctx:t,current:null,token:null,hasCatch:!1,pending:uH,then:lH,catch:oH};return ui(r=t[6](`record-wrapper-sub-${t[18]}`,t[16]),n),{c(){e=t_(),n.block.c()},m(i,s){vt(i,e,s),n.block.m(i,n.anchor=s),n.mount=()=>e.parentNode,n.anchor=e},p(i,s){t=i,n.ctx=t,s&1&&r!==(r=t[6](`record-wrapper-sub-${t[18]}`,t[16]))&&ui(r,n)},d(i){i&&ut(e),n.block.d(i),n.token=null,n=null}}}function cH(t){let e,r,n,i,s,a;function o(p,_){return p[4]()?Gq:Yq}let u=o(t,-1)(t),c=zs(t[0]),h=[];for(let p=0;p<c.length;p+=1)h[p]=vI(gI(t,c,p));return{c(){e=_r("div"),r=_r("div"),n=_r("div"),n.innerHTML='<div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div>',i=cl(),u.c(),a=cl();for(let p=0;p<h.length;p+=1)h[p].c();xt(n,"class","markdown-preview-sizer markdown-preview-section"),xt(r,"class","markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings show-indentation-guide allow-fold-lists show-properties"),xt(r,"tabindex","-1"),r_(r,"tab-size","4"),xt(e,"class","markdown-reading-view"),r_(e,"width","100%"),r_(e,"height","100%")},m(p,_){vt(p,e,_),ul(e,r),ul(r,n),ul(r,i),u.m(r,null),ul(r,a);for(let y=0;y<h.length;y+=1)h[y]&&h[y].m(r,null)},p(p,[_]){if(u.p(p,_),_&65){c=zs(p[0]);let y;for(y=0;y<c.length;y+=1){let S=gI(p,c,y);h[y]?h[y].p(S,_):(h[y]=vI(S),h[y].c(),h[y].m(r,null))}for(;y<h.length;y+=1)h[y].d(1);h.length=c.length}},i:ee,o:ee,d(p){p&&ut(e),u.d(),e_(h,p)}}}function dH(t,e,r){let n=(()=>{let a=r.split("/");return a.pop(),a.join("/")})(),i=e;if(e.startsWith(".")){let a=r.split("/");a.pop();for(let o of e.split("/"))if(o==="..")a.pop();else{if(o===".")continue;a.push(o)}i=a.join("/")}let s=[];for(let a of t.getFiles())if(a.path.endsWith(i)){if(a.path===i)return a.path;s.push(a.path)}return s.sort((a,o)=>a.startsWith(n)&&!o.startsWith(n)?-1:o.startsWith(n)&&!a.startsWith(n)?1:a<=o?-1:1),s?s[0]:e}function fH(t,e,r){let{app:n}=e,{fileNames:i}=e,{container:s}=e,{plugin:a}=e;function o(P){return ib(this,void 0,void 0,function*(){return n.vault.adapter.read(P)})}let l=P=>{let O=document.getElementById(P);return O?(a.log("get the element"),O):(a.log("fail over to get parent element"),s)},u=()=>(a.log("this is Mobile",Yi.Platform.isMobile),Yi.Platform.isMobile),c=P=>n.plugins.manifests.hasOwnProperty(P)&&n.plugins.enabledPlugins.has(P);var h;(function(P){P.Image="Image",P.Audio="Audio",P.Video="Video",P.PDF="PDF",P.Note="Note",P.Unknown="Unknown"})(h||(h={}));let p={[h.Image]:["png","jpg","jpeg","gif","bmp","svg"],[h.Audio]:["mp3","webm","wav","m4a","ogg","3gp","flac"],[h.Video]:["mp4","webm","ogv","mov","mkv"],[h.PDF]:["pdf"]},_={};Object.keys(p).forEach(P=>{_[P]=new RegExp([".+\\.(",p[P].join("|"),").*"].join(""),"i")});function y(P){let O=P.getAttribute("src");if(!O)return h.Unknown;for(let[A,R]of Object.entries(_))if(O.match(R))return h[A];return h.Note}let S=(P,O,A)=>{let R=dH(P,O,A);return P.adapter.getResourcePath(R)},x=(P,O)=>c("obsidian-advanced-uri")?["obsidian://advanced-uri?vault=",encodeURIComponent(P.getName()),"&filepath=",encodeURIComponent(O)].join(""):["obsidian://open?vault=",encodeURIComponent(P.getName()),"&file=",encodeURIComponent(O)].join(""),k=(P,O,A,R)=>ib(void 0,void 0,void 0,function*(){let{contentStart:F}=(0,Yi.getFrontMatterInfo)(P),I=P.slice(F);yield Yi.MarkdownRenderer.render(n,I,O,A,R),O.querySelectorAll("span.internal-embed").forEach(z=>{switch(y(z)){case h.Image:let ge=createEl("img");ge.src=S(n.vault,z.getAttribute("src"),A),z.empty(),z.appendChild(ge);break;case h.Audio:let $e=createEl("audio");$e.controls=!0,$e.src=S(n.vault,z.getAttribute("src"),A),z.empty(),z.appendChild($e);break;case h.Video:let ve=createEl("video");ve.controls=!0,ve.src=S(n.vault,z.getAttribute("src"),A),z.empty(),z.appendChild(ve);break;case h.PDF:if(!Yi.Platform.isDesktop){a.log("Embedded PDFs are only supported on the desktop.");return}let Le=createEl("iframe");Le.src=S(n.vault,z.getAttribute("src"),A),Le.width="100%",Le.height="500px",z.empty(),z.appendChild(Le);break;case h.Note:a.log("Embedded notes are not perfectly supported.");let Xe=z.getAttribute("src"),De=createDiv();De.setAttribute("data-callout-metadata",""),De.setAttribute("data-callout-fold","-"),De.setAttribute("data-callout","abstract"),De.addClasses(["callout","is-collapsible","is-collapsed"]);let wr=De.createDiv();wr.addClass("callout-title");let Ft=wr.createDiv();Ft.addClass("callout-icon"),(0,Yi.setIcon)(Ft,"loader");let vr=wr.createDiv();vr.addClass("callout-title-inner");let at=createEl("a");at.target="_blank",at.rel="noopener",at.addClass("internal-link"),at.setText(Xe+" \u{1F4A8}"),at.href=x(n.vault,Xe),vr.appendChild(at),z.empty(),z.appendChild(De);break;case h.Unknown:default:a.log("Could not determine embedding type for element:"),a.log(z)}}),O.querySelectorAll("a.internal-link").forEach(z=>{if(!z.getAttribute("href"))return;let ne=z;ne.addEventListener("click",ge=>{ge.stopPropagation()}),!ne.href.startsWith("obsidian://")&&(ne.href=x(n.vault,ne.getAttribute("href")))})}),T=(P,O)=>ib(void 0,void 0,void 0,function*(){var A;yield dx();let R=document.getElementById(P);if(R){a.log("get the element");let F=(A=O.split("\\").pop())===null||A===void 0?void 0:A.split("/").pop();if(F){let I=x(n.vault,F);R.setAttribute("onclick",`location.href='${I}'`),R.setAttribute("style","cursor:pointer")}}else a.log("fail to find element with ",P)});return t.$$set=P=>{"app"in P&&r(7,n=P.app),"fileNames"in P&&r(0,i=P.fileNames),"container"in P&&r(8,s=P.container),"plugin"in P&&r(1,a=P.plugin)},[i,a,o,l,u,k,T,n,s]}var b1=class extends Lt{constructor(e){super(),br(this,e,fH,cH,gr,{app:7,fileNames:0,container:8,plugin:1},Vq)}},y1=b1;var dh="record-preview",sb=class extends Cl.ItemView{constructor(e,r,n){r.log("startup new RecordList"),super(n),(0,Cl.addIcon)("PluginAST_PREVIEW",Wt.PluginAST_PREVIEW),this.app=e,this.plugin=r,this.files=[]}getViewType(){return dh}getDisplayText(){return"Records Preview"}getIcon(){return"PluginAST_PREVIEW"}async onOpen(){let r=(await this.app.vault.adapter.list(this.plugin.settings.targetPath)).files.sort((a,o)=>{let l=this.app.vault.getAbstractFileByPath(a),u=this.app.vault.getAbstractFileByPath(o);return l instanceof Cl.TFile&&u instanceof Cl.TFile?l.stat.mtime-u.stat.mtime:a<o?-1:a>o?1:0}),n=r.filter((a,o,l)=>{let c=RegExp(/\[(.*)\]/,"i").exec(this.plugin.settings.fileFormat);if(c&&c.length>1){let h=a.substring(a.lastIndexOf("/")+1);return h.endsWith(".md")&&h.includes(c[1])}else return!1}),i=r.filter((a,o,l)=>a.endsWith(".md")&&!n.contains(a));this.files=n.reverse().concat(...i.reverse());let s=this.plugin.settings.previewLimits;s>this.files.length&&(s=this.files.length),this.component=new y1({target:this.contentEl,props:{app:this.app,plugin:this.plugin,fileNames:this.files.slice(0,s),container:this.containerEl}}),this.app.vault.on("modify",a=>{this.plugin.log(`update preview record for file[${a.path}] changed`),this.files.slice(0,s).contains(a.path)&&(this.component.$destroy(),this.component=new y1({target:this.contentEl,props:{app:this.app,plugin:this.plugin,fileNames:this.files.slice(0,s),container:this.containerEl}}))})}async onClose(){this.component.$destroy()}};var xI=require("obsidian"),Qs=He(py());function Ga(t){let e=/'A-Za-z\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC/.source,r=/\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u4E00-\u9FD5/.source,n=/[\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u4E00-\u9FD5]{1}/.source,i=new RegExp([`(?:[0-9]+(?:(?:,|\\.)[0-9]+)*|[\\-${e}])+`,r,n].join("|"),"g");return(t.match(i)||[]).length}function w1(t){return t.length}function v1(t){let e=t.match(/\[\^\S+](?!:)/g),r=t.match(/\^\[[^^].+?]/g),n=0;return e&&(n+=e.length),r&&(n+=r.length),n}function x1(t){let e=t.match(/@[A-Za-z0-9-]+[,;\]](?!\()/gi);return e?[...new Set(e)].length:0}function S1(t){return((t||"").match(/[^.!?\s][^.!?]*(?:[.!?](?!['"]?\s|$)[^.!?]*)*[.!?]?['"]?(?=\s|$)/gm)||[]).length}function k1(t,e){return parseFloat((Ga(t)/e).toFixed(1))}var fh=class{constructor(e,r){this.vault=e.vault,this.workspace=e.workspace,this.plugin=r,this.today=(0,Qs.default)().format("YYYY-MM-DD"),this.vaultStats={history:{},modifiedFiles:{}},this.debounceChange=(0,xI.debounce)(n=>this.change(n),50,!1),this.vault.on("rename",(n,i)=>{if(this.vaultStats.modifiedFiles.hasOwnProperty(i)){let s=this.vaultStats.modifiedFiles[i];delete this.vaultStats.modifiedFiles[i],this.vaultStats.modifiedFiles[n.path]=s}}),this.vault.on("delete",n=>{this.vaultStats.modifiedFiles.hasOwnProperty(n.path)&&delete this.vaultStats.modifiedFiles[n.path]}),this.vault.adapter.exists(this.plugin.settings.statsPath).then(async n=>{if(n){if(this.vaultStats=JSON.parse(await this.vault.adapter.read(this.plugin.settings.statsPath)),!this.vaultStats.hasOwnProperty("history")){let i={history:{},modifiedFiles:{}};await this.vault.adapter.write(this.plugin.settings.statsPath,JSON.stringify(i,null,2))}this.vaultStats=JSON.parse(await this.vault.adapter.read(this.plugin.settings.statsPath))}else{let i={history:{},modifiedFiles:{}};await this.vault.adapter.write(this.plugin.settings.statsPath,JSON.stringify(i,null,2)),this.vaultStats=JSON.parse(await this.vault.adapter.read(this.plugin.settings.statsPath))}await this.updateToday()})}async update(){this.vault.adapter.write(this.plugin.settings.statsPath,JSON.stringify(this.vaultStats,null,2))}async updateToday(){if(this.vaultStats.history.hasOwnProperty((0,Qs.default)().format("YYYY-MM-DD"))){this.today=(0,Qs.default)().format("YYYY-MM-DD");return}this.today=(0,Qs.default)().format("YYYY-MM-DD");let e=1,r=0,n=Object.keys(this.vaultStats.history).length;if(n>0){for(;!this.vaultStats.history.hasOwnProperty((0,Qs.default)().subtract(e,"days").format("YYYY-MM-DD"))&&e<=n;)e++;r=this.vaultStats.history[(0,Qs.default)().subtract(e,"days").format("YYYY-MM-DD")].files}else r=0;let i=await this.calcTotalWords(),s=await this.calcTotalCharacters(),a=await this.calcTotalSentences(),o=await this.calcTotalFootnotes(),l=await this.calcTotalCitations(),u=await this.calcTotalPages(),c={words:0,characters:0,sentences:0,pages:0,files:r,footnotes:0,citations:0,totalWords:i,totalCharacters:s,totalSentences:a,totalFootnotes:o,totalCitations:l,totalPages:u};this.vaultStats.modifiedFiles={},this.vaultStats.history[this.today]=c,await this.update()}async change(e){var u;let r=(u=this.workspace.getActiveFile())==null?void 0:u.path,n=Ga(e),i=w1(e),s=S1(e),a=x1(e),o=v1(e),l=k1(e,300);if(this.vaultStats.history.hasOwnProperty(this.today)&&this.today===(0,Qs.default)().format("YYYY-MM-DD")){let c=this.vaultStats.modifiedFiles;if(r===void 0)return;c.hasOwnProperty(r)?(this.vaultStats.history[this.today].totalWords+=n-c[r].words.current,this.vaultStats.history[this.today].totalCharacters+=i-c[r].characters.current,this.vaultStats.history[this.today].totalSentences+=s-c[r].sentences.current,this.vaultStats.history[this.today].totalFootnotes+=s-c[r].footnotes.current,this.vaultStats.history[this.today].totalCitations+=s-c[r].citations.current,this.vaultStats.history[this.today].totalPages+=l-c[r].pages.current,c[r].words.current=n,c[r].characters.current=i,c[r].sentences.current=s,c[r].footnotes.current=o,c[r].citations.current=a,c[r].pages.current=l):c[r]={words:{initial:n,current:n},characters:{initial:i,current:i},sentences:{initial:s,current:s},footnotes:{initial:o,current:o},citations:{initial:a,current:a},pages:{initial:l,current:l}};let h=Object.values(c).map(k=>Math.max(0,k.words.current-k.words.initial)).reduce((k,T)=>k+T,0),p=Object.values(c).map(k=>Math.max(0,k.characters.current-k.characters.initial)).reduce((k,T)=>k+T,0),_=Object.values(c).map(k=>Math.max(0,k.sentences.current-k.sentences.initial)).reduce((k,T)=>k+T,0),y=Object.values(c).map(k=>Math.max(0,k.footnotes.current-k.footnotes.initial)).reduce((k,T)=>k+T,0),S=Object.values(c).map(k=>Math.max(0,k.citations.current-k.citations.initial)).reduce((k,T)=>k+T,0),x=Object.values(c).map(k=>Math.max(0,k.pages.current-k.pages.initial)).reduce((k,T)=>k+T,0);this.vaultStats.history[this.today].words=h,this.vaultStats.history[this.today].characters=p,this.vaultStats.history[this.today].sentences=_,this.vaultStats.history[this.today].footnotes=y,this.vaultStats.history[this.today].citations=S,this.vaultStats.history[this.today].pages=x,this.vaultStats.history[this.today].files=this.getTotalFiles(),await this.update()}else this.updateToday()}async recalcTotals(){if(this.vaultStats)if(this.vaultStats.history.hasOwnProperty(this.today)&&this.today===(0,Qs.default)().format("YYYY-MM-DD")){let e=this.vaultStats.history[this.today];e.totalWords=await this.calcTotalWords(),e.totalCharacters=await this.calcTotalCharacters(),e.totalSentences=await this.calcTotalSentences(),e.totalFootnotes=await this.calcTotalFootnotes(),e.totalCitations=await this.calcTotalCitations(),e.totalPages=await this.calcTotalPages(),this.update()}else this.updateToday()}async calcTotalWords(){let e=0,r=this.vault.getFiles();for(let n in r){let i=r[n];i.extension==="md"&&(e+=Ga(await this.vault.cachedRead(i)))}return e}async calcTotalCharacters(){let e=0,r=this.vault.getFiles();for(let n in r){let i=r[n];i.extension==="md"&&(e+=w1(await this.vault.cachedRead(i)))}return e}async calcTotalSentences(){let e=0,r=this.vault.getFiles();for(let n in r){let i=r[n];i.extension==="md"&&(e+=S1(await this.vault.cachedRead(i)))}return e}async calcTotalPages(){let e=0,r=this.vault.getFiles();for(let n in r){let i=r[n];i.extension==="md"&&(e+=k1(await this.vault.cachedRead(i),300))}return e}async calcTotalFootnotes(){let e=0,r=this.vault.getFiles();for(let n in r){let i=r[n];i.extension==="md"&&(e+=v1(await this.vault.cachedRead(i)))}return e}async calcTotalCitations(){let e=0,r=this.vault.getFiles();for(let n in r){let i=r[n];i.extension==="md"&&(e+=x1(await this.vault.cachedRead(i)))}return e}getDailyWords(){return this.vaultStats.history[this.today].words}getDailyCharacters(){return this.vaultStats.history[this.today].characters}getDailySentences(){return this.vaultStats.history[this.today].sentences}getDailyFootnotes(){return this.vaultStats.history[this.today].footnotes}getDailyCitations(){return this.vaultStats.history[this.today].citations}getDailyPages(){return this.vaultStats.history[this.today].pages}getTotalFiles(){return this.vault.getMarkdownFiles().length}async getTotalWords(){return this.vaultStats?this.vaultStats.history[this.today].totalWords:await this.calcTotalWords()}async getTotalCharacters(){return this.vaultStats?this.vaultStats.history[this.today].totalCharacters:await this.calcTotalCharacters()}async getTotalSentences(){return this.vaultStats?this.vaultStats.history[this.today].totalSentences:await this.calcTotalSentences()}async getTotalFootnotes(){return this.vaultStats?this.vaultStats.history[this.today].totalFootnotes:await this.calcTotalFootnotes()}async getTotalCitations(){return this.vaultStats?this.vaultStats.history[this.today].totalCitations:await this.calcTotalCitations()}async getTotalPages(){return this.vaultStats?this.vaultStats.history[this.today].totalPages:await this.calcTotalPages()}};var Gi=require("@codemirror/state"),ea=require("@codemirror/view"),E1=require("@codemirror/language");var Ic=Gi.StateField.define({create(t){return null},update(t){return t}}),T1=class{constructor(e){this.view=e}update(e){let r=e.transactions[0];if(!r)return;let n=e.view.state.field(Ic),i=r.annotation(Gi.Transaction.userEvent)===void 0;if((r.isUserEvent("select")||i)&&r.newSelection.ranges[0].from!==r.newSelection.ranges[0].to){let s="",a=r.newSelection.main,o=r.newDoc.iterRange(a.from,a.to);for(;!o.done;)s=s+o.next().value}else if(r.isUserEvent("input")||r.isUserEvent("delete")||r.isUserEvent("move")||r.isUserEvent("undo")||r.isUserEvent("redo")||r.isUserEvent("select")){let s=r.newDoc.iter(),a="";for(;!s.done;)a=a+s.next().value;r.docChanged&&n&&n.statsManager&&n.statsManager.debounceChange(a)}}destroy(){}},SI=ea.ViewPlugin.fromClass(T1),C1=class extends ea.WidgetType{constructor(e){super(),this.data=e}eq(e){let{pos:r,self:n,total:i}=this.data;return r===e.data.pos&&n===e.data.self&&i===e.data.total}getDisplayText(){let{self:e,total:r}=this.data;return e&&e!==r?`${e} / ${r}`:r.toString()}toDOM(){return createSpan({cls:"bwc-section-count",text:this.getDisplayText()})}},A1=class{constructor(e){this.lineCounts=[];let r=e.state.field(Ic);if(r&&!r.settings.displaySectionCounts){this.decorations=ea.Decoration.none;return}r&&this.calculateLineCounts(e.state,r),this.decorations=this.mkDeco(e)}calculateLineCounts(e,r){let n=r.settings.countComments,i=e.doc.toString();if(n){let a=(o,l,u)=>{let c="";for(let h=l,p=l+o.length;h<p;h++)/[\r\n]/.test(u[h])&&(c+=u[h]);return c};i=i.replace(p1,a).replace(m1,a)}let s=i.split(e.facet(Gi.EditorState.lineSeparator)||/\r\n?|\n/);for(let a=0,o=s.length;a<o;a++){let l=s[a];this.lineCounts.push(Ga(l))}}update(e){let r=e.view.state.field(Ic);if(!r)return;let{displaySectionCounts:n,countComments:i}=r.settings,s=!1;if(this.lineCounts.length&&!n){this.lineCounts=[],this.decorations=ea.Decoration.none;return}else!this.lineCounts.length&&n&&(s=!0,r&&this.calculateLineCounts(e.startState,r));if(e.docChanged){let o=e.startState.doc,l=1/0,u=-1/0;if(e.changes.iterChanges((c,h,p,_,y)=>{let S=p,x=p+(h-c),k=S+y.length,T=o.lineAt(S),P=o.lineAt(x);o=o.replace(p,p+(h-c),y);let O=o.lineAt(S),A=o.lineAt(k),R=[];for(let U=O.number;U<=A.number;U++)R.push(Ga(o.line(U).text));let F=T.number-1,I=P.number-T.number+1;l=Math.min(l,F),u=Math.max(u,F+(A.number-O.number+1)),this.lineCounts.splice(F,I,...R)}),i){let c=(0,E1.syntaxTree)(e.state);for(let h=l;h<u;h++){let p=e.state.doc.line(h+1),_="",y=0,S=!1;c.iterate({enter(x){x.name&&/comment/.test(x.name)&&(S=!0,_+=p.text.substring(y,x.from-p.from),y=x.to-p.from)},from:p.from,to:p.to}),S&&(_+=p.text.substring(y),this.lineCounts[h]=Ga(_))}}}(e.docChanged||e.viewportChanged||s)&&(this.decorations=this.mkDeco(e.view))}mkDeco(e){let r=e.state.field(Ic),n=new Gi.RangeSetBuilder;if(r&&!r.settings.displaySectionCounts)return n.finish();let i=(0,E1.syntaxTree)(e.state),s=p=>{var S;let _=i.resolve(p.from,1);if(/code-?block|math/.test((S=_==null?void 0:_.type)==null?void 0:S.name))return null;let y=p.text.match(/^(#+)[ \t]/);return y?y[1].length:null};if(!e.visibleRanges.length)return n.finish();let{from:a}=e.visibleRanges[0],o=e.state.doc,l=o.lineAt(a),u=o.lines,c=[],h=[];for(let p=l.number;p<=u;p++){let _;p===l.number?_=l:_=o.line(p);let y=s(_),S=h.last();if(y){if(!S||y>S.level)h.push({line:p,level:y,self:0,total:0,pos:_.to});else if(S.level===y){let x=h.pop();x&&c.push(x),h.push({line:p,level:y,self:0,total:0,pos:_.to})}else if(S.level>y)for(let x=h.length-1;x>=0;x--){let k=h[x];if(y<k.level){let T=h.pop();T&&c.push(T),x===0&&h.push({line:p,level:y,self:0,total:0,pos:_.to});continue}if(y===k.level){let T=h.pop();T&&c.push(T),h.push({line:p,level:y,self:0,total:0,pos:_.to});break}if(y>k.level){h.push({line:p,level:y,self:0,total:0,pos:_.to});break}}}else if(h.length){let x=this.lineCounts[p-1];for(let k of h)k===S&&(k.self+=x),k.total+=x}}h.length&&c.push(...h),c.sort((p,_)=>p.line-_.line);for(let p of c)n.add(p.pos,p.pos,ea.Decoration.widget({side:1,widget:new C1(p)}));return n.finish()}},Gle=Gi.StateEffect.define(),kI=ea.ViewPlugin.fromClass(A1,{decorations:t=>t.decorations});var hH=(t,...e)=>{t&&console.log(...e)},ab=class extends pt.Plugin{constructor(){super(...arguments);this.localGraph=new Y_(this.app,this);this.memos=new G_(this.app,this);this.settingTab=new V_(this.app,this);this.updateMetadata=r=>{if(r instanceof pt.TFile&&r.extension==="md"){let n=r.path;for(let s of this.settings.metadataExcludePath)if(s!==""&&r.path.startsWith(s)){this.log(`filtered ${r.path} in ${s}`),n="";break}let i=this.app.metadataCache.getCache(n);i&&i.frontmatter&&this.app.fileManager.processFrontMatter(r,s=>{for(let a of Object.getOwnPropertyNames(s))for(let o of this.settings.metadatas)if(a===o.key){this.log(s[a]);let l;switch(o.t){case"moment":l=(0,P1.default)(new Date(r.stat.mtime)).format(o.value);break;case"string":l=o.value;break;default:l=o.value;break}s[a]=l}setTimeout(()=>{this.updateDebouncer.cancel()},100)})}}}async onload(){await this.loadSettings(),this.settings.debug&&(new pt.Notice("starting obsidian assistant"),jM(this)),new MutationObserver(s=>{s.forEach(a=>{a.addedNodes.forEach(o=>{o instanceof HTMLElement&&document.querySelectorAll(".popover.hover-popover.hover-editor").forEach(l=>{this.log("observing..."),this.localGraph.resize(),this.memos.resize()})})})}).observe(document.body,{attributes:!0,childList:!0}),(0,pt.addIcon)("PluginAST",Wt.PluginAST),this.addRibbonIcon("PluginAST","Obsidian Assistant",s=>{new Lf(this.app).open()}).addClass("plugin-manager-ribbon-class");let i=this.addStatusBarItem();i.addClass("personal-assistant-statusbar"),i.setAttribute("id","personal-assistant-statusbar"),(0,pt.addIcon)("PluginAST_STATUSBAR",Wt.PluginAST_STATUSBAR),(0,pt.setIcon)(i,"PluginAST_STATUSBAR"),i.onClickEvent(s=>{this.app.setting.open(),this.app.setting.openTabById("personal-assistant")}),this.app.workspace.onLayoutReady(async()=>{this.calloutManager=await F1(this),this.registerView(dh,s=>new sb(this.app,this,s)),this.registerView(Tl,s=>new q_(this.app,this,s))}),this.statsManager=new fh(this.app,this),this.addCommand({id:"startup-recording",name:"Open specific note to record",callback:async()=>{let s=(0,P1.default)().format(this.settings.fileFormat),a=this.settings.targetPath;this.log(a,s),await this.createNewNote(a,s)}}),this.addCommand({id:"memos",name:"assistant hover memos",callback:async()=>{await this.memos.startup()}}),this.addCommand({id:"local-graph",name:"hover local graph",callback:async()=>{await this.localGraph.startup()}}),this.addCommand({id:"switch-on-or-off-plugin",name:"switch on/off plugin according to its status",callback:()=>{let s=new Lf(this.app);s.setPlaceholder("Type plugin name to find it"),s.open()}}),this.addCommand({id:"set-local-graph-view-colors",name:"Set graph view colors",callback:async()=>{await this.localGraph.updateGraphColors()}}),this.addCommand({id:"update-plugins",name:"Update plugins with one command",callback:async()=>{await new J_(this.app,this).update()}}),this.addCommand({id:"update-themes",name:"Update themes with one command",callback:async()=>{await(await X_.init(this.app,this)).update()}}),this.addCommand({id:"update-metadata",name:"Update metadata with one command",callback:async()=>{if(this.settings.enableMetadataUpdating)if(this.settings.isEnabledMetadataUpdating){let s=document.getElementById("personal-assistant-statusbar");s==null||s.removeClass("personal-assistant-statusbar-breathing"),this.updateDebouncer=(0,pt.debounce)(a=>{},100,!0),this.settings.isEnabledMetadataUpdating=!1}else{this.updateDebouncer=(0,pt.debounce)(this.updateMetadata,100,!0);let s=document.getElementById("personal-assistant-statusbar");s==null||s.addClass("personal-assistant-statusbar-breathing"),this.registerEvent(this.app.workspace.on("file-open",a=>{this.updateDebouncer(a)})),this.settings.isEnabledMetadataUpdating=!0}else new pt.Notice("update metadata command is not enabled in setting tab")}}),this.addCommand({id:"list-callouts",name:"List callout for quickly insert",callback:()=>{new eb(this.app,this).open()}}),this.addCommand({id:"preview-records",name:"Preview records that are created by `startup-recording` command",callback:async()=>{this.activateView()}}),this.addCommand({id:"show-statistics",name:"Show statistics",callback:async()=>{await this.activeStatView()}}),this.addCommand({id:"ai-assistant-helper",name:"AI Helper",editorCallback:async(s,a)=>{let o=s.getSelection(),l=s.getValue();console.log(`You have selected: ${o}`),console.log(`You have value: ${l}`),a instanceof pt.MarkdownView&&(console.log("invoking LLM"),await new Vg(this,s,a).generate())}}),this.registerEditorExtension([Ic.init(()=>this),SI,kI]),this.registerEvent(this.app.workspace.on("active-leaf-change",async s=>{this.statsManager&&await this.statsManager.recalcTotals()})),this.registerEvent(this.app.vault.on("delete",async()=>{this.statsManager&&await this.statsManager.recalcTotals()})),this.addSettingTab(this.settingTab)}onunload(){}async loadSettings(){this.settings=Object.assign({},FM,await this.loadData()),this.log("logging settings...",this.settings)}async saveSettings(){await this.saveData(this.settings)}log(...r){hH(this.settings.debug,...r)}async createDirectory(r){let{vault:n}=this.app,i=n.getRoot().path,s=this.join(i,r);n.getAbstractFileByPath(s)==null&&await n.createFolder(s)}async createNewNote(r,n){let{vault:i}=this.app,s=i.getRoot().path,a=this.join(s,r),o=this.join(a,`${n}.md`);try{if(this.app.vault.getAbstractFileByPath(o)instanceof pt.TFile){let c=i.getMarkdownFiles();for(let h of c)if(h.path===o){await this.app.workspace.getLeaf("tab").openFile(h);return}throw new Error(`${o} already exists but fail to open`)}a!==""&&(this.log("creating directory path: ",a),await this.createDirectory(a)),this.log("creating file: ",o);let l=await i.create(o,"");await this.app.workspace.getLeaf("tab").openFile(l)}catch(l){new pt.Notice(l.toString())}}join(...r){let n=r.map(i=>String(i).trim()).filter(i=>i!=null);return(0,pt.normalizePath)(n.join("/"))}async activateView(){this.app.workspace.detachLeavesOfType(dh);let r=this.app.workspace.getLeaf("tab");await r.setViewState({type:dh,active:!0}),await this.app.workspace.revealLeaf(r)}async activeStatView(){this.app.workspace.detachLeavesOfType(Tl);let r=this.app.workspace.getLeaf("tab");await r.setViewState({type:Tl,active:!0}),await this.app.workspace.revealLeaf(r)}};var pH=ab;
/*! Bundled license information:

moment/moment.js:
  (*! moment.js *)
  (*! version : 2.29.4 *)
  (*! authors : Tim Wood, Iskren Chernev, Moment.js contributors *)
  (*! license : MIT *)
  (*! momentjs.com *)

web-streams-polyfill/dist/ponyfill.es2018.js:
  (**
   * @license
   * web-streams-polyfill v3.3.3
   * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

@langchain/core/dist/utils/fast-json-patch/src/helpers.js:
  (*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2017-2022 Joachim Wester
   * MIT licensed
   *)

@langchain/core/dist/utils/fast-json-patch/src/duplex.js:
  (*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2013-2021 Joachim Wester
   * MIT license
   *)

@langchain/core/dist/utils/js-sha1/hash.js:
  (*
   * [js-sha1]{@link https://github.com/emn178/js-sha1}
   *
   * @version 0.6.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2014-2017
   * @license MIT
   *)

vanilla-picker/dist/vanilla-picker.mjs:
  (*!
   * vanilla-picker v2.12.2
   * https://vanilla-picker.js.org
   *
   * Copyright 2017-2023 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)
   * Released under the ISC license.
   *)

@kurkle/color/dist/color.esm.js:
  (*!
   * @kurkle/color v0.3.2
   * https://github.com/kurkle/color#readme
   * (c) 2023 Jukka Kurkela
   * Released under the MIT License
   *)

chart.js/dist/chunks/helpers.segment.js:
  (*!
   * Chart.js v4.4.4
   * https://www.chartjs.org
   * (c) 2024 Chart.js Contributors
   * Released under the MIT License
   *)

chart.js/dist/chart.js:
  (*!
   * Chart.js v4.4.4
   * https://www.chartjs.org
   * (c) 2024 Chart.js Contributors
   * Released under the MIT License
   *)
*/
